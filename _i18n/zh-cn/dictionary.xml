<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="03a51c290895d5f1a6828b0491c2a44a" category="summary">以下是此站点的最新更改。</block>
  <block id="490414e0366b091220802d406e52c076" category="doc">新增功能</block>
  <block id="8b69c0257aaf35a9ec0a1259d54ff096" category="paragraph">使用此文档集可了解如何在您的环境中启用应用程序和工具以及如何使用StorageGRID 测试功能。您可以在此处找到一些示例和指南、这些示例和指南在产品文档基础上进行了扩展、并提供了评估和集成StorageGRID 的后续步骤。</block>
  <block id="b8e7b465df7c5979dc731d06e84ce2cf" category="cell">版本。</block>
  <block id="ad0b6652f18f25a574f9f4900521e06b" category="cell">发生了哪些变化</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="36552b079970ffb2dd1314115af76c4b" category="paragraph">11.6.</block>
  <block id="b8c1c014b9752469294df284a3fc13cc" category="paragraph">初始版本。包括StorageGRID 11.2-11.6版的指南和经验证的第三方解决方案列表。</block>
  <block id="213bf2ec1d0bd70bddfd4c935885677a" category="summary">已针对StorageGRID 11.3进行验证的第三方解决方案</block>
  <block id="0147e507e7b15a9ed1a38c66a279beb6" category="doc">StorageGRID 11.3经验证的第三方解决方案</block>
  <block id="7190c305424285fe4256ab8cdf614311" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.3结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="ae0059acd69f3c963f558e0836885ebd" category="section-title">已在StorageGRID 上验证的第三方解决方案</block>
  <block id="76ad060973d3a7496e879a9a4e27c43b" category="paragraph">这些解决方案已与相应的合作伙伴合作进行了测试。</block>
  <block id="84fc43d78afb43b9be9fd32800c39e14" category="list-text">Activio</block>
  <block id="8026ca17ba2e3a987c9fc1ebbfa3b2f2" category="list-text">Cantemo</block>
  <block id="bfe4a98ea39df43ecba3c8d81fcc406a" category="list-text">Citrix内容协作</block>
  <block id="9f261daecd1acf3f272449558565c275" category="list-text">Commvault 11</block>
  <block id="9c7bdce226629cb4a20d49af20efddcf" category="list-text">Ctera门户6.</block>
  <block id="845c7d7e641b871eaa30a5ea02be05e5" category="list-text">达莱特</block>
  <block id="3f781d47f2e5d89a93134863d08f310b" category="list-text">Data Dynamics StorageX</block>
  <block id="608d7a3725a65397d284fed2077eca9c" category="list-text">默认X</block>
  <block id="7a0544f18be9ec8b7501804c3f19c86c" category="list-text">Interica</block>
  <block id="04f35663b44ba178a51b9ba61068586f" category="list-text">Komprise</block>
  <block id="99df5bd357117615d75315f590990b3a" category="list-text">很好</block>
  <block id="878104a806df63b5f965361247b7a859" category="list-text">Nasuni</block>
  <block id="14567310e264c20e4722d80d29f2ca18" category="list-text">OpenText文档16.4</block>
  <block id="a0446088f8be69cb1f7ca15146abf100" category="list-text">采用CyanGate Cloud的OpenText Media Management 16.5</block>
  <block id="3e9ddaaf6a6f980a64ddec983d935475" category="list-text">Panzura</block>
  <block id="10f5ba42ae6dbd321e57bede0c83ec2a" category="list-text">点归档网关2.0</block>
  <block id="c28db35a9854d4fa7280c032d2eae288" category="list-text">指向Storage Manager 6.4</block>
  <block id="bc038212039876aff8158c4afb937ef2" category="list-text">Primestream</block>
  <block id="d36bb4409abcdf753c1103a769bf94a9" category="list-text">Quantum StorNext 5.4.0.1</block>
  <block id="c758745dbf39c7b4da86cae8edf2ec63" category="list-text">Rubrik CDM 5.0.1 P1-1342</block>
  <block id="f27bd3342419229be7da8dd9234adbd4" category="list-text">Signiant</block>
  <block id="83b20ea3ae67e47021c38e81e4f589ca" category="list-text">Splunk智能存储</block>
  <block id="3c03c9aa39f09aa3bf70c853404ab185" category="list-text">varnish Enterprise 6.0.4</block>
  <block id="01d16ea73fb659ea507974db4f28b791" category="list-text">Veeam 9.5.4</block>
  <block id="2bfecc5738e4f19170da7b6787f2aac4" category="list-text">Viispine</block>
  <block id="e1b55d6b6904a9bbd61463de2b1306c9" category="summary">已针对StorageGRID 11.5进行验证的第三方解决方案</block>
  <block id="5c77045b793e49a2c9356629fa42247c" category="doc">StorageGRID 11.5经验证的第三方解决方案</block>
  <block id="a3c271786c8eb7cf6e9beebf6c8792f6" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.5结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="0f678aab91e44750e132ec71d8e8b27d" category="list-text">Moonwalk Universal</block>
  <block id="e8089c684949d337dcfc2355146ea8ee" category="list-text">OpenText文档21.4</block>
  <block id="cfbf45bf3636e57e75d2d19e94581808" category="list-text">OpenText InfoArchive 16 EP7</block>
  <block id="95e97cbf382fde28370be90f19cb74b7" category="list-text">Veeam 11.</block>
  <block id="6edef17a1a8c1377d059d1da9e0875fa" category="list-text">Vertica 10.x</block>
  <block id="5c89f8abd30585311811b6067eeaf96d" category="section-title">第三方解决方案已在具有对象锁定的StorageGRID 上进行验证</block>
  <block id="6876ee74f7cdb6259933dce90e333623" category="summary">已针对StorageGRID 11.2进行验证的第三方解决方案</block>
  <block id="f0579cc7b6353a01b20e6af293042053" category="doc">StorageGRID 11.2验证了第三方解决方案</block>
  <block id="02baabb078f56a4b2eaed00d5476df83" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.2结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="5b334f642369a1ed86af886a70b9a70a" category="summary">已针对StorageGRID 11.4进行验证的第三方解决方案</block>
  <block id="bf535f2769af42cb4a0ef69bf5605f50" category="doc">StorageGRID 11.4经验证的第三方解决方案</block>
  <block id="e9a092b9753e7fc3b79569222be951af" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.4结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="598a701d550c449b8c8b6fbf28ac59f7" category="summary">已针对StorageGRID 11.6进行验证的第三方解决方案</block>
  <block id="95cf74ab542e1ad06be5bdbad0153b3e" category="doc">StorageGRID 11.6经验证的第三方解决方案</block>
  <block id="fbc9e339224fe0b0576e98b4bab07ea8" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.6结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="bb2bd99338b18762ef6953ad2cbfafc7" category="list-text">Apache Kafka</block>
  <block id="59c21e020bd89c6971219d3b6d98e955" category="list-text">富士尼尔姆对象归档</block>
  <block id="09af2487255bbc1b9747ab2c0f958375" category="list-text">GitHub企业服务器</block>
  <block id="391115de0fbff45e2374fc17057efc2a" category="list-text">IBM文件集</block>
  <block id="156393fd2d6d5720c9c89cf61b4b63af" category="list-text">IBM Spectrum Protect Plus</block>
  <block id="ec8f51b51cf3e627e98adab6a9707073" category="list-text">Microsoft SQL Server大数据集群</block>
  <block id="003600b94a5f1f52b3d6bc2e8863271a" category="list-text">PixitMedia ngena</block>
  <block id="e53636996ad9257c31aa596f6c267dbd" category="list-text">轻松实现存储</block>
  <block id="f1ef2cbfa857a0d2a7b845499f219ef8" category="list-text">Weka v3.10或更高版本</block>
  <block id="58440fea435f9474a314a8f58636ba4e" category="list-text">员工</block>
  <block id="1c4333b49a7b43ae27f876070a712cb8" category="list-text">Commvault 11功能版本26</block>
  <block id="d78ff41b8e44ae00b917e9776f3ecd41" category="summary">NetApp与我们的合作伙伴合作、已对这些解决方案进行了验证、以供StorageGRID 使用。查看本节中的信息、了解哪些解决方案已通过验证、并在适用时获取其他说明。</block>
  <block id="4a5b1a544c031534fcf2fa85a625ce63" category="doc">经验证的第三方解决方案：概述</block>
  <block id="df245b9cfd302a8af7987f33f6ed60df" category="inline-link">立即成为联盟合作伙伴</block>
  <block id="98e55b10201a07cc0419d8c723a34cf1" category="paragraph">与NetApp携手合作、在您创建经过测试的同类最佳NetApp解决方案时、加快产品组合创新、提高市场知名度并提高销量。<block ref="c243ccaaa8a956e841065a878a76ac60" category="inline-link-rx"></block>。</block>
  <block id="a1224e8e1d42e54574d1b861a3df5f2f" category="summary">NetApp StorageGRID 是一款软件定义的对象存储套件，支持公有 ，私有云和混合多云环境中的各种用例。StorageGRID 利用自动化生命周期管理等行业领先的创新技术来存储，保护，保护和保留非结构化数据，以便在很长时间内用于多种用途。</block>
  <block id="696ea9ebe2a9f57bb062aba5c1d58b10" category="doc">如何在您的环境中启用StorageGRID</block>
  <block id="932b23c9adc6de8aea5fed582f4afb76" category="summary">S3cmd是一个用于S3操作的免费命令行工具和客户端。您可以使用S3cmd在StorageGRID 上测试和演示S3访问。</block>
  <block id="450d1a071fcbc323ff4710aa7452fdd5" category="doc">使用S3cmd测试和演示StorageGRID 上的S3访问</block>
  <block id="1905fbd5d74fe86a969eaff7ff00f7fc" category="paragraph">S3cmd是一个用于S3操作的免费命令行工具和客户端。您可以使用s3cmd在StorageGRID 上测试和演示S3访问。</block>
  <block id="744511f8f2fbc194c76d0d79673bfae6" category="section-title">安装和配置S3cmd</block>
  <block id="afb33c859ca6b8231970317fad403dd6" category="inline-link">命令行S3客户端</block>
  <block id="43ce8a46c220f7e1200c26cf9fdda89e" category="paragraph">要在工作站或服务器上安装S3cmd、请从下载它<block ref="7378b19c1bb6e55a9a8910d8ad3a0679" category="inline-link-rx"></block>。s3cmd会作为一种工具预先安装在每个StorageGRID 节点上、以协助进行故障排除。</block>
  <block id="aeb3ce9dba65427ab03cba1cf27c246b" category="section-title">初始配置步骤</block>
  <block id="524f45072627111da5b21bda68e3200d" category="list-text">s3cmd -configure</block>
  <block id="71b08894081527233da8439cba4e157c" category="list-text">请仅提供access_key和secret_key、其余请保留默认值。</block>
  <block id="f87598afee396ede6fded5c127f5710b" category="list-text">是否使用提供的凭据测试访问？[Y/n]：n (跳过测试、因为测试将失败)</block>
  <block id="8f8b232ac491b44abd4e3c73095be26f" category="list-text">是否保存设置？[Y/N] y</block>
  <block id="20fc045a3cb98f5d53190a084eab5777" category="list-text">配置已保存到"/root/.s3cfg"</block>
  <block id="2a0dc1b5996fa32c9cff4613164a9fa7" category="list-text">在.s3cfg中、使"="符号后面的字段host_base和host_bucket为空：</block>
  <block id="d6a40235079422dc94593513bb262a4f" category="list-text">host_base =</block>
  <block id="deffd87ba6416775ccd717de678a52f6" category="list-text">host_bucket =</block>
  <block id="0c4b929b440945de149593225ef4d11a" category="admonition">如果在步骤4中指定host_base和host_bucket、则无需在命令行界面中使用-host指定端点。示例</block>
  <block id="24bf95be39d5b143037e293fd845755a" category="section-title">基本命令示例</block>
  <block id="40ff4deace0a58ba7da244066c61b419" category="list-text">*创建存储分段：*</block>
  <block id="2b55d1dacc7066c55f775211c6d2d6fb" category="paragraph">`s3cmd MB S3：//s3cmdbucket -host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="b3cfb276af36f62a54a7575fde41c5c3" category="list-text">*列出所有分段：*</block>
  <block id="5a9e189ea6aff52db6c42ed8dc13a581" category="paragraph">`s3ls命令-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="a500560628b5b26184ccd1c5bb710ad7" category="list-text">*列出所有分段及其内容：*</block>
  <block id="e39715fa32da966d21a67b6f4b657375" category="paragraph">`s3cmd la -host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="a0e8caa1006eb0cb202216f58d3ef3bc" category="list-text">*列出特定分段中的对象：*</block>
  <block id="99cf6d132b68c3ee42ec1c2868670095" category="paragraph">`s3cmd ls s3：//&lt;bucket&gt;-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="1253bae3769a3e203047d32867d8d8b5" category="list-text">*删除分段：*</block>
  <block id="33baac546bf69d3cba8e4e55809362c2" category="paragraph">`s3RB cmd S3：//s3cmdbucket -host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="4baf4031f964504db7c312e4eb5032f9" category="list-text">*放置对象：*</block>
  <block id="99ada43576cbc748a543ef56c15239fd" category="paragraph">`s3cmd PUT &lt;file&gt; s3：//&lt;bucket&gt;-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="cf50e7bb0c83a17917775f6502fd592c" category="list-text">*获取对象：*</block>
  <block id="7afaf73cd0748a5fd70da28b10e8f9e3" category="paragraph">`s3cmd get S3：//&lt;bucket&gt;/&lt;object&gt;&lt;file&gt;-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="11ce41b9c95136feb022ed6b7dc35f56" category="list-text">*删除对象：*</block>
  <block id="85977fbb9d2313217f8fcad9ab99ec24" category="paragraph">`s3cmd del S3：//&lt;bucket&gt;/&lt;object&gt;-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="bb59d42d40970acdd091a1d9e3013ed1" category="summary">本指南介绍在NetApp StorageGRID 上使用公共存储创建Vertica Eon模式数据库的操作步骤。</block>
  <block id="3944f79e14bd534dce03dc9377e507b2" category="doc">使用NetApp StorageGRID 作为公共存储的Vertica Eon模式数据库</block>
  <block id="0b79795d3efc95b9976c7c5b933afce2" category="section-title">简介</block>
  <block id="1351a64c902bed1342b8e0b3b15016e1" category="paragraph">Vertica是一款分析数据库管理软件。它是一个柱形存储平台、专为处理大量数据而设计、可在传统密集型情形下实现非常快速的查询性能。Vertica数据库以两种模式之一运行：Eon或Enterprise。您可以在内部或云中部署这两种模式。</block>
  <block id="0ff6ef083e5937ae37d85f7e32b9c415" category="paragraph">Eon和企业模式在数据存储位置方面主要不同：</block>
  <block id="742f8282711edec5deb4f1c27cba460b" category="list-text">Eon模式数据库使用公共存储来存储其数据。这是Vertica的建议。</block>
  <block id="10b13e2ff5733c9c1736ca88a58fce37" category="list-text">企业模式数据库将数据本地存储在构成数据库的节点的文件系统中。</block>
  <block id="da071698872dd5a11fcfcdc6e87ce00b" category="section-title">Eon模式架构</block>
  <block id="eacdb46886950f67125163a0ac7c547b" category="paragraph">Eon模式可将计算资源与数据库的公用存储层分离、从而使计算和存储可以单独进行扩展。Eon模式下的Vertica经过优化、可处理各种工作负载、并通过使用单独的计算和存储资源彼此隔离。</block>
  <block id="c9537751a44904cbd1595766ea947357" category="paragraph">Eon模式将数据存储在名为公共存储的共享对象存储中、即S3存储分段、托管在内部或Amazon S3上。</block>
  <block id="ae79effc6d45e14ea71e610bb3d9669c" category="image-alt">使用公用存储的Vertica Eon模式集群</block>
  <block id="d9bdcaa0d990474197d196d3848befca" category="section-title">公用存储</block>
  <block id="f208cb9b2076d8b42eb21a99f5e12b86" category="paragraph">Eon模式不会在本地存储数据、而是对所有数据和目录(元数据)使用一个公共存储位置。公共存储是数据库的集中存储位置、在数据库节点之间共享。</block>
  <block id="d00864c661d9eea6d6bc179f2c282e45" category="paragraph">公共存储具有以下属性：</block>
  <block id="e7bc675af5b1688f139c70343df7051b" category="list-text">与单个计算机上的磁盘存储相比、云或内部对象存储中的公共存储更具弹性、并且由于存储故障而不易受到数据丢失的影响。</block>
  <block id="e1a644db903707c56d177424599944ca" category="list-text">任何使用相同路径的节点都可以读取任何数据。</block>
  <block id="363e9f9d5ab59fe87846e1fa6280937c" category="list-text">容量不受节点上磁盘空间的限制。</block>
  <block id="e41c3434b54256834c20bb764ccb3dfb" category="list-text">由于数据是以社区方式存储的、因此您可以灵活地扩展集群以满足不断变化的需求。如果数据存储在节点本地、则添加或删除节点需要在节点之间移动大量数据、以便将其从要删除的节点或新创建的节点上移出。</block>
  <block id="2aa2d7b479eff89354f5a5d47c966c7b" category="section-title">仓库</block>
  <block id="69b552cd0cc8cd7cedbb740166c2b67d" category="paragraph">公共存储的一个缺点是速度。从共享云位置访问数据比从本地磁盘读取数据要慢。此外、如果许多节点同时从公共存储读取数据、则与该存储的连接可能会成为瓶颈。为了提高数据访问速度、Eon模式数据库中的节点会维护一个名为存储库的本地数据磁盘缓存。执行查询时、节点会首先检查所需数据是否位于仓库中。如果是、则它将使用数据的本地副本完成查询。如果数据不在存储库中、则节点将从公共存储中提取数据、并在存储库中保存一份副本。</block>
  <block id="adefcaa5a25e4b7dd144fc0f19c1cfcd" category="section-title">NetApp StorageGRID 建议</block>
  <block id="770d5275891c4480deae83e407a6f54f" category="paragraph">Vertica将数据库数据存储在对象存储中、即数千(或数百万)个压缩对象(观察到的大小为每个对象200到500 MB)。当用户运行数据库查询时、Vertica会使用byte-range get调用并行从这些压缩对象检索选定的数据范围。每个字节范围GET大约为8 KB。</block>
  <block id="041a4ffdefdbba3e879952330449b52f" category="paragraph">在10 TB数据库仓库用户查询测试期间、每秒向网格发送4、000到10、000个GET (字节范围GET)请求。在使用SG6060设备运行此测试时、尽管每个设备节点的CPU利用率百分比较低(约为20%到30%)、但2/3的CPU时间正在等待I/O在SGF6024上观察到I/O等待的百分比非常小(0%到0.5%)。</block>
  <block id="ee5b06737289123ef2b5504214d0a959" category="paragraph">由于对小型IOPS的需求较高且延迟要求非常低(平均值应小于0.01秒)、NetApp建议对对象存储服务使用SFG6024。如果非常大的数据库需要使用SG6060、则客户应与Vertica客户团队合作进行仓库规模估算、以支持主动查询的数据集。</block>
  <block id="69eb0bfa315677fb31292eb1879ef1e2" category="paragraph">对于管理节点和API网关节点、客户可以使用SG100或SG1000。选择此选项取决于并行用户查询请求的数量和数据库大小。如果客户希望使用第三方负载平衡器、NetApp建议为高性能需求工作负载配置一个专用的负载平衡器。有关StorageGRID 规模估算、请咨询NetApp客户团队。</block>
  <block id="75a344cafb10d96419edf5a61e63c7c0" category="paragraph">其他StorageGRID 配置建议包括：</block>
  <block id="5b0c5b5e09678e4458f93ea143915cd4" category="list-text">*网格拓扑*。请勿在同一网格站点上将SGF6024与其他存储设备型号混合使用。如果您希望使用SG6060进行长期归档保护、请在其自己的网格站点(物理或逻辑站点)中为活动数据库保留具有专用网格负载平衡器的SGF6024、以提高性能。在同一站点混用不同型号的设备会降低站点的整体性能。</block>
  <block id="a8b59be6737824c8ebdf70e871ae770b" category="list-text">*数据保护*。使用复制副本进行保护。请勿对活动数据库使用纠删编码。客户可以使用纠删编码对非活动数据库进行长期保护。</block>
  <block id="37b5ca073879940e05a508cb8e173209" category="list-text">*请勿启用网格压缩*。Vertica会先压缩对象、然后再存储到对象存储。启用网格压缩不会进一步节省存储使用量、并且会显著降低字节范围GET性能。</block>
  <block id="e0a0f5ab016a2e63cf33ff41b6c64f8d" category="list-text">* HTTP与HTTPS S3端点连接*。在基准测试期间、我们观察到从Vertica集群到StorageGRID 负载平衡器端点使用HTTP S3连接时、性能提高了大约5%。此选项应根据客户的安全要求来选择。</block>
  <block id="4b28b0ac82f7df42e45ed03d7ec68cbe" category="paragraph">Vertica配置的建议包括：</block>
  <block id="12e901de5151934289876684be69dbd3" category="list-text">读取和写入操作已启用* Vertica数据库默认存储库设置(值= 1)*。NetApp强烈建议保持启用这些仓库设置以提高性能。</block>
  <block id="dd75d17318890d52ab1d8e037befc36f" category="inline-xref">禁用流限制</block>
  <block id="b5cea23fe7560dccda4bff6fe086b074" category="list-text">*禁用流式传输限制*。有关配置详细信息、请参见一节 <block ref="622e251fe1340a5a963a60975f5cfd66" category="inline-xref-macro-rx"></block>。</block>
  <block id="a49ece59a164bea53c1c444816a1423e" category="section-title">在StorageGRID 上使用公用存储在内部安装Eon模式</block>
  <block id="c120fe39689790c17f819d12b1470734" category="inline-link-macro">在内部安装Eon模式数据库</block>
  <block id="60c5f0d9d4093b532349fb2c84a2f907" category="paragraph">以下各节介绍了在StorageGRID 上使用公共存储在内部安装Eon模式的顺序操作步骤。用于配置内部简单存储服务(S3)兼容对象存储的操作步骤 类似于Vertica指南中的操作步骤。 <block ref="291481b0beedb487e265883c3de1da25" category="inline-link-macro-rx"></block>。</block>
  <block id="18d45b04dd1a7895a2c977550f8911d7" category="paragraph">以下设置用于功能测试：</block>
  <block id="afdaec41fcd7f8ba541d0750dcbd6960" category="list-text">StorageGRID 11.4.0.4</block>
  <block id="c6624074e9b8a278bfe04013c96fc36e" category="list-text">Vertica 10.1.0</block>
  <block id="e2faa2feaa265e01fe33c216af9efb3d" category="list-text">使用三个虚拟机(VM)和CentOS 7.x操作系统为Vertica节点构建集群。此设置仅用于功能测试、不适用于Vertica生产数据库集群。</block>
  <block id="fe8be754482a7a11d9d5a2d53443cedc" category="paragraph">这三个节点都设置了安全Shell (SSH)密钥、以允许在集群中的节点之间使用SSH而不使用密码。</block>
  <block id="f5d7d5da5cd7e937a30a5f247eee8768" category="section-title">NetApp StorageGRID 需要提供的信息</block>
  <block id="784d884ec512d4e088d2a6cb0c7a12ec" category="paragraph">要在StorageGRID 上使用公共存储在内部安装Eon模式、您必须具备以下前提条件信息。</block>
  <block id="9ce37b571d32bd29d59a6463c83b9056" category="list-text">StorageGRID S3端点的IP地址或完全限定域名(FQDN)和端口号。如果您使用的是HTTPS、请使用在StorageGRID S3端点上实施的自定义证书颁发机构(CA)或自签名SSL证书。</block>
  <block id="222a56bb23dfff9aa9774dd9c3e4ee56" category="list-text">存储分段名称。它必须已预先存在且为空。</block>
  <block id="fdae6c2e4ab36d6033d962c50f414ccb" category="list-text">访问密钥ID和密钥访问密钥、对存储分段具有读写访问权限。</block>
  <block id="98c67820d16a1b9909ecb5354f6822a6" category="section-title">创建授权文件以访问S3端点</block>
  <block id="beaa6107ac08a69977170ef5066ba7d5" category="paragraph">在创建授权文件以访问S3端点时、需要满足以下前提条件：</block>
  <block id="7a83bfd6cbc9c75248c5c1aa0561e094" category="list-text">已安装Vertica。</block>
  <block id="52bb7b8803b5d17a4da99db7aba31c93" category="list-text">集群已设置、配置完毕、可用于创建数据库。</block>
  <block id="aa3fedd0a7a12417c91b0d938a4d2f1d" category="paragraph">要创建授权文件以访问S3端点、请执行以下步骤：</block>
  <block id="b87e30a2e9d3e21c51073e1db74466e2" category="list-text">登录到要运行`admintools`的Vertica节点以创建Eon模式数据库。</block>
  <block id="302df0b551a339ce9b649c1c77f6f22f" category="paragraph">默认用户为`dbadmin`、在Vertica集群安装期间创建。</block>
  <block id="32307e5a5d0dcaf9f32db0202471f86a" category="list-text">使用文本编辑器在`/home/DBadmin`目录下创建文件。文件名可以是所需的任何内容、例如、`sg_auth.conf`。</block>
  <block id="c13f6f849620f8cc13bc4474d9555200" category="list-text">如果S3端点使用的是标准HTTP端口80或HTTPS端口443、请跳过端口号。要使用HTTPS、请设置以下值：</block>
  <block id="3068a18f4c22a22b0a2ecd5b1416a5ec" category="list-text">`awsenablehttps = 1`、否则将值设置为`0`。</block>
  <block id="116bd825db022c3159b1677a3dc64f06" category="list-text">`awsauth =&lt;S3 access key ID&gt;：&lt;机密访问密钥&gt;`</block>
  <block id="1d33a1b42749a2480d0f6640c5ff2e84" category="list-text">`awsendpoint =&lt; StorageGRID S3 Endpoint&gt;：&lt;端口&gt;`</block>
  <block id="e6e1ee0e7535b2e405ebb8e300b98120" category="paragraph">要对StorageGRID S3端点HTTPS连接使用自定义CA或自签名SSL证书、请指定证书的完整文件路径和文件名。此文件必须位于每个Vertica节点上的同一位置、并对所有用户具有读取权限。如果StorageGRID S3端点SSL证书由公共已知CA签名、请跳过此步骤。</block>
  <block id="696e259f94c7ad1305f19356063ef22a" category="paragraph">`−awscfilm =&lt;文件路径/文件名&gt;`</block>
  <block id="0d1ac53170a5118fa04c541efad5bb4d" category="paragraph">例如、请参见以下示例文件：</block>
  <block id="fc77af791d1dc32525fcc72feee625e1" category="admonition">在生产环境中、客户应在StorageGRID S3负载平衡器端点上实施一个由公共已知CA签名的服务器证书。</block>
  <block id="59826e109f3e784088f86690d77d3668" category="section-title">在所有Vertica节点上选择存储库路径</block>
  <block id="b4129381183bb3a2dcc258f9cf71eee3" category="paragraph">在每个节点上为存储库存储路径选择或创建一个目录。为depot storage path参数提供的目录必须具有以下内容：</block>
  <block id="a77408fa769995f6c1b1614db78cd9d3" category="list-text">集群中所有节点上的相同路径(例如、`/home/DBadmin/depot`)</block>
  <block id="a3505e1f8f85c906e127d552d198d4ed" category="list-text">可由DBadmin用户读取和写入</block>
  <block id="05a29aef1a17d794559074061ce7180e" category="list-text">存储充足</block>
  <block id="a11c22527e5b1ee68fbaab45fce06809" category="inline-link-macro">估算Eon模式数据库的Vertica集群规模</block>
  <block id="00dadf185ad569b9ff9af5c62063d2ec" category="paragraph">默认情况下、Vertica会将包含目录的文件系统空间的60%用于存储库存储。您可以在`create_db`命令中使用`-storage-size`参数来限制存储库的大小。请参见 <block ref="5ed72ba4f95868ac00a71daae1b19940" category="inline-link-macro-rx"></block> 有关Vertica规模估算一般准则的文章、或者咨询您的Vertica客户经理。</block>
  <block id="298b1561e22818ad31df6e4836a6aca2" category="paragraph">如果不存在存储库路径、`admintools create_db`工具会尝试为您创建一个路径。</block>
  <block id="4536a0f0846353aa5de6714204bd897a" category="section-title">创建Eon内部数据库</block>
  <block id="6ed9ef1283f8a665ad7dbfe450f4616c" category="paragraph">要创建Eon内部数据库、请执行以下步骤：</block>
  <block id="c8fac0ae7f28a985c6f7041e704cb9e9" category="list-text">要创建数据库、请使用`admintools create_db`工具。</block>
  <block id="ba1f54172ea851b435ebad930979214e" category="paragraph">以下列表简要说明了本示例中使用的参数。有关所有必需参数和可选参数的详细说明、请参见Vertica文档。</block>
  <block id="d560ea5a8e684843d3e61026f97988ea" category="inline-xref">"创建授权文件以访问S3端点"</block>
  <block id="49231ccf7e1f2892d02e363b3996f6b1" category="list-text">-x &lt;在中创建的授权文件的路径/文件名 <block ref="ff01d755c02cf9eac8acabe776f4ae31" category="inline-xref-macro-rx"></block> &gt;。</block>
  <block id="f405bc9fea0f983aec86bf3b39598931" category="paragraph">成功创建后、授权详细信息将存储在数据库中。您可以删除此文件、以避免公开S3密钥。</block>
  <block id="8bb92892cb170f0a2e9faa38b08707d2" category="list-text">-communal-storage-location &lt;S3：//storagegrid bucketname&gt;</block>
  <block id="730286a138b893db744ec9b6d5eb53cc" category="list-text">-s &lt;用于此数据库的Vertica节点的逗号分隔列表&gt;</block>
  <block id="ff3ce7ef8f8faa42ab218e0e6a952005" category="list-text">-d &lt;要创建的数据库名称&gt;</block>
  <block id="cbfebf618a39b6eebd458ebccb35811d" category="list-text">-p &lt;要为此新数据库设置的密码&gt;。例如、请参见以下命令示例：</block>
  <block id="f0f9a3849fe5730a2c9d6f1fec222ca3" category="paragraph">根据数据库的节点数、创建新数据库需要几分钟的持续时间。首次创建数据库时、系统将提示您接受许可协议。</block>
  <block id="3b8065a08e54f4e0956f3b822ffb8a91" category="paragraph">例如、请参见以下授权文件示例和`create db`命令：</block>
  <block id="011babd6bb6bec44f7f5c42f6c3e7a38" category="cell">对象大小(字节)</block>
  <block id="e6ada8a15e80a48f024520ab8ffb24a5" category="cell">存储分段/对象密钥完整路径</block>
  <block id="8f283c17785e8043629e6a7e1d721498" category="paragraph">`61`</block>
  <block id="194ed05748ef16c0095eca9bbdccfd15" category="paragraph">`s 3：//Vertica/051/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a07/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a07_0_0_0.dfs`</block>
  <block id="729c949b77c1b640517910da82d0009e" category="paragraph">`145`</block>
  <block id="02dde8fef0da052a66cc199f0d934f95" category="paragraph">`s 3：//Vertica/2c4/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a3d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a3d_0dfdfd0.dfdf`</block>
  <block id="436383be1a5ea8f6f9a05e8b93c69d9d" category="paragraph">`146`</block>
  <block id="70e1bd6136404a49a88f7fb3dd3465c3" category="paragraph">`s 3：//Vertica/33c/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a1d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a1d_0_dfdfd.df`</block>
  <block id="715eac993d42a26a194f16062429238e" category="paragraph">`40`</block>
  <block id="29cbdad4e0c6e39f8d84a0d5416eb1e8" category="paragraph">`s 3：//Vertica/382/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a31/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a31_0_0.dfs`</block>
  <block id="4ddd669e9e695a865f4ee77b92335a6b" category="paragraph">`s 3：//Vertica/42f/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a21/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a21a21a21_0_0.dfs`</block>
  <block id="a0531813d4911f4468a61b1a8b8be492" category="paragraph">`34`</block>
  <block id="f99e684ff65b8e3fa1b1115a8e4f6455" category="paragraph">`s 3：//Vertica/472/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a25/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a25_0_0.dfs`</block>
  <block id="964578668d432e948ebd36046dbb63a0" category="paragraph">`41`</block>
  <block id="0d8920cf1f46e7225ad12a12aa3ef7fa" category="paragraph">`s 3：//Vertica/476/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a2d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a2d_0_0.dfs`</block>
  <block id="ee33f05ae2d631fbc7214baa242bbe6b" category="paragraph">`s 3：//Vertica/52a/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a5d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a5d_0_dfdfd.df`</block>
  <block id="54070e15a029f7447e1ecebc3d82b773" category="paragraph">`131`</block>
  <block id="66f64ef6cf860c2f0ce6a5a2c23761e3" category="paragraph">`s 3：//Vertica/5d2/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a19/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a19_0_0.dfs`</block>
  <block id="bd8b3b2174b3dc482b0c5e38e6cddac3" category="paragraph">`91`</block>
  <block id="162c559c21f5cc69fe9ebd819fde72e2" category="paragraph">`s 3：//Vertica/5F7/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a11/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a11_0_0.dfs`</block>
  <block id="dc16a418b068800db4274918cfb8cbd5" category="paragraph">`118`</block>
  <block id="c891ece8fdff5a56142befae63efdf59" category="paragraph">`s 3：//Vertica/82d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a15/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a15_0_0.dfs`</block>
  <block id="cfcfa2b8b73ab4ebd558c0c1fef3ddb5" category="paragraph">`115`</block>
  <block id="a153a0e9f0ae1d6ee55d81dc814a6b1a" category="paragraph">`s 3：//Vertica/9a2/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a61/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a61_0_0.dfs`</block>
  <block id="df6e76b7db7e1995b581978628f232d2" category="paragraph">`33`</block>
  <block id="adf4c765585112bb17f45e76f9d9d590" category="paragraph">`s 3：//Vertica/ACD/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a29-026d63ae9d4a33237bf0e2c2cf2a794a00a000021a29_0_0.dfs`</block>
  <block id="5bad592e6f7fea9a405f17f8f9340030" category="paragraph">`133`</block>
  <block id="87316eaa24ad32afbe0ef544c6bca09a" category="paragraph">`s 3：//Vertica/b98/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a4d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a4d_0_dfdfd.df`</block>
  <block id="82923f5350a7cf37b21ea38721c005a9" category="paragraph">`38`</block>
  <block id="614c8126b9e7031460260b44d16aeeee" category="paragraph">`s 3：//Vertica/db3/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a49-026d63ae9d4a33237bf0e2c2cf2a794a00a000021a49_0_0.dfs`</block>
  <block id="ccc61782f821297d4d0f1d6adc8c005b" category="paragraph">`s 3：//Vertica/EBA/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a599/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a59_0_0.dfs`</block>
  <block id="0688523b1b9b233c01258f78a3b678d1" category="paragraph">`21521920`</block>
  <block id="5bd0f2c4067288be395e7abd381a1c08" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a000000002152/026d63ae9d4a33237bf0e2c2cf2a794a00a00002152.tar`</block>
  <block id="bc9b86685d9566e8f05dc5bf8d3a1fbc" category="paragraph">`6865408`</block>
  <block id="d38e8ffa6625a5a4b6bad1c1d7382fb5" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021602/026d63ae9d4a33237bf0e2c2cf2a794a00a00002162.tar`</block>
  <block id="af6664da5e630dd702d05572ececa175" category="paragraph">`204217344`</block>
  <block id="de27bd64b0a8f6533689f4b16da6bfb0" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021610/026d63ae9d4a33237bf0e2c2cf2a794a00a000021610.tar`</block>
  <block id="9ef62a917e9958765d5bcb465a51ac57" category="paragraph">`16109056`</block>
  <block id="3783651d1a6b717d08885cf53bd7d16e" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000217e0/026d63ae9d4a33237bf0e2c2cf2a794a00a0000217e0.tar`</block>
  <block id="c3d8042b5920b9834cdc8c607700579b" category="paragraph">`12853248`</block>
  <block id="cb5e272ca193ebaf253184d8cfc81f6c" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021800/026d63ae9d4a33237bf0e2c2cf2a794a00a00002180.tar`</block>
  <block id="9f99944286c11b6b1d4ae4f3afeaccce" category="paragraph">`8937984`</block>
  <block id="5c7d0ca56c0f98a44c9694b3b23638a6" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a000000002187a/026d63ae9d4a33237bf0e2c2cf2a794a00a00002187a.tar`</block>
  <block id="953a580241e2775e0639090df2123983" category="paragraph">`56260608`</block>
  <block id="b91fb7e8554567dee7fd85bf527a5d61" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a00000000218b2/026d63ae9d4a33237bf0e2c2cf2a794a00a0000218b2.tar`</block>
  <block id="2eab01f0a4f4ba0111890349a5f85444" category="paragraph">`53947904`</block>
  <block id="f27cf13b696134d286beb7542a5b8ee9" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a00000000219ba/026d63ae9d4a33237bf0e2c2cf2a794a00a0000219ba.tar`</block>
  <block id="5b1513e00fa72794bd306e4661c0d8af" category="paragraph">`44932608`</block>
  <block id="66e66fba54c58c7cfab3b8c11a8b73a3" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a00000000219de/026d63ae9d4a33237bf0e2c2cf2a794a00a0000219de.tar`</block>
  <block id="82901f02268c81d3e27980ba5e0b77d5" category="paragraph">`256306688`</block>
  <block id="7914ba13e7d387d65c9411aeea0e0892" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a6e/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a6e.tar`</block>
  <block id="bf40bf1f33abeba0c5f6118b0b478254" category="paragraph">`8062464`</block>
  <block id="89fe14ef338a0aad387cf40439c765d3" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021e34-026d63ae9d4a33237bf0e2c2cf2a794a00a000021e34.tar`</block>
  <block id="f09043d36889d1d269a7e6511fafff88" category="paragraph">`20024832`</block>
  <block id="9f4bb57d3119e159eda6dc91b421e12c" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021e70/026d63ae9d4a33237bf0e2c2cf2a794a00a000021e70.tar`</block>
  <block id="75dc180047a4a65cc91cdc34bafd5f13" category="paragraph">`10444`</block>
  <block id="5fe8f5a5faaf24b63d974fff8f45ad49" category="paragraph">`s 3：//Vertica/metadata/VMart/cluster_config.json`</block>
  <block id="cb455610261549601a968727f75e173c" category="paragraph">`823266`</block>
  <block id="734d9f32a69fc76666aa927960e1ba72" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c13_chkpt_1.cat.gz`</block>
  <block id="fdbaf1b0ee4e02044e36d36dd4518eb0" category="paragraph">`254`</block>
  <block id="1fd58d19f264e720bbbb53577d7a2e49" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c13/已完成`</block>
  <block id="0dde90dd52d8ff73123cc9260d7786ec" category="paragraph">`2958`</block>
  <block id="13a8345978900e79a14d95d85370d8e4" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c2_chkpt_1.cat.gz`</block>
  <block id="ef3a67b278f31bdbebbe75fa5f8c0d8f" category="paragraph">`231`</block>
  <block id="6d2efa8379c2fd39a36d84564be5a1b4" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c2_completed`</block>
  <block id="2912813aa00f32add6928d2cd9f830d6" category="paragraph">`822521`</block>
  <block id="f141618d089b11b78013a4fad88af223" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c4_chkpt_1.cat.gz`</block>
  <block id="6c6fe7b656c6c32a26871dfb19f4b7b3" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c4_4/completed`</block>
  <block id="703d5c404aa85c4c6a2e4cd844293b36" category="paragraph">`746513`</block>
  <block id="4640693ffd9b0eb61a5ee402925c804c" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_14_g14.cat`</block>
  <block id="bd064eec6e4122c37fd1528794b1faec" category="paragraph">`2596`</block>
  <block id="6fa963a88e2173bc42c4994cd74cf77e" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_3_g3.cat.gz`</block>
  <block id="f1b0090937d01be346c5db6567a13320" category="paragraph">`821065`</block>
  <block id="84e5609dfad6367600760692fafa2463" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_4_g4.cat.gz`</block>
  <block id="5b767a2a9f98b85fae682314aaeb580a" category="paragraph">`6440`</block>
  <block id="738665eaf340c6f336e0ac44a1fbd7f1" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_5_g5.cat`</block>
  <block id="1ff46952208a49a43363ce080cfdfc26" category="paragraph">`8518`</block>
  <block id="960d9a61ddbe51dee57ad226374094a3" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_8_g8.cat`</block>
  <block id="2911e600bbad981e24b3e2a2b3a03f82" category="paragraph">`0`</block>
  <block id="cc11cb8ec5bc5124b58731d343024acf" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/tiered_catalog.cat`</block>
  <block id="e5f72d0ac30042b1e1228050cf4db009" category="paragraph">`822922`</block>
  <block id="fe509c64685e0e86b37d4a4168383981" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/checkpoint/C14_7/chkpt_1.cat.gz`</block>
  <block id="c874813a1ab759170832ad00490add5b" category="paragraph">`232`</block>
  <block id="a7b6a33ea6804bc24f95087a2767144a" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/checkpoint/C14_7/completed`</block>
  <block id="607ce6df5f7416ceecf46b2565cf78b6" category="paragraph">`822930`</block>
  <block id="f16dd1621cefe9daf11aa717c6f5ff3c" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_14_g7.cat.gz`</block>
  <block id="1a4a32022249a74ade4da57bc540ae45" category="paragraph">`755033`</block>
  <block id="ee70ce19fcb6a37181f0f2a1b295cac2" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_15_g8.cat`</block>
  <block id="ef88602de03096d5337e01c415fb757e" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/tiered_catalog.cat`</block>
  <block id="cfa501ab966cb7076ab4bea35887c268" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/checkpoint/C14_7/chkpt_1.cat.gz`</block>
  <block id="0efaef21765abae97f8823284089d92e" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/checkpoint/C14_7/completed`</block>
  <block id="f8a27da0cd8f29eeb5dec4c51b6ddaed" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_14_g7.cat.gz`</block>
  <block id="9137c061f66498d02d0a5dae8cd11fb7" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_15_g8.cat`</block>
  <block id="6c4e066b2f26281da7b7403d03d8a904" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/tiered_catalog.cat`</block>
  <block id="377e8de315163c073e4c65030a631ab8" category="paragraph">此操作步骤 基于适用于其他内部对象存储的Vertica指南、应适用于StorageGRID。</block>
  <block id="7a62369a8bc7139feef72cf70ca75b13" category="list-text">创建数据库后、通过将`AWSStreamingConnectionPercentage`配置参数设置为`0`来禁用该参数。对于使用公共存储的Eon模式内部安装、不需要此设置。此配置参数用于控制Vertica用于流式读取的对象存储连接数。在云环境中、此设置有助于避免对象存储中的流式数据占用所有可用的文件句柄。它会使某些文件句柄可用于其他对象存储操作。由于内部对象存储的延迟较低、因此没有必要使用此选项。</block>
  <block id="9bbb476c1b20d451a6b1efc6d9f3c996" category="list-text">使用`vsql`语句更新参数值。此密码是您在"创建Eon内部数据库"中设置的数据库密码。例如、请参见以下示例输出：</block>
  <block id="bbbc233057e904f5095141454e43564f" category="section-title">验证返厂设置</block>
  <block id="fd9c0f2a65006cc20a093358569ff9c4" category="paragraph">已为读写操作启用Vertica数据库默认存储库设置(值= 1)。NetApp强烈建议保持启用这些仓库设置以提高性能。</block>
  <block id="1844bf3855f7b6c5d660568fcf9d8381" category="section-title">加载示例数据(可选)</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">此处</block>
  <block id="6be5fbd5ae75780985c67dc6ceac5c11" category="paragraph">如果此数据库用于测试并将被删除、您可以将样本数据加载到此数据库以进行测试。Vertica随附了示例数据集VMart、位于每个Vertica/node/opt/Vertica/Examples/VMart_Schema/``下。有关此示例数据集的详细信息、请参见 <block ref="a43712dd91d6373beb0a27dc61f34970" category="inline-link-macro-rx"></block>。</block>
  <block id="b3b0c649f69631d0d5f8abca04e393df" category="paragraph">按照以下步骤加载示例数据：</block>
  <block id="30cd3777be39c484720b1ce07e97b8a4" category="list-text">以DBadmin身份登录到Vertica节点之一：cd /opt/vertica/examples/VMart_Schemas/</block>
  <block id="7ec0cfc5ec14c9333b6810bbf84fe541" category="list-text">将示例数据加载到数据库中、并在子步骤c和d中出现提示时输入数据库密码：</block>
  <block id="a8900c6772f9006786fee28bf50ff58e" category="list-text">`cd /opt/vertica/examples/VMart_Schema`</block>
  <block id="c43a7b61de777223de68bb230032f64f" category="list-text">`。/vmart根`</block>
  <block id="16c970dcd26069436e93acae9cef7ad7" category="list-text">`vsql&lt; vmart定义架构.sql`</block>
  <block id="08af76b6687df620bd989c053338f859" category="list-text">`vsql &lt; vmart load_data.sql`</block>
  <block id="89e26598cb765dcbe94f71e860e94c64" category="list-text">有多个预定义的SQL查询、您可以运行其中一些查询、以确认测试数据已成功加载到数据库中。例如：`vsql &lt; vmart queries1.sql`</block>
  <block id="4bb047f8c530785002e490ef17fa725e" category="section-title">从何处查找追加信息</block>
  <block id="7d5b957cd473f6eaf5ad335a9c63c4ff" category="paragraph">要了解有关本文档中所述信息的更多信息，请查看以下文档和 / 或网站：</block>
  <block id="8a9cd131f57d065d753803a90387c310" category="inline-link-macro">StorageGRID 数据表</block>
  <block id="d6ed371e4ca6112ef8dca75d49381711" category="list-text"><block ref="d6ed371e4ca6112ef8dca75d49381711" category="inline-link-macro-rx"></block></block>
  <block id="0e25eb5c75f8069f3e7864cc794fc73f" category="inline-link-macro">Vertica 10.1产品文档</block>
  <block id="8f6785fde2797084dc5e67b73921c890" category="list-text"><block ref="8f6785fde2797084dc5e67b73921c890" category="inline-link-macro-rx"></block></block>
  <block id="f6a738f75f76f62a241636eca02cd87d" category="section-title">版本历史记录</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">version</block>
  <block id="44749712dbec183e983dcd78a7736c41" category="cell">Date</block>
  <block id="8002bc13927c65b5f265b031079ce1d4" category="cell">文档版本历史记录</block>
  <block id="3798985ee5e15c84c4263815d5a4d0b7" category="paragraph">版本 1.0</block>
  <block id="d802637b72ebddd27cf9b28f9f198763" category="paragraph">2021年9月</block>
  <block id="ea9349a37bfee247df0f87cbcacca796" category="paragraph">初始版本。</block>
  <block id="0a7fcea811cb899434230e06e3477b84" category="summary">通过Hadoop、可以使用简单的编程框架在多个计算机集群之间分布式处理大型数据集。Hadoop旨在从单个服务器扩展到数千台计算机、每台计算机都提供本地计算和存储。</block>
  <block id="e28a2374ec10c84082a75afb2254f4e2" category="doc">将Cloudera Hadoop S3A连接器与StorageGRID 结合使用</block>
  <block id="ae19997258b86e93601b9072dd73b100" category="section-title">为什么要使用S3A执行Hadoop工作流？</block>
  <block id="ab8402eb6a573e76dfe21f21689c9ae9" category="paragraph">为了应对这些挑战、Hadoop S3A客户端可为S3对象存储提供高性能I/O。使用S3A实施Hadoop工作流有助于将对象存储用作数据存储库、并将计算和存储分开、进而使您能够独立扩展计算和存储。通过分离计算和存储、您还可以将适当数量的资源专用于计算作业、并根据数据集的大小提供容量。因此、您可以降低Hadoop工作流的总体TCO。</block>
  <block id="95c00c41a442070ea0794b977de417b8" category="section-title">将S3A连接器配置为使用StorageGRID</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">前提条件</block>
  <block id="d26ba44c410bd88ab784003c4e881389" category="list-text">用于Hadoop S3A连接测试的StorageGRID S3端点URL、租户S3访问密钥和机密密钥。</block>
  <block id="6762ef556fff500baba3e28bdce2febb" category="list-text">Cloudera集群以及对集群中每个主机的root或sudo权限、用于安装Java软件包。</block>
  <block id="0f00c0e9578f0ff277a08d08ef376836" category="paragraph">截至2022年4月、使用Cloudera 7.1.7的Java 11.0.14已针对StorageGRID 11.5和11.5进行了测试。但是、新安装时的Java版本号可能会有所不同。</block>
  <block id="4064bf12468c8bc6d21b4c1c947f9ed1" category="section-title">安装Java软件包</block>
  <block id="3408188787a55fb9708798cddbce37b0" category="inline-link">Cloudera支持表</block>
  <block id="e9be8954eba184e4880371339e422a20" category="list-text">检查<block ref="31da88a07df8e391e811822caa135aca" category="inline-link-rx"></block> 支持的JDK版本。</block>
  <block id="162479463df046cb4a74da2008354eed" category="inline-link">Java 11.x软件包</block>
  <block id="4c2d03bf2e98573fa9436705b37a57a1" category="list-text">下载<block ref="60b96115cb33d167b5449475d0ab85e0" category="inline-link-rx"></block> 与Cloudera集群操作系统匹配。将此软件包复制到集群中的每个主机。在此示例中、rpm软件包用于CentOS。</block>
  <block id="149f40ea9f9ffb02d7eeba792298fe1e" category="list-text">以root身份或使用具有sudo权限的帐户登录到每个主机。在每个主机上执行以下步骤：</block>
  <block id="52afb08cb748c04055be489c0b9a888e" category="list-text">安装软件包：</block>
  <block id="88499cbc0c83e386e53fdb36804337d9" category="list-text">检查Java的安装位置。如果安装了多个版本、请将新安装的版本设置为默认值：</block>
  <block id="b26c64ac085c28a1738346e2ec4d1520" category="list-text">将此行添加到`/etc/profile`的末尾。路径应与上述选择的路径匹配：</block>
  <block id="5f88743172c002de2f07047875fd2634" category="list-text">运行以下命令以使配置文件生效：</block>
  <block id="3659ebed6f89d43e919d92d8a4f7279e" category="section-title">Cloudera HDFS S3A配置</block>
  <block id="4839d2f25cc35b249d5db15efa1afd75" category="paragraph">* 步骤 *</block>
  <block id="c1d889a86b4ee1f584c957eb2c6788a5" category="list-text">从Cloudera Manager GUI中、选择Clusters &gt; HDFS、然后选择Configuration。</block>
  <block id="47f7c5aaea9ec9316850eea3fb28134a" category="list-text">在类别下、选择高级、然后向下滚动以找到`core-site.xml的集群范围高级配置片段(安全阀)`。</block>
  <block id="0f4af84337510994f3225d2912229b08" category="list-text">单击(+)符号并添加以下值对。</block>
  <block id="49ee3087348e8d44e1feda1917443987" category="cell">Name</block>
  <block id="689202409e48743b914713f96d93947c" category="cell">价值</block>
  <block id="7755119082c17ec5a3af74f22d8f3aeb" category="paragraph">fs.s3a.access.key</block>
  <block id="b7be29f43cb131b105a1709a4f9c9a47" category="paragraph">_&lt; StorageGRID 中的租户S3访问密钥&gt;_</block>
  <block id="cf2f74e5c9b775c0484e6cbc43fad16f" category="paragraph">fs.s3a.secret.key</block>
  <block id="519b3534e0953e9f790740bb65fa9c85" category="paragraph">_&lt; StorageGRID 中的租户S3密钥&gt;_</block>
  <block id="44b80c022f07d7386faad66ac455d150" category="paragraph">fs.s3a.connection.ssl.enabled</block>
  <block id="e7c95635ca48bb5a8924d326b1bb75b3" category="paragraph">true或false (如果缺少此条目、则默认为https)</block>
  <block id="57f2049492fc15207b8727a44d9de577" category="paragraph">fs.s3a.endpoint</block>
  <block id="62c6bd01433e2f02e630f1c410723151" category="paragraph">StorageGRID S3端点：端口&gt;_</block>
  <block id="1a95b45b39a6285f9154d0687dc81b19" category="paragraph">fs.s3a.impl</block>
  <block id="2227817813f0b981f0f8fdd5a9deaffa" category="paragraph">org.apache.hadoop.fs.s3a.s3AFileSystem</block>
  <block id="f5a9c1cd529c584fa53b0a52eb61dcd3" category="paragraph">fs.s3a.path.style.access</block>
  <block id="e935d7bd3d4a49248bd3ef5e65504984" category="paragraph">true或false (如果缺少此条目、则默认为虚拟主机模式)</block>
  <block id="0d5c3854a6a39265583df58f1d37b3a2" category="paragraph">*屏幕截图示例*</block>
  <block id="b956fcc114b2bdd5a14d25ccea32b2ea" category="image-alt">S3A配置</block>
  <block id="13a78f349c69274252fa8cde26ca554d" category="list-text">单击保存更改按钮。从HDFS菜单栏中选择陈旧配置图标、在下一页上选择重新启动陈旧服务、然后选择立即重新启动。</block>
  <block id="1e9d3fb4b7267b5c4de2a7f67956da90" category="image-alt">重新启动Hadoop的陈旧服务图标</block>
  <block id="68dbc18976f73773bc2d5deb27f4780f" category="section-title">测试与StorageGRID 的S3A连接</block>
  <block id="a13db3eed845386ceaab26fb7644f80a" category="section-title">执行基本连接测试</block>
  <block id="8a494f649ac7828977d5f96db63466eb" category="paragraph">登录到Cloudera集群中的一个主机、然后输入`Hadoop FS -ls S3a：//&lt;bucket-name&gt;_/`。</block>
  <block id="0dfddb891adaa02cdfc088a098890620" category="paragraph">以下示例将使用路径sysle和已有的HDFS-test分段以及一个测试对象。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="section-title">故障排除</block>
  <block id="d42e8fbcf79f7de1303918aafa7d9fa7" category="section-title">场景 1</block>
  <block id="6dec63b261842f0351dbe18a56aa7703" category="paragraph">使用HTTPS连接到StorageGRID 、并在15分钟超时后收到`shapore_failure`错误。</block>
  <block id="fe585fc6e6e5b4d2d51d9d6e24fe5d87" category="paragraph">*原因：*旧版JRE/JDK使用过时或不受支持的TLS密码套件连接到StorageGRID。</block>
  <block id="f37ed697750770b7a12ad7e08848a5f2" category="paragraph">*错误消息示例*</block>
  <block id="2f463c682630a0a4549da5e367566421" category="paragraph">*解析：*确保已安装JDK 11.x或更高版本并将其设置为默认Java库。请参见 <block ref="16e523618132c52360c79287d334eb35" category="inline-xref-macro-rx"></block> 部分、了解更多信息。</block>
  <block id="0f85bc5e180a369ebccc65db2ddf9288" category="section-title">场景2：</block>
  <block id="2cd1296de7ffb189828b5d1d8f8c74db" category="paragraph">无法连接到StorageGRID 、并显示错误消息`无法找到所请求目标的有效证书路径`。</block>
  <block id="608bb8a9d2247ad73a54f0b36e35e529" category="paragraph">*原因：* StorageGRID S3端点服务器证书不受Java程序信任。</block>
  <block id="71f31feeda8d8d4f38fbd0e77d82c5a9" category="paragraph">错误消息示例：</block>
  <block id="3233e5ff1af3df3490648806d2e307fb" category="paragraph">*解决方法：* NetApp建议使用由已知的公有 证书签名颁发机构颁发的服务器证书、以确保身份验证安全。或者、也可以向Java信任存储库添加自定义CA或服务器证书。</block>
  <block id="70135898629d17d48ccbf801de69bd60" category="paragraph">要将StorageGRID 自定义CA或服务器证书添加到Java信任存储、请完成以下步骤。</block>
  <block id="45eab7349f288790d0a805a261f1e633" category="list-text">备份现有的默认Java cacerts.</block>
  <block id="96a3c1cb03afb8a8fdc408548dea3311" category="list-text">将StorageGRID S3端点证书导入到Java信任存储。</block>
  <block id="ddbb2c51fdb8d9c867287e4815a4bc07" category="section-title">故障排除提示</block>
  <block id="92530c0f71b6f0c67f81127b722a268b" category="list-text">提高Hadoop日志级别以进行调试。</block>
  <block id="7434b0a8c7df6a944a97a97dab787fa2" category="paragraph">`export Hadoop_root_logger = hadoop.root.logger = debug、console`</block>
  <block id="fb10d0d432199779c224d4da6d5acf10" category="list-text">执行命令、并将日志消息定向到error.log。</block>
  <block id="c774f55d8bba0b0011caed823df573f4" category="paragraph">`Hadoop FS -ls S3a：//&lt;bucket-name&gt;_/&amp;&gt;error.log`</block>
  <block id="5acb44ecb8d9d7e55b00e2a97ca3c4f5" category="summary">您可以在此处找到每个NetApp StorageGRID 版本的完整文档。</block>
  <block id="d55a0f29052225dac98466ee9b92f4a1" category="doc">NetApp StorageGRID 文档</block>
  <block id="22c5de521c44ad2015e5ce711b46bebf" category="paragraph">您可以在此处找到每个NetApp StorageGRID 版本的完整文档：</block>
  <block id="dc2c61abf0171b5abd61211f37552e18" category="inline-link">StorageGRID 11.6.</block>
  <block id="1f24789c68b06d446e0ebee3e2b81c66" category="list-text"><block ref="1f24789c68b06d446e0ebee3e2b81c66" category="inline-link-rx"></block></block>
  <block id="c7bb2251d54b13e3891aea37cdb54cd1" category="inline-link">StorageGRID 11.5</block>
  <block id="1a433578de1b07641fbd7e4fa310d058" category="list-text"><block ref="1a433578de1b07641fbd7e4fa310d058" category="inline-link-rx"></block></block>
  <block id="32e750dc43168f85f193ec7b20f6e5c4" category="inline-link">StorageGRID 11.4.</block>
  <block id="ab11b93693987b00bd58948f5b72c34a" category="list-text"><block ref="ab11b93693987b00bd58948f5b72c34a" category="inline-link-rx"></block></block>
  <block id="37ef4cafeb8ccc9607db85cd3fab57f8" category="inline-link">StorageGRID 11.3</block>
  <block id="c18e44cb0cb6bc2f462d1e006c443b06" category="list-text"><block ref="c18e44cb0cb6bc2f462d1e006c443b06" category="inline-link-rx"></block></block>
  <block id="13947b810d54d07e62ef2873b8620fe7" category="inline-link">StorageGRID 11.2</block>
  <block id="fa96f2375d9c1354445489d7c5ab86dc" category="list-text"><block ref="fa96f2375d9c1354445489d7c5ab86dc" category="inline-link-rx"></block></block>
  <block id="7c9bea5c137c35be356406479a949aef" category="summary">对象锁定提供了一个WORM模型、用于防止删除或覆盖对象。对StorageGRID 对象锁定实施情况进行了评估、以帮助满足法规要求、支持对象保留的合法保留和合规模式以及默认存储分段保留策略。</block>
  <block id="33978f74a8897c3da7935e1ac3118552" category="doc">测试并演示StorageGRID 上的S3对象锁定</block>
  <block id="1d1d2f802d9cc6b6eb57739286faf4b3" category="paragraph">对象锁定提供了一个WORM模型、用于防止删除或覆盖对象。对StorageGRID 对象锁定实施情况进行了评估、以帮助满足法规要求、支持对象保留的合法保留和合规模式以及默认存储分段保留策略。</block>
  <block id="56971a583f52c8e863bd76946fd7e4df" category="paragraph">本指南将演示S3对象锁定API。</block>
  <block id="1e3a85ebb1c233113bf042fe963e7cf5" category="section-title">合法保留</block>
  <block id="deb6fc774008b995e323cca66b1facaf" category="list-text">对象锁定合法保持是应用于对象的简单开/关状态。</block>
  <block id="93c9236e0c41f2878728edae2046ae50" category="list-text">使用GET操作对其进行验证。</block>
  <block id="147baac1f38a06bbf4e892a7420f03bb" category="list-text">关闭合法保留</block>
  <block id="ef1f6350727f7558bf0dcb99de8b43a4" category="section-title">合规模式</block>
  <block id="ca03998a8a72276e144b390281ede11f" category="list-text">对象保留是使用"保留到"时间戳完成的。</block>
  <block id="f50bafdbea3b79e2d9f5fdd9a5add716" category="list-text">验证保留状态</block>
  <block id="71b2566ef5a1fcd229a2d9785ed41db7" category="section-title">默认保留</block>
  <block id="7dd96a99846895f9e3a3b91e8b8ec0fa" category="list-text">将保留期限设置为天数和年数以及使用每个对象API定义的保留截止日期。</block>
  <block id="25b92ba9ae0e5c3886d5397a33f4ce21" category="list-text">将对象放入存储分段中</block>
  <block id="4aa3f3b4e7b7410ce27736bcc6748358" category="list-text">存储分段上设置的保留持续时间将转换为对象上的保留时间戳。</block>
  <block id="6a0f60b1ed8b19b1d7db3515b6695da6" category="section-title">测试删除已定义保留的对象</block>
  <block id="d0cdc49fa0022b266468f0e306c00e54" category="paragraph">对象锁定基于版本控制构建。保留是在对象的某个版本上定义的。如果尝试删除定义了保留的对象、但未指定版本、则会创建一个删除标记作为对象的当前版本。</block>
  <block id="42ae4cc4d992b73b098cf1a15b7b156f" category="list-text">删除定义了保留的对象</block>
  <block id="80f89ef3a56a59415fb7de5ec8de5095" category="list-text">列出存储分段中的对象</block>
  <block id="b4f9a7eae41a98dfb0771f92707d7f68" category="list-text">请注意、此对象未列出。</block>
  <block id="cc3153459e96342ef7d219589d19f208" category="list-text">列出可查看删除标记的版本以及原始锁定版本</block>
  <block id="8697c94dccfe3cbc3ee4e7cd58a5022a" category="list-text">删除对象的锁定版本</block>
  <block id="ce2702286f63f4ae6103107902322a34" category="summary">StorageGRID 和S3 API提供了多种不同的方法来加密空闲数据。</block>
  <block id="9c1f8aaacc1a56ce4e9a0dad8b9f85d5" category="doc">在StorageGRID 上测试和演示S3加密选项</block>
  <block id="a8e93751c131aa808a9eafa1b8e11286" category="inline-link">查看 StorageGRID 加密方法</block>
  <block id="d303cdd8f1d3ee1dde4e3ada41998deb" category="paragraph">StorageGRID 和S3 API提供了多种不同的方法来加密空闲数据。要了解更多信息，请参见<block ref="54fa7d466db811b97852dfc564ca4383" category="inline-link-rx"></block>。</block>
  <block id="492f68a8c44fdeeefd5fdfecd42dbccc" category="paragraph">本指南将演示S3 API加密方法。</block>
  <block id="8851edf36d0b5638c8a4f6ac64923370" category="section-title">服务器端加密(SSR)</block>
  <block id="0eb4ff54e584f9eaf62705a77663a748" category="paragraph">使用SSE、客户端可以存储对象、并使用由StorageGRID 管理的唯一密钥对其进行加密。请求对象时、该对象将通过存储在StorageGRID 中的密钥进行解密。</block>
  <block id="941f37e6c0faf75d7632b45e2853416d" category="section-title">SS一 示例</block>
  <block id="63e43077ce3ba881fa5ae9806e2d3e5f" category="list-text">使用SSR放置对象</block>
  <block id="6aa955f0cbda4b4e5c5d34ea6d859a7c" category="list-text">对对象执行HEAD以验证加密</block>
  <block id="a4214b559bb4db0e923b33d1d6f2d0ff" category="list-text">获取对象</block>
  <block id="9e334fc718c77d2698ec6aaa3259bb80" category="section-title">使用客户提供的密钥(SSI-C)进行服务器端加密</block>
  <block id="18bc90d6da56c6a0ca8a43370fb89730" category="paragraph">通过"SSE "、客户端可以存储对象、并使用客户端随对象提供的唯一密钥对其进行加密。请求对象时、必须提供相同的密钥才能解密并返回对象。</block>
  <block id="aaf850473d937d172559cb570dab234d" category="section-title">SSI-C示例</block>
  <block id="1e7708d7f60a3422da31ffb25df4f214" category="list-text">出于测试或演示目的、您可以创建加密密钥</block>
  <block id="422423cacc3731aece78081dcce4a364" category="list-text">创建加密密钥</block>
  <block id="684f8aafe1c1f1de5e081831230eabd7" category="list-text">放置具有生成密钥的对象</block>
  <block id="06154eb3744171105830473b1636041a" category="list-text">为对象设置头</block>
  <block id="e5f9c75d403887203c2b7b0f94663953" category="admonition">如果不提供加密密钥、则会收到错误"An error occurred (404) when calling the HeadObject operation：not found"(调用HeadObject操作时出错(404)：未找到)</block>
  <block id="9dd97e164ee8102cf66ded8b2e6365f9" category="list-text">获取对象</block>
  <block id="25800fc2c4fb712f003b8dde72f89e9b" category="admonition">如果不提供加密密钥、则在调用GetObject操作时将收到错误"An error occurred (InvalidRequest)：The object was stored using a form of Server side Encryption"。要检索对象、必须提供正确的参数。"</block>
  <block id="b7aaef273d10ecbd096947fb1bedf595" category="section-title">存储分段服务器端加密(SSI-S3)</block>
  <block id="c61a8c52ec13232670b3fcf3aa61ecb1" category="paragraph">SSI-S3允许客户端为存储在存储在存储分段中的所有对象定义默认加密行为。这些对象使用由StorageGRID 管理的唯一密钥进行加密。请求对象时、该对象将通过存储在StorageGRID 中的密钥进行解密。</block>
  <block id="af888980113838f4be36b5dc77e84a11" category="section-title">存储分段SSI-S3示例</block>
  <block id="8256c537cf6e9ece3847813951e9fdfb" category="list-text">创建新存储分段并设置默认加密策略</block>
  <block id="2c63f6f1bb6a77a8a7fd5977aead1d84" category="list-text">创建新存储分段</block>
  <block id="8117fcb97cf86729cfbe315fb7c069c7" category="list-text">放入存储分段加密</block>
  <block id="87edd78cd55896c283c8e2897bc9ba41" category="summary">本指南详细说明了如何使用Amazon OpenSearch服务或内部Elasticsearch配置NetApp StorageGRID 11.6搜索集成服务。</block>
  <block id="c86030d76e5f59c53ee3bc844dccdbd2" category="doc">配置StorageGRID 搜索集成服务</block>
  <block id="f14bf9907ae948f8af2bfd00dbd85f09" category="paragraph">本指南详细说明了如何使用Amazon OpenSearch服务或内部Elasticsearch配置NetApp StorageGRID 11.6搜索集成服务。</block>
  <block id="24aceb5c24cf5a3bbe879def9dd06dd3" category="paragraph">StorageGRID 支持三种类型的平台服务。</block>
  <block id="fde5ed7646cf684c0972be9a066f6914" category="list-text">* StorageGRID CloudMirror复制*。将特定对象从StorageGRID 存储分段镜像到指定的外部目标。</block>
  <block id="8e304e3c51ae41ba284a04741c9b3ffd" category="list-text">*通知*。按存储分段发送事件通知、以便向指定的外部Amazon Simple Notification Service (Amazon SNS)发送有关对对象执行的特定操作的通知。</block>
  <block id="6829b0de5985e8a1d0e7cdb7a6f93842" category="list-text">*搜索集成服务*。将简单存储服务(S3)对象元数据发送到指定的Elasticsearch索引、您可以在该索引中使用外部服务搜索或分析元数据。</block>
  <block id="95309527f7dabbe3fe32e0802fc9852c" category="inline-link">使用平台服务的注意事项</block>
  <block id="a45c124a240baea662f0da5e22df0d82" category="paragraph">S3租户可通过租户管理器UI配置平台服务。有关详细信息，请参见<block ref="4ebe502af7f5bafb1d6a5d8f629eaf76" category="inline-link-rx"></block>。</block>
  <block id="59544fa9157551ea504a21302a6951ec" category="inline-link">《StorageGRID 11.6租户指南》</block>
  <block id="05cc541a01f9762a12d5264d6eb03ae8" category="paragraph">本文档是对的补充<block ref="eeb341388640105e8957a286cb4738c0" category="inline-link-rx"></block> 和为搜索集成服务的端点和存储分段配置提供了分步说明和示例。此处提供的Amazon Web Services (AWS)或内部Elasticsearch设置说明仅用于基本测试或演示。</block>
  <block id="615d163ca568994b3435939b26db5805" category="paragraph">受众应熟悉网格管理器和租户管理器、并可访问S3浏览器、以便为StorageGRID 搜索集成测试执行基本的上传(PUT)和下载(GET)操作。</block>
  <block id="f612053df248affdc8387fca6d9bee0a" category="section-title">创建租户并启用平台服务</block>
  <block id="27daf95e5e10f8ac74651d4d9130e719" category="list-text">使用Grid Manager创建S3租户、输入显示名称并选择S3协议。</block>
  <block id="fbfe9415a29f758b59248cc814fe3c18" category="list-text">在权限页面上、选择允许平台服务选项。如果需要、也可以选择其他权限。</block>
  <block id="f9472d6ac345c05d3cc61568620086f6" category="image-alt">选择权限屏幕截图</block>
  <block id="9b0222bb86df62edf8f9a4fd84ba7bdf" category="list-text">设置租户root用户初始密码、或者如果在网格上启用了标识联合、则选择具有root访问权限的联合组来配置租户帐户。</block>
  <block id="b363f2379a05efb18c601af7e4e70d90" category="list-text">单击以root用户身份登录、然后选择分段：创建和管理分段。</block>
  <block id="27c6c9b9ce32fafa453c2df32dcbedd9" category="paragraph">此时将转到租户管理器页面。</block>
  <block id="9fd75fca62b65c4af75fe743c1571eef" category="list-text">在租户管理器中、选择我的访问密钥以创建并下载S3访问密钥、以供日后测试。</block>
  <block id="0ec9b083d174497de65ea36e8f62118c" category="section-title">使用Amazon OpenSearch搜索集成服务</block>
  <block id="d3a3d7e6d3be793f5878e195a0502f20" category="section-title">Amazon OpenSearch (以前称为Elasticsearch)服务设置</block>
  <block id="ca543db8f60ee6d618b2fce4e398ff9d" category="inline-xref-macro">使用内部Elasticsearch搜索集成服务</block>
  <block id="91ca81266b2f6987e787fc132213833b" category="paragraph">使用此操作步骤 可以快速简单地设置OpenSearch服务、但仅用于测试/演示。如果您使用内部Elasticsearch搜索集成服务、请参见一节 <block ref="7949c0a8df6276ef905e1f32c3cd38da" category="inline-xref-macro-rx"></block>。</block>
  <block id="7a39dc4b754c9843c8b8e82e129df95a" category="admonition">要订阅OpenSearch服务、您必须拥有有效的AWS控制台登录名、访问密钥、机密访问密钥和权限。</block>
  <block id="04465e32e50f755028937109f8195d88" category="inline-link-macro">AWS OpenSearch服务入门</block>
  <block id="f072124705611ed25ec02b7577163209" category="list-text">按照中的说明创建新域 <block ref="db5f7712c2bd05f059f1113f251a8653" category="inline-link-macro-rx"></block>、但以下情况除外：</block>
  <block id="29d9d092d398fb44d9f8798062efa761" category="list-text">第 4 步域名：sgdemo</block>
  <block id="5ac3c34060203d7e326e3102ecdaba60" category="list-text">第10步：细化访问控制：取消选择启用细化访问控制选项。</block>
  <block id="016ccae457dbedb93f0de7d4602d6c4b" category="list-text">第12步：访问策略：选择配置级别访问策略、然后选择JSON选项卡以使用以下示例修改访问策略：</block>
  <block id="4f6a3e5d8a887d3c8d485fbcacc2fb47" category="list-text">将突出显示的文本替换为您自己的AWS身份和访问管理(IAM) ID和用户名。</block>
  <block id="53e9754db1787f07e19e5680b1b0b11e" category="list-text">将突出显示的文本(IP地址)替换为用于访问AWS控制台的本地计算机的公有 IP地址。</block>
  <block id="ff323c6f0c5ceb97eed49121babcec0f" category="inline-link"><block ref="ff323c6f0c5ceb97eed49121babcec0f" category="inline-link-rx"></block></block>
  <block id="b001a21bb86d7507e75c22c5e0711e4d" category="list-text">打开浏览器选项卡以<block ref="d59cf0c4ab596379c6604694ab2ef059" category="inline-link-rx"></block> 以查找公有 IP。</block>
  <block id="f8f40f877af3c3d201008b8c5be2c37d" category="image-alt">搜索集成屏幕截图</block>
  <block id="29053e2d92070487f785eef51e730dc4" category="list-text">等待15到20分钟、使此域变为活动状态。</block>
  <block id="f0eda7032507e6d5560f84391d733351" category="image-alt">激活域屏幕截图</block>
  <block id="28424454f1de84544a80fe8c1c48775c" category="list-text">单击OpenSearch Dashboards URL以在新选项卡中打开域以访问此信息板。如果出现访问被拒绝错误、请验证访问策略源IP地址是否已正确设置为您的计算机公有 IP、以允许访问域信息板。</block>
  <block id="b53d0b4902659d8d2f913cad2204dafa" category="list-text">在信息板欢迎页面上、选择"Explore on your own"。从菜单中、转到"Management"-&gt;"Dev Tools"</block>
  <block id="64529406325d80102a66bca5577acc93" category="list-text">在Dev Tools -&gt; Console下、输入`PUT &lt;index&gt;`、在此可以使用索引存储StorageGRID 对象元数据。我们在以下示例中使用索引名称"gmetadata"。单击小三角形符号以执行PUT命令。预期结果显示在右侧面板上、如以下示例屏幕截图所示。</block>
  <block id="d109971fa7c388dc06d7b1809b235b8d" category="image-alt">使用PUT命令查看索引屏幕截图</block>
  <block id="e10dd1b001fba4bfb5226f32dff82bfb" category="list-text">验证索引是否可从Amazon OpenSearch UI的sgdomain &gt;索引下查看。</block>
  <block id="efe6f3e30e8b2c5483ffdf27a0654511" category="image-alt">正在验证索引屏幕截图</block>
  <block id="2b3c30e7f44f2aac501d2e83c6219832" category="section-title">平台服务端点配置</block>
  <block id="8c4ec52c2351d47f61041ea0f6d68abc" category="paragraph">要配置平台服务端点、请执行以下步骤：</block>
  <block id="2f79efe541087dee090636fcc45a179f" category="list-text">在租户管理器中、转至存储(S3)&gt;平台服务端点。</block>
  <block id="b34d3c3f94b41d3571f8ca1f3cddd7e5" category="list-text">单击创建端点、输入以下内容、然后单击继续：</block>
  <block id="a6dbfe22a145135ffcb921b9d47c971b" category="list-text">显示名称示例`AWS-OpenSearch`</block>
  <block id="c8ebb37d076b51461df1832842943a56" category="list-text">示例中的域端点会在URI字段中的上述操作步骤 的步骤2下显示屏幕截图。</block>
  <block id="62ac5878f5ad652b348bf756180bd23b" category="list-text">在URN字段中、上述操作步骤 的步骤2中使用的域ARN、并将`/&lt;index&gt;/_doc`添加到ARN末尾。</block>
  <block id="55d2f2cd1ece54b1c4d553e157cfa3a2" category="paragraph">在此示例中、URN变为`arn：AWS：es：us-east-1：211234567890：domain/sgdemo /sgmedata/_doc`。</block>
  <block id="f8a9b600f50cc5b60751952c56d0f3fc" category="image-alt">端点详细信息屏幕截图</block>
  <block id="3c56a593460a6f84bfc344ffe6150097" category="list-text">要访问Amazon OpenSearch sgdomain、请选择访问密钥作为身份验证类型、然后输入Amazon S3访问密钥和机密密钥。要转到下一页、请单击继续。</block>
  <block id="aa0f9a4ba593122d011f03e2316ce19b" category="image-alt">对端点连接进行身份验证屏幕截图</block>
  <block id="d078b4431fcc80fbee2cd9a3c87293b1" category="list-text">要验证端点、请选择使用操作系统CA证书和测试并创建端点。如果验证成功、则会显示一个类似于下图的端点屏幕。如果验证失败、请确认URN在路径末尾包含`/&lt;index&gt;/_doc`、并且AWS访问密钥和机密密钥正确无误。</block>
  <block id="fe28f79fc55095a8e58030809820fe42" category="image-alt">平台服务端点屏幕截图</block>
  <block id="9d7ff9ab7c49eef4133e233cbed1198b" category="section-title">内部Elasticsearch设置</block>
  <block id="a7d37b98c9dd326efe3690654fe9d37f" category="paragraph">此操作步骤 仅用于使用Docker快速设置内部Elasticsearch和Kibana、以便用于测试目的。如果Elasticsearch和Kibana服务器已存在、请转至步骤5。</block>
  <block id="5061a9f622798427aca0d360cc138888" category="inline-link-macro">Docker安装操作步骤</block>
  <block id="d180e3941d65b33ef407bed8ae52ddc8" category="inline-link-macro">CentOS Docker安装操作步骤</block>
  <block id="80f7fe607a20803747ad9b40d526935c" category="list-text">请遵循此操作 <block ref="3b1e055afa87d3b585871c5e6a6e5a09" category="inline-link-macro-rx"></block> 安装Docker。我们使用 <block ref="bac8b475dc6eefa0e27bba4925d480b4" category="inline-link-macro-rx"></block> 在此设置中。</block>
  <block id="8244486218d0bcf97251923ef2f0be45" category="list-text">要在重新启动后启动Docker、请输入以下内容：</block>
  <block id="2bcd57548845273190401d9ba79767a3" category="list-text">将`vm.max_map_count`值设置为262144：</block>
  <block id="43433bec04d909d718c7800aa96f1beb" category="list-text">要在重新启动后保留此设置、请输入以下内容：</block>
  <block id="67003ee2f4042eb1f705313a4dc58cfd" category="inline-link-macro">Elasticsearch快速入门指南</block>
  <block id="1c046e86c75e8fd764a3285f110da4d7" category="list-text">按照 <block ref="f2c2be7ac1a239dac97b7af8519d2c7b" category="inline-link-macro-rx"></block> 自管理部分、用于安装和运行Elasticsearch和Kibana Docker。在此示例中、我们安装了8.1版。</block>
  <block id="193e2040e8163613cb1974450d2af29c" category="admonition">记下由Elasticsearch创建的用户名/密码和令牌、您需要使用它们来启动Kibana UI和StorageGRID 平台端点身份验证。</block>
  <block id="a7d9a6a3c74bd9faac38bc1bb130a796" category="image-alt">搜索集成弹性搜索屏幕截图</block>
  <block id="332f50821b852451ef88ea9dbe07a0dc" category="list-text">启动Kibana Docker容器后、控制台中将显示URL链接`\https://0.0.0.0:5601`。将0.0.0.0替换为URL中的服务器IP地址。</block>
  <block id="90ec7e4d1719c2a884a27d95126c0f0f" category="list-text">使用用户名`弹性`和Elastic在上一步中生成的密码登录到Kibana UI。</block>
  <block id="9e4e15cd3018d0529612a23324c26d35" category="list-text">首次登录时、请在信息板欢迎页面上选择"Explore on your own"。从菜单中、选择"Management"&gt;"Dev Tools"。</block>
  <block id="7ce90614c51c6b29f6b2ef2391c41a72" category="list-text">在开发工具控制台屏幕上、输入`PUT &lt;index&gt;`、在此可以使用此索引存储StorageGRID 对象元数据。我们在此示例中使用索引名称`sgmetadata`。单击小三角形符号以执行PUT命令。预期结果显示在右侧面板上、如以下示例屏幕截图所示。</block>
  <block id="6b2c56310234326372b84f2537bfb34b" category="image-alt">执行PUT命令屏幕截图</block>
  <block id="d2c398101283b85a574ecda90393e5b0" category="paragraph">要为平台服务配置端点、请执行以下步骤：</block>
  <block id="6988d11970dc632c6cbaea778ec31ebd" category="list-text">在租户管理器上、转至存储(S3)&gt;平台服务端点</block>
  <block id="2411ab8836570fc720961d9ca4d31170" category="list-text">显示名称示例：`弹性搜索`</block>
  <block id="c3ab52d125350a189f9be76434bf5565" category="list-text">URI：`\https://&lt;elasticsearch-server-ip或hostname&gt;：9200`</block>
  <block id="97fbbb5c5782ba00d7871db3cbbcaadc" category="list-text">urn：`urn：&lt;something&gt;：es：：：&lt;部分唯一文本&gt;/&lt;索引名称&gt;/_doc`、其中索引名称是您在Kibana控制台上使用的名称。示例：`urn：local：es：：：sgmd/sgmetadata/_doc`</block>
  <block id="c21a9f9baede4b3ff45e83c1195d954e" category="image-alt">平台服务端点详细信息屏幕截图</block>
  <block id="9c530e0250b2365dd2bc6de7cd8226af" category="list-text">选择基本HTTP作为身份验证类型、输入用户名`弹性`以及Elasticsearch安装过程生成的密码。要转到下一页、请单击继续。</block>
  <block id="90686e747228f4ffd85f26a78549d504" category="image-alt">平台服务端点身份验证屏幕截图</block>
  <block id="16dab22118d1bb9c774fc20b7eff75bf" category="list-text">选择不验证证书和测试并创建端点以验证端点。如果验证成功、则会显示类似于以下屏幕截图的端点屏幕。如果验证失败、请验证URN、URI和用户名/密码条目是否正确。</block>
  <block id="18f6fe973b6c5651f69da53d3aafaf5c" category="image-alt">已成功验证端点</block>
  <block id="e20dd85152fb7211af43f55d94499b76" category="section-title">存储分段搜索集成服务配置</block>
  <block id="874357ee35df6a54445e352c3dbb57e2" category="paragraph">创建平台服务端点后、下一步是在存储分段级别配置此服务、以便在创建、删除对象或更新其元数据或标记时将对象元数据发送到定义的端点。</block>
  <block id="69f509c71b61364d5893d46c8b9dba26" category="paragraph">您可以使用租户管理器配置搜索集成、以便将自定义StorageGRID 配置XML应用于存储分段、如下所示：</block>
  <block id="0e9ce58fdfd458e352fcd0b7403656ca" category="list-text">在租户管理器中、转至存储(S3)&gt;分段</block>
  <block id="6492a87a353e042bb5a4f6ac7f70ce04" category="list-text">单击Create Bucket、输入存储分段名称(例如、`sgmetada-test`)并接受默认值`us-east-1` Region。</block>
  <block id="147431664d9610b7596ebb51b74d698d" category="list-text">单击"继续"&gt;"创建存储分段"。</block>
  <block id="cbdfd9b1c3376777ffe0bd1bb6f31691" category="list-text">要打开存储分段概述页面、请单击存储分段名称、然后选择平台服务。</block>
  <block id="ff02db931d00676bbd2e49c8d66ba260" category="list-text">选择启用搜索集成对话框。在提供的XML框中、使用以下语法输入配置XML。</block>
  <block id="f1c5bfdd87a5f745188dfcf269154c5e" category="paragraph">突出显示的URN必须与您定义的平台服务端点匹配。您可以打开另一个浏览器选项卡以访问租户管理器、并从定义的平台服务端点复制URN。</block>
  <block id="ee4590422d317c3015f14170526c3977" category="paragraph">在此示例中、我们不使用前缀、这意味着此分段中每个对象的元数据将发送到先前定义的Elasticsearch端点。</block>
  <block id="26add7d33fe03962af376f500b33916e" category="list-text">使用S3浏览器使用租户访问/密钥连接到StorageGRID 、将测试对象上传到`sgmetada-test`存储分段、并向对象添加标记或自定义元数据。</block>
  <block id="09b447705582a66ef41783e259fb6a78" category="image-alt">上传测试对象屏幕截图</block>
  <block id="174949bad1f8938630874b6623815f20" category="list-text">使用Kibana UI验证对象元数据是否已加载到sgmetadata的索引中。</block>
  <block id="e3fdae847eec4a409ba0a70f299d8ee3" category="list-text">从菜单中、选择"Management"&gt;"Dev Tools"。</block>
  <block id="d322ac9e51a4b7cf746cfe0af7c0445c" category="list-text">将示例查询粘贴到左侧的控制台面板中、然后单击三角形符号以执行该查询。</block>
  <block id="49806491d4539bc7e2a5b05d737ab750" category="paragraph">以下示例屏幕截图中的查询1示例结果显示了四条记录。这与存储分段中的对象数匹配。</block>
  <block id="65201bc39dd240892dab55de46e2a0bb" category="image-alt">查询1结果示例屏幕截图</block>
  <block id="53573d96c3d967152d1c791a2e79dcb5" category="paragraph">以下屏幕截图中的查询2示例结果显示了标记类型为jpg的两条记录。</block>
  <block id="1962b22fc9378586da892a0bc564acda" category="image-alt">查询2示例</block>
  <block id="110f5c1e103a95f521005d2b098ea662" category="inline-link">什么是平台服务</block>
  <block id="05bcb775989a8e045997b61b4712bd11" category="list-text"><block ref="05bcb775989a8e045997b61b4712bd11" category="inline-link-rx"></block></block>
  <block id="68482d23bcdb3015258243e1b9aacf51" category="inline-link">StorageGRID 11.6 文档</block>
  <block id="e33f6ccf77d0d8efe2a762267b6fd088" category="list-text"><block ref="e33f6ccf77d0d8efe2a762267b6fd088" category="inline-link-rx"></block></block>
  <block id="12934b080defe99c475857cf35fc736b" category="summary">如果要将StorageGRID 对象移动到外部S3存储分段、则可以使用云存储池。外部存储分段可以属于Amazon S3 (AWS)或Google Cloud。</block>
  <block id="5726c3e825fdb258e1525c22d51442ea" category="doc">为AWS或Google Cloud创建云存储池</block>
  <block id="3ed256c1f351a8fcb6f88836f9344657" category="list-text">已配置StorageGRID 11.6。</block>
  <block id="d3c15aac7a26c8e69f0d3a923ebea0d3" category="list-text">您已在AWS或Google Cloud上设置外部S3存储分段。</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步骤</block>
  <block id="e0d561a0d43acc9575b7bc753d813e5c" category="list-text">在网格管理器中、导航到* ILM *&gt;*存储池*。</block>
  <block id="19ac403a0d6c78e78c0d289e7331185e" category="list-text">在页面的 Cloud Storage Pools 部分中，选择 * 创建 * 。</block>
  <block id="d97d852e8166f1982454eda55e5c517b" category="paragraph">此时将显示创建云存储池弹出窗口。</block>
  <block id="27bc4f94bb55216da5446bb2fdb8ced0" category="list-text">输入显示名称。</block>
  <block id="b9a5f574231e2fdc69a9ccace21be039" category="list-text">从提供程序类型下拉列表中选择* Amazon S3*。</block>
  <block id="b99241459e3ab67c1795a54b1eadb85a" category="paragraph">此提供程序类型适用于AWS S3或Google Cloud。</block>
  <block id="28e89d4189931a40a6eaa1548a6f0da4" category="list-text">输入要用于云存储池的S3存储分段的URI。</block>
  <block id="4f2400827753dc0695dede1947e79e86" category="paragraph">允许使用两种格式：</block>
  <block id="a0678dbf696ee57402a994b15a017fed" category="paragraph">`https://host:port`</block>
  <block id="bcca4a11cec95b0dcec0633cf0aa2e53" category="paragraph">`http://host:port`</block>
  <block id="773a527b6815140da355b051effea746" category="list-text">输入S3存储分段名称。</block>
  <block id="4bec2393e5f6d93abd85adfa9ee9f170" category="paragraph">您指定的名称必须与S3存储分段的名称完全匹配；否则、创建云存储池将失败。保存云存储池后，您无法更改此值。</block>
  <block id="d539647e4ced58d3f54c2a4ce23c5708" category="list-text">或者、输入访问密钥ID和机密访问密钥。</block>
  <block id="1486b2fc2d7628bc94918b17dd1e2dbc" category="list-text">从下拉列表中选择*不验证证书*。</block>
  <block id="4cc186df234138a57b2e8c5d8e5f7f8d" category="list-text">单击 * 保存 * 。</block>
  <block id="7c73eae507b98bafb559cd915f7f9750" category="paragraph">确认已为Amazon S3或Google Cloud创建云存储池。</block>
  <block id="b80a3dfef6be295438d7e805b11c4bc9" category="summary">如果要将StorageGRID 对象移动到外部Azure容器、则可以使用云存储池。</block>
  <block id="749b3ee0b1315337c79533871bba825a" category="doc">为Azure Blob Storage创建云存储池</block>
  <block id="861ae314cc8e000e48d818fcd75a2966" category="paragraph">如果要将StorageGRID 对象移动到外部Azure容器、则可以使用云存储池。</block>
  <block id="0106fb5b56f13c91c190596b35b034a4" category="list-text">您已设置外部Azure容器。</block>
  <block id="8bb07513ee1970ee4c61dec825ef35cc" category="list-text">从提供程序类型下拉列表中选择* Azure Blob Storage*。</block>
  <block id="fdcdebdb8587867805e6b14c39279411" category="list-text">输入Azure容器名称。</block>
  <block id="d4bed7a2666bc07a1fdf0b1b0a0d76ba" category="paragraph">您指定的名称必须与Azure容器名称完全匹配；否则、创建云存储池将失败。保存云存储池后，您无法更改此值。</block>
  <block id="f7c6315a28b94e99eab96017afd099b2" category="list-text">或者、输入Azure容器的关联帐户名称和帐户密钥进行身份验证。</block>
  <block id="77d01b70f1590b2dce595a6504470002" category="paragraph">确认已为Azure Blob Storage创建云存储池。</block>
  <block id="aaeeb364be922e789a908072881b88ea" category="summary">您可以创建ILM规则、将对象移动到云存储池进行备份。</block>
  <block id="85020881afe59b6c9413c4d50d2a26d0" category="doc">使用云存储池进行备份</block>
  <block id="4b0e54b770307ad63bdf2f9e861d65d8" category="paragraph">您可以创建ILM规则、将对象移动到云存储池进行备份。</block>
  <block id="9c23d5280c083a21f3e88f979b42a529" category="list-text">在网格管理器中、导航到* ILM *&gt;*规则*&gt;*创建*。</block>
  <block id="ce8eebfe6fafce433c006d354edaf1a1" category="list-text">输入问题描述。</block>
  <block id="329e9e5f00527442ffb8ddb0d1d33273" category="list-text">输入触发规则的条件。</block>
  <block id="5a378b18f7bf0c4cabc6c655cd2f535e" category="list-text">单击 * 下一步 * 。</block>
  <block id="67e0764defc4dc09f19960feb173f810" category="list-text">将对象复制到存储节点。</block>
  <block id="971a29d2c438993347d735d425c2a162" category="list-text">添加布局规则。</block>
  <block id="39c7ca89a1c72a8fd424c69cd35616bc" category="list-text">将对象复制到云存储池</block>
  <block id="d00aaeae3c5233d689ab6c1fa3391d6c" category="paragraph">确认保留示意图显示了存储在StorageGRID 本地和云存储池中用于备份的对象。</block>
  <block id="eccd0905bbb9877cfd0ba7f4cc26a3c6" category="paragraph">确认在触发ILM规则后、云存储池中存在副本、您可以在本地检索对象而无需执行对象还原。</block>
  <block id="c27ce751e131719af380702f6711a49d" category="sidebar">如何启用StorageGRID</block>
  <block id="3778f3873debfe11e2ace6bb6af1e417" category="sidebar">StorageGRID 文档</block>
  <block id="7b99b0e0bb2f7f24ff67fbcc39f899f1" category="sidebar">经验证的第三方解决方案</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="sidebar">概述</block>
  <block id="bc7a074f94cb3e6b09ba943468b03bd0" category="sidebar">产品功能指南</block>
  <block id="e02e6c7dee6578ec85d1e57d9e5d7505" category="sidebar">为AWS或Google创建云存储池</block>
  <block id="f1f92d294ec1c6f6fdea0f29b7e96f97" category="sidebar">为Azure Blob存储创建云存储池</block>
  <block id="1cf458dbfa770c9c7189b79723753358" category="sidebar">配置搜索集成服务</block>
  <block id="408cdd6548bf39b1766ce095fd112e06" category="sidebar">工具和应用程序指南</block>
  <block id="d83a76224c587ea0af02d9f6d8ee0099" category="sidebar">使用Cloudera Hadoop S3A连接器</block>
  <block id="c305708b9554a582b18cd4563fac118b" category="sidebar">使用公共存储创建Vertica Eon模式数据库</block>
  <block id="71a42bc38b535445f495ee32a46355ba" category="sidebar">使用S3cmd测试和演示S3访问</block>
  <block id="e8aaf062a960aeba132419a40c4e85ef" category="sidebar">过程和API示例</block>
  <block id="a82a0897ec719037339f7e557ccdc5b3" category="sidebar">测试和演示S3加密</block>
  <block id="d1fc85d07fb8abfaa8142a6bddefd16f" category="sidebar">测试和演示S3对象锁定</block>
  <block id="81a123ccab93cd947289b672b0e50348" category="sidebar">演示教程</block>
  <block id="37a22f48989cdc6e7e3429f09be3fc5c" category="sidebar">StorageGRID 视频库</block>
  <block id="f8e43c2f779dd11ddf192ae101019ea1" category="sidebar">NetApp 学习服务</block>
  <block id="dfcc398099d6a64026e51ab282e16253" category="sidebar">更多资源</block>
  <block id="5c8fba8e6a4b1c808cb6fcd601dd89ce" category="sidebar">StorageGRID 支持页面</block>
  <block id="697ea025ecb303d4f40d1bf3a8b4bde0" category="sidebar">NetApp 互操作性表工具（ IMT ）</block>
  <block id="8ef596bf4eb7277f78ad1d7ad4cc04de" category="sidebar">StorageGRID 知识库</block>
  <block id="c2d388654878e1108f99fdeaa465fcac" category="sidebar">NetApp 博客</block>
  <block id="a310588c148d934b9b30c31802d4a30b" category="sidebar">NetApp 社区</block>
  <block id="024f3a8ba5709643c2f09c8eabccae87" category="sidebar">经验证的第三方解决方案—概述</block>
  <block id="f4bf6c62a8784f065cebbacf57a1c62c" category="sidebar">测试和演示S3对象锁定</block>
  <block id="51e1f53c9c33ce7f260e99f66853181d" category="summary">通过StorageGRID 11.6系统日志转发功能、您可以配置外部系统日志服务器来收集和分析StorageGRID 日志消息。ELK (Elasticsearch、Logstash、Kibana)已成为最受欢迎的日志分析解决方案之一。本文包括用于筛选和定义日志消息模式的Logstash配置示例、Kibana查询、图表和信息板示例、可帮助您快速开始StorageGRID 日志管理和分析。</block>
  <block id="ba8b98c81be3d04d10309b1945f41b3c" category="doc">使用ELK堆栈进行StorageGRID 日志分析</block>
  <block id="febdad8f949c4133d32f6ec0e8b0ca1c" category="inline-link">使用ELK视频进行StorageGRID 日志分析</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="section-title">要求</block>
  <block id="b30496f397e70350f3c0324082c41741" category="list-text">StorageGRID 11.6.0.2或更高版本</block>
  <block id="b8dc02d4e6fb27304a65c0d58fbdf121" category="list-text">ELK (Elasticsearch、Logstash和Kibana)已安装并运行7.1x或更高版本</block>
  <block id="9db4c047fbc2df77e904876ca407a10a" category="section-title">示例文件</block>
  <block id="7d62fedde871da77290cb136048ab8ae" category="inline-link-macro">下载Logstash 7.x示例文件包</block>
  <block id="7f736656dd8100c22291010843e5658f" category="list-text"><block ref="f317985ee56adafb12c2258472a6183e" category="inline-link-macro-rx"></block> +* MD5 checksum* 148c23d0021d9a4bb4a6c0287464deab +* SHA256 checksum* f5ec9e2e3f842d5a7861566b167a561b4373038b4e7bb3b3d522adf2d6</block>
  <block id="69cc1f5bcff32557cde6f7f5b4b365ed" category="inline-link-macro">下载Logstash 8.x示例文件包</block>
  <block id="a87365d5d3e0619dfacb72153399871c" category="list-text"><block ref="61afb638ef1cfaa2ac62beb76c59b80b" category="inline-link-macro-rx"></block> +* MD5 checksum* e11ba3a662f87c3ef363d0fe06835 +* SHA256 checksum* 5c670755742cfdf5aa723a596b087e0153a65bcaef3934afdb682f61cd278d</block>
  <block id="cdcccab01175eb4e232499c66bfa50af" category="section-title">假设</block>
  <block id="430bacfb127efaca8a86b36b918f14b8" category="paragraph">读者熟悉StorageGRID 和ELK的术语和操作。</block>
  <block id="c742c5a36b6307267bb709355feb2c41" category="section-title">说明</block>
  <block id="eac3387862d4c7d3f970561bfc3f7c02" category="paragraph">由于Grok模式定义的名称不同、因此提供了两个示例版本。+例如、Logstash配置文件中的SYSLOGBASE格式根据安装的Logstash版本定义不同的字段名称。</block>
  <block id="4f709f3097a2dcda180a37ee47844c13" category="paragraph">* Logstash 7.17示例*</block>
  <block id="4f81ab746526b7ac4b040718ec7acade" category="image-alt">Logstash 7.17示例</block>
  <block id="91106d0591f097e8bbf222df7706bd2d" category="paragraph">* Logstash 8.23示例*</block>
  <block id="c59ad685927ef7bba94abe95eaa87376" category="image-alt">Logstash 8.23示例</block>
  <block id="bb8122fb7f8c30744fed84c9462b305d" category="list-text">根据您安装的ELK版本解压缩提供的示例。+此示例文件夹包含两个Logstash配置示例：+* sglog-2-file.conf：*此配置文件会将StorageGRID 日志消息输出到Logstash上的文件中、而不会进行数据转换。您可以使用此命令来确认Logstash正在接收StorageGRID 消息、或者帮助了解StorageGRID 日志模式。+* sglog-2-es.conf：*此配置文件使用各种模式和筛选器转换StorageGRID 日志消息。其中包括示例drop语句、这些语句根据模式或筛选器丢弃消息。输出将发送到Elasticsearch以编制索引。+根据文件中的说明自定义选定的配置文件。</block>
  <block id="3ed4288764d66f2a65f7b85b652b32d3" category="list-text">测试自定义的配置文件：</block>
  <block id="4c6585842bcd6ea99d8f33b205b2620e" category="paragraph">如果返回的最后一行与以下行类似、则此配置文件没有语法错误：</block>
  <block id="49e1ff176740ef27a71315d47a28cec0" category="list-text">将自定义的conf文件复制到Logstash服务器的配置：/etc/logstash/conf.d+如果尚未在/etc/logstash/logstash.yml中启用config.reload.automatic、请重新启动Logstash服务。否则、请等待配置重新加载间隔过。</block>
  <block id="1e2849b34515b73b14e350b3cfc6a222" category="list-text">检查/var/log/logstash/logstash-plain.log并确认在使用新配置文件启动Logstash时没有错误。</block>
  <block id="25b182c5b3173c341b5471a371174d7d" category="list-text">确认TCP端口已启动并正在侦听。+在此示例中、使用TCP端口5000。</block>
  <block id="225e60e541052bd49fdac4b77ffecbc9" category="inline-link">演示视频</block>
  <block id="defe6f8b45f596c620301bef8fdfbee9" category="list-text">您需要在Logstash服务器上配置或禁用防火墙、以允许StorageGRID 节点连接到定义的TCP端口。</block>
  <block id="9391523be65dad63e7fad8e0d28ee818" category="list-text">在Kibana GUI中、选择Management -&gt; Dev Tools。在控制台页面上、运行此get命令以确认已在Elasticsearch上创建新索引。</block>
  <block id="30d46e8002bdd5c520a62523d772ebca" category="list-text">在Kibana GUI中、创建索引模式(ELK 7.x)或数据视图(ELK 8.x)。</block>
  <block id="291020c626f44ee2ce32684bc3a13980" category="list-text">在Kibana GUI的顶部中间的搜索框中输入"saved objects"。+在已保存对象页面上、选择导入。在导入选项下、选择"请求冲突操作"</block>
  <block id="d5a554fb68642d807aee43887546b43a" category="image-alt">Kibana导入选项</block>
  <block id="42451b291f11e82724f65b3c852cca1d" category="paragraph">导入ELK &lt;version&gt;-query-chart -sample.ndjson。+当系统提示您解决冲突时、请选择您在第8步中创建的索引模式或数据视图。</block>
  <block id="bc1a8499a0350f03b4ca75964eaad9cb" category="image-alt">Kibana冲突</block>
  <block id="d304b6866d45389dd644b1c1788bfd5a" category="paragraph">导入以下Kibana对象： +*查询*+* audit-msg-s3rq-orlm +* byncast log S3相关消息+*日志级别警告或更高+*失败的安全事件+*图表*+* S3请求计数基于bycast.log +* HTTP状态代码+*审核消息类型细分+*平均S3响应 时间+*信息板*+* S3请求信息板使用上述图表。</block>
  <block id="367c071ddbe8d1248ceb63f940e9b3cc" category="paragraph">现在、您可以使用Kibana执行StorageGRID 日志分析了。</block>
  <block id="8cd58c89ff3d51a256ecfe3fe8bab20f" category="section-title">其他资源</block>
  <block id="925a38c6c8bc1c84ae702d840efa1ef4" category="inline-link">系统日志101</block>
  <block id="43b4ce193ce75a7c51a41a392da0e953" category="list-text"><block ref="43b4ce193ce75a7c51a41a392da0e953" category="inline-link-rx"></block></block>
  <block id="36df17c33644048e4c07c17be01b2524" category="inline-link">什么是ELK堆栈</block>
  <block id="2403480f61f37fce13a75f67d092ed18" category="list-text"><block ref="2403480f61f37fce13a75f67d092ed18" category="inline-link-rx"></block></block>
  <block id="19d3c10a857b63064e06411baf1285b1" category="inline-link">Grok模式列表</block>
  <block id="7c6102b1302815b75a46740d436c93fc" category="list-text"><block ref="7c6102b1302815b75a46740d436c93fc" category="inline-link-rx"></block></block>
  <block id="13fc1087c795f112d8979eb5e2780e5c" category="inline-link">Logstash入门指南：Grok</block>
  <block id="a39eed6135a0acdcad49fe799eb1bd27" category="list-text"><block ref="a39eed6135a0acdcad49fe799eb1bd27" category="inline-link-rx"></block></block>
  <block id="1482da3b9a25b116ee5827795ac8fbbd" category="inline-link">Logstash实用指南：系统日志深度剖析</block>
  <block id="9a51320cc75988e79a130ea7dc86875c" category="list-text"><block ref="9a51320cc75988e79a130ea7dc86875c" category="inline-link-rx"></block></block>
  <block id="3a280b4922aa9eb7ce4c328f7f7dbbb3" category="inline-link">Kibana指南—浏览文档</block>
  <block id="ffe5d2718c9048b9edb4a4a97d96e90f" category="list-text"><block ref="ffe5d2718c9048b9edb4a4a97d96e90f" category="inline-link-rx"></block></block>
  <block id="98d2f29265a464a9765db0d88f294336" category="inline-link">StorageGRID 审核日志消息参考</block>
  <block id="baba0109751acb7c22b021c76b6d7b51" category="list-text"><block ref="baba0109751acb7c22b021c76b6d7b51" category="inline-link-rx"></block></block>
  <block id="288e0e9ab8b8ac8737afefecf16f61fd" category="list-text">Dremio</block>
  <block id="e07088b3eedf498bf832f9346b0e3c02" category="list-text">Reveille v10内部版本220706或更高版本</block>
  <block id="edf1439075a83a447fb8b630ddc9c8de" category="list-text">白雪片</block>
  <block id="e6a211de1fc20ed87589cd9c30f29ac3" category="list-text">Virtalica StorageFabric</block>
  <block id="e2b1887bff53094ff4de31a5b6be8203" category="sidebar">使用Elasticsearch、Logstash和Kibana进行日志分析</block>
  <block id="958e51c613c42a5edd4e8f06fad6128b" category="sidebar">使用ELK堆栈进行StorageGRID 日志分析| NetApp TV</block>
  <block id="a55559222587bd5f2986759b8e95387a" category="summary">本技术报告详细说明了如何为NetApp StorageGRID 11.6配置外部Prometheus和Grafana服务。</block>
  <block id="ec88743b2ce92a6f481315232bded2cc" category="doc">使用Prometheus和Grafana延长指标保留期限</block>
  <block id="19e3e1c7497754486f9fce5eaded999d" category="paragraph">StorageGRID 使用Prometheus存储指标、并通过内置的Grafana信息板对这些指标进行可视化。通过配置客户端访问证书并为指定客户端启用Prometheus访问、可以从StorageGRID 安全地访问Prometheus指标。目前、此指标数据的保留受管理节点存储容量的限制。为了获得更长的持续时间并能够创建这些指标的自定义可视化效果、我们将部署一个新的Prometheus和Grafana服务器、配置我们的新服务器以从StorageGRID实例中擦除这些指标、并使用对我们重要的指标构建一个信息板。您可以获取有关在中收集的Prometheus指标的详细信息<block ref="b4322fd604ba4ce3b6c052facca6761f" category="inline-link-rx"></block>。</block>
  <block id="4ea04e03e09a38c155d3e71e1fb7de4c" category="section-title">联合Prometheus</block>
  <block id="4d27d8d41585fe5291670dc3d60f75a7" category="section-title">实验室详细信息</block>
  <block id="85bef63997bbb31cf4fa40eff8acef2b" category="paragraph">在本示例中、我将使用StorageGRID 11.6节点的所有虚拟机以及Debian 11服务器。StorageGRID 管理界面配置了一个公共信任的CA证书。本示例将不会介绍StorageGRID 系统或Debian Linux安装的安装和配置过程。您可以使用Prometheus和Grafana支持的任何Linux模式。Prometheus和Grafana都可以安装为Docker容器、从源代码构建或预编译的二进制文件。在此示例中、我将直接在同一Debian服务器上安装Prometheus和Grafana二进制文件。从下载并按照基本安装说明进行操作<block ref="89724ccad5c62d1626a6c4f814f7ad92" category="inline-link-rx"></block> 和<block ref="14b4aeaebc6939fe5db011cfca13bded" category="inline-link-rx"></block> 。</block>
  <block id="e6c56f2ad47108b72210c45d114ab981" category="section-title">为Prometheus客户端访问配置StorageGRID</block>
  <block id="a5b8a4af4e814e777e9666e98c1489b1" category="paragraph">要访问StorageGRID Stored Prometheus指标、您必须生成或上传具有专用密钥的客户端证书、并为客户端启用权限。StorageGRID 管理接口必须具有SSL证书。此证书必须由Prometheus服务器信任、或者由可信CA信任、如果是自签名证书、则此证书必须手动受信任。要了解更多信息、请访问<block ref="10adb8f93432a6d42dbae4551371be78" category="inline-link-rx"></block>。</block>
  <block id="76f344ac7fba487473f1b7a1890e9f8e" category="list-text">在StorageGRID 管理界面中、选择左下方的"configuration"、然后在第二列的"Security"下单击Certificates。</block>
  <block id="6672f37bb0822d570acc565c15cb698f" category="list-text">在"证书"页面上、选择"客户端"选项卡、然后单击"添加"按钮。</block>
  <block id="2f33cc1441b10d118155c459b7c0ec4f" category="list-text">提供要授予访问权限的客户端的名称并使用此证书。单击"允许用户"前面的"权限"下的框、然后单击"继续"按钮。</block>
  <block id="e59f14e1cf84d2b0c36bfe68a98c16ed" category="image-alt">证书名称</block>
  <block id="b47c072e73067166591337127c6332cf" category="list-text">如果您拥有CA签名的证书、则可以选择"上传证书"单选按钮、但在我们的情况下、我们将通过选择"生成证书"单选按钮让StorageGRID 生成客户端证书。此时将显示要填写的必填字段。输入客户端服务器的FQDN、服务器的IP、主题和有效天数。然后单击"生成"按钮。</block>
  <block id="efdc2e922559f9410d73ad5e9763cfe1" category="image-alt">证书详细信息</block>
  <block id="512a2185a4d8f29cd92f5eeca5299428" category="list-text">下载证书对等文件和专用密钥对等文件。</block>
  <block id="950d1a08b94affeab69ad5298853bcab" category="image-alt">证书下载</block>
  <block id="c7d534d2e8c571fc60886fffffaed71d" category="section-title">准备Linux服务器以安装Prometheus</block>
  <block id="1a1198e75df118c29ed3f2cfe6f42314" category="paragraph">在安装Prometheus之前、我希望为我的环境做好准备、让Prometheus用户、目录结构做好准备、并为指标存储位置配置容量。</block>
  <block id="53012110a3b12b6dbece7a2d3329563c" category="list-text">创建Prometheus用户。</block>
  <block id="75ad7bfc7b05da8e590553a1ba59d00e" category="list-text">为Prometheus、客户端证书和指标数据创建目录。</block>
  <block id="cf93e27e07f84a6f34c0baad77d73502" category="list-text">我使用ext4文件系统格式化了用于指标保留的磁盘。</block>
  <block id="dba914a2be67f5826db730febd483dbb" category="list-text">然后、我将文件系统挂载到Prometheus指标目录。</block>
  <block id="1db6657920c882fe516dc56a8fc42ae0" category="list-text">获取用于指标数据的磁盘的UUID。</block>
  <block id="de5a7b5d75aef0f9aa929a3ffdd7bf91" category="list-text">在/etc/fstab/中添加一个条目、使挂载在重新启动后仍会使用/dev/sdb的uuid。</block>
  <block id="e7184db422126b9a8ae98daa3ef08b00" category="section-title">安装和配置Prometheus</block>
  <block id="51006cba71ff2e50795b3bf3c2b2e223" category="paragraph">现在、服务器已准备就绪、我可以开始安装Prometheus并配置此服务。</block>
  <block id="c99b7eb31cdbd3d09abc27ebdcb5325d" category="list-text">提取Prometheus安装包</block>
  <block id="6d1af4201bd8173d4f87201195065c96" category="list-text">将二进制文件复制到/usr/local/bin、并将所有权更改为先前创建的Prometheus用户</block>
  <block id="22971a12624067801ed27bf22a1a43d4" category="list-text">将控制台和库复制到/etc/Prometheus</block>
  <block id="c0b8e90b4197c0bc1a63ab18dad551cb" category="list-text">将先前从StorageGRID 下载的客户端证书和专用密钥对等文件复制到/etc/Prometheus/Certs</block>
  <block id="6fd6fe03d0bae048f49350a7b29d2b20" category="list-text">创建Prometheus配置YAML文件</block>
  <block id="650d2cc27d4f8021f93af373465ebb1d" category="list-text">插入以下配置。作业名称可以是您所需的任何名称。将"-targets"更改为管理节点的FQDN、如果更改了证书名称和专用密钥文件名、请更新tls_config部分以使其匹配。然后保存文件。如果您的网格管理界面正在使用自签名证书、请下载此证书并将其与具有唯一名称的客户端证书一起放置、然后在tls_config部分中添加ca_file：/etc/Prometheus/Cert/UIcert.pem</block>
  <block id="adbbb69e4573c242198e942a4c984a56" category="list-text">在此示例中、我将收集以alertmanager、Cassandra、node和StorageGRID 开头的所有指标。您可以在中查看有关Prometheus指标的详细信息<block ref="b4322fd604ba4ce3b6c052facca6761f" category="inline-link-rx"></block>。</block>
  <block id="2a83272e8be3a9939618ae5d54c15280" category="paragraph">如果网格管理界面使用的是自签名证书、请下载此证书并将其与具有唯一名称的客户端证书一起放置。在tls_config部分中、将证书添加到客户端证书和专用密钥行上方</block>
  <block id="9d5f73c80f9dcd64a2b4f51ed7df1c74" category="list-text">将/etc/Prometheus和/var/lib/Prometheus中所有文件和目录的所有权更改为Prometheus用户</block>
  <block id="94394bcffb3c751d1a1c75adf1dd3339" category="list-text">在/etc/systemd/system中创建一个Prometheus服务文件</block>
  <block id="1c83729b0147981bd53a386123e950b2" category="list-text">插入以下行、请注意#-storage.tsdb.retention.time=1y#、它会将指标数据的保留期限设置为1年。或者、您也可以使用#-storage.tsdb.retention.size=300GiB#根据存储限制确定保留期限。这是设置指标保留的唯一位置。</block>
  <block id="c44e8fe3436b496aa03fa98464a357bb" category="list-text">重新加载systemd服务以注册新的Prometheus服务。然后启动并启用Prometheus服务。</block>
  <block id="a95dc294578d84798aa85e589b1d7169" category="list-text">检查服务是否运行正常</block>
  <block id="efb4923d4171f8bbe31a74fc17e7a4ea" category="list-text">现在、您应该能够浏览到Prometheus服务器的UI<block ref="9c036ae021e9b80558a889223ee0da28" category="inline-link-rx"></block> 并查看UI</block>
  <block id="6246893720a6bc3db5f56c322fc01d95" category="image-alt">Prometheus UI页面</block>
  <block id="bc9d8c8501595ac689577e371305dd0c" category="list-text">在"Status" Targets下、您可以看到我们在Prometheus.yml中配置的StorageGRID 端点的状态</block>
  <block id="ef446049ce3cd8c094f34cb3047e10d7" category="image-alt">Prometheus状态菜单</block>
  <block id="b46ccb7031f632fe5680ae39d381aac5" category="image-alt">Prometheus目标页面</block>
  <block id="d438cb3ada618e17e8da5458906319f6" category="list-text">在图形页面上、您可以执行测试查询并验证数据是否已成功擦除了。例如、在查询栏中输入"storagegRid_node_cpu_utilization_percentage "、然后单击执行按钮。</block>
  <block id="a4b484847ff4cdaf28ddb0fbdebf7234" category="image-alt">执行Prometheus查询</block>
  <block id="4b9bf479d75eb40b84a86c9d4d9829c6" category="section-title">安装和配置Grafana</block>
  <block id="d6c4e0d91ac95c90048b7b552f962b83" category="paragraph">在Prometheus安装完毕并正常工作之后、我们可以继续安装Grafana并配置信息板</block>
  <block id="28946a57c620a6d61330c3ec2b855ea1" category="section-title">Grafana安装</block>
  <block id="886d386fd41ddae5268cb47bd2c0f6f7" category="list-text">安装最新的企业版Grafana</block>
  <block id="2b486298e7630814372aec36baee859f" category="list-text">为稳定版本添加此存储库：</block>
  <block id="166a21daf7286fbeb21167b5802de660" category="list-text">添加存储库后。</block>
  <block id="2557b3cde7450f332315bc10e61bdba8" category="list-text">重新加载systemd服务以注册新的grafana服务。然后启动并启用Grafana服务。</block>
  <block id="c96bdac515037faefe395a7292cce691" category="list-text">现在、Grafana已安装并正在运行。打开浏览器访问HTTP：//Prometheus-server：3000时、您将看到Grafana登录页面。</block>
  <block id="b5ed0857233fefc7884d300cb79511cc" category="list-text">默认登录凭据为admin/admin、您应根据提示设置新密码。</block>
  <block id="a201e49270e34f12f6f8e8e17b7f63b4" category="section-title">为StorageGRID 创建Grafana信息板</block>
  <block id="8fa4555fc2e45c8e0b51029500b0ed27" category="paragraph">在Grafana和Prometheus安装并运行的情况下、现在是时候通过创建数据源和构建信息板来连接这两者了</block>
  <block id="4824e95e765437e0267119c28a2ebf58" category="list-text">在左侧窗格中、展开"配置"并选择"数据源"、然后单击"添加数据源"按钮</block>
  <block id="5ab8c2d2b825ee44ae77e39f44377ef6" category="list-text">Prometheus将是可供选择的顶级数据源之一。如果不是、请使用搜索栏找到"Prometheus"</block>
  <block id="bef2ae359538161990ca7f4f33bcbb9b" category="list-text">通过输入Prometheus实例的URL以及与Prometheus间隔匹配的擦除间隔来配置Prometheus源。我还禁用了警报部分、因为我未在Prometheus上配置警报管理器。</block>
  <block id="a40cb233948efde79195641883d0e611" category="image-alt">Grafana Prometheus配置</block>
  <block id="b84470c739701819ce6f044fb322a73b" category="list-text">输入所需设置后、向下滚动到底部、然后单击"Save &amp; test"(保存并测试)</block>
  <block id="a4d1cacdf98710f66261bf842712805f" category="list-text">配置测试成功后、单击Explore按钮。</block>
  <block id="0dbc8986f05d1af0419dde8bc4a17614" category="list-text">在"浏览"窗口中、您可以使用我们使用"storagegrid node_cpu_utilization_percentage "测试的相同指标、然后单击"运行查询"按钮</block>
  <block id="65408cc1057e1983691b2ab33f411afc" category="image-alt">Grafana Prometheus指标探索</block>
  <block id="59c74787b5c8d94700e0808eb7f7080d" category="list-text">现在、我们已配置数据源、可以创建一个信息板。</block>
  <block id="2dbede5ad9fd60cdbd41384214e737a8" category="list-text">在左侧窗格中、展开Dashboards、然后选择"+" new Dashboard"</block>
  <block id="9b8670951f7b4684c224ee7c839d456e" category="list-text">选择"添加新面板"</block>
  <block id="0679a10db91cc04805eaf260fa1cf908" category="list-text">通过选择指标来配置新面板、我将再次使用"storagegrid node_cpu_utilization_percentage "、输入面板标题、展开底部的"选项"、并将图例更改为自定义、然后输入"｛｛instance｝｝"来定义节点名称、并在右侧窗格的"标准选项"下将"单元"设置为"Misc 100/percent (0%)"。然后单击"应用"将面板保存到信息板。</block>
  <block id="5a2f263537e34f8a641847b07c2dbb3a" category="image-alt">配置grafana面板</block>
  <block id="171b2836c7ab4655438b8b81bc7d0d7f" category="list-text">我们可以继续为所需的每个指标构建这样的信息板、但幸运的是、StorageGRID 已经拥有包含面板的信息板、我们可以复制到自定义信息板中。</block>
  <block id="0045460d4b8ee6e2ccf21ba85bb61aa2" category="list-text">从StorageGRID 管理界面的左侧窗格中、选择"Support"、然后在"Tools"列的底部单击"Metrics "。</block>
  <block id="dacb92a5479161b14f63fe1bc9ae9551" category="list-text">在指标中、我将选择中间列顶部的"网格"链接。</block>
  <block id="d41d9476c523c25b4f286c1fb9f71af1" category="image-alt">StorageGRID 指标</block>
  <block id="bcb5b82ee118287323cbbcf5705d51fd" category="list-text">在网格信息板中、我们选择"已用存储-对象元数据"面板。单击小下箭头和面板标题的末尾以下拉菜单。从此菜单中选择"检查"和"面板JSON"。</block>
  <block id="3283a20d4b70f7f18e4ffa4329564dec" category="image-alt">StorageGRID 信息板</block>
  <block id="bdfde960a4b9f7a6f52bc1bbcfb809ea" category="list-text">复制JSON代码并关闭窗口。</block>
  <block id="0ae78f538d8850bb1adf673ad3d9b9de" category="image-alt">StorageGRID JSON</block>
  <block id="dd5507576d8e651777535414a2a4d89c" category="list-text">在新信息板中、单击图标以添加新面板。</block>
  <block id="b87847301cad106c92101bdca1149176" category="image-alt">Grafana添加面板</block>
  <block id="e7db75cfcf6183907b6f092041507fab" category="list-text">应用新面板而不进行任何更改</block>
  <block id="28117e550ca797c69346cfabb47d4275" category="list-text">就像使用StorageGRID 面板一样、检查JSON。从StorageGRID 面板中删除所有JSON代码并将其替换为复制的代码。</block>
  <block id="243663c8bbd4a1adc19a8656ea49f52a" category="image-alt">Grafana检查面板</block>
  <block id="045121a7dd658eca0fb920eae2865bc5" category="list-text">编辑新面板、在右侧、您将看到一条带有"迁移"按钮的迁移消息。单击按钮、然后单击"应用"按钮。</block>
  <block id="57a8b8008e71c9674e7cceda50fba182" category="image-alt">Grafana编辑面板菜单</block>
  <block id="f810aaf1536bfcba66e5b92d051c04df" category="image-alt">Grafana编辑面板</block>
  <block id="4d3250551177a4d9cd85c16745cc024a" category="list-text">将所有面板安装到位并根据需要进行配置后。单击右上角的磁盘图标以保存信息板、并为您的信息板指定一个名称。</block>
  <block id="6f8b794f3246b0c1e1780bb4d4d5dc53" category="section-title">结论</block>
  <block id="3c381cb8a7d35d21cb305dce81f773fb" category="paragraph">现在、我们推出了一款具有可自定义数据保留和存储容量的Prometheus服务器。这样、我们就可以继续构建自己的信息板、其中包含与我们的运营最相关的指标。您可以获取有关在中收集的Prometheus指标的详细信息<block ref="b4322fd604ba4ce3b6c052facca6761f" category="inline-link-rx"></block>。</block>
  <block id="7045f46ad76322e4dc3af49b0bb57c27" category="list-text">模式9</block>
  <block id="d5b38301ef87d6a23fb50fbf5a064be8" category="list-text">Modzy</block>
  <block id="d48885bf40ed8b15489c6b02ba7daa08" category="list-text">磁盘转换数据</block>
  <block id="d59db7846bd10b6d60d21543df9faa9e" category="list-title">您需要的内容</block>
  <block id="9db3241b54bebb9425e6b4d63d712bb2" category="paragraph-title">预期结果</block>
  <block id="bb1497981ff73cef48984bbf2d12f88d" category="summary">配置Datadog HQ以收集StorageGRID SNMP指标和陷阱。</block>
  <block id="1d93d7550158f858bd468fbde662a33b" category="doc">Datadog SNMP配置</block>
  <block id="eb2afb3c5447bd1a294d03f85bdbf78f" category="paragraph">配置Datadog以收集StorageGRID SNMP指标和陷阱。</block>
  <block id="254e743ae1bb1477fc76b5f265d1b669" category="section-title">配置Datadog</block>
  <block id="8ba5d4dc38f50df01cecfabd149412dd" category="paragraph">Datadog是一种监控解决方案 、可提供指标、可视化和警报功能。以下配置是在StorageGRID 系统本地部署的Ubuntu 22.04.1主机上使用Linux代理版本7.43.1实施的。</block>
  <block id="44719a19440665d12ba92afc2fa7ee3a" category="section-title">从StorageGRID MIB文件生成的数据日志配置文件和陷阱文件</block>
  <block id="af2ae71ceff4ddeec277e30874556f23" category="paragraph">Datadog提供了一种将产品MIB文件转换为映射SNMP消息所需的数据日志参考文件的方法。</block>
  <block id="9555064e7f86713428cb59d575ff3094" category="paragraph">按照找到的说明生成用于数据日志陷阱解析映射的StorageGRID YAML文件<block ref="f343456bb923e7885796647eeadd3d6e" category="inline-link-rx"></block>。+将此文件放在/etc/datadog-agent/conf.d/snmp.d/traps_db/+中</block>
  <block id="75ba4473ac4c25785bc326af04575c33" category="inline-link-macro">下载陷阱YAML文件</block>
  <block id="3e53958fa504c3583e8828bcb2bf3916" category="list-text"><block ref="461124e25f1a3166dde077560e5de2e8" category="inline-link-macro-rx"></block> +</block>
  <block id="f8270aacb253f160ebc0e425a2587b7b" category="list-text">* MD5校验和* 42e27e4210719945a46172b98c379517 +</block>
  <block id="93d38624cd5c44ecfa7169d96b24a075" category="list-text">* SHA256校验和* d0fe5c8e6ca3c902d054f854b70a85f928cb8b7c76391d356f05d2cf73b6887 +</block>
  <block id="92fd2ccb250e828423815a378d8d3826" category="paragraph">此StorageGRID 配置文件YAML文件用于数据日志指标映射、此文件是按照找到的说明生成的<block ref="3045d5a4d00639b5530941114ac5cf83" category="inline-link-rx"></block>。+将此文件放置在/etc/datadog-agent/conf.d/snmp.d/profiles/+中</block>
  <block id="d2dd3c2a17a766ace1b1579f47e2fb56" category="inline-link-macro">下载配置文件YAML文件</block>
  <block id="2cfc11f4b4bdccb2c0363e65e6ef371b" category="list-text"><block ref="170544ba2681432bd143113cc39acf47" category="inline-link-macro-rx"></block> +</block>
  <block id="08a71a3ef2942911802e950874c5f3e5" category="list-text">* MD5校验和* 72bb7784f4801adda4e0c3ea77df19aa +</block>
  <block id="06724753af3a8dde065ac4a183962269" category="list-text">* SHA256校验和* b6b7fadd330 63422a8bb8e39b3ead8ab38349ee0229926eadc8585f0087b8cee +</block>
  <block id="445562a58e90a6652889435ed9ad0c4e" category="section-title">用于衡量指标的SNMP Datadog配置</block>
  <block id="d06e2ca98a9d51ff9586ddb7e12ca3ca" category="paragraph">可以通过两种方式管理为指标配置SNMP。您可以通过提供包含StorageGRID 系统的网络地址范围来配置自动发现、也可以定义各个设备的IP。根据所做的决定、配置位置会有所不同。自动发现在数据日志代理YAML文件中定义。在SNMP配置YAML文件中配置显式设备定义。以下是同一StorageGRID 系统中的每个示例。</block>
  <block id="b5fac60116712074e4581a0451a7d934" category="section-title">自动发现</block>
  <block id="aa456ba5b2a0193fe062645b5f7e8d06" category="paragraph">配置位于/etc/datadog-agent/datadog.yaml中</block>
  <block id="f3fe7f4238c77636cfd3cb9045c1d862" category="section-title">单个设备</block>
  <block id="494f3f84f8f27f7e6a534b587f59eb86" category="paragraph">/etc/datadog-agent/conf.d/snmp.d/conf.yaml</block>
  <block id="8ee614ce7a2c762cd130b8e12208891f" category="section-title">陷阱的SNMP配置</block>
  <block id="d22624c97bdf44f40377df61b6463bc6" category="paragraph">SNMP陷阱的配置在datadog配置yaml文件/etc/datadog-agent/datadog.yaml中定义</block>
  <block id="629386ff1e9bf6511474fca8de181896" category="section-title">StorageGRID SNMP配置示例</block>
  <block id="2a9f8de2dc701df774b911de893f1dcc" category="paragraph">StorageGRID 系统中的SNMP代理位于配置选项卡的监控列下。启用SNMP并输入所需信息。如果要配置陷阱、请选择"陷阱目标"并为包含陷阱配置的Datadog代理主机创建一个目标。</block>
  <block id="3bcc2a20e293e30e57142a6f40a3f3b9" category="image-alt">StorageGRID SNMP配置</block>
  <block id="db5cf800912823f17ae08432336e8fc1" category="summary">如何使用端口重新映射。</block>
  <block id="acaf7e6854a9128b9491ba362d72abd1" category="doc">如何使用端口重新映射</block>
  <block id="f58678d019bf671b6804715b8a92be9f" category="paragraph">由于多种原因、您可能需要重新映射传入或出站端口。您可以从原有的CLB负载平衡器服务迁移到当前的nginx服务负载平衡器端点、并保持相同的端口以减少对客户端的影响、或者希望在管理节点客户端网络上为客户端S3使用端口443、或者设置防火墙限制。</block>
  <block id="4a0a1689981e56bfe0cae3cedb6a2794" category="section-title">通过端口重新映射将S3客户端从CLB迁移到NGINX</block>
  <block id="bbaaf9c22d5e2039997011dbc346f453" category="paragraph">在StorageGRID 11.3之前的版本中、网关节点上包含的负载平衡器服务是连接负载平衡器(CLB)。在StorageGRID 11.3中、NetApp引入了NGINX服务、作为功能丰富的集成解决方案 、用于平衡HTTP流量的负载。由于CLB服务在当前版本的StorageGRID 中仍然可用、因此您不能在新的负载平衡器端点配置中重复使用端口8082。要解决此问题、8082入站端口将重新映射到10443。这样、传入网关端口8082的所有HTTPS请求都会重定向到端口10443、从而绕过CLB服务、而是连接到NGINX服务。尽管以下说明适用于VMware、但所有安装方法都具有port_remap功能、您可以对裸机部署和设备使用类似的过程。</block>
  <block id="7726cb4ae51497b918d06ab5c00bcc41" category="section-title">VMware虚拟机网关节点部署</block>
  <block id="32c57c85de9742d548e025b40fcb450b" category="paragraph">以下步骤适用于使用StorageGRID 开放式虚拟化格式(OVF)在VMware vSphere 7中将网关节点部署为VM的StorageGRID 部署。此过程需要删除虚拟机并使用相同名称和配置重新部署虚拟机。在启动VM之前、请更改vApp属性以重新映射端口、然后启动VM并按照节点恢复过程进行操作。</block>
  <block id="7c8213913912043a5b5fc24ca449cb0c" category="list-text">您正在运行StorageGRID 11.3或更高版本</block>
  <block id="c502d2640b4493815312b1ec133633e4" category="list-text">您已下载并有权访问已安装的StorageGRID 版本VMware安装文件。</block>
  <block id="9c64cd89435575e44f429843d544ef5f" category="list-text">您拥有一个vCenter帐户、该帐户有权打开/关闭VM、更改VM和vApp的设置、从vCenter中删除VM以及通过OVF部署VM。</block>
  <block id="8815fdf6ff2c55e7296dffb2aec14521" category="list-text">您已创建负载平衡器端点</block>
  <block id="a66196ce653d06d45221584bf8852afb" category="list-text">此端口已配置为所需的重定向端口</block>
  <block id="31d78e3c03fd7966ea974e218ee9e7e0" category="list-text">端点SSL证书与在配置/服务器证书/对象存储API服务端点服务器证书中为CLB服务安装的证书相同、或者客户端可以接受证书更改。</block>
  <block id="bcb202433930795c39aeaaaac1732e14" category="section-title">销毁第一个网关节点</block>
  <block id="8b492c89f3e9eadb813da7cd99b82545" category="paragraph">要销毁第一个网关节点、请执行以下步骤：</block>
  <block id="9088243625c17cecb6cc9cbb8fab3cdb" category="list-text">如果网格包含多个、请选择要从其开始的网关节点。</block>
  <block id="f578499a6a5d4e99e51260ea6f901c94" category="list-text">如果适用、从所有DNS轮循实体或负载平衡器池中删除节点IP。</block>
  <block id="7c756592f17f71e15e66ceae005b5721" category="list-text">等待生存时间(TTL)并打开会话过期。</block>
  <block id="5c2e6ff175e76bb9e990068801b548a8" category="list-text">关闭VM节点。</block>
  <block id="478ceb19860ae182e1eebf6d11e90791" category="list-text">从磁盘中删除VM节点。</block>
  <block id="e753b6d0c296afcb396f7c9d7092ef0b" category="section-title">部署替代网关节点</block>
  <block id="e9bdcbe25d437987ed75a39aadaaecae" category="paragraph">要部署替代网关节点、请执行以下步骤：</block>
  <block id="f02589424168a3ac3057a3a896c3be98" category="list-text">从OVF部署新虚拟机、从从从支持站点下载的安装包中选择.OVF、.MF和.vmdk文件：</block>
  <block id="7b22456f38890563bcb235553bd7d9ee" category="list-text">vsphere-gateway.mf</block>
  <block id="dbdfc6d64b5d051e203939b63154bddb" category="list-text">vsphere-gateway.OVF</block>
  <block id="67e5f0e53462232f2aa589a464eea4b8" category="list-text">netapp-sg-11.4.0-20200721.1338.d3969b3.vmdk</block>
  <block id="579b803b8e20891c89683e797fdbd01f" category="list-text">部署虚拟机后、从虚拟机列表中选择该虚拟机、然后选择配置选项卡vApp选项。</block>
  <block id="07ab08f304d7cfe4d3d5ea13bbde9f1d" category="inline-image-macro">vApp选项选项卡</block>
  <block id="c9fc6d8e3be4de1d4c27b9f0b82c5e2a" category="list-text">向下滚动到属性部分、然后选择port_remap_inbound属性</block>
  <block id="9e24f5887a5bfec21b66a7a9bf2c2e9e" category="inline-image-macro">端口重新映射入站</block>
  <block id="44149ca1e58524f8537ae00b2d6e4b99" category="list-text">滚动到属性列表顶部、然后单击编辑</block>
  <block id="fb1b9b4a3c929c6a466a1452400315f4" category="inline-image-macro">编辑按钮</block>
  <block id="0e8c86fd50178cb280113dfa414bfaef" category="list-text">选择类型选项卡、确认已选中用户可配置复选框、然后单击保存。</block>
  <block id="71f961422f32dab92bd408435e59e11f" category="inline-image-macro">键入Tab</block>
  <block id="083e7091efe8fb649ee9fb0c0870917c" category="list-text">在"Properties"列表顶部、仍选择了"port_remap_inbound"属性、然后单击"Set value"。</block>
  <block id="58a9fe2002d87ad86a952f2aa06b652f" category="inline-image-macro">设置值按钮</block>
  <block id="7cabe4a6c37ea2ab4c5afff39965feca" category="list-text">在属性值字段中、输入网络(网格、管理员或客户端)、TCP、原始端口(8082)和新端口(10443)、每个值之间均包含"/"、如下所示。</block>
  <block id="c8e309d9efc8bcc3c0a6de4a0a6bde89" category="inline-image-macro">属性值</block>
  <block id="b755dc1994e1391a0aff77ad323c4d58" category="list-text">如果使用多个网络、请使用逗号(、)分隔网络字符串、例如GRIDE/TCP/8082/10443、admin/TCP/8082/10443、client/TCP/8082/10443</block>
  <block id="a053ed3549ecf3e6087e7328aeace847" category="section-title">恢复网关节点</block>
  <block id="0e495d4bce7b9fde6238de8cfff28959" category="paragraph">要恢复网关节点、请执行以下步骤：</block>
  <block id="7679db7e2b0055ab46be43f42a01bf23" category="list-text">导航到网格管理UI的维护/恢复部分。</block>
  <block id="e46a0719f8df97ff4d12f03dd8ce959c" category="inline-image-macro">维护菜单</block>
  <block id="c086be1149c183dc763a11cf3ad5faea" category="list-text">打开VM节点的电源、并等待此节点显示在网格管理UI的维护/恢复待定节点部分中。</block>
  <block id="b91ce83799a5a14738726ef1b7dbd9f7" category="inline-image-macro">恢复待定</block>
  <block id="bf30086dfd38bd897ca450b6573d0874" category="list-text">恢复节点后、如果适用、可以将此IP包括在所有DNS轮循实体或负载平衡器池中。</block>
  <block id="6b6336923a8b76c43c7d0a3bd89a11ce" category="paragraph">现在、端口8082上的任何HTTPS会话都会转到端口10443</block>
  <block id="eca02f566d0b3032cdf4b10c546bf899" category="section-title">重新映射端口443、以便在管理节点上进行客户端S3访问</block>
  <block id="5ed2b115742b0eff3aa61d09c627a761" category="paragraph">StorageGRID 系统中管理节点或包含管理节点的HA组的默认配置是、为管理和租户管理器UI保留端口443和80、并且不能用于负载平衡器端点。要执行此操作、解决方案 将使用端口重新映射功能并将入站端口443重定向到将配置为负载平衡器端点的新端口。完成后的客户端S3流量将能够使用端口443后、网格管理UI将只能通过端口8443访问、租户管理UI将只能通过端口9443访问。重新映射端口功能只能在节点安装时进行配置。要对网格中的活动节点实施端口重新映射、必须将其重置为预安装状态。这是一个具有破坏性的操作步骤 、在进行配置更改后会进行节点恢复。</block>
  <block id="18c1a696eb608448df297bede4857b98" category="section-title">备份日志和数据库</block>
  <block id="014c03da469f3067ccc3ff9bebacc715" category="paragraph">管理节点包含审核日志、Prometheus指标以及有关属性、警报和警报的历史信息。拥有多个管理节点意味着您拥有此数据的多个副本。如果您的网格中没有多个管理节点、则应确保保留此数据、以便在此过程结束时恢复此节点后进行还原。如果网格中还有其他管理节点、则可以在恢复过程中从该节点复制数据。如果网格中没有其他管理节点、则可以按照以下说明复制数据、然后再销毁此节点。</block>
  <block id="b51ed4bc19034de7a115af8950bb1e14" category="section-title">复制审核日志</block>
  <block id="b49d416c5f1ef8021854b13b24ab8093" category="list-text">登录到管理节点：</block>
  <block id="c7aa9be1c8fd37c075edba3a4073253f" category="list-text">输入以下命令：<block ref="893fbdaf85496f428ec5ee3fb396b601" prefix=" " category="inline-code"></block></block>
  <block id="700a38780f22dd0bcf544970e8d449e6" category="list-text">输入中列出的密码<block ref="28325afa13c532a62489ef0d7bee3061" prefix=" " category="inline-code"></block> 文件</block>
  <block id="aacfb09e5ff36425a74a452ef6b304fb" category="list-text">输入以下命令切换到root：<block ref="305eb7199fe9189e006b2d60d7221664" prefix=" " category="inline-code"></block></block>
  <block id="d5ed36cf573fac8e8c5a8bb8d1be3d4b" category="list-text">将 SSH 专用密钥添加到 SSH 代理。输入 ...<block ref="3f7bb7914b751ca9467e926e5ad5c306" prefix=" " category="inline-code"></block></block>
  <block id="c0e5dff85f9da9a642946e884fdc4f4a" category="list-text">输入中列出的SSH访问密码<block ref="28325afa13c532a62489ef0d7bee3061" prefix=" " category="inline-code"></block> 文件</block>
  <block id="28a6869f1b6015dcee0791c0407f14b2" category="list-text">创建目录以将所有审核日志文件复制到单独网格节点上的临时位置。使用_storage_node_01_：</block>
  <block id="0a61743bb33ab598f7fde50d348546b0" category="list-text"><block ref="70a89925f7bd7f97d974d84f8e94caec" prefix="" category="inline-code"></block></block>
  <block id="a42ba8884ec16cd9952837d8ec5309cc" category="list-text"><block ref="aa394b245c0bf48947593a677f05d8d6" prefix="" category="inline-code"></block></block>
  <block id="e1083ceccf1ce237984866a9d2fc9267" category="list-text">返回管理节点、停止AMS服务以防止其创建新的日志文件：<block ref="7746f9f32013186f9d484d9201f0ab64" prefix=" " category="inline-code"></block></block>
  <block id="8acc534ecf057b9ef50d01827f7d07cb" category="list-text">重命名 audit.log 文件，使其在复制到已恢复的管理节点时不会覆盖现有文件。</block>
  <block id="f2d95467df0c137dbcfd23af2c4ac061" category="list-text">将 audit.log 重命名为唯一编号的文件名，例如 yyyy-mm-dd.txt.1 。例如、您可以将审核日志文件重命名为2015-10-25.txt</block>
  <block id="d5ec7f781f03902f72576ed5d4973025" category="list-text">重新启动AMS服务：<block ref="ae8918f1e1a4da1db2bc24c7571b1a06" prefix=" " category="inline-code"></block></block>
  <block id="540fe4d620139f77d8a99273336086b6" category="list-text">复制所有审核日志文件：<block ref="da5b29edacd9088471c331eb4f58fc3e" prefix=" " category="inline-code"></block></block>
  <block id="9f195229ea460e36d2a4e12c22a35e14" category="section-title">复制Prometheus数据</block>
  <block id="cc670fc4a71e44ccb42fd7b0de6174d0" category="admonition">复制 Prometheus 数据库可能需要一个小时或更长时间。在管理节点上停止服务时、某些Grid Manager功能将不可用。</block>
  <block id="7310684c8dcbbfaabdf20201a8358cd2" category="list-text">创建目录以将Prometheus数据复制到单独网格节点上的临时位置、我们将再次使用_storage_node_01_：</block>
  <block id="0da0fdfdce25fb3258c8606dd3c98a96" category="list-text">登录到存储节点：</block>
  <block id="e3e3892db3fe841f9e2b77b7e3818040" category="list-text">输入以下命令：<block ref="70a89925f7bd7f97d974d84f8e94caec" prefix=" " category="inline-code"></block></block>
  <block id="f81680a45409f9d92d776cda7d01fffd" category="list-text">mkdir -p /var/local/tmp/Prometheus`</block>
  <block id="94975e4b13e4b0a18c40a960c94db2a8" category="list-text">输入以下命令：<block ref="aeb11d865bcf0a27bb503f64cd61cb76" prefix=" " category="inline-code"></block></block>
  <block id="20d93dfee3e8f8ae30d5b9a4f8efa05b" category="list-text">从管理节点中、停止Prometheus服务：<block ref="b9b286406d96941553a3bebbe76c28bd" prefix=" " category="inline-code"></block></block>
  <block id="d12ee7875165dfef46eee53bc35da76b" category="list-text">将Prometheus数据库从源管理节点复制到存储节点备份位置节点：<block ref="598c3ef030113ed40ad1803686162013" prefix=" " category="inline-code"></block></block>
  <block id="1ed2f8c537da823e46ad98b460d5d692" category="list-text">在源管理节点上重新启动Prometheus服务<block ref="b48ed4a1625d38512cd50d69778280dd" prefix="." category="inline-code"></block></block>
  <block id="ad9f13c5d36c9f45b4e07d4467312b13" category="section-title">备份历史信息</block>
  <block id="40df7a99a836d18d1b5d034d8fcb27a8" category="paragraph">历史信息存储在mysql数据库中。要转储数据库的副本、您需要NetApp提供的用户和密码。如果网格中有另一个管理节点、则无需执行此步骤、在恢复过程中、可以从其余管理节点克隆数据库。</block>
  <block id="3efbc9cf8ba869958267ac5011fe55e1" category="list-text">停止管理节点上的StorageGRID 服务并启动NTP和mysql</block>
  <block id="71c1a198ee24c736ef0a4a6df4372089" category="list-text">停止所有服务：<block ref="e83661e5ce1c75f30a71cf8416b27985" prefix=" " category="inline-code"></block></block>
  <block id="02330fc2569188fc76ebc99072cff940" category="list-text">重新启动NTP服务：<block ref="4c55c6ee391e66baa62612dc411cec8f" prefix=" " category="inline-code"></block>..restart mysql服务：<block ref="3cc0f2d0774d9775766d87414c4abca7" prefix=" " category="inline-code"></block></block>
  <block id="3a690a8e59bdafa2a85ce89baf8e5d01" category="list-text">将mi数据库转储到/var/local/tmp</block>
  <block id="bde616ae3c777920f0bcc1ed12db00d5" category="list-text">输入以下命令：<block ref="6d6e7f126bda96413a8f3ea19ac835d3" prefix=" " category="inline-code"></block></block>
  <block id="199d0f3fb4293bac252ec8967ddd7d96" category="list-text">将mysql转储文件复制到备用节点、我们将使用_storage_node_01：<block ref="a2fc9066a3870628039495b25ae9a581" prefix=" " category="inline-code"></block></block>
  <block id="771556d7cb27e2cb35e5f32feb21d918" category="list-text">如果不再需要对其他服务器进行无密码访问，请从 SSH 代理中删除私钥。输入 ...<block ref="967573583b668b75c5fc1ee963c90dcf" prefix=" " category="inline-code"></block></block>
  <block id="7d472759bb91ca188e73eca550264098" category="section-title">重建管理节点</block>
  <block id="395778abed17f7247a6f475834cb20b3" category="paragraph">现在、您已获得所有所需数据的备份副本、并将日志记录在网格中的另一个管理节点上或存储在临时位置、现在是时候重置设备了、以便可以配置端口重新映射了。</block>
  <block id="b58725c9e70484536a8104e6968330f9" category="list-text">重置设备会使其恢复到预安装状态、在此状态下、它仅保留主机名、IP和网络配置。所有数据都将丢失、因此我们确保备份任何重要信息。</block>
  <block id="570eece822439c557c87aceefc36c83e" category="list-text">输入以下命令：<block ref="571dba577857f204f77672c0f6ac8adb" prefix=" " category="inline-code"></block></block>
  <block id="994ff1bbb04f124b59b3dd4a433092d0" category="list-text">经过一段时间后、设备将重新启动、您将能够访问节点PGE UI。</block>
  <block id="e0c8d6ece2eaab52ccd3626588818424" category="list-text">浏览到Configure Networking</block>
  <block id="ef4629263d4d3026510ab03b348385aa" category="inline-image-macro">选择重新映射端口</block>
  <block id="1d1860aedee67c6087f6eae17d49c67d" category="list-text">选择所需的网络、协议、方向和端口、然后单击添加规则按钮。</block>
  <block id="914553520d8387b82a2e431e0b5e6fa3" category="admonition">重新映射网格网络上的入站端口443将中断安装和扩展过程。建议不要重新映射网格网络上的端口443。</block>
  <block id="9cf22d7237e8977b5bb6bc54a7354822" category="inline-image-macro">将端口重新映射到网络</block>
  <block id="1b08be650ccd06f880223bd76fffb99f" category="list-text">添加了所需的端口重新映射之一、您可以返回到主页选项卡并单击开始安装按钮。</block>
  <block id="b8891129cb3bcf5e407a67d926f3bd1e" category="inline-link-macro">产品文档</block>
  <block id="15f0a90501b756c24e6d343c84e4078a" category="paragraph">现在、您可以按照中的管理节点恢复过程进行操作 <block ref="c237ceedd52c48d2a2c789bd64cdcbb1" category="inline-link-macro-rx"></block></block>
  <block id="1adf202b129f9e83a673c523cd7da7db" category="section-title">还原数据库和日志</block>
  <block id="2e81f3580bf75e530e45d917ff610977" category="paragraph">现在、管理节点已恢复、您可以还原指标、日志和历史信息。如果网格中还有其他管理节点、请按照执行操作 <block ref="c237ceedd52c48d2a2c789bd64cdcbb1" category="inline-link-macro-rx"></block> 使用_Prometheus-clone-db.sh_和_mi-clone-db.sh_脚本。如果这是您的唯一管理节点、而您选择备份此数据、则可以按照以下步骤还原此信息。</block>
  <block id="2342c57da462f804cdb591ec0ca6ceaa" category="section-title">将审核日志复制回</block>
  <block id="a2a3a502b45fb89ba1d9303936a7e686" category="list-text">将保留的审核日志文件复制到已恢复的管理节点：<block ref="6dcbbb26d45053e5f47d0b73dcecfc94" prefix=" " category="inline-code"></block></block>
  <block id="bb0c9dd565ff22196c9f53b7afafbfe7" category="list-text">为了安全起见，请在验证审核日志是否已成功复制到已恢复的管理节点后，从出现故障的网格节点中删除这些审核日志。</block>
  <block id="189e459b7ed177b1cc4b563548d35288" category="list-text">更新已恢复管理节点上审核日志文件的用户和组设置：<block ref="abee3d65b7b57cee8c94fded57a55207" prefix=" " category="inline-code"></block></block>
  <block id="51e28758f5f753869640ff2adc89a740" category="paragraph">您还必须还原对审核共享的任何已有客户端访问。有关详细信息，请参见有关管理 StorageGRID 的说明。</block>
  <block id="cff2429f8c7d0ffe88a80318e06ad501" category="section-title">还原Prometheus指标</block>
  <block id="eaa4cd36290d05ba867b2ea202a10368" category="list-text">将Prometheus数据库从临时备份位置复制到管理节点：<block ref="718131237ea05acf6992f18ac2f8aedb" prefix=" " category="inline-code"></block></block>
  <block id="35fbd282b6be1c639d18dbbfee5a515a" category="list-text">验证数据是否位于正确路径中且完整<block ref="a6e471816e977d8c8b3ad6e50bb665a7" prefix=" " category="inline-code"></block></block>
  <block id="95851e41012b92671405610713f9be07" category="section-title">还原历史信息</block>
  <block id="2e3176cf0ca0cad27315d04ff4f1f330" category="list-text">从备用节点复制mysql转储文件：<block ref="6fea65c037f881565c5d3978a7621ab1" prefix=" " category="inline-code"></block></block>
  <block id="5d6b7577e78ea8622551d7d8b594739f" category="list-text">丢弃mi数据库并创建新的空数据库：<block ref="3fd0ac1b867547f517ff52c8a34404b7" prefix=" " category="inline-code"></block></block>
  <block id="04f7cb6c96995efd4544d9aea7d367e7" category="list-text">从数据库转储还原mysql数据库：<block ref="f974d0852a2926a4c22e84a291796005" prefix=" " category="inline-code"></block></block>
  <block id="791d173d918d01c3efa10c1659c765b6" category="list-text">重新启动所有其他服务<block ref="a43fd6d3adcec2efeeccefc813e98004" prefix=" " category="inline-code"></block></block>
  <block id="62cd2922fb38a43eb8ae93c468da88ca" category="summary">节点克隆性能和最佳实践。</block>
  <block id="747e53224e14f8ffd8f420441eeacdfb" category="doc">节点克隆</block>
  <block id="39d1cd38bd99e33fd79bc582303ae95b" category="paragraph">节点克隆注意事项和性能。</block>
  <block id="fe01737f428d9c9f4d4b2b11bac8f0ac" category="section-title">节点克隆注意事项</block>
  <block id="fd9609261971e45a6f20f4eef4e556ec" category="paragraph">节点克隆可以更快地替换现有设备节点、以便进行技术更新、增加容量或提高StorageGRID 系统的性能。节点克隆对于使用KMS转换为节点加密或将存储节点从DDP8更改为DDP16也很有用。</block>
  <block id="801e380cd60cbc46ace287ac94d8df7f" category="list-text">源节点的已用容量与完成克隆过程所需的时间无关。节点克隆是节点的完整副本、包括节点中的可用空间。</block>
  <block id="6551b5fd023b8131e66c5c1d8fa14218" category="list-text">源设备和目标设备必须处于同一PGE版本</block>
  <block id="0b3c750dc36564d8a9d0f002d6abbb31" category="list-text">目标节点的容量必须始终大于源节点的容量</block>
  <block id="aac6d98bf2c7ac3800b9172fc2a67404" category="list-text">确保新目标设备的驱动器大小大于源设备</block>
  <block id="eeb6a1581fc15133d1c3602cc34fd461" category="list-text">如果目标设备具有相同大小的驱动器、并且已为DDP8配置驱动器、则可以为DDP16配置目标。如果已为源配置了DDP16、则无法执行节点克隆。</block>
  <block id="639a958d74ef218710689b55aa4ef73e" category="list-text">从SG5660或SG5760设备迁移到SG6060设备时、请注意SG5x60具有60个容量驱动器、而SG6060只有58个容量驱动器。</block>
  <block id="4d1c46cee1bdcec65653b2e2163398e0" category="list-text">节点克隆过程要求源节点在克隆过程中与网格脱机。如果在此期间另一个节点脱机、则客户端服务可能会受到影响。</block>
  <block id="83d1a0f23bb258b2a270a1d6f7ff51d7" category="list-text">存储节点只能脱机15天。如果克隆过程估计接近15天或将超过15天、请使用扩展和停用过程。</block>
  <block id="fec00ca7ab315b679cc642c66a770bd8" category="section-title">估计节点克隆性能</block>
  <block id="517e3359377bb6a7ea9488482299838f" category="paragraph">下表包含节点克隆持续时间的计算估计值。条件会有所不同、因此、如果节点关闭、*粗体*中的条目可能会超过15天的限制。</block>
  <block id="39ab52e8aaafa95380d3f56ccd8095d9" category="section-title">DDP8.</block>
  <block id="bb4e622c7d3edd2670cd4402fda0dfce" category="section-title">SG5612 -&gt;任何</block>
  <block id="a88a341631b814f619579143455d7353" category="cell">网络接口速度</block>
  <block id="690f7bdfae387972bf437193506dbb33" category="cell">4 TB驱动器大小</block>
  <block id="a6994b6b2103b87f98052b644780d5a0" category="cell">8 TB驱动器大小</block>
  <block id="7d409920d4d29e64eca4583c4c9878e4" category="cell">10 TB驱动器大小</block>
  <block id="53a214e589c7b00227e50e2e4652edf7" category="cell">12 TB驱动器大小</block>
  <block id="315ee247762dbc69dfb6d29e7839c677" category="cell">16 TB驱动器大小</block>
  <block id="961dc732adc5c5176ec88ea3d066b357" category="cell">18 TB驱动器大小</block>
  <block id="4ac1352d5b927390a1b2f14dac0647d9" category="paragraph">10 Gb</block>
  <block id="0d730df753ae6a369323fe6dc1641eb2" category="paragraph">1 天</block>
  <block id="2b5c88bc8c875f79745514e9af2f348f" category="paragraph">2天</block>
  <block id="0f9222aa150538e6d20d3870ea6dec57" category="paragraph">2.5天</block>
  <block id="14cad5137a2254d53fde198d52e70109" category="paragraph">3天</block>
  <block id="6c32f983ee38ad5089298aa659cd011c" category="paragraph">4天</block>
  <block id="a5dffc518be58d2936a993ee100d71b6" category="paragraph">4.5天</block>
  <block id="e5d3435cf14793a49310fa8d85bcc4a1" category="paragraph">25 GB</block>
  <block id="9958432b6417f293cb0d15128b08e42f" category="paragraph">3天</block>
  <block id="366adabd6f1babc8138db3063adaf869" category="paragraph">6天</block>
  <block id="374616a0b786e9bffadc7f28e68d6c59" category="paragraph">7 天</block>
  <block id="51ab732b98b519b5e54ce60864cc8d69" category="paragraph">8.5天</block>
  <block id="b00a84012a03b35beb30466d8baa4a1c" category="paragraph">11.5天</block>
  <block id="194ae66ddb8567ab63da3b82c925fa03" category="paragraph">* 13天*</block>
  <block id="61cab577ce1bed82e1b5d7caacb7456b" category="paragraph">2.5天</block>
  <block id="bf30897fe2ce34b7e9f89291e20d9eae" category="paragraph">5.5天</block>
  <block id="e5fd76b3288061d2c2638ccc41688416" category="paragraph">6.5天</block>
  <block id="281f41b6564c9e63e16d67b1c07a46e5" category="paragraph">9天</block>
  <block id="38efedfd69ad005a6e0b0393682636db" category="paragraph">10天</block>
  <block id="e727fed489e8b7eecf1901196ec3ede9" category="paragraph">2天</block>
  <block id="6383598717ae8ac458dc988dff77c800" category="paragraph">5天</block>
  <block id="79e241fd6b320cbb41d67b028ec6f1c0" category="paragraph">8天</block>
  <block id="2a8a1b5738432b51afcd4dcbbbfe1434" category="paragraph">1.5天</block>
  <block id="9e6b8df1cd23e71938af979057e5144a" category="paragraph">3.5天</block>
  <block id="7da42b5478786d91e64cb31ec52e2511" category="paragraph">9.5天</block>
  <block id="d2bfdb3de60e1c2f154e5f9fa5a1dfc1" category="section-title">DDP16</block>
  <block id="00471150fc4d84adcd57392d7a47a3cb" category="paragraph">3.5天</block>
  <block id="85ba217056d3540506dc11016ec224e3" category="paragraph">12：5天</block>
  <block id="69a1b13f0c02f82aace898a3521485c7" category="paragraph">* 14天*</block>
  <block id="383aea8468a529b339b755e27b1d4668" category="paragraph">7.5天</block>
  <block id="9ff416b798a88ec4bfb30f4f045aada5" category="paragraph">11天</block>
  <block id="ed01ec12331788a408398b059da47a39" category="paragraph">10.5天</block>
  <block id="fc1e2d26b4330f83ecfffe3439410229" category="summary">以下是存储分段策略和组策略(IAM策略)的示例。</block>
  <block id="3f2327c90ede247dca9387ef500bf746" category="doc">分段和组(IAM)策略示例</block>
  <block id="640ca9533a2fd150e7d3ed390e2aae66" category="section-title">组策略(IAM)</block>
  <block id="06c73db3763c74cabb8ece8e96fe7c5d" category="section-title">主目录模式的存储分段访问</block>
  <block id="8569c05df75ec9b148a67ed5998ad8b0" category="section-title">拒绝创建对象锁定分段</block>
  <block id="01a232853896677ed5b2f61bbd35128f" category="paragraph">此策略不会在StorageGRID UI中强制实施、而是仅通过S3 API强制实施。</block>
  <block id="6d16e4029056ceaf0b44cac8903e3f2e" category="section-title">将存储分段限制为具有只读访问权限的单个用户</block>
  <block id="c49b1c74a2176733b070d19773700eb6" category="paragraph">此策略允许单个用户对某个存储分段拥有只读访问权限、并明确授予所有其他用户的访问权限。将deny语句分组在策略顶部是一种较好的做法、可以加快评估速度。</block>
  <block id="a6bea44dd82287d3b479cc898439fad9" category="sidebar">节点克隆注意事项和性能</block>
  <block id="e5b8a0443d27d612e7426f6f3f8681c2" category="sidebar">配置Datadog以收集StorageGRID SNMP指标和陷阱</block>
  <block id="45c8288f990abd9a185e596536152688" category="sidebar">存储分段和组策略示例</block>
  <block id="38d38399d4a7514463d665125ae50a4a" category="list-text">Rubrik CDM</block>
  <block id="5edf8edbb4c16aa5184e63b04c0b8b6d" category="summary">rclone是一种用于S3操作的免费命令行工具和客户端。您可以使用rclone迁移、复制和删除StorageGRID 上的对象数据。</block>
  <block id="16bf3dc54feeb86e32811292a7567606" category="doc">使用rclone在StorageGRID 上迁移、放置和删除对象</block>
  <block id="8fc8ce37b13be17581bdf9362c7e50b2" category="paragraph">rclone是一种用于S3操作的免费命令行工具和客户端。您可以使用rclone迁移、复制和删除StorageGRID 上的对象数据。rclone可以删除存储分段、即使不是空存储分段也可以使用"清除"功能、如以下示例所示。</block>
  <block id="9f164cf2b6160300227f2205a159f653" category="section-title">安装和配置rclone</block>
  <block id="15b28fa90c8a5a6ac00ece9ba66eeae6" category="inline-link">rclone.org</block>
  <block id="e83083612c8ddf007cb8caa33418827b" category="paragraph">要在工作站或服务器上安装rclone、请从下载它<block ref="f0acc0ee887aaa2a5d3243b99ef89c61" category="inline-link-rx"></block>。</block>
  <block id="56a18c9d4a7f18e1748b0b69c29deb32" category="list-text">通过运行配置脚本或手动创建文件来创建rclone配置文件。</block>
  <block id="f7462963c38129d77cfe3f6482e69de5" category="list-text">在此示例中、我将使用sgdemo作为rclone配置中远程StorageGRID S3端点的名称。</block>
  <block id="eabd5709e5b0a4a9d5b54bf22cc44a50" category="list-text">创建配置文件~/.config/rclone/rclone.conf</block>
  <block id="f9a8162b486acb9702379c8e1fa2a1f1" category="list-text">运行rclone config</block>
  <block id="9eb33c118fbc9b4c4465a458a895e11d" category="paragraph">rclone配置#</block>
  <block id="ed6ca4624754adaba54d04ef934028aa" category="paragraph"><block ref="8849f02c854fae4e8db3cf982392a463" prefix="" category="inline-code"></block></block>
  <block id="3662b82ef530ede2dfc89054b3f90228" category="paragraph"># rclone mkdir sgdemo：test01</block>
  <block id="cc478f70507e2845eea7acda5a1e3d97" category="paragraph"><block ref="7a0a2cc47bc2173797cdca07f7ce7961" prefix="" category="inline-code"></block></block>
  <block id="3a47448ae40f440185114cee74d9ad57" category="paragraph">rclone LSD sgdemo数：</block>
  <block id="a6a1ec9ef284232329c60761299d92b5" category="paragraph"><block ref="1bb219672476df0c884127cb2c99b435" prefix="" category="inline-code"></block></block>
  <block id="f8ff419b27823d5e2f47e43e8458a894" category="paragraph">rclone ls sgdemo：test01</block>
  <block id="44f95cde094c17535e0677a82c170389" category="paragraph"><block ref="6f8e32b86b6495270f34c94d9c40c06d" prefix="" category="inline-code"></block></block>
  <block id="5f8540d79fcfda7fc5196af98412ea5a" category="paragraph"># rclone rmdir sgdemo：test02</block>
  <block id="7bf6bd33aa865e09d1071eac105d8241" category="paragraph"><block ref="9c36dc683788536ec38b4b18c4e890e7" prefix="" category="inline-code"></block></block>
  <block id="61c9919165544448974ab4891cb075a9" category="paragraph">rclone copy ~/test/testfile.txt sgdemo：test01</block>
  <block id="cf36fafa2a4e0a666be5d8360acec986" category="paragraph"><block ref="07bb309a38b585baf017ce2b3d19bc16" prefix="" category="inline-code"></block></block>
  <block id="5cdf35bb0354469c88ad0680d436f795" category="paragraph"># rclone copy sgdemo：test01/testfile.txt ~/test/testfileS3.txt</block>
  <block id="41b29af0a6bf603a1a7df4ea6a955d8e" category="paragraph"><block ref="5229133c5a5c9056642e7d6c5d6826a6" prefix="" category="inline-code"></block></block>
  <block id="5bae69b23fa6eb68365a36ca366ba1aa" category="paragraph">rclone delete sgdemo：test01/testfile.txt</block>
  <block id="309340b8067ede7973b30ece050cea91" category="list-text">*迁移存储分段中的对象*</block>
  <block id="2a35c17ff4e55ac345ceb8bc98b49b1a" category="paragraph"><block ref="1dc031f75fc4e35b4388fe4839ea5101" prefix="" category="inline-code"></block></block>
  <block id="7c0bd198fb63fdb5d33f8d9b496bce9e" category="paragraph"><block ref="9904a5fb593cfab861d8aa8dc92c3e01" prefix="" category="inline-code"></block></block>
  <block id="e75cf8210a46a9e080f01c2646f4cbd1" category="paragraph">rclone sync sgdemo：test01 sgdemo：clone01—-progress</block>
  <block id="b057c2361d5d0aef24339e9af0a0721d" category="admonition">使用-progress或-P显示任务的进度。否则、不会显示任何输出。</block>
  <block id="962d558c72bf1abd2cc8b9e5afeb68a3" category="list-text">*删除分段和所有对象内容*</block>
  <block id="7e5b74d29f73a6689f5cd32f8ae54eb5" category="paragraph"><block ref="f86e9aa25395ad4bf2f0b9bc89f29ea1" prefix="" category="inline-code"></block></block>
  <block id="5773479209c86b5b3661ca194636b3ba" category="paragraph"># rclone purge sgdemo：test01 -progress</block>
  <block id="2cb17b2342827cbd786d4c1f770e1500" category="summary">您可以在此处找到一些NetApp StorageGRID 博客。</block>
  <block id="83ebfab760fb0afe2d53222522d9d7d0" category="doc">NetApp StorageGRID 博客</block>
  <block id="cef804ce13ad4c50f8e67f920713d8e1" category="paragraph">您可以在此处找到一些很棒的NetApp StorageGRID 博客：</block>
  <block id="47616b8bc2ca38cd93158370f35f1fb1" category="inline-link">StorageGRID 和ONTAP S3支持：差异、相似之处和集成</block>
  <block id="4624650819454e10f32e020046bb76ae" category="inline-link">如何在符合3：2：1的架构中使用一个命令备份Epic Systems EHR数据库</block>
  <block id="95a83699f1df2afc6db5cefab9b1faea" category="inline-link">请采用这些指标并绘制图表</block>
  <block id="e53ca4cf41c016e5c7bcc4ddd097afa4" category="inline-link">将StorageGRID 与开源ELK堆栈相集成以增强客户体验</block>
  <block id="4597c6456c903b0438172862b21e44a3" category="inline-link">适用于采用StorageGRID 的Amazon S3 alpha版本的挂载点</block>
  <block id="090d6d22cbcf3abf1c59e0bbfa33247e" category="inline-link">NetApp StorageGRID 获得通用标准安全认证</block>
  <block id="179a10301fc37bd566b117df96c0cf5a" category="inline-link">StorageGRID 获得KPMG合规认证</block>
  <block id="2ed8ae3807508906882c40f16d022099" category="inline-link">StorageGRID 续订了NF203和ISO/IEC 25051合规性认证</block>
  <block id="2ed6d70b5e2da609ab0189205d91bfdf" category="inline-link">适用于服务提供商的NetApp StorageGRID</block>
  <block id="6cbbedbe1a7c21e39c47b4f1a82a163f" category="inline-link">NetApp Cloud Insights 增加了StorageGRID 库信息板</block>
  <block id="19c82d20138dc6c19a1867bb09242586" category="inline-link">借助NetApp和Alluio打造现代化的分析工作负载</block>
  <block id="75b3da38185f43fa45f8c192cf70fee6" category="inline-link">所有操作都从对象锁定…开始 为关键备份应用程序构建S3存储生态系统</block>
  <block id="17691c35f7a924dab178837550e01894" category="inline-link">在StorageGRID 上构建数据湖</block>
  <block id="af9f1a77fa9bd1ac998aca9149105fc2" category="inline-link">适用于StorageGRID 的DataLock和勒索软件保护支持</block>
  <block id="b7eaf149486b5f672a67a1b9225ffdf1" category="inline-link">在StorageGRID for Snowfl您 的数据上除以数据</block>
  <block id="49cef513124e46e406c7202a3021a460" category="inline-link">利用由NetApp和Modzy提供支持的MLOps实现可解释的人工智能</block>
  <block id="d75270f11a8c4b0a352ba60a70b2e51e" category="inline-link">巧克力、滑板、表和大型机有哪些共同之处？</block>
  <block id="bda9db150ef3470445a403dda26b131c" category="admonition">如果需要忽略SSL证书、请使用-no-check-certificate。</block>
  <block id="47edbb9e6d6e6e874eb40c274a0e2e0f" category="sidebar">博客文章</block>
  <block id="3e786c26b331e7dd273f5cb3ee10f59e" category="sidebar">StorageGRID 博客</block>
  <block id="85037d90107af2b45fca2bb43a9f291e" category="summary">第三方解决方案已通过StorageGRID 11.7的验证</block>
  <block id="b46c07776ecb7ae8067bc1552a439f7b" category="doc">StorageGRID 11.7经验证的第三方解决方案</block>
  <block id="9480cbe24fa04a10e30355eb0f12d82c" category="sidebar">StorageGRID 11.7</block>
  <block id="89188812a26ecaeff35e35d0bffb0d62" category="paragraph">以下第三方解决方案已通过验证、可用于StorageGRID 11.7。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="08a9313727f7bbd910b58b7b474eefdf" category="list-text">Bridgestor</block>
  <block id="40ae64b68c5b0e0ae599d76815332612" category="section-title">StorageGRID支持的第三方解决方案</block>
  <block id="27ef9f8b4c2764f7579e12a741210f85" category="paragraph">这些解决方案已经过测试。</block>
  <block id="6e9c68d7409676ad81189c7ef5822c3a" category="list-text">存档软件</block>
  <block id="5d1891a5c99631f59c0a8f3b32a1e1cf" category="list-text">轴通讯</block>
  <block id="ef0aa57a38184a5667aa748dc4019df0" category="list-text">Congruity360</block>
  <block id="670d48cd026746c6ce7a8b00a2c83978" category="list-text">数据框架</block>
  <block id="3c5839fdf2b2c6a2442cfa6e74bfe0f2" category="list-text">EcoDigital DIIVA平台</block>
  <block id="6791faed97260b2919c3417535378ee0" category="list-text">Encoding.com</block>
  <block id="675085b268143e0ab20d246ddf943b45" category="list-text">GE Centricity企业档案库</block>
  <block id="83b62dfdb6ca9afb88cf0d9d7c17e925" category="list-text">Hyland Acuo</block>
  <block id="3b4c3720fc990485ac26abd2cc00c4cc" category="list-text">IBM Aspera</block>
  <block id="753b802ea6930a7aa61f75097ba1fec9" category="list-text">里程碑系统</block>
  <block id="e67ef9adcaef7f4d9e4a526b051b579a" category="list-text">OnSSI</block>
  <block id="de41187129b3e57753781b3d1b8b9db0" category="list-text">前移发动机</block>
  <block id="7589966aa63e01bf55855dd27c17dfa1" category="list-text">SilverTrak</block>
  <block id="a711a341b646257e8c46098745540d38" category="list-text">SoftNAS</block>
  <block id="2a5e41515ada8ef1147f2dd259b58947" category="list-text">QStar</block>
  <block id="f1ec21951287a8923728f8f362e49ad5" category="list-text">Velasea</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="paragraph">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 徽标和 NetApp 商标页面上列出的标记是 NetApp 、 Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">有关 NetApp 拥有的专利的最新列表，请访问：</block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">开放源代码</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">通知文件提供有关 NetApp 软件中使用的第三方版权和许可证的信息。</block>
  <block id="21b17c7b7d71861473c6337e153ea6ea" category="paragraph"><block ref="21b17c7b7d71861473c6337e153ea6ea" category="inline-link-rx"></block></block>
  <block id="29007b92e2b6688072358d8f25529d24" category="paragraph"><block ref="29007b92e2b6688072358d8f25529d24" category="inline-link-rx"></block></block>
  <block id="d31ba7e4c6f469a6c88f05aac3e0e91c" category="list-text">Datadobi</block>
  <block id="a88f9b6efeacfebaca582083cb9bd819" category="paragraph">此组策略仅允许用户访问名为Users username的分段中的对象。</block>
  <block id="a16b735f7d349dcc23b45a7a101460f3" category="paragraph">此组策略将限制用户创建在存储分段上启用了对象锁定的存储分段。</block>
  <block id="5ccd1d9b602b536952729ea6084688f1" category="section-title">对象锁定保留限制</block>
  <block id="e2fc2c3ef79779a5164b3961924241c1" category="paragraph">此存储分段策略会将对象锁定保留期限限制为10天或更短</block>
  <block id="578c6a63b7f6efe56f08f3f9c3c5a690" category="section-title">按版本ID限制用户删除对象</block>
  <block id="151d6c6a5174c6a3f739cdb8ec8d1ce5" category="paragraph">此组策略将限制用户按版本ID删除受版本控制的对象</block>
  <block id="d5c59b735ec0b06ade2e2d7c842dfe9e" category="paragraph">此存储分段策略将限制用户(由用户ID "56622399308951294926"标识)按版本ID删除版本控制的对象</block>
  <block id="c5d41f2814e9eff276a87d54a833d212" category="list-text">Veeam 12.</block>
  <block id="e7035bb69535d080bffb0dcca26a6ca2" category="list-text">Alluxio</block>
  <block id="e92e6dc9e5e1916ddf769b8a8faf9090" category="list-text">S3a</block>
  <block id="7db8613f85d10f35785a7af8c5fd29df" category="list-text">Trino</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="ddd67082e2bd2747d057fda525754079" category="list-text">光谱逻辑在本机Glacier</block>
  <block id="2a1ac5be963ebd10913d2ddf30f62e47" category="inline-link-macro">NetApp StorageGRID 11.7产品文档</block>
  <block id="14d782d4b4bcaf927ddb317c08f8c416" category="list-text"><block ref="14d782d4b4bcaf927ddb317c08f8c416" category="inline-link-macro-rx"></block></block>
  <block id="85517cd70ba2a2e551e4f0c99c6e56d7" category="summary">本指南重点介绍NetApp StorageGRID以及部分Veeam备份和复制的配置。本白皮书面向熟悉Linux系统并负责维护或实施NetApp StorageGRID系统与Veeam备份和复制的存储和网络管理员。</block>
  <block id="5a80f6f017611133cae300eeb1b8838f" category="doc">使用Veeam备份和复制进行部署的StorageGRID最佳实践</block>
  <block id="3e8343417cb49b5fac72e19c07a7e1b7" category="paragraph">存储管理员希望通过满足可用性、快速恢复目标、可扩展以满足其需求以及自动执行长期数据保留策略的解决方案来管理数据增长。这些解决方案还应提供保护、防止丢失或恶意攻击。Veeam和NetApp合作创建了一个将Veeam备份和恢复与NetApp StorageGRID相结合的数据保护解决方案、用于内部对象存储。</block>
  <block id="cb88016fd6a4561b0ba47d4d2349e01a" category="paragraph">Veeam和NetApp StorageGRID提供了一个易于使用的解决方案、可协同工作、帮助满足全球数据快速增长和法规不断增长的需求。基于云的对象存储因其弹性、扩展能力、运营效率和成本效益而闻名、这使其成为备份目标的自然选择。本文档将为Veeam Backup解决方案和StorageGRID系统的配置提供指导和建议。</block>
  <block id="3f2a8b3ac5243a078416a91ba12f5677" category="paragraph">Veeam的对象工作负载会为小型对象创建大量并发放置、删除和列表操作。启用不可迁移性将增加对对象存储的请求数量、以设置保留和列出版本。备份作业的过程包括为每日更改写入对象、新写入完成后、该作业将根据备份的保留策略删除任何对象。备份作业的计划几乎总是重叠的。这种重叠将导致备份窗口的很大一部分在对象存储上包含50/50的放置/删除工作负载。在Veeam中调整任务插槽设置的并发操作数、通过增加备份作业块大小来增加对象大小、减少多对象删除请求中的对象数量、 选择完成作业的最长时间窗口将优化解决方案的性能和成本。</block>
  <block id="65523be105cf410c8f1a0f9075f3e6f7" category="inline-link">Veeam备份和复制</block>
  <block id="392d70ca39f31f10bd637936769788df" category="inline-link">StorageGRID</block>
  <block id="535647a2a89e3e794f5c415b865cb3b2" category="inline-link">Veeam Ready对象、对象不可变性和存储库</block>
  <block id="35fff1030215641180d446636f07b965" category="paragraph">请务必阅读的产品文档<block ref="011dc6ff3c4a6db4449338299b84c9c4" category="inline-link-rx"></block> 和<block ref="f6f71f61964919c3e794acd51103ea76" category="inline-link-rx"></block> 开始之前。Veeam提供了一些计算器、用于了解Veeam基础架构的规模估算以及在调整StorageGRID 解决方案 规模之前应使用的容量要求。请始终访问Veeam Ready计划网站查看经Veeam-NetApp验证的配置<block ref="27e44db2d47a236831b6854277703ed2" category="inline-link-rx"></block>。</block>
  <block id="2cc1f5cc43ba172ac443ca2cbdcce2b4" category="section-title">Veeam配置</block>
  <block id="8d5d0d535411e895f9d96eda059a901d" category="section-title">建议版本</block>
  <block id="8a30f8c97261f6be55fd4a89233559fc" category="section-title">S3存储库配置</block>
  <block id="6ee286a7db9c406f8c2971e8ec86b74d" category="paragraph">横向扩展备份存储库(SOBR)是S3对象存储的容量层。容量层是主存储库的扩展、可提供更长的数据保留期限和更低的存储解决方案成本。Veeam能够通过S3对象锁定API提供不可变功能。Veeam 12可以在一个横向扩展存储库中使用多个分段。StorageGRID对单个存储分段中的对象数量或容量没有限制。使用多个分段可以提高备份非常大的数据集时的性能、在这些数据集中、对象中的备份数据可能会达到PB级。</block>
  <block id="274d09dbf63a4b2cf6067da7bdccc520" category="section-title">备份作业配置</block>
  <block id="0e71d2971c1d3e37252ab5b94a556ab5" category="paragraph">实施不可配置备份时会使用对象存储上的S3对象锁定。不可更改性选项会生成更多的对象存储请求、以更新对象的列表和保留。</block>
  <block id="f155778379e9bde49e66b15a4cb59aa4" category="cell">设备型号</block>
  <block id="09e895a7d52e3b7e14028a710c859bf4" category="cell">每个节点的S3MultiObjectDeleteLimit</block>
  <block id="d23f070363a51bb19a371740717fb008" category="cell">SG5712</block>
  <block id="e369853df766fa44e1ed0ff613f563bd" category="cell">34.</block>
  <block id="08737855a7278096a93baafac39de5b0" category="cell">SG5760</block>
  <block id="d09bf41544a3365a46c9077ebb5e35c3" category="cell">75</block>
  <block id="c69ff1785c16ab7db216e04b62e5ef4f" category="cell">SG6060</block>
  <block id="3644a684f98ea8fe223c713b77189a77" category="cell">200</block>
  <block id="6c9a4b7548d56934d30ab02a9a13caf2" category="paragraph">请与您的NetApp客户团队合作、根据您的特定需求确定建议的配置。Veeam配置设置建议包括：</block>
  <block id="80fb632117c19ac683023299f721dcad" category="list-text">备份作业块大小= 4 MB</block>
  <block id="5a80842ad876afca2599388c0e374483" category="list-text">SOBR任务插槽限制为2-16</block>
  <block id="4bb90882de8268f14eedce7a49450a9a" category="list-text">多对象删除限制= 34 - 1000</block>
  <block id="a4bd669931c15a4828a4c38a495d7ff3" category="section-title">StorageGRID配置</block>
  <block id="8215067184a09c074108be8e3fbbe725" category="section-title">负载平衡器和S3端点配置</block>
  <block id="84ace9fb8e132c96d1dfcd31447efedc" category="section-title">S3 存储分段</block>
  <block id="55876228853abf632dec9346a4f372ec" category="inline-link">文档。</block>
  <block id="69e163f50758f77f10618e8e4b89f0cb" category="paragraph">StorageGRID是一种安全多租户存储系统。建议为Veeam工作负载创建一个专用租户。可以选择分配存储配额。作为最佳实践、请启用"使用自己的身份源"。使用适当的密码保护租户root管理用户的安全。Veeam Backup 12要求S3存储分段具有强大的一致性。StorageGRID提供了在存储分段级别配置的多个一致性选项。对于使用Veeam从多个位置访问数据的多站点部署、请选择"strong-globation"。如果Veeam备份和还原仅在单个站点上进行、则一致性级别应设置为"strong-site"。有关存储分段一致性级别的详细信息、请查看<block ref="782397d2a33ccd7da9c1580a84d10f9d" category="inline-link-rx"></block>。要使用StorageGRID进行Veeam不可变备份、必须在创建存储分段期间全局启用S3对象锁定并在存储分段上进行配置。</block>
  <block id="2973716716ecfc8cb158222d309c85ff" category="section-title">生命周期管理</block>
  <block id="1cfb631f44c302a86adda6e45ba24763" category="paragraph">StorageGRID支持在StorageGRID节点和站点之间进行复制和纠删编码、以实现对象级保护。纠删编码至少需要200 KB的对象大小。Veeam的默认块大小为1 MB、所产生的对象大小通常会低于Veeam存储效率后建议的200 KB最小大小。为了提高解决方案的性能、建议不要使用跨越多个站点的纠删编码配置文件、除非这些站点之间的连接足以避免增加延迟或限制StorageGRID系统的带宽。在多站点StorageGRID系统中、可以将ILM规则配置为在每个站点存储一个副本。为了获得最佳持久性、可以配置一条规则、以便在每个站点上存储一个经过删除的编码副本。对于此工作负载、最建议使用Veeam备份服务器本地的两个副本。</block>
  <block id="6a91fddc67312e23440e7297f57a6e75" category="section-title">实施要点</block>
  <block id="0dc64850ea098a695ef04ad4917575f8" category="paragraph">如果需要不可破坏性、请确保在StorageGRID系统上启用对象锁定。在管理UI中的"Configuration/S3 Object Lock"(配置/S3对象锁定)下找到相应选项。</block>
  <block id="21e26b17ef37d6789ef963babce3bcf7" category="inline-image-macro">启用网格范围对象锁定</block>
  <block id="a1d354bcc841b4fd7414aa3b5cc067b9" category="paragraph">创建存储分段时、如果要将此存储分段用于不可移动备份、请选择"Enable S3 Object Lock"(启用S3对象锁定)。这将自动启用存储分段版本控制。保持禁用默认保留、因为Veeam将明确设置对象保留。如果Veeam不创建不可变备份、则不应选择版本控制和S3对象锁定。</block>
  <block id="a01314a14731335aa7b83dabe139b1bc" category="inline-image-macro">在存储分段上启用对象锁定</block>
  <block id="913ca82ae339f347d099d594b95fc5d0" category="paragraph">创建存储分段后、转到所创建存储分段的详细信息页面。选择一致性级别。</block>
  <block id="0bb9673c8d3a007a2aec60e0eb872235" category="inline-image-macro">存储分段选项</block>
  <block id="81f068f3d3e42253d4aad514fd607d9d" category="paragraph">Veeam要求S3存储分段具有强大的一致性。因此、对于Veeam从多个位置访问数据的多站点部署、请选择"strong-globation"。如果Veeam备份和还原仅在单个站点上进行、则一致性级别应设置为"strong-site"。保存更改。</block>
  <block id="b47fa19cf7fc1f946539cdca83a310f6" category="inline-image-macro">存储分段一致性</block>
  <block id="33cb018e166847decbe1831bcbda0dfe" category="paragraph">StorageGRID在每个管理节点和专用网关节点上提供集成负载平衡器服务。使用此负载平衡器的众多优势之一是能够配置流量分类策略(QoS)。虽然这些指标主要用于限制应用程序对其他客户端工作负载的影响或将工作负载划分为优先级、但它们还提供了额外的指标收集功能、以协助监控。</block>
  <block id="be01644f81aa9785fd9a47a133f6b06b" category="paragraph">在配置选项卡中、选择"Traffic Classification"(流量分类)并创建新策略。命名规则并选择存储分段或租户作为类型。输入存储分段或租户的名称。如果需要QoS、请设置限制、但对于大多数实施、我们只希望添加此功能提供的监控优势、因此不要设置限制。</block>
  <block id="ffa056c913f2233a9d6c17d77ec6c2ea" category="inline-image-macro">创建TC策略</block>
  <block id="05241239c2e205951eabc51d0b39de96" category="section-title">Veeam</block>
  <block id="1747f94b0479dd6f64566f9def184149" category="paragraph">根据StorageGRID设备的型号和数量、可能需要选择并配置对存储分段上的并发操作数的限制。</block>
  <block id="e0c5284488d876ff3c0ab4615c30f264" category="inline-image-macro">Veeam并发任务限制</block>
  <block id="583ffa11c93d679d28e4223a3a34e9e4" category="paragraph">按照Veeam控制台中有关备份作业配置的Veeam文档启动向导。添加VM后、选择SOBR存储库。</block>
  <block id="2269301dc6504a2bb4291697a42d6372" category="inline-image-macro">备份作业</block>
  <block id="09b5418e51b83d62c4785d219e745382" category="paragraph">单击高级设置并将存储优化设置更改为4 MB或更大。应启用数据压缩和重复数据删除。根据需要更改子系统设置并配置备份作业计划。</block>
  <block id="680a28709f4f4046002e60fa297d351a" category="section-title">监控StorageGRID</block>
  <block id="3843e063a231c099f5416c34c95f4042" category="paragraph">要全面了解Veeam和StorageGRID的协同运行情况、您需要等待第一个备份的保留时间到期。到目前为止、Veeam工作负载主要由Put操作组成、尚未执行任何删除操作。备份数据过期并进行清理后、您现在可以在对象存储中看到完全一致的使用情况、并根据需要调整Veeam中的设置。</block>
  <block id="b2f0530b7f3eff1d4dbe439b30663ed9" category="paragraph">StorageGRID在"Support"(支持)选项卡"Metrics (指标)"页面中提供了方便的图表来监控系统的运行。要查看的主要信息板是S3概述、ILM和流量分类策略(如果已创建策略)。在"S3概述"信息板中、您可以找到有关S3操作速率、延期和请求响应的信息。</block>
  <block id="1f8f94c350e86ecbf5f8b0933d9dd0b2" category="paragraph">"平均持续时间"图表显示每个节点针对每种请求类型花费的平均时间。这是请求的平均延迟、可能很好地指示可能需要进行额外调整、或者StorageGRID系统有承担更多负载的空间。</block>
  <block id="dfb4d9aca7ff63a8b59297daaa36013e" category="inline-image-macro">S3概述持续时间</block>
  <block id="97e697a60f8fc93ff1b8ab5d2fecf264" category="paragraph">在“已完成请求总数”图表中，您可以按类型和响应代码查看请求。如果您看到的响应不是200 (OK)、则可能表示问题描述(如StorageGRID系统)负载过重、正在发送503 (减慢)响应、可能需要进行一些额外调整、或者现在是扩展系统以应对增加的负载的时候了。</block>
  <block id="b49a867e529855d0406df931c97b5128" category="inline-image-macro">S3概述请求</block>
  <block id="a1350656a4a8103a53007527e1543062" category="paragraph">在ILM信息板中、您可以监控StorageGRID系统的删除性能。StorageGRID会在每个节点上同时执行同步和异步删除、以尝试优化所有请求的整体性能。</block>
  <block id="2bd51718453d33063e1d9ab37fca0aef" category="inline-image-macro">ILM删除</block>
  <block id="b95f246819e27a4486f140cce28a5ca9" category="paragraph">通过流量分类策略、我们可以查看有关负载平衡器请求吞吐量、速率、持续时间以及Veeam正在发送和接收的对象大小的指标。</block>
  <block id="0163b2e276a1d083b8a419a32c771680" category="inline-image-macro">流量分类策略指标</block>
  <block id="41626bdee063e6c3bb48894a7b384438" category="list-text"><block ref="81bbc4df100e2c72e0ac40c7f4e45348" category="inline-link-macro-rx"></block></block>
  <block id="112e3eabbbb552d94c0e006c23999aa3" category="sidebar">将Veeam备份和复制与StorageGRID结合使用</block>
  <block id="2e296ce530e2049ec036a4c14f33b6d8" category="paragraph">可能需要限制并发任务、具体取决于特定解决方案的规模估算和要求。默认设置为每个CPU核心指定一个存储库任务插槽、并发任务插槽限制为64。例如，如果服务器有2个CPU核心，则对象存储总共将使用128个并发线程。这包括Put、GET和批删除。建议先为任务时隙选择一个保守限制、并在Veeam备份达到新备份和即将过期备份数据的稳定状态后调整此值。请与您的NetApp客户团队合作、适当估算StorageGRID系统的规模、以满足所需的时间窗口和性能要求。要提供最佳解决方案、可能需要调整任务插槽数量和每个插槽的任务限制。</block>
  <block id="088329f80e8f7c77482109c96eff3a31" category="paragraph">Veeam备份作业可以使用不同的块大小选项进行配置、应仔细考虑这些选项。默认块大小为1 MB、而Veeam具有数据压缩和重复数据删除功能、可为初始完整备份创建大约500 KB的对象大小、为增量作业创建100-200 KB的对象大小。通过选择更大的备份块大小、我们可以大幅提高性能并降低对象存储的要求。尽管较大的块大小可以显著提高对象存储的性能、但由于存储效率性能降低、可能会增加主存储容量需求。建议为备份作业配置4 MB的块大小、以便为完整备份创建大约2 MB的对象、并为增量备份创建大约700 kB-1 MB的对象大小。客户甚至可以考虑使用8 MB块大小配置备份作业、此功能可在Veeam支持人员的协助下启用。</block>
  <block id="592907ef9f546e11799fa30830cdbbf8" category="paragraph">随着备份保留过期、备份作业将处理对象删除。Veeam以多对象删除请求的形式将删除请求发送到对象存储、每个请求1000个对象。对于小型解决方案、可能需要对此进行调整、以减少每个请求的对象数量。降低此值还可以更均匀地在StorageGRID系统中的节点之间分布删除请求。建议使用下表中的值作为配置多对象删除限制的起点。将表中的值乘以所选设备类型的节点数、即可获得Veeam中设置的值。如果此值等于或大于1000、则无需调整默认值。如果需要调整此值、请与Veeam支持部门合作进行更改。</block>
  <block id="6e288d3dc69075a7b00e3a5eccc75f53" category="summary">使用StorageGRID配置d不良 数据源</block>
  <block id="1d7ab5441faeddab8907d949dffcf445" category="paragraph">多米奥支持多种数据源、包括基于云的或内部对象存储。  您可以将d不良 配置为使用StorageGRID作为对象存储数据源。</block>
  <block id="51854bc16ca42e133bfde4123211eeec" category="section-title">配置d不良 数据源</block>
  <block id="e94a48672671c2f16283c02dcd7e1ed4" category="list-text">StorageGRID S3端点URL、租户S3访问密钥ID和机密访问密钥。</block>
  <block id="cc4a915b35ae50b8e57f0283d6015e40" category="list-text">StorageGRID配置建议：禁用数据压缩(默认情况下处于禁用状态)。  +
DERMIO使用字节范围GET在查询期间同时从同一对象中提取不同的字节范围。  字节范围请求的典型大小为1 MB。经过压缩的对象会降低字节范围GET性能。</block>
  <block id="e331942f70e82f4959f01731cbfb1328" category="section-title">d不良 指南</block>
  <block id="141251846236cc8d2f20c851f61ea3f9" category="inline-link">连接到Amazon S3 -配置S3兼容存储</block>
  <block id="c4db22c6e122c5ccedb3f043979a4a4c" category="paragraph"><block ref="d976dfca18716e67b46df95d5b29f87e" category="inline-link-rx"></block>。</block>
  <block id="39b41a7ee2c69c38d0a4a470a61e4998" category="list-text">在"Desmio数据集"页面上、单击+符号以添加源、然后选择"Amazon S3"。</block>
  <block id="8dff40ea2a76ab9fc22d69c42706243c" category="list-text">输入此新数据源的名称、StorageGRID S3租户访问密钥ID和机密访问密钥。</block>
  <block id="7eacc2961df39c56af10b4230194cc77" category="list-text">如果使用https连接到StorageGRID S3端点、请选中"加密连接"复选框。+
如果对此S3端点使用自签名CA证书、请按照dremio指南说明将此CA证书添加到&lt;JAVA_HOME&gt;服务器的dre/jre/lib/security +中
*屏幕截图示例*</block>
  <block id="41b33d7f98a9cf866375085c504e7a7f" category="image-alt">新源-常规</block>
  <block id="db492536be467309872671bce85cee04" category="list-text">单击"高级选项"、选中"启用兼容模式"</block>
  <block id="c8a971d9405e02862be7569e04d2ede1" category="list-text">在连接属性下、单击+添加属性并添加这些S3A属性。</block>
  <block id="e43ca2d39dd7142ec638ac64443b6f0d" category="list-text">fs.s3a.connection．maximum默认值为100。  如果S3数据集包含具有100个或更多列的大型镶木地板文件、则必须输入一个大于100的值。  有关此设置的信息、请参见《drefio指南》。</block>
  <block id="b326b5062b2f0e69046810717534cb09" category="paragraph">true</block>
  <block id="7493cad84b7f7b5b1c3a6d47a5acc12d" category="paragraph">FS.S3A.CONNECTION。最大值</block>
  <block id="55b13b50c6791d963f403e8ab7a5ec9a" category="paragraph">_&lt;大于100&gt;_的值</block>
  <block id="066fdfceeffa2c65588a0f6b8d7953de" category="image-alt">新源-高级选项</block>
  <block id="79af4add835219b58d07f6d1876a3e3b" category="list-text">根据您的组织或应用程序要求配置其他的多米奥选项。</block>
  <block id="09ac23f768d2697bd567221390fbafe7" category="list-text">单击保存按钮以创建此新数据源。</block>
  <block id="af514c8f85939e6df535289d025e6acd" category="list-text">成功添加StorageGRID数据源后、左侧面板将显示存储分段列表。+
*屏幕截图示例*</block>
  <block id="3b55448bec6300a3af924b399eb26957" category="image-alt">已添加新数据源</block>
  <block id="2804a96d012f15794c6aaa8f11797dfc" category="inline-link">Lab on Demand是StorageGRID的最佳销售工具</block>
  <block id="d2634778cafa4c3045e5e3351c9098fc" category="inline-link">StorageGRID：存储和管理内部备份和复制数据</block>
  <block id="f49b908c8064ba5b4ab223b14e8d376a" category="inline-link">查看不断增长的经验证的StorageGRID合作伙伴解决方案列表</block>
  <block id="0883099d6628246c0f3172404097c1d1" category="inline-link">使用BlueXP通过符合3：2：1的备份策略保护Epic EHR</block>
  <block id="1e81f3787bf865826867c808345c93cf" category="inline-link">StorageGRID对象存储系列中的新增功能</block>
  <block id="f0d2294cd432ef286ea4c0d40d486219" category="inline-link">介绍StorageGRID 11.7和全新全闪存对象存储设备GF6112</block>
  <block id="3cc60dd0d810d80d23db5dfe54b351da" category="inline-link">Amazon S3文件系统的装载点现已正式发布</block>
  <block id="dd6f0ba1a70b208ed9294a411ace7f5b" category="inline-link">利用Cloud Insights使用Fluent Bit监控和收集日志</block>
  <block id="831dc58cce04528855c0f71b7c4c7427" category="inline-link">从Hadoop继续发展：借助德米奥和StorageGRID打造现代化数据分析</block>
  <block id="0de69010a0b885390944d59945579799" category="inline-link">采用StorageGRID的光谱逻辑在本机Glacier</block>
  <block id="d8d45aa5142f174e3e83b7f1de8895a1" category="sidebar">使用StorageGRID配置多米奥</block>
  <block id="9792e23419583666b178605decaec552" category="list-text">Gitlab</block>
  <block id="d2f2caed07026483a659ddedff29363a" category="section-title">将组限制为具有只读访问权限的单个子目录(前缀)</block>
  <block id="12e569a2475c87038546154b45eafa4f" category="paragraph">此策略允许组成员对分段中的子目录(前缀)具有只读访问权限。分段名称为"study"、子目录为"study01"。</block>
  <block id="d40d489ee06ec7f85fb2d17fd332ec2c" category="list-text">AWS装载点</block>
  <block id="dab38c58c86e39075df5ca86464b6e59" category="summary">第三方解决方案已通过StorageGRID 11.8.</block>
  <block id="43c9d447791c3e84501a3b86b522a4c1" category="doc">StorageGRID 11.8经验证的第三方解决方案</block>
  <block id="80880f7955cf3e0bbe904bbb677a357b" category="paragraph">以下第三方解决方案已通过验证、可用于StorageGRID 11.8.+
如果您要查找的解决方案未列出、请联系您的NetApp客户代表。</block>
  <block id="9283e244bcd98f1bdd350c1b4f2da148" category="inline-link">StorageGRID设备</block>
  <block id="eff26b146dbf07b93a3af4954ea77c6d" category="list-text"><block ref="eff26b146dbf07b93a3af4954ea77c6d" category="inline-link-rx"></block></block>
  <block id="0c116dd1f4daf14c460a0c77a9e0e674" category="inline-link">StorageGRID 11.8.</block>
  <block id="6a9dbde708e64ed0ece8a4d0b0dc1d32" category="list-text"><block ref="6a9dbde708e64ed0ece8a4d0b0dc1d32" category="inline-link-rx"></block></block>
  <block id="fca3b43498fce810dfcc0f52e38e42a6" category="list-text"><block ref="fca3b43498fce810dfcc0f52e38e42a6" category="inline-link-rx"></block></block>
  <block id="e9868d7697657696cac82d1e0b5159e2" category="paragraph">_作者：Aron Klein_</block>
  <block id="f1b702f1ec8f237dcd7b5c954b6d27b8" category="paragraph">_作者：郑安杰_</block>
  <block id="3ffee984625220881b57c95936a54d55" category="paragraph">作者：Siegfried Hepp和Aron Klein_</block>
  <block id="de8e421137ae87b94e3b716c2ac38854" category="paragraph">_作者：Oliver Haensel和Aron Klein_</block>
  <block id="9224315283279b10c8f6eac37416df31" category="paragraph">作者：Jonathan Wong</block>
  <block id="66dc7cd0b0a02168bc30f9fcad8cdbb3" category="paragraph">一段时间以来、Hadoop一直是数据科学家的最爱。通过Hadoop、可以使用简单的编程框架在多个计算机集群之间分布式处理大型数据集。Hadoop旨在从单个服务器扩展到数千台计算机、每台计算机都拥有本地计算和存储。</block>
  <block id="afa1796bcfe5f602d94a2ed1d5b82a74" category="paragraph">随着数据量的不断增长、使用自己的计算和存储添加新计算机的方法变得效率低下。线性扩展为高效使用资源和管理基础架构带来了挑战。</block>
  <block id="1ed32842544e52d59a55b4b962d478b4" category="sidebar">NetApp StorageGRID 是一款软件定义的对象存储套件，支持公有 ，私有云和混合多云环境中的各种用例。StorageGRID 为Amazon S3 API提供本机支持、并提供行业领先的创新技术、例如自动化生命周期管理、以便长期经济高效地存储、保护和保留非结构化数据。</block>
  <block id="6f32459fa210e1c46c9f23d60d9cf385" category="paragraph"><block ref="6f32459fa210e1c46c9f23d60d9cf385" category="inline-image-macro-rx" type="image"></block></block>
  <block id="16d7910e33afa606ab4d06325717b842" category="paragraph"><block ref="16d7910e33afa606ab4d06325717b842" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4a35b8f9b1e16b9013c14763f02901f8" category="paragraph"><block ref="4a35b8f9b1e16b9013c14763f02901f8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9eb0c7fe294867f4025650c8c0709e57" category="paragraph"><block ref="9eb0c7fe294867f4025650c8c0709e57" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe418f43b0dec57499cf347d109f86b1" category="paragraph"><block ref="fe418f43b0dec57499cf347d109f86b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0bd39904534d738466d23700af014b93" category="paragraph"><block ref="0bd39904534d738466d23700af014b93" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e60d52b4e43de4ee2416f9b9d4c543ae" category="paragraph"><block ref="e60d52b4e43de4ee2416f9b9d4c543ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27b29720bc7935776a8007b13c881a1e" category="paragraph"><block ref="27b29720bc7935776a8007b13c881a1e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="feb1270f2d249021c93d4845a9be6d8d" category="paragraph"><block ref="feb1270f2d249021c93d4845a9be6d8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f80bb521fa0915867adb4ac2385f431a" category="paragraph"><block ref="f80bb521fa0915867adb4ac2385f431a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a267127d1c75146fba631f5be6cc720" category="inline-image-macro">自动生成的计算机问题描述的屏幕截图、其中、wide=320、height=375</block>
  <block id="a6b3c8ce8a0f7b47961a71ca8f691360" category="paragraph"><block ref="a6b3c8ce8a0f7b47961a71ca8f691360" category="inline-image-macro-rx" type="image"></block></block>
  <block id="231b32850a7fef5c4be77eedcd54b7c4" category="inline-image-macro">S3概览速率</block>
  <block id="b5d405519c83b44b871a7fb2a7401500" category="paragraph">通过查看S3速率和活动请求、您可以按类型查看每个节点正在处理的负载以及请求总数。
<block ref="09a4b2cfcdf675e5f1f1ab0e8d545c44" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1be387f78502bd155ac8b9f6243be096" category="paragraph"><block ref="1be387f78502bd155ac8b9f6243be096" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d53d2d4fecbf45d3f80638358f5d314" category="paragraph"><block ref="4d53d2d4fecbf45d3f80638358f5d314" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49ce7b2f13d2e86a8ac31b5b7c9f0698" category="paragraph"><block ref="49ce7b2f13d2e86a8ac31b5b7c9f0698" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ed456358a6cded4a701707d28ed42b9c" category="paragraph"><block ref="ed456358a6cded4a701707d28ed42b9c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c03d0abe3f02a4e8010af61356f3a13" category="paragraph"><block ref="2c03d0abe3f02a4e8010af61356f3a13" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7bc2ba01fc83cc05d6016f2b30e7422b" category="paragraph"><block ref="7bc2ba01fc83cc05d6016f2b30e7422b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c1f331143452f56b7afe62d4a6a06e8" category="paragraph"><block ref="3c1f331143452f56b7afe62d4a6a06e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="68da18e5e85ce9599458e49805a7e5f4" category="paragraph"><block ref="68da18e5e85ce9599458e49805a7e5f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93fe9fe3a9cc9115f96e0f6c6a6c6558" category="paragraph"><block ref="93fe9fe3a9cc9115f96e0f6c6a6c6558" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4e6fdbd70a6775f5a3d752d7eeb76a0d" category="paragraph"><block ref="4e6fdbd70a6775f5a3d752d7eeb76a0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2a9e88f736e7ebfb5a81d4293daec053" category="paragraph"><block ref="2a9e88f736e7ebfb5a81d4293daec053" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4a83aa6c03c160879b2b67fdb04895ba" category="paragraph"><block ref="4a83aa6c03c160879b2b67fdb04895ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7f6c1fcf38d1a6f4098759a767d190ba" category="paragraph"><block ref="7f6c1fcf38d1a6f4098759a767d190ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="edc01fca3972836934d47ea490eba734" category="paragraph"><block ref="edc01fca3972836934d47ea490eba734" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12540705d8981e3e2f225b1711a20194" category="paragraph"><block ref="12540705d8981e3e2f225b1711a20194" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eba9b7ec6c45efabece4f0dd90bfab8e" category="paragraph"><block ref="eba9b7ec6c45efabece4f0dd90bfab8e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ce3a2ea3fdc88d2240cf067f9e3bb8ce" category="paragraph"><block ref="ce3a2ea3fdc88d2240cf067f9e3bb8ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc45afe309269e516edf859072e835e7" category="paragraph"><block ref="fc45afe309269e516edf859072e835e7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="afb0a2573d140eda1f27e3e0dba64015" category="paragraph"><block ref="afb0a2573d140eda1f27e3e0dba64015" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8c8d70082e6112e0c8bc6a4fa141a8a7" category="paragraph"><block ref="8c8d70082e6112e0c8bc6a4fa141a8a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="282adcd20fdfe6e2fc0e90884dc772c0" category="paragraph"><block ref="282adcd20fdfe6e2fc0e90884dc772c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f4efedc19cac689556be823f3de3dcfe" category="paragraph"><block ref="f4efedc19cac689556be823f3de3dcfe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2dc24c9519cce6d5072090d71e6b4f70" category="paragraph"><block ref="2dc24c9519cce6d5072090d71e6b4f70" category="inline-image-macro-rx" type="image"></block></block>
  <block id="871ce6f483851d98a86cb89bcb6b6b0e" category="paragraph"><block ref="871ce6f483851d98a86cb89bcb6b6b0e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8dce7f133eb89fe3e99fd0999c44bf82" category="paragraph"><block ref="8dce7f133eb89fe3e99fd0999c44bf82" category="inline-image-macro-rx" type="image"></block></block>
  <block id="66476a2b2c744507782e065e99504679" category="paragraph"><block ref="66476a2b2c744507782e065e99504679" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ebf5702891f15d812d3588ca9ce5b74" category="paragraph"><block ref="3ebf5702891f15d812d3588ca9ce5b74" category="inline-image-macro-rx" type="image"></block></block>
  <block id="998dfb93fc28b1e3cd5c0ff6f80e41f5" category="paragraph"><block ref="998dfb93fc28b1e3cd5c0ff6f80e41f5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d357c582321af176fc74f1ddf5aa211" category="paragraph"><block ref="7d357c582321af176fc74f1ddf5aa211" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1b55a28070372e724653dd78fbd8816b" category="paragraph"><block ref="1b55a28070372e724653dd78fbd8816b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a45308928cdb317709d69e1a9d7f54cf" category="inline-link">基于StorageGRID的大数据分析：德罗米奥的性能是Apache Hive的23倍</block>
  <block id="00039cf6e879cf2c96e1147810458aae" category="inline-link">隆重推出StorageGRID + lle可 意FS解决方案简介</block>
  <block id="f88708a62cf65a104ede836164d02fab" category="inline-link">StorageGRID 11.8:增强的安全性、精简性和用户体验</block>
  <block id="7ed997d0afb0f25bef5074cfbae5d820" category="inline-link">隆重推出StorageGRID 11.8.</block>
  <block id="d24354c28f6eda12a84300886d0bae91" category="paragraph"><block ref="d24354c28f6eda12a84300886d0bae91" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b234cd8b9202dfa24815cd14203cde1a" category="paragraph"><block ref="b234cd8b9202dfa24815cd14203cde1a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dcb0bfe5be50507cbd364a2d0fdfd056" category="paragraph"><block ref="dcb0bfe5be50507cbd364a2d0fdfd056" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9c15e570ff0d3a398f314911048e34f6" category="paragraph"><block ref="9c15e570ff0d3a398f314911048e34f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2f4bfe6caa4a2e3bf8657b624787ecf2" category="paragraph"><block ref="2f4bfe6caa4a2e3bf8657b624787ecf2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03a85f67d3528d13af543e9104884bf5" category="paragraph"><block ref="03a85f67d3528d13af543e9104884bf5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6724e2cab4809a16c4c5d1a71c4efc8a" category="paragraph"><block ref="6724e2cab4809a16c4c5d1a71c4efc8a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a47c5b4c56facc13874c121e4100dcc" category="paragraph"><block ref="1a47c5b4c56facc13874c121e4100dcc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2bc8e44de2063c0bd15ca5716f63f7e0" category="paragraph"><block ref="2bc8e44de2063c0bd15ca5716f63f7e0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a93f7571d3de7b14fc5d89b0ece8d2f0" category="paragraph"><block ref="a93f7571d3de7b14fc5d89b0ece8d2f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="865bdd362452895283df6a25b595cf8b" category="paragraph"><block ref="865bdd362452895283df6a25b595cf8b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45f16a43f7407469c60c15677753fe51" category="paragraph"><block ref="45f16a43f7407469c60c15677753fe51" category="inline-image-macro-rx" type="image"></block></block>
  <block id="17e7998b1bde3096b514d12f2f29fcc1" category="paragraph"><block ref="17e7998b1bde3096b514d12f2f29fcc1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53b215253a449ba905784e0c81219314" category="paragraph"><block ref="53b215253a449ba905784e0c81219314" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02610b96236d289b34aabb73ac622a2c" category="paragraph"><block ref="02610b96236d289b34aabb73ac622a2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f9af426d0a67de800f5a8ace6ebbd63f" category="paragraph"><block ref="f9af426d0a67de800f5a8ace6ebbd63f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3cf2063e321c74d35f814530d79c4f29" category="paragraph"><block ref="3cf2063e321c74d35f814530d79c4f29" category="inline-image-macro-rx" type="image"></block></block>
  <block id="257a7963c883b90bd7209787e84a2374" category="paragraph"><block ref="257a7963c883b90bd7209787e84a2374" category="inline-image-macro-rx" type="image"></block></block>
  <block id="df45e8ecb7cc5c7f57ec4d0472d67548" category="paragraph"><block ref="df45e8ecb7cc5c7f57ec4d0472d67548" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd127a55e93c24713fe9e0920b48b11f" category="paragraph"><block ref="bd127a55e93c24713fe9e0920b48b11f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3caa9b7b3887ce26e534887c7ebcf666" category="paragraph"><block ref="3caa9b7b3887ce26e534887c7ebcf666" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5d5c45ea2d3e96eed9c3b78a4cd9b507" category="paragraph"><block ref="5d5c45ea2d3e96eed9c3b78a4cd9b507" category="inline-image-macro-rx" type="image"></block></block>
  <block id="822e9391e0b00e652b3d5bfe5d4b103a" category="paragraph"><block ref="822e9391e0b00e652b3d5bfe5d4b103a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="29271d5d57f8d6e8670b7fc88d53d6e8" category="paragraph"><block ref="29271d5d57f8d6e8670b7fc88d53d6e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cef940a89117c81a10863795c4ddd30e" category="paragraph"><block ref="cef940a89117c81a10863795c4ddd30e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="db42e15c186d3f7b8ba7a666052fc779" category="paragraph"><block ref="db42e15c186d3f7b8ba7a666052fc779" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9ad8a7a7798500b5e52f25607ed3485" category="list-text">短对影(最低对影数据质量版本2024.02)</block>
  <block id="f56cff2f7966f4ffe98e416084bb7e95" category="list-text">目标存储设备中的卷数必须大于或等于源节点中的卷数。即使目标设备的容量大于源节点、您也无法将包含16个对象存储卷(rangedb)的源节点克隆到包含12个对象存储卷的目标存储设备。大多数存储设备都有16个对象存储卷、但只有12个对象存储卷的SGF6112存储设备除外。例如、不能将SG5760克隆到SGF6112。</block>
  <block id="301ed7b461a16811c00829d5bd1c6624" category="summary">本指南提供了有关使用GitLab配置StorageGRID的信息。</block>
  <block id="ef012cefa8ad7693b5c808fa1ce94bbd" category="doc">NetApp StorageGRID与GitLab</block>
  <block id="75049db1e349683b35a7dca115f7b290" category="inline-link">GitLab对象存储配置指南</block>
  <block id="830a8857ba237b976f92dcbaa5cdec26" category="paragraph">NetApp已使用GitLab对StorageGRID进行了测试。请参见下面的GitLab配置示例。  请参见<block ref="1fbed9049876aa2874e9bb4887a0f320" category="inline-link-rx"></block> 了解详细信息。</block>
  <block id="dc74db24a8e5e1f23203fff3257066b1" category="section-title">对象存储连接示例</block>
  <block id="4e2805091f9d6d4c2bf36af3331432cc" category="paragraph">对于Linux软件包安装、这是的一个示例<block ref="4717d53ebfdfea8477f780ec66151dcb" prefix=" " category="inline-code"></block> 在合并表单中设置。编辑<block ref="371d9aee577f2cef4df0163cf7dc8a0c" prefix=" " category="inline-code"></block> 并添加以下行、替换所需的值：</block>
  <block id="38ffd8c22488922588812e688de792ac" category="summary">本报告介绍如何针对StorageGRID调整S3A。</block>
  <block id="c422c82e21b1ef6485ec6d88beb6b06c" category="doc">Hadoop S3A调整</block>
  <block id="1b40687ad18cfd6efdf4810ebb337b1a" category="paragraph">Hadoop S3A连接器有助于在基于Hadoop的应用程序和S3对象存储之间实现无缝交互。在使用S3对象存储时、要优化性能、必须调整Hadoop S3A Connector。在深入介绍调整详细信息之前、我们先大致了解一下Hadoop及其组件。</block>
  <block id="e41757b122e008baee063abf23c19c8e" category="section-title">什么是Hadoop？</block>
  <block id="b654c608145226171f0898ccbae5cec7" category="paragraph">*Hadoop* 是一个功能强大的开源框架，专为处理大规模数据处理和存储而设计。它支持跨多个计算机集群进行分布式存储和并行处理。</block>
  <block id="286bb4752ab8cc6c9ab926108e89ff74" category="paragraph">Hadoop的三个核心组件是：</block>
  <block id="b27a1acd006213b6e473f4749269fd71" category="list-text">*Hadoop HDFS (Hadoop分布式文件系统)*：用于处理存储、将数据拆分为块并在节点之间分布。</block>
  <block id="88d3606426a43318176abdbbccebd0bf" category="list-text">*Hadoop MapReredget*：负责将任务划分为较小的区块并并行执行来处理数据。</block>
  <block id="4e3559b639014f651bda365ff91a1be1" category="inline-link">高效管理资源并计划任务</block>
  <block id="27a5b1eb9e47fddd3fa124843d505156" category="list-text">*Hadoop yar (Yet Another Resource Neotiator)：*<block ref="0a2f651ef2ec562f49ee6f3ee518be8b" category="inline-link-rx"></block></block>
  <block id="d00c5d3d4637dd8d67672efd5e9370a7" category="section-title">Hadoop HDFS和S3A连接器</block>
  <block id="a3d3b46a8ca353af62834cbd44407f28" category="paragraph">HDFS是Hadoop生态系统的重要组成部分、在高效处理大数据方面发挥着关键作用。HDFS可实现可靠的存储和管理。它可确保并行处理和优化数据存储、从而加快数据访问和分析速度。</block>
  <block id="7cba2f74e0ab52b47dc032ae00b28539" category="paragraph">在大数据处理方面、HDFS在为大型数据集提供容错存储方面表现出色。它通过数据复制来实现这一点。它可以在数据仓库环境中存储和管理大量结构化和非结构化数据。此外、它还可以与领先的大数据处理框架无缝集成、例如Apache Spark、Hive、Pig和Flink、从而实现可扩展的高效数据处理。它与基于Unix (Linux)的操作系统兼容、因此对于更喜欢使用基于Linux的环境进行大数据处理的组织来说、它是理想的选择。</block>
  <block id="19db330c0bad5316cc12c5dfd0667649" category="paragraph">随着数据量逐渐增长、使用自己的计算和存储向Hadoop集群添加新计算机的方法变得效率低下。线性扩展为高效使用资源和管理基础架构带来了挑战。</block>
  <block id="22e7bb54fa5c10b5b025b5533a88999d" category="paragraph">为了应对这些挑战、Hadoop S3A连接器可针对S3对象存储提供高性能I/O。使用S3A实施Hadoop工作流有助于将对象存储用作数据存储库、并将计算和存储分开、进而使您能够独立扩展计算和存储。分离计算和存储还可以让您将适当数量的资源专用于计算作业、并根据数据集大小提供容量。因此、您可以降低Hadoop工作流的总体TCO。</block>
  <block id="bea7f21895dd503dbb2c3260b3af74b5" category="section-title">Hadoop S3A连接器调整</block>
  <block id="53fa8f489fea78504f2a690e70f6624d" category="paragraph">S3的行为与HDFS不同、某些尝试保留文件系统外观的行为也明显欠佳。要最高效地利用S3资源、必须仔细调整/测试/试验。</block>
  <block id="485a45d91872aeb5af4b8a55fa265c39" category="inline-link">Hadoop 3.3.5 core-site.xml</block>
  <block id="413d791e09959ec487ff70f6a5fa8f5f" category="paragraph">本文档中的Hadoop选项基于Hadoop 3.3.5、请参见<block ref="ff5a0a931f8a3b6af413721cf09c3790" category="inline-link-rx"></block> 所有可用选项。</block>
  <block id="18e3e9625172b950f27bfa276bc9bac2" category="paragraph">注意—某些Hadoop FS.S3a设置的默认值在每个Hadoop版本中都不同。请务必查看特定于当前Hadoop版本的默认值。如果未在Hadoop core-site.xml中指定这些设置、则会使用默认值。您可以使用Spark或Hive配置选项在运行时覆盖此值。</block>
  <block id="85745090e2519b4e232f691071d9b425" category="inline-link">Apache Hadoop页面</block>
  <block id="78c46ef71aa9afef44c6367560cca566" category="paragraph">您必须访问此页面<block ref="abad591e30e327768342ad907b293959" category="inline-link-rx"></block> 了解每个FS.S3A选项。如果可能、请在非生产Hadoop集群中对其进行测试、以查找最佳值。</block>
  <block id="85d6e5d0078a84fc29dd42a208f9629b" category="inline-link">在使用S3A连接器时最大限度地提高性能</block>
  <block id="dcab9d5d9c10d726c90c6c4d3ac65fe0" category="paragraph">您应阅读<block ref="bd3cc6effa7ab467cddf323c1824c302" category="inline-link-rx"></block> 了解其他调整建议。</block>
  <block id="d909d5361378ec585bfd069b0711a66f" category="paragraph">让我们来探讨一些关键注意事项：</block>
  <block id="245a20d95f90b2748cffdfc73cbffb3f" category="paragraph">* 。数据压缩*</block>
  <block id="77223f8255f1260a06b0735cd6f7cfe8" category="paragraph">请勿启用StorageGRID数据压缩。大多数大数据系统都使用字节范围GET、而不是检索整个对象。对压缩对象使用字节范围GET会显著降低GET性能。</block>
  <block id="4dd2bed9c1980f32df795815ba1bc2c9" category="paragraph">* 。S3a提交人*</block>
  <block id="d478615245634189a8210b6069fb0383" category="inline-link">通用S3A提交器选项页面</block>
  <block id="7ac30a4c19c86427129a4848b169de86" category="paragraph">一般情况下、建议使用magic S3A提交器。请参见此部分<block ref="7bd5d7726ff15eb3278019d14d9791ad" category="inline-link-rx"></block> 更好地了解Magic committer及其相关的S3A设置。</block>
  <block id="1c90757eed18fc6bd4eb8aba8421533f" category="paragraph">魔力委员会：</block>
  <block id="5fd47885b78e7fc30d2f24ef46be983b" category="paragraph">Magic Commonter特别依靠S3Guard在S3对象存储上提供一致的目录列表。</block>
  <block id="1299ce4463815e5b17364f972f897e66" category="paragraph">借助一致的S3 (现在是这种情况)、Magic Comm캯 풱 믡 可以安全地与任何S3存储分段配合使用。</block>
  <block id="83f0ca20cfa52e6400b17cab93a1cf17" category="paragraph">选择和实验：</block>
  <block id="fb9962c4a0d3937d268fc2deb23bea85" category="paragraph">根据您的使用情形、您可以在Staging Commenter (依赖于集群HDFS文件系统)和Magic Commenter之间进行选择。</block>
  <block id="bcdd4afe5d0cbdf8cc04de0c92ddc7df" category="paragraph">尝试这两种方法、确定哪种方法最适合您的工作负载和要求。</block>
  <block id="b2272f16c45a7fc4af509338bc22504e" category="paragraph">总之、S3A委员会为应对持续、高性能和可靠的S3输出承诺这一根本性挑战提供了解决方案。其内部设计可确保高效的数据传输、同时保持数据完整性。</block>
  <block id="81501235b286178b5df292f16c6e8b47" category="inline-image-macro">S3A选项表</block>
  <block id="dc1717f3744878e6dbb68b8a22974e06" category="paragraph">*3.线程、连接池大小和块大小*</block>
  <block id="b35c467aea8fb0e4ad9d636d48d0b8db" category="list-text">与单个存储分段交互的每个*S3A*客户端都有自己的专用池，其中包含用于上传和复制操作的开放HTTP 1.1连接和线程。</block>
  <block id="4b7fc1639229d7f089f2e8c85436106e" category="inline-link">您可以调整这些池大小、以便在性能与内存/线程使用量之间取得平衡</block>
  <block id="901a6addd359ee8998a8f1e41f45789f" category="list-text"><block ref="801a4dc74c7b120220c9c416fd446c6b" category="inline-link-rx"></block>。</block>
  <block id="10fbe332f21fbd575e849cde38283e2e" category="list-text">将数据上传到S3时、数据会划分为多个块。默认块大小为32 MB。您可以通过设置FS.S3a.block.size属性来自定义此值。</block>
  <block id="ffa0e6a713cabf752ba8055eaaede5fc" category="list-text">较大的块大小可通过减少上传期间管理多部件的开销来提高大型数据上传的性能。对于大型数据集、建议值为256 MB或以上。</block>
  <block id="f40f5a29dd719649854707ad2ed54faa" category="paragraph">*4.多部分上传*</block>
  <block id="289795451e85a0a16d75e7868c7480d0" category="paragraph">S3A提交者*始终*使用MPU (多部分上传)将数据上传到S3存储分段。这是在以下情况下所必需的：任务失败、任务的推测性执行以及提交前作业中止。以下是与多部件上传相关的一些关键规格：</block>
  <block id="a9da1ffc95aa8035dfd68dae308c2231" category="list-text">最大对象大小：5 TiB (TB)。</block>
  <block id="d0fb74e477b55b97737f386acec3b84e" category="list-text">每次上传的最大部件数：10、000。</block>
  <block id="83b29781f2e067cdc992c431a51a9935" category="list-text">部件号：范围为1到10、000 (含1到10、000)。</block>
  <block id="7345af9128ab03965deea092bbcd2202" category="list-text">部件大小：介于5 MiB和5 GiB之间。值得注意的是、多部分上传的最后一部分没有最小大小限制。</block>
  <block id="f9064148ac19ecdf76f9ddca593dbddb" category="paragraph">对S3多部件上传使用较小的部件大小既有优点也有缺点。</block>
  <block id="1ef80274ba7e199b46d885662e8e2e9f" category="paragraph">*优势*：</block>
  <block id="e4461ace39f3509a41ff3e20c71902cf" category="list-text">从网络问题中快速恢复：当您上传较小的部分时、由于网络错误而重新启动失败的上传所产生的影响将降至最低。如果某个部件出现故障、您只需要重新上传该特定部件、而不是整个对象。</block>
  <block id="df3a8de4dd7f4c840c5cd07e596cb5de" category="list-text">更好的并行处理：利用多线程或并发连接、可以并行上传更多部件。这种并行处理可提高性能、尤其是在处理大型文件时。</block>
  <block id="c44c778d63d4fd51a252f196604c2ec6" category="paragraph">*缺点*：</block>
  <block id="5c62a121681103dd6392f0859e18473a" category="list-text">网络开销：部件较小意味着要上传的部件较多、每个部件都需要自己的HTTP请求。HTTP请求越多、启动和完成单个请求的开销就越大。管理大量小部件可能会影响性能。</block>
  <block id="748b6dc8bff1881d38cec5375d3045a7" category="list-text">复杂性：管理订单、跟踪部件和确保上传成功可能会非常繁琐。如果需要中止上传、则需要跟踪并清除已上传的所有部件。</block>
  <block id="f3983123dcac058e305af36c45c988e8" category="paragraph">对于Hadoop、建议对fs.s3a.multipart.size使用256MB或以上的部件大小。请始终将FS.S3a.mutlpart.threshold"值设置为2 x FS.S3a.multipart.size值。例如、如果fs.s3a.multipart.size = 256M、则fs.s3a.mutlifpart.threshold"应为512M。</block>
  <block id="4251dd2508268d84d780950cfa957f88" category="paragraph">对大型数据集使用较大的零件大小。根据您的特定使用情形和网络条件、选择一个能够平衡这些因素的部件大小非常重要。</block>
  <block id="56d98abf32151f1e7a60c6cdad4b995e" category="inline-link">三步流程</block>
  <block id="40a26596045288b6e31e0524da1e78d4" category="paragraph">多部分上传是<block ref="119a74f2526c1f8ee38f113c37745d3a" category="inline-link-rx"></block>：</block>
  <block id="e77511b5a47e9ce5242b5e2707d34871" category="list-text">上传已启动、StorageGRID将返回一个上传ID.</block>
  <block id="465c4cf2408ae7723d681a9c8607de37" category="list-text">对象部件将使用上载-id进行上载。</block>
  <block id="265f70ced2325f215340985c129b8fff" category="list-text">上传所有对象部件后、发送包含上传id的完整多部分上传请求。StorageGRID根据上传的部分构建对象、客户端可以访问该对象。</block>
  <block id="65638a5ddb2ddbd00963cc5b84f206d1" category="paragraph">如果未成功发送完整的多部件上传请求、则这些部件将保留在StorageGRID中、不会创建任何对象。作业中断、失败或中止时会发生这种情况。这些部件将保留在网格中、直到多部件上传完成或中止、或者如果上传启动后15天、StorageGRID会清除这些部件。如果一个存储分段中有许多(几百到几百万个)正在进行的多部分上传、则当Hadoop发送‘list-multipart-Uploads’(此请求不按上传ID筛选)时、此请求可能需要很长时间才能完成、或者最终超时。您可以考虑使用适当的FS.S3a.mutlpart.purge值将FS.S3a.multipart.purge.age设置为true (例如、5到7天、不要使用默认值86400、即1天)。或者联系NetApp支持部门调查情况。</block>
  <block id="d9703f8bc6fb70abb3d253a5ded96197" category="paragraph">*5.缓冲区写入数据存储在内存中*</block>
  <block id="36a89ed4836d3b5b5f59193e28776e5c" category="paragraph">为了提高性能、您可以在将写入数据上传到S3之前将其缓冲在内存中。这样可以减少小型写入次数并提高效率。</block>
  <block id="63d5657772886960693d8740023cf233" category="paragraph">请记住、S3和HDFS的工作方式各不相同。要最有效地利用S3资源、必须仔细调整/测试/实验。</block>
  <block id="38a5cc39717b20b4cde7ce17adfaf8c7" category="summary">本报告涵盖StorageGRID上的大数据分析。</block>
  <block id="5d272a32f1e2287537ac7e73dbde5d69" category="doc">NetApp StorageGRID和大数据分析</block>
  <block id="f5787e6402b1cee555a3442483bd6327" category="section-title">NetApp StorageGRID用例</block>
  <block id="92f1edc36d1985b5746e924fb88bb19b" category="paragraph">NetApp StorageGRID对象存储解决方案可提供可扩展性、数据可用性、安全性和高性能。各种规模和各行各业的组织都在广泛的使用情形中使用StorageGRID S3。让我们来了解一些典型场景：</block>
  <block id="27f32b3f9512c62dc40543d9cc892611" category="paragraph">*大数据分析：* StorageGRID S3常用作数据湖、企业可在其中存储大量结构化和非结构化数据、以便使用Apache Spark、Splunk Smartstore和DREMIO等工具进行分析。</block>
  <block id="e77b3574759aea5c11a8d04312bc2cbe" category="paragraph">*数据分层：* NetApp客户使用ONTAP的FabricPool功能在高性能本地层之间自动将数据移动到StorageGRID。在将冷数据保留在低成本对象存储上的同时、将昂贵的闪存存储释放出来、以存储热数据。这样可以最大限度地提高性能并节省成本。</block>
  <block id="4dc7ef59b422ad6beec0dcf560a3fdf9" category="paragraph">*数据备份和灾难恢复：*企业可以使用StorageGRID S3作为可靠且经济高效的解决方案来备份关键数据并在发生灾难时进行恢复。</block>
  <block id="b05954e05454ab56e0d356cb4ad49d95" category="paragraph">*应用程序的数据存储：* StorageGRID S3可用作应用程序的存储后端，使开发人员能够轻松地存储和检索文件、图像、视频和其他类型的数据。</block>
  <block id="5623c900b98e0e5e17c60c75ded947b1" category="paragraph">*内容交付：* StorageGRID S3可用于存储静态网站内容、媒体文件和软件下载并提供给全球用户、利用StorageGRID的地区分布和全局命名空间实现快速可靠的内容交付。</block>
  <block id="60b72d1ecbd87ac726a3dbb733456c59" category="paragraph">*数据分层：* NetApp客户使用ONTAP FabricPool功能在高性能本地层之间自动将数据移动到StorageGRID。在将冷数据从低成本对象存储中随时可用的同时、通过层化释放昂贵的闪存存储来存储热数据。这样可以最大限度地提高性能并节省成本。</block>
  <block id="454845c7ca306686c28f96a59487d70c" category="paragraph">*数据归档：* StorageGRID提供不同的存储类型、并支持分层到公共长期低成本存储选项、使其成为出于合规性或历史目的需要保留的数据归档和长期保留的理想解决方案。</block>
  <block id="a324e6c3bb7d6684738c923e7b52ea98" category="paragraph">*对象存储用例*</block>
  <block id="9f79f86c9a539a911125a876ef6a3c2e" category="inline-image-macro">StorageGRID用例图、宽度=396、高度=394</block>
  <block id="c9e24c78b995a9f99006f7b470383259" category="paragraph">在上述情形中、大数据分析是最热门的使用情形之一、其使用量呈上升趋势。</block>
  <block id="d9adadb4a0063dcb9fae0a43c0073259" category="section-title">为什么选择StorageGRID解决数据湖问题？</block>
  <block id="20ee9cfabde8b905c9a64689a84b0921" category="list-text">增强协作—利用行业标准API访问实现大规模共享多站点、多租户</block>
  <block id="884ee76830efc6a2368841cf8e70b390" category="list-text">降低运营成本—通过一个自我修复型自动化横向扩展架构简化运营</block>
  <block id="abdafbcb8273ebb7d3d1776426912eea" category="list-text">可扩展性—与传统的Hadoop和数据仓库解决方案不同、StorageGRID S3对象存储可将存储与计算和数据分离、从而使企业能够随着增长扩展存储需求。</block>
  <block id="94756ff0a241ceb246fb4e92f9e8b5db" category="list-text">耐用性和可靠性—StorageGRID的耐用性高达99.9999999%、这意味着存储的数据能够高度抵御数据丢失。它还提供高可用性、确保数据始终可访问。</block>
  <block id="6d5424acc89d68777ded882e67fba989" category="list-text">安全性—StorageGRID提供各种安全功能、包括加密、访问控制策略、数据生命周期管理、对象锁定和版本控制、以保护S3存储分段中存储的数据</block>
  <block id="9ed95e053e569a8027874c20fc968fa0" category="paragraph">* StorageGRID S3数据湖*</block>
  <block id="16440189dc2ac5b52ea041615f4e3502" category="inline-image-macro">StorageGRID数据报时示例、宽度=不等、高度= 345</block>
  <block id="f5fb5a608581154f9f31a7efeaf26b22" category="inline-link">Apache iceberg：权威指南</block>
  <block id="d74100f8d86dca0577d39ba1e04a17a6" category="list-text">基准测试工具- TPC-DS -<block ref="d703b8825e30c09e87a04e77b042a1a8" category="inline-link-rx"></block></block>
  <block id="d30ec88779257c0b31627ba4c551888a" category="list-text">大数据生态系统</block>
  <block id="a7bc6add825dafcb28d8468de2244c0e" category="list-text">采用Hive 3.1.3的Hadoop 3.3.5 (1个名称节点+ 4个数据节点)</block>
  <block id="6b3b732f04270b0bc61c4e04a2f39184" category="list-text">采用Spark 3.2.0 (1个主服务器+ 4个员工)和Hadoop 3.3.5的Delta Lake</block>
  <block id="670aaecb1a526fbed439dad3ec353a96" category="list-text">对象存储</block>
  <block id="3cf72a217876a6502e40c6bc45a93c60" category="list-text">数据库大小为1000 GB</block>
  <block id="47e3170ffb3d6c316975632968933646" category="cell">生态系统</block>
  <block id="c05def664dae0985e5984993db2b69a0" category="cell">配置</block>
  <block id="e51fc2a250a74f84b11010c0f9316c46" category="cell">三角洲湖</block>
  <block id="35b5589d5690d7ef32acf311beb9bbea" category="cell">TPCDS 99查询+
总分钟数</block>
  <block id="b53b3a3d6ab90ce0268229151c9bde11" category="cell">55</block>
  <block id="67c6a1e7ce56d3d6fa748ab6d9af3fd7" category="cell">47.1.</block>
  <block id="7528035a93ee69cedb1dbddb2f0bfcc8" category="cell">获取</block>
  <block id="8db7bb1512ff25e1db67c5b9a53f897d" category="cell">1、117184</block>
  <block id="2569e54b8230d5c2746fa85c61dcf512" category="cell">2、074、610</block>
  <block id="7cea2b87e7eb0c4d67994a7b9fa4f3d3" category="cell">4、414、227</block>
  <block id="6f53c4f40f0a0d7fefdb89564ac1c713" category="cell">观察：+
所有范围GET</block>
  <block id="a9d41bf59f53e6160f0b13f571ea418a" category="cell">从32 MB对象中获取2 KB到2 MB的80%范围、每秒50到100个请求</block>
  <block id="e0b8bceb4cded5e4c1e2d73d9331f0f7" category="cell">73%的范围从32 MB对象开始低于100 KB、每秒1000到1400个请求</block>
  <block id="bfe0f96dc7eb9140699f8fdd7568c553" category="cell">从256MB对象获取90% 1M字节范围、2000到2300个请求/秒</block>
  <block id="0f220d208874b104e26e73ec94b0e690" category="cell">列出对象</block>
  <block id="bfc2dfc2cb23058c08a7d12b5c3abb19" category="cell">312、053</block>
  <block id="0e706da47bd945de88f06af5c56e1e6a" category="cell">24、158</block>
  <block id="335f5352088d7d9bf74191e006d8e24c" category="cell">240</block>
  <block id="c03e2ac569e5aac15b52493eef30e9e7" category="cell">头部+
(不存在的对象)</block>
  <block id="b920dc6d7f4f2319e93bdcc850be6166" category="cell">156、027</block>
  <block id="8e43c25a28a92db67de364324cbdf9dd" category="cell">12、103</block>
  <block id="58a2fc6ed39fd083f55d4182bf88826d" category="cell">192.</block>
  <block id="d241bb72f8484e8c12847a1c342893cc" category="cell">头部+
(存在的对象)</block>
  <block id="791138a3078a87a630b0ddcc779f5365" category="cell">982、126</block>
  <block id="41157fd52202414d46b193aa0dc0e7ed" category="cell">922732</block>
  <block id="4a12caac680acef61b9d5542d0bdd153" category="cell">1、845</block>
  <block id="645d67b4eb5a0d06bf14fe7a682ced76" category="cell">请求总数</block>
  <block id="a56d0d38d9846ac044442ecabae19902" category="cell">2.</block>
  <block id="6dfffbda5aeba01126df9439ffbc82a3" category="cell">3、033、603</block>
  <block id="b0f186b9ad3639a900dc289160a9505b" category="cell">4、416、504</block>
  <block id="71860c77c6745379b0d44304d66b6a13" category="inline-link">页面。</block>
  <block id="c0c37f88f031a9b491d9a8bbea81dda7" category="paragraph">请访问以下链接、详细了解StorageGRID和德莱米奥如何协同工作来提供现代化且高效的数据湖基础架构、以及NetApp如何从Hive + HDFS迁移到德莱米奥+ StorageGRID来显著提高大数据分析效率。</block>
  <block id="79304bd05c48f486a8924e2c45f39311" category="inline-link">借助NetApp StorageGRID提升大数据的性能</block>
  <block id="5683e5844e7df088ba30c5038415b393" category="inline-link">借助StorageGRID和d处 米奥打造现代化、功能强大且高效的数据湖基础架构</block>
  <block id="1f3f85a45cc94830ad50d8dcc85d553a" category="inline-link">NetApp如何利用产品分析重新定义客户体验</block>
  <block id="06b48b444551989a8bbf76e3cb86a3d2" category="sidebar">使用StorageGRID配置GitLab</block>
  <block id="00f36bd2b4cd1d9e59ff895b5e131be2" category="sidebar">技术报告</block>
  <block id="23e421cbf9f56a23426fd9d29746a636" category="summary">本指南介绍了在多站点网格中进行StorageGRID站点重新定位的准备和操作步骤。</block>
  <block id="8295ab4dfd6c34f8b3da70a8bfaaada3" category="doc">网格站点重新定位和站点范围网络更改操作步骤</block>
  <block id="a7b0b12fd572901946be0ed19cb6a438" category="paragraph">本指南介绍了在多站点网格中进行StorageGRID站点重新定位的准备和操作步骤。您应全面了解此操作步骤、并提前做好规划、以确保流程顺畅、最大限度地减少对客户的中断。</block>
  <block id="731561f650e3a36691bae029b4547c66" category="inline-link-macro">更改网格中所有节点的 IP 地址</block>
  <block id="e16a17e0f04937786448505101cf5703" category="paragraph">如果需要更改整个网格的网格网络、请参见
<block ref="25fe4ea07c9ed2c1ea3e524430970ba9" category="inline-link-macro-rx"></block>。</block>
  <block id="d62541926508b7fc98152bdd26f6b28c" category="section-title">站点重新定位前的注意事项</block>
  <block id="adb2a3f1ce6044cca831a1c3e1fcc38c" category="inline-link-macro">将存储节点恢复到关闭状态超过 15 天</block>
  <block id="79286dd19701572b9607fd1b47f14c5f" category="list-text">应在15天内完成站点移动并使所有节点联机、以避免重建cassandrebuild数据库。
<block ref="fb2aa662be1b0eb04ce42e59fa10d995" category="inline-link-macro-rx"></block></block>
  <block id="d81093eaf5709c0a3ae4db45ea962851" category="list-text">如果活动策略中的任何ILM规则使用严格的写入行为、如果客户希望在站点重新定位期间继续将对象放入网格、请考虑将其更改为平衡或双重提交。</block>
  <block id="5fcd60bee26dbdd38058786d89d30945" category="list-text">对于包含60个或更多驱动器的存储设备、切勿移动安装了磁盘驱动器的磁盘架。  在打包/移动之前、为每个磁盘驱动器贴上标签并将其从存储机箱中取出。</block>
  <block id="3bf27243eed945ae028b0d83a672aafd" category="list-text">更改StorageGRID设备网格网络VLAN可以通过管理网络或客户端网络远程执行。  或者计划在重新定位之前或之后到现场执行更改。</block>
  <block id="fc1ade2120cd035ae884b4c776a06e08" category="list-text">检查客户应用程序是否正在使用HEAD或在放置前获取不存在的对象。如果是、请将存储分段一致性更改为强站点、以避免出现HTTP 500错误。  如果不确定，请查看S3概述Grafana图表*网格管理器&gt;支持&gt;指标*，将鼠标悬停在"已完成请求总数"图表上。  如果404 GET对象或404 HEAD对象的计数非常高、则一个或多个应用程序可能正在使用HEAD或GET不存在对象。计数会累计、将鼠标悬停在不同的时间线上可查看差异。</block>
  <block id="61bce3e94387d562e70e4344c21875a9" category="inline-image-macro">S3概述Grafana图表示例</block>
  <block id="c8d25296b6242f878bcc65b3463a9213" category="paragraph"><block ref="c8d25296b6242f878bcc65b3463a9213" category="inline-image-macro-rx" type="image"></block></block>
  <block id="91ecbe84c3a3b51ceb6c3c1c46fe828e" category="section-title">操作步骤以在站点重新定位之前更改网格IP地址</block>
  <block id="7ce3d8dcf98150ca295b4e8b4a175d28" category="inline-link-macro">将子网添加到网格网络子网列表</block>
  <block id="ef79c64bf374a8f7d8f11ddac8bac6ea" category="list-text">如果新位置要使用新的网格网络子网、
<block ref="a48adf12485e7e1fabf51f229ceb57fd" category="inline-link-macro-rx"></block></block>
  <block id="a27c73113b9f8b1c8936231a5c6b72db" category="list-text">登录到主管理节点、使用change-ip进行网格IP更改、必须*暂存*更改、然后才能关闭节点进行重新定位。</block>
  <block id="e8ebed2710314532bd7421c291775f7a" category="list-text">选择2、然后选择1以更改网格IP</block>
  <block id="f246621acb182eca202eb998d35a0a71" category="paragraph"><block ref="f246621acb182eca202eb998d35a0a71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0fc35f100f57d71f3d04d75f8e34db7a" category="list-text">选择5以显示更改</block>
  <block id="51db02a440736bec001c7d690821ec49" category="paragraph"><block ref="51db02a440736bec001c7d690821ec49" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0db10ef124f48bf74646e51d511e42e7" category="list-text">选择10以验证并应用更改。</block>
  <block id="ecf8b3b84403afdd8f30ff4ca92df4d0" category="paragraph"><block ref="ecf8b3b84403afdd8f30ff4ca92df4d0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b535a2204d1cc298ac5c3b36cc8a9249" category="list-text">必须在此步骤中选择*阶段*。</block>
  <block id="a8c78f88b73dcaf8b7082c7d8bab4356" category="paragraph"><block ref="a8c78f88b73dcaf8b7082c7d8bab4356" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23e28a352f23f6051ecbe97b0516b42f" category="list-text">如果上述更改中包括主管理节点，请输入*'A'手动重新启动主管理节点*</block>
  <block id="6cfd9d702fc475a31c16db4299ee31a0" category="paragraph"><block ref="6cfd9d702fc475a31c16db4299ee31a0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="355ec7ab5ee5e52899a8a48528d82b93" category="list-text">按ENTER键返回上一菜单并退出change-ip界面。</block>
  <block id="34efad53185ba8366fcb774fe4502175" category="paragraph"><block ref="34efad53185ba8366fcb774fe4502175" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6a713acf175fd861bbb563ab540a06fe" category="list-text">从Grid Manager中下载新的恢复软件包。*网格管理器*&gt;*维护*&gt;*恢复包*</block>
  <block id="96557217b00ac75f863bec84c65347bf" category="list-text">如果StorageGRID设备需要更改VLAN、请参见一节 <block ref="f1c1d143229526a165bf49ac775d4ecd" category="inline-xref-macro-rx"></block>。</block>
  <block id="26afb12dd81518887c60c85ae47dab08" category="list-text">关闭站点上的所有节点和/或设备、根据需要标记/移除磁盘驱动器、然后卸载、打包和移动。</block>
  <block id="850fa0cd526764089644bd18997fcf0b" category="list-text">如果您计划更改管理网络IP和/或客户端VLAN和IP地址、则可以在重新定位后执行更改。</block>
  <block id="28b10382e67e37853ae45379b731cfaf" category="section-title">设备VLAN更改</block>
  <block id="a65d2c0e652207280c57973442478f26" category="paragraph">以下操作步骤假定您可以远程访问StorageGRID设备的管理或客户端网络以远程执行更改。</block>
  <block id="840a6c754184c6fbce872458dcf35141" category="inline-link-macro">将设备置于维护模式</block>
  <block id="5b8e4de8e50ebe10173b2539d1612010" category="list-text">在关闭设备之前，
<block ref="1d36a7361466de3adde00ce864c41474" category="inline-link-macro-rx"></block>。</block>
  <block id="24377316ae141b63c8170119bbfe4239" category="list-text">使用浏览器访问StorageGRID设备安装程序图形用户界面<block ref="41c0f2506f64eaa17788753cf29de6aa" category="inline-link-rx"></block>。  设备启动至维护模式后、无法使用Grid IP作为新的Grid IP。</block>
  <block id="fe21d31242c56f4eee91182bd1268a5a" category="list-text">更改网格网络的VLAN。  如果您正在通过客户端网络访问设备、则此时无法更改客户端VLAN、可以在移动后进行更改。</block>
  <block id="293c5807e9e9ab4b268fd617e8e5a56d" category="list-text">通过SSH连接到设备并使用"shutdoown -h now "关闭节点</block>
  <block id="1c33a8d84128bb59ae10a50b662e3a98" category="list-text">在新站点上准备好设备后、使用访问StorageGRID设备安装程序图形用户界面<block ref="fba5b5bfbff166288edb187e140418b2" category="inline-link-rx"></block>。  在GUI中使用Ping/nmap工具确认存储处于最佳状态、并确认与其他网格节点的网络连接。</block>
  <block id="786f3a0a71ff6ad9513f86143e55c1ce" category="list-text">如果计划更改客户端网络IP、则可以在此阶段更改客户端VLAN。  在稍后使用change-ip工具更新客户端网络IP之前、客户端网络尚未准备就绪。</block>
  <block id="fff8d22924e491405ba3026b24555fa6" category="list-text">退出维护模式：在 StorageGRID 设备安装程序中，选择 * 高级 * &gt; * 重新启动控制器 * ，然后选择 * 重新启动至 StorageGRID * 。</block>
  <block id="6668d4dfafe68f86bfe1db4386e9ce7b" category="list-text">在所有节点均已启动且网格未显示任何连接问题描述后、根据需要使用change-ip更新设备管理网络和客户端网络。</block>
  <block id="bae75f6502d7126b5a2837bf5628cab3" category="sidebar">如何重新定位站点和更改网络</block>
  <block id="d0cf9344ad2e87b19d7ddab6a3a8a65c" category="list-text">2024年2月16日：<block ref="b378392cb8f9d3c27df36a7aee10e61c" category="inline-link-rx"></block></block>
  <block id="b41a18341b59a0683c39812165cc0c0b" category="list-text">2024年2月16日：<block ref="70310190f4683d95ee6551bded030474" category="inline-link-rx"></block></block>
  <block id="4a9aae048c463acb4451f4593f34edc7" category="list-text">2023年12月12日：<block ref="56387d425a7d1ca386f6000ce26e6a91" category="inline-link-rx"></block></block>
  <block id="00cf44fc2391bf394fabb4544209c638" category="list-text">2023年11月7日：<block ref="4558e5f7bc147029e407b74c0a6768e6" category="inline-link-rx"></block></block>
  <block id="b6b4eb17c420a5edadebf0afe24e7acb" category="list-text">2023年10月17日：<block ref="64e3b33ccfb012d90bff9bcf09d2035a" category="inline-link-rx"></block></block>
  <block id="88bf16cb98ec793a1004c95baddf055c" category="list-text">2023年9月1日：<block ref="71f54938bd1ce25b1fc86aa20da828f4" category="inline-link-rx"></block></block>
  <block id="5e32b061b51843f44671f026cc19eb5b" category="list-text">2023年8月30日：<block ref="90e42dccda167e27664cb4046795d9d2" category="inline-link-rx"></block></block>
  <block id="514ae57ea8dfeb703037a595cd9ab967" category="list-text">2023年5月16日：<block ref="822011c4a35ab965678b4e99560374f9" category="inline-link-rx"></block></block>
  <block id="4c1bd792b536446999d1ff0b4812b39a" category="list-text">2023年5月16日：<block ref="55400ccf8fd45f41eb658085301654a8" category="inline-link-rx"></block></block>
  <block id="e2aca017abaed5b68760a84be22625d0" category="list-text">2023年3月30日：<block ref="3a37c13e60469949c226e6fe44730d5d" category="inline-link-rx"></block></block>
  <block id="80b92583825de655262f5ec03db36d8d" category="list-text">2023年3月30日：<block ref="b439a8f44229e6c1e7b2461211f6849b" category="inline-link-rx"></block></block>
  <block id="fb9c460add81700ce3ddf20b5b36105d" category="list-text">2023年3月14日：<block ref="3c7ed37db994ec363730d455072b8b2b" category="inline-link-rx"></block></block>
  <block id="e725a1c619e4b377a5580a3fd0e904ee" category="list-text">2023年2月14日：<block ref="276d9658a5f8a049f2dcc595745c0879" category="inline-link-rx"></block></block>
  <block id="75639a2b61decb387fb6bbec29908248" category="list-text">2023年1月16日：<block ref="68d21b96499b1933cc9fc03f94f1e388" category="inline-link-rx"></block></block>
  <block id="cdea5a154b0b0ab86d0d6304a21bda3f" category="list-text">2022年12月6日：<block ref="e235608a45034e1deea87e6e77daddf3" category="inline-link-rx"></block></block>
  <block id="b033dccd559a42657b2fbb03dd21c349" category="list-text">2022年11月23日：<block ref="67d6d3a21cc9af1520f991806f578b6b" category="inline-link-rx"></block></block>
  <block id="26dadc41f3793afcf27dabfc8af82fec" category="list-text">2022年11月7日：<block ref="c8168f81ebd9cd26583947065ec9bf4e" category="inline-link-rx"></block></block>
  <block id="d4100bee1228b39623a887e024f221dd" category="list-text">2022年10月5日：<block ref="7a820536864c4b8ba1158a633db675d7" category="inline-link-rx"></block></block>
  <block id="b8c60e65b22d62c34b439943fbbdf163" category="list-text">2022年10月5日：<block ref="743b55649bf0de5fef17881c2182c74e" category="inline-link-rx"></block></block>
  <block id="835de7846030219d07c670951e6ffb39" category="list-text">2022年9月26日：<block ref="bac8af8866fb18858bb2bc38accfee93" category="inline-link-rx"></block></block>
  <block id="8ada5e40d5c0fc70316a0e89d441d1a1" category="list-text">2022年9月19日：<block ref="d3b1520ae76b2d8916030b44fa119b18" category="inline-link-rx"></block></block>
  <block id="44e29c80530d3eb777674bc8f9d75680" category="list-text">2022年9月1日：<block ref="6fba2287f3b879f9355d55f6093dd086" category="inline-link-rx"></block></block>
  <block id="09022107d504f4c74cd3455382e4a012" category="list-text">2022年8月23日：<block ref="e69bd0d41d124ab466e32e26b75521a0" category="inline-link-rx"></block></block>
  <block id="09b187fdd11bb217e848dcd14054a8bc" category="list-text">2022年8月17日：<block ref="2cb03523d29d45df344e7e35aeae9b09" category="inline-link-rx"></block></block>
  <block id="e2d625e4a07e6ffa9248d3c69031c018" category="list-text">2022年8月16日：<block ref="b2f8710f8f504eba14016ef400ef8a20" category="inline-link-rx"></block></block>
  <block id="b0ddc685f341b24735e60cd237fed6b6" category="list-text">2022年8月5日：<block ref="262aaa550c02638a3973245ae3d6d03e" category="inline-link-rx"></block></block>
  <block id="a84591557fb46548646e42cb2a3cb6a1" category="list-text">2022年7月26日：<block ref="dcc8150a969e49a02dd3cd5f53c489a0" category="inline-link-rx"></block></block>
  <block id="421ad547c6fb8cdc11d0cc80a8ac2a3e" category="list-text">2022年6月9日：<block ref="bc61cc71bae06945f8e3338c0faa1d28" category="inline-link-rx"></block></block>
  <block id="80482345acd37742916c858b1bac3347" category="list-text">2022年5月26日：<block ref="919c9f44a16e685bcbda321efc4479b1" category="inline-link-rx"></block></block>
  <block id="11bd19e0a7faa7e5cb29e2de6e742e74" category="list-text">2022年5月24日：<block ref="efe27e9a7520722932d06c2a314e517b" category="inline-link-rx"></block></block>
  <block id="d915b8cda332d7bea31598a0cc058498" category="list-text">2022年5月10日：<block ref="debc4c6191d7e706232e96c2789d3930" category="inline-link-rx"></block></block>
  <block id="b595975ee2f837da3fb64fe3e27a04a5" category="paragraph"><block ref="b595975ee2f837da3fb64fe3e27a04a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="620a43fd755527066fd648aba6f7db92" category="paragraph"><block ref="620a43fd755527066fd648aba6f7db92" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ba62ab536da4018921d932eab137754d" category="paragraph"><block ref="ba62ab536da4018921d932eab137754d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8ba2b9229934ee6fc64c293ea55c00cf" category="paragraph"><block ref="8ba2b9229934ee6fc64c293ea55c00cf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="51416623000162278c6405b1b5cd833d" category="paragraph"><block ref="51416623000162278c6405b1b5cd833d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2a60f08787dc9ecba98a9ffc064b7ed8" category="paragraph"><block ref="2a60f08787dc9ecba98a9ffc064b7ed8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a184c0363bb58450e6d7433581fd471" category="summary">本报告介绍解决方案Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commv NetApp</block>
  <block id="354a23ac01ef93911cb9256f86e06159" category="doc">TR-4871 - Commvault"完整备份和恢复以及NetApp StorageGRID</block>
  <block id="cb2418c01859c7704da751aa5a7d2421" category="section-title">解决方案概述</block>
  <block id="80a3f83141a9faa5b2c7cd8fe9d282e0" category="paragraph">Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Recovery for NetApp软件与NetApp NetApp StorageGRID云存储软件相结合、共同创建了一个联合数据保护解决方案许多企业希望将存储迁移到云、扩展系统并自动执行长期保留数据的策略。Commvault"完整备份和恢复"和NetApp StorageGRID提供独特且易于使用的解决方案、这些解决方案可以协同工作、帮助您满足全球数据快速增长和法规不断增长的需求。基于云的对象存储因其弹性、扩展能力以及运营和成本效益而闻名、这使其成为备份目标的自然选择。Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commv NetApp解决方案全球所有类型的客户都采用了Commvault完 整备份和恢复以及StorageGRID组合解决方案。</block>
  <block id="03b34745d3c972ba9412e4898f60977d" category="paragraph">在云存储上实施CommvaultComplete Backup and Recovery软件时、您有两种备份选项：</block>
  <block id="9eb0111fcb9b869313a8890a31fbe9aa" category="list-text">备份到主磁盘目标、同时将辅助副本备份到云存储。</block>
  <block id="f2236ba3bffef9cf2f2a7237c4487c29" category="list-text">将备份到云存储作为主要目标。</block>
  <block id="80457ca0c9c707a381ea0dbbf13a97f8" category="paragraph">过去、人们认为云或对象存储的性能太低、无法用于主备份。使用主磁盘目标可以加快备份和还原过程、并将辅助副本作为冷备份保留在云上。StorageGRID代表下一代对象存储。StorageGRID的高性能、海量吞吐量以及性能和灵活性远超其他对象存储供应商。</block>
  <block id="3764fc2dfa1c37293e979fb84f4d57e2" category="paragraph">表1列出了StorageGRID中每个备份选项的优势。</block>
  <block id="b8487d84bdeead48dbf45470a4e20888" category="section-title">表1)主备份到磁盘加上一个辅助副本、而主备份到StorageGRID。</block>
  <block id="0677b3ba1c3af4912992b290e34bede8" category="cell">主备份到磁盘和辅助副本到StorageGRID</block>
  <block id="f0545f8a5027b3947229082e2363e36e" category="cell">主备份到StorageGRID</block>
  <block id="9446a98ad14416153cc4d45ab8b531bf" category="paragraph">性能</block>
  <block id="bf1e57e2734e41f446afd52e7a01511f" category="paragraph">使用实时挂载或实时恢复时恢复速度最快：最适合第0层/第1层工作负载。</block>
  <block id="fc436ebe83f8a987f689862b5d1e9416" category="paragraph">不能用于实时挂载或实时恢复操作。非常适合流式恢复操作和长期保留。</block>
  <block id="46d93ce059017fe679dc02b4bfab8803" category="paragraph">部署架构</block>
  <block id="3efb73a8f0efa8cd24dac18e9fdcb90d" category="paragraph">使用全闪存或旋转磁盘作为第一个备份登录层。StorageGRID用作二级层。</block>
  <block id="6a8ffa7403e393a890a078b05f73a63b" category="paragraph">使用StorageGRID作为全面的备份目标、简化部署。</block>
  <block id="95493dca7eed37cfb9bfd6cc90ef1959" category="paragraph">高级功能(实时还原)</block>
  <block id="eaa4dc5078017a5c5bebf383ab6f5124" category="paragraph">supported</block>
  <block id="aa7f77e663b832d5b0e544c5511e680c" category="paragraph">不支持</block>
  <block id="bf8dd94f74c5878ba969abeeef0286d1" category="section-title">目标受众</block>
  <block id="749f48d6360a1ae4fb9b6967d682f7ab" category="paragraph">本文档面向使用StorageGRID备份和恢复解决方案的数据管理员和架构师。</block>
  <block id="8f4c7939e8a42e023939df947aba54f6" category="section-title">解决方案技术</block>
  <block id="4e50e1ccf2606dc28761309b196f635e" category="paragraph">经过测试的解决方案将NetApp解决方案相结合、打造出功能强大的联合解决方案。</block>
  <block id="8de8885619770caac462899bd9ad1a3c" category="paragraph">Commvault"完整备份和恢复"软件是一款企业级集成数据和信息管理解决方案、在单一平台上从头构建、并具有统一的代码库。它的所有功能都共享后端技术、从而在保护、管理和访问数据方面提供完全集成的方法所带来的无与伦比的优势和优势。该软件包含用于保护、归档、分析、复制和搜索数据的模块。这些模块共享一组通用的后端服务和高级功能、这些服务和功能可以彼此无缝交互。解决方案可解决企业中数据管理的所有方面、同时提供无限可扩展性以及前所未有的数据和信息控制。</block>
  <block id="d578ff088a7606a2f2f8b20f068b5b62" category="paragraph">CommVault软件平台的主要功能包括：</block>
  <block id="a9f9086df1d2d57873ce7ad72a8f3503" category="list-text">完整的数据保护解决方案、支持虚拟和物理服务器、NAS系统、基于云的基础架构和移动设备上的所有主要操作系统、应用程序和数据库。</block>
  <block id="c5eaed381b053e4b3d85d9ab1fb6fa5b" category="list-text">通过单一控制台简化管理：您可以查看、管理和访问整个企业的所有功能以及所有数据和信息。</block>
  <block id="434ac5052bf47ffbe2a46a08caeefbe0" category="list-text">多种保护方法、包括用于电子发现的数据备份和归档、快照管理、数据复制和内容索引。</block>
  <block id="7317d6c898578da433c127897e9abeac" category="list-text">对磁盘和云存储使用重复数据删除、实现高效存储管理。</block>
  <block id="40b8f42feb3b273a69061871959c334b" category="list-text">与NetApp存储阵列(例如AFF、FAS、NetApp HCI和E系列阵列)以及NetApp SolidFire^®^横向扩展存储系统集成。此外，还可以与NetApp Cloud Volumes ONTAP软件集成，在NetApp存储产品组合中自动创建索引化的应用程序感知型NetApp Snapshot™副本。</block>
  <block id="bac96a2448236465a33577db5bbbfafb" category="list-text">全面的虚拟基础架构管理、可支持领先的内部虚拟虚拟机管理程序和公共云超规模平台。</block>
  <block id="79b01f0de034ee56053c5a83bbbbc371" category="list-text">高级安全功能、可限制对关键数据的访问、提供精细管理功能、并为Active Directory用户提供单点登录访问。</block>
  <block id="7631df1a16e7c86a241133ce56a5626e" category="list-text">基于策略的数据管理、支持您根据业务需求(而不是物理位置)管理数据。</block>
  <block id="dbd89d5407a94aa887d7f9793148af24" category="list-text">提供最先进的最终用户体验、让您的用户能够保护、查找和恢复自己的数据。</block>
  <block id="c71c3c5075c3ae71dfa4cd9ad0c8f690" category="list-text">API驱动的自动化、支持您使用第三方工具(如vReise Automation或Service Now)来管理数据保护和恢复操作。</block>
  <block id="56cc4502e343e76ad448ffe3a05fc18c" category="paragraph">有关支持的工作负载的详细信息、请访问<block ref="6c465f42cde4c9569daed31dc24f517e" category="inline-link-rx"></block>。</block>
  <block id="585473463b3cb51e50ec6023b5b51685" category="paragraph">NetApp StorageGRID作为Commvault云层 是一种企业级混合云对象存储解决方案。您可以将其部署在多个站点上、无论是专用设备还是软件定义的部署。通过StorageGRID、您可以建立数据管理策略、以确定如何存储和保护数据。StorageGRID会收集您制定和实施策略所需的信息。它分析了广泛的特性和需求、包括性能、持久性、可用性、地理位置、 寿命和成本。随着数据在不同位置之间移动以及数据老化、数据将得到全面维护和保护。</block>
  <block id="f99347a4e5e36d0e5ba4bffb0d1598ab" category="paragraph">StorageGRID智能策略引擎可帮助您选择以下选项之一：</block>
  <block id="ed1c9e59475f7c0dfda1df3a7da27812" category="list-text">使用纠删编码跨多个站点备份数据、以提高故障恢复能力。</block>
  <block id="d470af9a0291f968f65b28b830fc86cd" category="list-text">将对象复制到远程站点、以最大程度地降低WAN延迟和成本。</block>
  <block id="7bd9a8aa8ea326b44f2bcde2f3609ff5" category="paragraph">当StorageGRID存储对象时、无论该对象位于何处或存在多少副本、您都可以将其作为一个对象进行访问。这种行为对于灾难恢复至关重要、因为借助这种行为、即使数据的一个备份副本损坏、StorageGRID也能够还原数据。</block>
  <block id="118e6fb1b88f8c0f0cfd7dee3bf51a37" category="paragraph">将备份数据保留在主存储中的成本可能很高。使用NetApp StorageGRID时、您可以通过将非活动备份数据迁移到StorageGRID来释放主存储上的空间、同时还可以从StorageGRID的众多功能中受益。备份数据的价值会随着时间的推移而变化、存储成本也会随之变化。StorageGRID可以最大限度地降低主存储的成本、同时提高数据的持久性。</block>
  <block id="b82ecf69498cda86864f62d82c7ccb6b" category="section-title">解决方案设置</block>
  <block id="a3ad938334ebe31fa6bd5526fdde0c2d" category="paragraph">在实验室设置中、StorageGRID环境包含四个NetApp StorageGRID SG5712设备、一个虚拟主管理节点和一个虚拟网关节点。SG5712设备是入门级选项—一种基线配置。选择NetApp StorageGRID SG5760或SG6060等性能更高的设备选项可以显著提高性能。请咨询NetApp StorageGRID 解决方案 架构师以获得规模估算帮助。</block>
  <block id="2502d49022714233caf9bb360eed1259" category="paragraph">对于其数据保护策略、StorageGRID使用集成生命周期管理(ILM)策略来管理和保护数据。在策略中自上而下评估ILM规则。我们实施了表2中所示的ILM策略。</block>
  <block id="03b71896a803d1674387b9ace5509c97" category="section-title">表2) StorageGRID ILM策略。</block>
  <block id="9bae64ff51701a09557836797ee3739f" category="cell">ILM规则</block>
  <block id="619dd4db8171a8f1bf978f44c9cf10c4" category="cell">限定符</block>
  <block id="80cb0c66c0080d1e4c291f66705ba62d" category="cell">载入行为</block>
  <block id="8143290d673d927f4a362b2726e52d06" category="paragraph">纠删编码2+1</block>
  <block id="61fed6f594f54558c7a9bc0ac4abb7e5" category="paragraph">超过200 KB的对象</block>
  <block id="c6589f5236c0c434d0c63dc5f9a856f2" category="paragraph">平衡</block>
  <block id="a98f005d5c19a50a6134d6a62274c1f8" category="paragraph">2副本</block>
  <block id="3e6defd685231cdd12065add41996c89" category="paragraph">所有对象</block>
  <block id="dcd8a20c909a5d0bbf6f852d688309cb" category="paragraph">双提交</block>
  <block id="f2382f08b2b3ae5b16fd3e6a7f6fe40c" category="paragraph">默认规则为ILM 2复制规则。在此测试中、对任何200 KB或更大的对象应用了纠删编码2+1规则。默认规则应用于小于200 KB的对象。以这种方式应用规则是StorageGRID的最佳实践。</block>
  <block id="9fd2a44a56a109ab7ff40317cdd4cc9b" category="inline-link">借助Commvault,实现NetApp横向扩展数据保护</block>
  <block id="f7d7cdf329bd5cf1893317ad3732d1f7" category="paragraph">有关此测试环境的技术详细信息、请阅读中的解决方案设计和最佳实践一节<block ref="03ce17f8b5e1206a493f3bd56ef5953d" category="inline-link-rx"></block> 技术报告。</block>
  <block id="92672a7a2b909945fbfa9f44f057c7a1" category="section-title">规模估算</block>
  <block id="de6340e74a7b4b37632d447d082a219e" category="paragraph">有关适用于您环境的特定规模估算、请咨询NetApp数据保护专家。NetApp数据保护专家可以使用CommvaultTotal Backup Storage Calculator工具来估计备份基础架构需求。该工具需要CommvaultPartner Portal访问权限。如果需要、请注册访问权限。</block>
  <block id="850723af1b528eaff214961e1477f7f2" category="section-title">CommvaultSizing Inputs.</block>
  <block id="e3b0761b4b3dd1b0a93403608c54ca50" category="paragraph">可以使用以下任务来执行发现以调整数据保护解决方案的大小：</block>
  <block id="3cf303266a00ea5459dd889344aed185" category="list-text">确定需要保护的系统或应用程序/数据库工作负载以及相应的前端容量(以TB为单位)。</block>
  <block id="a6fc6119f758a2807e997797f666329c" category="list-text">确定需要保护的虚拟机/文件工作负载和类似前端容量(TB)。</block>
  <block id="45b2ce852d6ed5f33b77406aac08556c" category="list-text">确定短期和长期保留要求。</block>
  <block id="62f64531410b8711dc0f7e3749b00000" category="list-text">确定已确定的数据集/工作负载的每日变更率百分比。</block>
  <block id="e20a5b161f3a78a8aa8b41995cb1056f" category="list-text">确定未来12、24和36个月的预计数据增长。</block>
  <block id="546f4bb0db4eb4c0474451ef4087425b" category="list-text">根据业务需求定义用于数据保护/恢复的RTO和RPO。</block>
  <block id="b9b087f8be7670b2ba95f7b2ee0e66c0" category="paragraph">获得此信息后、便可完成备份基础架构规模估算、从而细分所需的存储容量。</block>
  <block id="2d782d1c787a750e5ae7cdfbf33e0b65" category="section-title">StorageGRID大小指导</block>
  <block id="293d59d0c1b3635b7390405d92fee965" category="paragraph">在执行NetApp StorageGRID规模估算之前、请考虑工作负载的以下方面：</block>
  <block id="b3e1f4c67ee07a73dcdaff1cf34f2640" category="list-text">可用容量</block>
  <block id="dcd71c3bab40cab965c2424166b5b11d" category="list-text">WORm模式</block>
  <block id="af11a561a773e12e2fa9ba93ce506330" category="list-text">平均对象大小</block>
  <block id="fdfceedcfadaa8fc4e641a9271ff7595" category="list-text">性能要求</block>
  <block id="e1044b693615d4848c50aa5f02be9315" category="list-text">已应用ILM策略</block>
  <block id="c6e6b34f0e5e37e48be00e166f7bd2cb" category="paragraph">可用容量需要满足您已分层到StorageGRID的备份工作负载的大小以及保留计划。</block>
  <block id="3e5b0f346efbe49d36a724d923e318ba" category="paragraph">WORM模式是否启用？在Commvault"中启用WORM后、此操作将在StorageGRID上配置对象锁定。这将增加所需的对象存储容量。所需的容量因保留期限和每次备份的对象更改数而异。</block>
  <block id="74c32df19b25aa02e414011c18db023d" category="paragraph">平均对象大小是一个输入参数、用于帮助估算StorageGRID环境中的性能规模。Commvault"工作负载使用的平均对象大小取决于备份类型。</block>
  <block id="a0e738d4eef6a816ac737bf34e54a942" category="paragraph">表3按备份类型列出了平均对象大小、并介绍了还原过程从对象存储中读取的内容。</block>
  <block id="2333f85cd072d4d90857e142fd494184" category="section-title">表3) Commvault"工作负载对象大小和还原行为"。</block>
  <block id="a09aa546b6aa449c6baf91e8d0ebb636" category="cell">备份类型</block>
  <block id="f95891c0ab9af9cf4d2eb297027c954d" category="cell">平均对象大小</block>
  <block id="6dfea787ea9494eca4a1491e9a9cd7e7" category="cell">还原行为</block>
  <block id="4a5284900affdafea6abfa93ccd8875e" category="paragraph">在StorageGRID中创建辅助副本</block>
  <block id="56aefd6942690fe653a60ce8762c3fae" category="paragraph">32 MB</block>
  <block id="69a2ecbb677a732e4f381bca77d41617" category="paragraph">完全读取32 MB对象</block>
  <block id="754b17607005a22396d824adf9193697" category="paragraph">将备份定向到StorageGRID (已启用重复数据删除)</block>
  <block id="b097e0a29568c51c88fec3b457c732b6" category="paragraph">8MB</block>
  <block id="8ef6bf4afbc7dfa36d2999b2dde70607" category="paragraph">1 MB随机范围读取</block>
  <block id="243bf10c4e6c1609f52782d457f76156" category="paragraph">将备份定向到StorageGRID (已禁用重复数据删除)</block>
  <block id="abfb05e87809fdb217c3f9c8b7970ce2" category="paragraph">此外、了解完整备份和增量备份的性能要求有助于确定StorageGRID存储节点的规模估算。StorageGRID信息生命周期管理(ILM)策略数据保护方法可确定存储Commvaults备份所需的容量、并影响网格的规模估算。</block>
  <block id="464eb8c3015571353037cdb21da0f4d1" category="paragraph">StorageGRID ILM复制是StorageGRID用于存储对象数据的两种机制之一。当StorageGRID将对象分配给复制数据的ILM规则时、系统会为对象的数据创建精确副本、并将这些副本存储在存储节点上。</block>
  <block id="b6a556e693b6d0301d99a27a637d5a0e" category="paragraph">纠删编码是 StorageGRID 存储对象数据的第二种方法。当StorageGRID将对象分配给配置为创建经过删除编码的副本的ILM规则时、它会将对象数据分区为数据片段。然后、它会额外地对奇偶校验片段进行运算、并将每个片段存储在不同的存储节点上。访问某个对象时，系统会使用存储的片段重新组合该对象。如果数据片段或奇偶校验片段损坏或丢失、纠删编码算法可以使用剩余数据和奇偶校验片段的一部分重新创建该片段。</block>
  <block id="2cbd7f18ab3e999a21c4dba60191a95b" category="paragraph">这两种机制需要不同的存储量、如以下示例所示：</block>
  <block id="b162424b4a40f919bc77c8a4ada556a5" category="list-text">如果存储两个复制副本、则存储开销会增加一倍。</block>
  <block id="4dcb2b649002340390e73a82e0f53e74" category="list-text">如果您存储的是2+1经过删除的副本、则存储开销会增加1.5倍。</block>
  <block id="b3ccf50d91fb7c1b2a91a90b2fdcbc11" category="paragraph">对于测试的解决方案、我们使用了单个站点上的入门级StorageGRID部署：</block>
  <block id="edb52e1c5e94ec07b0da6c55e66a6dc5" category="list-text">管理节点：VMware虚拟机(VM)</block>
  <block id="512766f8f9ea73555dd725677342729b" category="list-text">负载平衡器：VMware VM</block>
  <block id="075742127b6818880333cba369626334" category="list-text">存储节点：4个SG5712、带有4 TB驱动器</block>
  <block id="48ce2b888edeb7c90c49b7acb217a0da" category="list-text">主管理节点和网关节点：具有最低生产工作负载要求的VMware VM</block>
  <block id="01b3d30d9a73f3002456c96c117546a7" category="paragraph">StorageGRID还支持第三方负载平衡器。</block>
  <block id="254b8ac10c6e4affc88ed5a3300b91ab" category="paragraph">StorageGRID通常部署在两个或更多站点中、并采用数据保护策略来复制数据、以防止发生节点和站点级故障。通过将数据备份到StorageGRID、您的数据将受到多个副本或通过纠删编码的保护、这些编码可通过一种算法可靠地分隔和重新组合数据。</block>
  <block id="adc69293e8fd256b2609664f1e11cb53" category="inline-link">Fusion</block>
  <block id="f0d97e78bf1c5ff4659d7f868170f3a4" category="paragraph">您可以使用规模估算工具<block ref="8ea841f9b1986a19de18878436c983c7" category="inline-link-rx"></block> 调整网格大小。</block>
  <block id="bc967dc2d57e6eff184a821bf7577a80" category="section-title">扩展</block>
  <block id="900c557ee6849406e1e6f451f65bdde1" category="paragraph">您可以通过向存储节点添加存储、向现有站点添加新网格节点或添加新数据中心站点来扩展NetApp StorageGRID系统。您可以在不中断当前系统运行的情况下执行扩展。
StorageGRID可以通过为存储节点或运行负载平衡器和管理节点的物理设备使用性能更高的节点来扩展性能、也可以通过简单地添加更多节点来扩展性能。</block>
  <block id="87c6a063dd59ec7afe1b7de60674167f" category="inline-link">《StorageGRID 11.8.</block>
  <block id="178a2b6eb168714f3392d86f31b81107" category="paragraph">有关扩展StorageGRID系统的详细信息、请参见<block ref="ad2f8b162bf757bc05f37ca0091f2d6d" category="inline-link-rx"></block>。</block>
  <block id="39e0647405a456dbe0f327581e422077" category="section-title">StorageGRID硬件规格</block>
  <block id="7ac8ba0d8d9d0dbf967afc44eebecee4" category="paragraph">表4介绍了此测试中使用的NetApp StorageGRID硬件。采用10Gbps网络连接的StorageGRID SG5712设备是入门级选项、代表了一种基线配置。也可以为SG5712配置25 Gbps网络连接。</block>
  <block id="380be67f84564c575abe95593c0c96c3" category="paragraph">选择NetApp StorageGRID SG5760、SG6060或全闪存SGF6112设备等性能更高的设备选项可以显著提升性能。请咨询NetApp StorageGRID 解决方案 架构师以获得规模估算帮助。</block>
  <block id="1c0a4a363a35650f52d2788c8c1e3340" category="section-title">表4) SG5712硬件规格。</block>
  <block id="3c02a379965ab0dfcd77b1c484450433" category="cell">硬件</block>
  <block id="694e8d1f2ee056f98ee488bdc4982d73" category="cell">数量</block>
  <block id="380dbc8d9d2c8a17f6ebb0b2c62d3e85" category="cell">Disk</block>
  <block id="1d9a663a8048fa4c70d3b7da3290365f" category="cell">可用容量</block>
  <block id="eec89088ee408b80387155272b113256" category="cell">网络</block>
  <block id="d2d801f305ba0e6fa6a9b891a48ab761" category="paragraph">StorageGRID SG5712设备</block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="paragraph">4.</block>
  <block id="a5983f5b9038e27d7801178f702c8ca0" category="paragraph">48个4 TB (近线SAS HDD)</block>
  <block id="7f070e79f8fb5c07df2dcdedad1d7981" category="paragraph">136 TB</block>
  <block id="11e8c7c9ca2479f825be4a5b2207c2e4" category="paragraph">10 Gbps</block>
  <block id="cbf13ee4de3e188484a6f9e54ec774d4" category="section-title">Commvault"和StorageGRID软件要求</block>
  <block id="9f06e1bbda93a5691f767c9a6bd5d5cc" category="paragraph">表5和表6列出了在我们的测试中安装在VMware软件上的Commvaults和NetApp StorageGRID软件的软件要求。安装了四个MediaAgent数据传输管理器和一个CommServe服务器。在测试中、我们为VMware基础架构实施了10 Gbps网络连接。</block>
  <block id="24ab73c686b5112b49ce6f98750612b7" category="section-title">表5) CommVault软件的系统总要求。</block>
  <block id="2cb05e4bb7830be982f0922fed86b4cd" category="cell">组件</block>
  <block id="8a5227cc82d14862956938caffc1acf2" category="cell">数据存储库</block>
  <block id="6f6cb72d544962fa333e2e34ce64f719" category="cell">Size</block>
  <block id="96b0141273eabab320119c467cdcaf17" category="cell">总计</block>
  <block id="c7f6eda2b5882630770159be5e3c5a0d" category="cell">所需的总IOPS</block>
  <block id="63a1a7c310d221d52fa70fd4b2069f4f" category="paragraph">CommServe服务器</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="paragraph">1.</block>
  <block id="17bc10091293fdc562a6db69940ee924" category="paragraph">os</block>
  <block id="e38c9d3443457efbb3f9e8d08a8b5c5b" category="paragraph">500 GB</block>
  <block id="274b68192b056e268f128ff63bfcd4a4" category="paragraph">不适用</block>
  <block id="9778840a0100cb30c982876741b0b5a2" category="paragraph">SQL/</block>
  <block id="c5ae3175ae0f68be6c3428dbe833be99" category="paragraph">MediaAgent</block>
  <block id="c56996cb460ab9ee13fbfb489522cad5" category="paragraph">虚拟CPU (vCPU)</block>
  <block id="c74d97b01eae257e44aa9d5bade97baf" category="paragraph">16.</block>
  <block id="ea5d2f1c4608232e07d3aa3d998e5135" category="paragraph">64</block>
  <block id="e53619c1fe611a51eeeb8d148ba6e532" category="paragraph">RAM</block>
  <block id="902b52e9ee55baad95374c0815e0d188" category="paragraph">128 GB</block>
  <block id="10a7cdd970fe135cf4f7bb55c0e3b59f" category="paragraph">512</block>
  <block id="2dc6494faaf47acd40a479d5e8f22eeb" category="paragraph">2 TB</block>
  <block id="84e2027c504e2b4b983e4b5734ad7d5c" category="paragraph">索引缓存</block>
  <block id="42cc03da5dd9834d6beb08900e77d96e" category="paragraph">8 TB</block>
  <block id="4c5da6b5ca9d093be38b4da1035de5ca" category="paragraph">200多个</block>
  <block id="d02340dc3ba5e6755a60283779457ac6" category="paragraph">DDB</block>
  <block id="4b68c01a22855e38e3082b749de02ba5" category="paragraph">200-80000 K</block>
  <block id="fd5ab623109855762f689a3b63d50d9d" category="paragraph">在测试环境中、VMware上的NetApp E系列E2812存储阵列上部署了一个虚拟主管理节点和一个虚拟网关节点。每个节点都位于一台单独的服务器上、具有表6中所述的最低生产环境要求：</block>
  <block id="edfcb8c8756d94a5053287cc7c5bb985" category="section-title">表6) StorageGRID虚拟管理节点和网关节点的要求。</block>
  <block id="95363aa90e372ebfaf3970380516572f" category="cell">节点类型</block>
  <block id="5d56dbd20d9ee1ab8a722ff12e331953" category="cell">vCPU</block>
  <block id="8c4aa541ee911e8d80451ef8cc304806" category="cell">存储</block>
  <block id="f7aa6dfb52b6b0d539a8be4872a287f8" category="paragraph">网关节点</block>
  <block id="c9f0f895fb98ab9159f51fd0297e236d" category="paragraph">8.</block>
  <block id="bc7bf06ca2631ef1531ed5dc65a24f74" category="paragraph">24 GB</block>
  <block id="2be1f61edb7b7e4217e348e8d68c3bdb" category="paragraph">100 GB LUN、用于操作系统</block>
  <block id="4c80ce09ddde27d3fd5c0bb436bc85b9" category="paragraph">管理节点</block>
  <block id="c6ab7905f828c85832f97995c1de53c9" category="paragraph">200 GB LUN、用于管理节点表</block>
  <block id="69108e14aa48ab2bba84a59654aed432" category="paragraph">200 GB LUN、用于管理节点审核日志</block>
  <block id="55d6f03ef9d28326ab829ca5d2678109" category="section-title">使用Commvault完 整备份和恢复以及NetApp StorageGRID运行数据保护作业</block>
  <block id="624726d5ed2d940147c46600099b1b20" category="paragraph">要为NetApp StorageGRID配置适用于NetApp的Commvault完 整备份和恢复、请执行以下步骤、以便在Commvault软件 中将StorageGRID添加为云库。</block>
  <block id="98e8e1a08dff2be7e31ea4273d1252cf" category="section-title">使用NetApp StorageGRID配置Commvault</block>
  <block id="3f139c400a23226143fbb4c472b54b04" category="list-text">登录到CommvaultCommand Center。在左侧面板上、单击"存储"&gt;"云"&gt;"添加"以查看并响应"添加云"对话框：</block>
  <block id="b9693cedb91ba2290fa1e958a43307a7" category="inline-image-macro">添加云</block>
  <block id="d7b2bbcbec44a75a29e4d684f80fbed1" category="paragraph"><block ref="d7b2bbcbec44a75a29e4d684f80fbed1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e7716d81d180918f49287e4cffec864b" category="list-text">对于类型、选择NetApp StorageGRID。</block>
  <block id="f2328e03c7cb647329406eeecccf4cee" category="list-text">对于MediaAgent、选择与云库关联的所有。</block>
  <block id="8880a4bf1f03731649f1c0440d513f95" category="list-text">对于服务器主机、输入StorageGRID端点的IP地址或主机名以及端口号。</block>
  <block id="6a0eaeb7d5862ce617029226cd1ddb73" category="inline-link">如何配置负载平衡器端点(端口)</block>
  <block id="a3636f86ff974c19fd6fff205c8e5614" category="paragraph">按照上的StorageGRID文档中的步骤进行操作<block ref="1100cc5690fec9e9d1b69376de24b8a1" category="inline-link-rx"></block>。确保您有一个HTTPS端口、其中包含自签名证书以及StorageGRID端点的IP地址或域名。</block>
  <block id="03797fee0986db2f87c5cac8fcdb1dde" category="list-text">如果要使用重复数据删除、请启用此选项并提供指向重复数据删除数据库位置的路径。</block>
  <block id="7557bd62e953fb4d48f07977151ea94f" category="list-text">单击保存。</block>
  <block id="43f16fcba150904a7bc15439308479cb" category="section-title">创建以NetApp StorageGRID为主要目标的备份计划</block>
  <block id="ce43cd7410027d345f9c6f5c79d39d2d" category="list-text">在左侧面板上、选择Manage &gt; Plans以查看并响应Create Server Backup Plan对话框。</block>
  <block id="8280fcbd09b67e4a2a2180030f18ee89" category="inline-image-macro">创建服务器备份计划</block>
  <block id="e6e155a2825afd1e66e915eba6056af0" category="paragraph"><block ref="e6e155a2825afd1e66e915eba6056af0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="35cef3079f40303a520fe4fb98509a28" category="list-text">输入计划名称。</block>
  <block id="ed9638b797083e4574c1bda37d24d0fc" category="list-text">选择先前创建的StorageGRID简单存储服务(S3)存储备份目标。</block>
  <block id="cc10fccab84b1a6fe5a3b014f2ac16fe" category="list-text">输入所需的备份保留期限和恢复点目标(RPO)。</block>
  <block id="317c3634f6ad30cd0bc9e98a4725d400" category="section-title">启动备份作业以使用CommvaultSoftware和StorageGRID保护工作负载</block>
  <block id="ba57deab107afb6c3808fe3a667bb7b5" category="paragraph">要启动从CommvaultComplete Backup and Recovery到StorageGRID的备份作业、请执行以下步骤：</block>
  <block id="1e6c34e7c31e91ec0533fdb6b4825478" category="list-text">在CommVault Command Center上、导航到"Protect"&gt;"Virtualization (保护&gt;虚拟化)"。</block>
  <block id="33a281881beebd42edbba1170de6ebdb" category="list-text">添加VMware vCenter Server虚拟机管理程序。</block>
  <block id="0582da82b14c1d127296cc0e0c1e593f" category="list-text">单击刚刚添加的虚拟机管理程序。</block>
  <block id="12d1eaf919942bd27fafed65a4eaa44b" category="list-text">单击添加VM组以响应添加VM组对话框、以便您可以查看计划保护的vCenter环境。</block>
  <block id="4316988282aed94dacaa8b4b66bec00b" category="inline-image-macro">添加VM组</block>
  <block id="5db14a33d51cc3d07064c129a11e4dfb" category="paragraph"><block ref="5db14a33d51cc3d07064c129a11e4dfb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="61febfa4c91db0399b8837e0c209881e" category="list-text">选择一个数据存储库、一个VM或一组VM、然后为其输入一个名称。</block>
  <block id="b55f90f1dad898510ca7b78db85ef1b4" category="list-text">选择您在上一任务中创建的备份计划。</block>
  <block id="58785b3df6de95af5db042098848d79c" category="list-text">单击保存以查看您创建的VM组。</block>
  <block id="2ea49c4e99265736f831cc64151e93cb" category="list-text">在虚拟机组窗口的右上角、选择备份：</block>
  <block id="1c964f034a0012b392a4cf6b87ac0fba" category="inline-image-macro">VM组</block>
  <block id="b8409b035475aa7ff8ff45771ca8c6f1" category="paragraph"><block ref="b8409b035475aa7ff8ff45771ca8c6f1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5e3c2bce0112505e3bfead83355284d" category="list-text">选择完整作为备份级别、(可选)备份完成后请求电子邮件、然后单击确定启动备份作业：</block>
  <block id="eee4c34c5b08e040c0e736a8e298f721" category="inline-image-macro">备份级别</block>
  <block id="6cc8cde2c84a6c1a21e31318d689c48b" category="paragraph"><block ref="6cc8cde2c84a6c1a21e31318d689c48b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f180b371d83592db209e4e7f07bd7f96" category="list-text">导航到作业摘要页面以查看作业指标：</block>
  <block id="bc2966582cc91a73dfce86d847e8e569" category="inline-image-macro">作业摘要</block>
  <block id="ce8f9b25ff69c679a10481c883fed679" category="paragraph"><block ref="ce8f9b25ff69c679a10481c883fed679" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23571a6157715a68dbc83017094ddb4f" category="section-title">基线性能测试</block>
  <block id="225de55f95e8814ef869602a34589cd7" category="paragraph">测试涉及100个VM和1000个VM、这两个测试都包含50/50的Windows和CentOS VM。</block>
  <block id="229f4b7ae2ae04662d95b14f93a7ebe0" category="section-title">表7)基线性能测试。</block>
  <block id="2a78ed76450c3cb42320882b3e055b31" category="cell">操作</block>
  <block id="7e1474aa3c4832c1061cf4839e5d5d40" category="cell">备份速度</block>
  <block id="d9cb8f643ee1e5634cee0a2f4dc3dcde" category="cell">恢复速度</block>
  <block id="770d588cad23e4bf00734e4271f614fd" category="paragraph">辅助复印</block>
  <block id="1bd5cb95562494b849b4e43073e86dd0" category="paragraph">2 TB/小时</block>
  <block id="6e18c63ab6e3f65e0cacdc25607a044b" category="paragraph">1.27 TB/小时</block>
  <block id="cd8362e2e8655ccb1cee59cfbe698457" category="paragraph">直接与对象连接和从对象连接(启用重复数据删除)</block>
  <block id="e8d76835d2ff06b926aad0a1a3abc063" category="paragraph">2.2 TB/小时</block>
  <block id="4cd450a475fe3ee9b59eb120652eeaa9" category="paragraph">1.22 TB/小时</block>
  <block id="6c24655e80561dbbf463d7c411594029" category="paragraph">为了测试过期性能、删除了250万个对象。如图2和图3所示、删除操作在3小时内完成、并释放了80 TB以上的空间。删除运行于上午10：30开始。</block>
  <block id="4c1a9a798859a7662d448a099c8f19c2" category="section-title">图1)在3小时内删除250万(80 TB)个对象。</block>
  <block id="05e3d90010c26e3ef8176b0d49eabdb3" category="inline-image-macro">对象</block>
  <block id="c09d8cd9b39a4736f34838dd7cf3f7a5" category="paragraph"><block ref="c09d8cd9b39a4736f34838dd7cf3f7a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18967e6af4f60b163c3348f6c5e180f0" category="section-title">图2)在3小时内释放80 TB的存储。</block>
  <block id="6d2b9f3277e042907d537d8a6101be35" category="inline-image-macro">存储随时间变化</block>
  <block id="4fc5dae0e8a159f3d86289050bbd7311" category="paragraph"><block ref="4fc5dae0e8a159f3d86289050bbd7311" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0b40e1fd7ca1cc5d222d54ea1d246cc" category="section-title">存储分段一致性级别建议</block>
  <block id="8230e2a5dfbb7d3dc9d7837f464a94f4" category="paragraph">通过NetApp StorageGRID、最终用户可以为对简单存储服务(S3)分段中的对象执行的操作选择一致性级别。</block>
  <block id="eb668bdb2b4d4ac34c6ad7523c133230" category="paragraph">CommVault MediaAgent是CommVault环境中的数据迁移程序。大多数情况下，MediaAgent配置为在本地写入主StorageGRID站点。因此、建议在本地主站点中使用高一致性级别。在StorageGRID中创建的Commvault"分段上设置一致性级别时、请遵循以下准则。</block>
  <block id="3ceaa99fe3628c0d4ddb470789b9212d" category="list-text">Commvault11.0.0之前的版本- Service Pack 16.*在11.0.0之前的版本- Service Pack 16中，Commvault"会在还原和删减过程中对不存在的对象执行S3 head和GET操作。将存储分段一致性级别设置为强站点、以便为Commvaultvault"备份到StorageGRID实现最佳一致性级别。</block>
  <block id="9a76294cf4d43d5686590bb6c98a280b" category="list-text">Commvault11.0.0版- Service Pack 16及更高版本。*在11.0.0版- Service Pack 16及更高版本中、对不存在的对象执行S3机头和GET操作的数量将降至最低。将默认分段一致性级别设置为read-after-new-write、以确保StorageGRID环境中的高一致性级别。</block>
  <block id="3887d417240a72ab69f6d0301efd3b2b" category="section-title">从何处查找追加信息</block>
  <block id="b69ce771bb450c54c2a29e08595a1621" category="list-text">StorageGRID 1.18文档中心+
<block ref="47ea1c2d0f136bec8b3e66c2121bf70f" category="inline-link-rx"></block></block>
  <block id="a1b241b7e61d12e641e864fa7e3c7a8e" category="list-text">NetApp产品文档+
<block ref="fa4af55c3fdbce23e96d2cf73261fa5b" category="inline-link-rx"></block></block>
  <block id="748e9574a05efa0e0738de58c2ff670b" category="list-text">CommVault文档+
<block ref="27eb3a3d6ca60f8dbf05e2df1f7e4644" category="inline-link-rx"></block></block>
  <block id="c4d7e990537b5cabb7c53ef27e8240d3" category="paragraph">Veeam仅要求通过HTTPS连接端点。Veeam不支持非加密连接。SSL证书可以是自签名证书、专用可信证书颁发机构或公共可信证书颁发机构。为了确保持续访问S3存储库、建议在HA配置中至少使用两个负载平衡器。负载平衡器可以是位于每个管理节点和网关节点上的StorageGRID提供的集成负载平衡器服务、也可以是位于F5、Kemp、HAProxy、Loadbalancer.org等第三方解决方案上的集成负载平衡器服务 通过使用StorageGRID负载平衡器、可以设置流量划分器(QoS规则)、以便确定Veeam工作负载的优先级、或者限制Veeam、使其不会影响StorageGRID系统上优先级较高的工作负载。</block>
  <block id="2adef84f9348cc9769b8c3e1982c3cb1" category="list-text">对于带有扩展架的SG6060或SG6160、您需要将正确磁盘架驱动器大小所需的时间与基本设备时间相加、以获取完整克隆持续时间。</block>
  <block id="77ffe904133c5c2e3ab960ef54b7be2d" category="section-title">SG5712/SG5812 -&gt;任意</block>
  <block id="2060afee4c8201b859d447131ee1434a" category="section-title">SG5660 -&gt; SG5760/SG5860</block>
  <block id="85b9faf406d03aaecca5e119294ceb1a" category="section-title">SG5660 -&gt; SG6060/SG6160</block>
  <block id="7d9a95e91e60865aaa29da1eb0f75121" category="section-title">SG5760/SG5860 -&gt; SG5760/SG5860</block>
  <block id="ab7ccd4f66da0de459e420e05417e0dd" category="section-title">SG5760/SG5860 -&gt; SG6060/SG6160</block>
  <block id="25b15e92a1710d10f6bca458e130baaa" category="section-title">SG6060/SG6160 -&gt; SG6060/SG6160</block>
  <block id="6219d1d3d5ac2385dfb8d391122edd3e" category="section-title">扩展架(为源设备上的每个磁盘架添加SG6060/SG6160以上的磁盘架)</block>
  <block id="1205e091df9e90556815e815df78ccdc" category="summary">了解如何将站点添加到StorageGRID以提高可靠性和存储容量。</block>
  <block id="6a9714b250b5ba368a7e2748ba67961e" category="doc">将站点添加到StorageGRID</block>
  <block id="c33142e487188ddf418851462b9f7330" category="paragraph">安装StorageGRID时、必须至少创建一个站点。您可以创建其他站点来提高 StorageGRID 系统的可靠性和存储容量。</block>
  <block id="ac8fd5f9577e4ae4eb4a8fe620216de9" category="paragraph">要添加站点、请完成以下步骤：</block>
  <block id="130e1538b9d47c6356996089d17dcc9d" category="list-text">在Sites页面上、输入站点名称。</block>
  <block id="c197e60a49f72b1ab7f60e3562193354" category="list-text">要添加其他站点、请单击最后一个站点条目旁边的加号、然后在新站点名称文本框中输入该名称。根据需要为网格拓扑添加尽可能多的其他站点。您最多可以添加 16 个站点。</block>
  <block id="1d194d439e614fd5af6d6e0ca435ee48" category="inline-image-macro">裸机添加站点</block>
  <block id="dcae96231bba4c35e94accf7724b8cea" category="list-text">单击下一步。</block>
  <block id="6e260d6df26abe1d47f9156c30667329" category="summary">了解如何审核和批准加入StorageGRID系统的任何待定网格节点。</block>
  <block id="20d84da7bdca5a26838fe674351adfa6" category="doc">批准StorageGRID的网格节点</block>
  <block id="dd27eb140b9362b077584e80378fc256" category="paragraph">您必须先批准每个网格节点、然后再将其加入StorageGRID系统。</block>
  <block id="f5d442b2eb0fdc6127dc4d1f7426db6c" category="admonition">开始之前、必须部署所有虚拟节点和StorageGRID设备网格节点。</block>
  <block id="9567945951ddee485986404c191a7470" category="paragraph">要批准待定网格节点、请完成以下步骤：</block>
  <block id="c6db0f071446a3ac0ac082729f6b76c9" category="list-text">查看Pending Node列表、并确认它显示了您部署的所有网格节点。</block>
  <block id="c17a11a7bd7c8fb88cf892fc290c2512" category="admonition">如果缺少网格节点，请确认已成功部署该节点。</block>
  <block id="d575f8832e003888f4562052cfb3a6f6" category="list-text">单击要批准的待定节点旁边的单选按钮。</block>
  <block id="e7b101119399fe8adb08d34996866226" category="inline-image-macro">介质/裸机-批准-配置-网格-节点</block>
  <block id="06b143508ebbc3dd17cd58c38e7e99d5" category="list-text">单击批准。</block>
  <block id="ae401da0d59e062e16119c35b5533f00" category="list-text">在常规设置中、根据需要修改以下属性的设置。</block>
  <block id="cf7d82d0beb2aacccbdaf21cf0de1733" category="inline-image-macro">裸机管理节点配置</block>
  <block id="7ccb01f3ef7de333bbde0913e8a09b32" category="paragraph">--*Site*:此网格节点的站点的系统名称。</block>
  <block id="22af84ec92b59f976dcfa953d21b6629" category="paragraph">--*Name*：要分配给节点的主机名，以及要在网格管理器中显示的名称。此名称默认为您在节点部署期间指定的名称、但您可以根据需要更改此名称。</block>
  <block id="779cbaa6d822c0c104a91d0cf0c9ca90" category="paragraph">--*NTP角色*:网格节点的NTP角色。选项包括"自动"、"主"和"客户端"。选择自动选项会将主要角色分配给管理节点、具有管理域控制器(ADC)服务的存储节点、网关节点以及具有非静态IP地址的任何网格节点。所有其他网格节点均分配有客户端角色。</block>
  <block id="bc5ff630b986d70c3d01149085ed9603" category="admonition">确保每个站点至少有两个节点可以访问至少四个外部 NTP 源。如果一个站点上只有一个节点可以访问 NTP 源，则在该节点关闭时会发生计时问题。此外，指定每个站点两个节点作为主要 NTP 源可确保在站点与网格其余部分隔离时的时间准确无误。</block>
  <block id="0a8135e977a0513c3548aea5bcf1b951" category="paragraph">--*ADC服务(仅限存储节点)*:选择“自动”让系统确定节点是否需要ADC服务。此 ADA 服务可跟踪网格服务的位置和可用性。每个站点上必须至少有三个存储节点包含ADC服务。在部署此节点后，您不能将此 ADC 服务添加到该节点中。</block>
  <block id="7f980d815a2719358c59773710a366f4" category="list-text">在Grid Network中、根据需要修改以下属性的设置：</block>
  <block id="c5cd323d1d4f455b9e99799f2b0048f5" category="paragraph">--*IPv4地址(CIDR)*：网格网络接口(容器内的eth0)的CIDR网络地址。例如，<block ref="65147a8c806fca06582c6d5826cb4e49" prefix=" " category="inline-code"></block>。</block>
  <block id="0ca8ce1cf76529cdb03f67906817aa79" category="paragraph">--*Gateway：网格网络网关。例如，<block ref="f0fdb4c3f58e3e3f8e77162d893d3055" prefix=" " category="inline-code"></block>。</block>
  <block id="9f51c379666a4a504fcfd6175307356e" category="admonition">如果有多个网格子网、则需要网关。</block>
  <block id="e6f60f524b38760bab86eaae458b9b87" category="admonition">如果您为网格网络配置选择了DHCP、并更改了此处的值、则新值将配置为节点上的静态地址。确保生成的IP地址不在DHCP地址池中。</block>
  <block id="7da83073ca3366bcfd9ff767bc303403" category="list-text">要为网格节点配置管理网络、请根据需要在管理网络部分中添加或更新设置。</block>
  <block id="6a313c105ff057aa11b5e2bace5a2e64" category="paragraph">在子网(CIDR)文本框中输入此接口之外的路由的目标子网。如果存在多个管理子网、则需要使用管理网关。</block>
  <block id="ff811969461bf06029675329dc4d1e5f" category="admonition">如果您为管理网络配置选择了DHCP、并更改了此处的值、则新值将在节点上配置为静态地址。确保生成的IP地址不在DHCP地址池中。</block>
  <block id="984f31616a2c8448cc4fc25afa870f21" category="paragraph">*设备*：对于StorageGRID设备，如果在初始安装期间未使用StorageGRID设备安装程序配置管理网络，则无法在此网格管理器对话框中配置管理网络。而是必须执行以下步骤：</block>
  <block id="7ba430671fce8ec7a952ff3772059894" category="list-text">重新启动设备：在设备安装程序中、选择菜单：高级[重新启动]。重新启动可能需要几分钟时间。</block>
  <block id="b7265a5a6b75478c9fcb7115dbaa58fc" category="list-text">选择菜单：配置网络[链接配置]并启用相应的网络。</block>
  <block id="e562883faa25e506e7173c73efdde0aa" category="list-text">选择菜单：配置网络[IP配置]并配置已启用的网络。</block>
  <block id="e42906d1b424c1722806b18564feba0a" category="list-text">返回主页页面、然后单击开始安装。</block>
  <block id="52f7826cbd175d67e87c6a9dd73fbe7a" category="list-text">在网格管理器中：如果已批准节点表中列出了该节点、请重置该节点。</block>
  <block id="3d2c59ec12887cdc97b00750aeeaabb6" category="list-text">从 Pending Nodes 表中删除此节点。</block>
  <block id="027e46cb168820f106f0f136bf234c26" category="list-text">等待节点重新出现在 "Pending Nodes" 列表中。</block>
  <block id="308f58c095522b8df78a1cc967460539" category="list-text">确认您可以配置适当的网络。它们应已填充您在 IP 配置页面上提供的信息。对于追加信息 ，请参见适用于您的设备型号的安装和维护说明。</block>
  <block id="1c65647ba3735d34d6610a116f92e3bf" category="list-text">如果要为网格节点配置客户端网络，请根据需要在客户端网络部分中添加或更新设置。如果配置了客户端网络，则需要使用网关，安装后，它将成为节点的默认网关。</block>
  <block id="115984083ff31641a45c3002607a3747" category="paragraph">*设备*：对于StorageGRID设备，如果在初始安装期间未使用StorageGRID设备安装程序配置客户端网络，则无法在此网格管理器对话框中配置客户端网络。而是必须执行以下步骤：</block>
  <block id="af45cd5e2e4530880561b6d95e4074a6" category="list-text">确认您可以配置适当的网络。它们应已填充您在 IP 配置页面上提供的信息。对于追加信息 ，请参见适用于您的设备的安装和维护说明。</block>
  <block id="a002eae85e873c5268c60fe47bfc6b3f" category="list-text">单击保存。网格节点条目将移至 "Approved Nodes" 列表。</block>
  <block id="3a23bcc886bcfcabab3e26790811b8c7" category="inline-image-macro">裸机批准的节点列表</block>
  <block id="2550c5730e39cc55c59fc87a8a1666bd" category="paragraph">您必须批准网格中所需的所有节点。但是、您可以在单击"摘要"页面上的"安装"之前随时返回到此页面。要修改已批准的网格节点的属性、请单击其单选按钮、然后单击编辑。</block>
  <block id="8e60bae5c8b1499a18c917452cad6320" category="list-text">批准完网格节点后、单击下一步。</block>
  <block id="a530b03d96fc151b549eed4cff10416b" category="summary">了解如何在主管理节点上的StorageGRID中配置网格管理器。</block>
  <block id="39b0bc05bcc35bf92d266c04709c9fbe" category="doc">在StorageGRID中配置网格管理器</block>
  <block id="9e91eaf30c823ff55b46f05449e63fc7" category="paragraph">通过主管理节点上的网格管理器用户界面配置StorageGRID系统来完成安装。</block>
  <block id="0ba40ecb813b20bd8c3277c4afcbd451" category="section-title">高级步骤</block>
  <block id="bbe6f3db45c1fda11072f0bdaf823ba8" category="paragraph">配置网格并完成安装涉及以下任务：</block>
  <block id="65fab22305d638277fe08fef3e3b4d40" category="list-text"><block ref="4843c82971df81e97aef3855873b7087" category="inline-xref-macro-rx"></block></block>
  <block id="b2d5dc59664ac0d21bcbd5dded69a0fb" category="inline-link-macro">指定 StorageGRID 许可证信息</block>
  <block id="dc62a6bae0942d98774fbcedfe04d566" category="list-text"><block ref="dc62a6bae0942d98774fbcedfe04d566" category="inline-link-macro-rx"></block></block>
  <block id="1a5870eb36e857189f184d5f320d0181" category="list-text"><block ref="1a5870eb36e857189f184d5f320d0181" category="inline-link-macro-rx"></block></block>
  <block id="abe15e0952653cec6327bae5b3790c92" category="inline-link-macro">指定网格网络子网</block>
  <block id="3071b864ee51f7743885151b146d1382" category="list-text"><block ref="3071b864ee51f7743885151b146d1382" category="inline-link-macro-rx"></block></block>
  <block id="f0f514dbb09f4d2c0f2f9870207e96c6" category="inline-link-macro">批准待定网格节点</block>
  <block id="445d704adaa37eeca0880c16cf11c040" category="list-text"><block ref="445d704adaa37eeca0880c16cf11c040" category="inline-link-macro-rx"></block></block>
  <block id="346b0f799d5824e6ef646274dd79d1fb" category="inline-link-macro">指定NTP服务器信息</block>
  <block id="92aab28741bfbfe48d3fc128eec45691" category="list-text"><block ref="92aab28741bfbfe48d3fc128eec45691" category="inline-link-macro-rx"></block></block>
  <block id="40f40c958ca771e7e2179dfe775df77a" category="inline-link-macro">指定域名系统服务器信息</block>
  <block id="32461cb1ffaecdbafa915e26f11613aa" category="list-text"><block ref="32461cb1ffaecdbafa915e26f11613aa" category="inline-link-macro-rx"></block></block>
  <block id="b681141cbe056ed6a1df3d88efd6f872" category="inline-link-macro">指定 StorageGRID 系统密码</block>
  <block id="a4f57a2832f1ed9a4d6b154ee41a87c7" category="list-text"><block ref="a4f57a2832f1ed9a4d6b154ee41a87c7" category="inline-link-macro-rx"></block></block>
  <block id="9d6fe38c7ad959d5754500d24c1a8ecc" category="inline-link-macro">查看您的配置并完成安装</block>
  <block id="6ddb52602061bc71bd9227b0e708c9a3" category="list-text"><block ref="6ddb52602061bc71bd9227b0e708c9a3" category="inline-link-macro-rx"></block></block>
  <block id="b9b271fd480a768b1af9a1c33cd4a85b" category="section-title">导航到网格管理器</block>
  <block id="42b1b6d90a33a9440dc019fd997cd7b4" category="paragraph">使用网格管理器定义配置StorageGRID系统所需的所有信息。</block>
  <block id="9fade4bc71a9b26db45e715f017d00c2" category="paragraph">开始之前、必须先部署主管理节点并完成初始启动序列。</block>
  <block id="bbd3e0b8f59be2dc1bb047e3344f6e9c" category="paragraph">要使用网格管理器定义信息、请完成以下步骤。</block>
  <block id="5436addaab73b51e2a0989c8ba3cdd5b" category="list-text">通过以下地址访问网格管理器：</block>
  <block id="f2655180d4e4913e2de9f899abe36fd2" category="paragraph">或者、您也可以通过端口8443访问Grid Manager。</block>
  <block id="9b80f8ce4c56dd2fb8430fb78a4d153e" category="list-text">单击安装StorageGRID系统。此时将显示用于配置StorageGRID网格的页面。</block>
  <block id="93589fdf9fa5ce84e893e5b7d77ef9d6" category="inline-image-macro">裸机配置storagegrid</block>
  <block id="1f332cbeda33342c070d2097c128d368" category="summary">了解如何为StorageGRID配置DNS服务器。</block>
  <block id="f8496bcc083f3532921fda775f0a9e82" category="doc">指定StorageGRID的DNS服务器详细信息</block>
  <block id="a3bb8e71a8afb062831a38f0e2de59a5" category="paragraph">您必须为StorageGRID系统指定DNS信息、以便可以使用主机名而不是IP地址访问外部服务器。</block>
  <block id="f45822e440c5fabed2e879af169a5277" category="paragraph">通过指定DNS服务器信息，您可以在电子邮件通知和NetApp AutoSupport®消息中使用完全限定域名(FFQDN)主机名，而不是IP地址。NetApp建议至少指定两个DNS服务器。</block>
  <block id="bcf991825bcd4dc50372a5f00d52a872" category="admonition">您应选择 DNS 服务器，以便在网络隔离时每个站点都可以在本地访问这些服务器。</block>
  <block id="7faf3782d237867e49977ffde67f9c63" category="paragraph">要指定DNS服务器信息、请完成以下步骤：</block>
  <block id="d0ab55cd4d26d417d0f97408bcc5f697" category="list-text">在服务器1文本框中、指定DNS服务器的IP地址。</block>
  <block id="1e61bc64ca343d74b34847dd5000dccb" category="list-text">如有必要、请单击最后一个条目旁边的加号以添加更多服务器。</block>
  <block id="e2cb07bb2e5da2cf8d592a0018e4b5e7" category="inline-image-macro">裸机添加更多服务器2</block>
  <block id="3c597fd2b68a32b7f20e77aa59568bbe" category="summary">了解如何为StorageGRID配置网格网络子网。</block>
  <block id="b96754e4e112b889e3b65f9796c4feab" category="doc">为StorageGRID指定网格网络子网</block>
  <block id="6092d6c95dc9345e9fc2f9393637366f" category="paragraph">您必须指定网格网络上使用的子网。</block>
  <block id="b096cdba7bbccc754886e4b23b4d565c" category="paragraph">子网条目包括StorageGRID系统中每个站点的网格网络子网以及必须通过网格网络访问的任何子网(例如托管NTP服务器的子网)。</block>
  <block id="98b89faf2e01f50b0551ad95781dd35f" category="paragraph">如果有多个网格子网、则需要网格网络网关。指定的所有网格子网都必须可通过此网关访问。</block>
  <block id="ff670efa4a84f39d12897a686ef98841" category="paragraph">要指定网格网络子网、请完成以下步骤：</block>
  <block id="901ad78229e56f3cfe4923cb2fb91cf4" category="list-text">在子网1文本框中、至少为一个网格网络指定CIDR网络地址。</block>
  <block id="5b2e07d1148d69347b968600f2027092" category="list-text">单击最后一个条目旁边的加号以添加其他网络条目。如果已部署至少一个节点、请单击发现网格网络子网以使用已向网格管理器注册的网格节点报告的子网自动填充网格网络子网列表。</block>
  <block id="4b988fcce569f5f8ae3f7bf260e946e2" category="inline-image-macro">裸机-子网-网格-网络</block>
  <block id="48f6c9d6fba1611dc98c2669925c1099" category="summary">了解如何在裸机网格上安装StorageGRID。</block>
  <block id="273f15cc5d5a9b82b3ed937c075f0165" category="doc">StorageGRID安装简介</block>
  <block id="4bf8c31681edafd88d86ee89bb157c9f" category="paragraph">了解如何在裸机主机上安装StorageGRID。</block>
  <block id="dbf88cfc0b0d656a966a6413296090cd" category="paragraph">TR-4882提供了一组实用的分步说明、用于生成可正常工作的NetApp StorageGRID安装。此安装可以安装在裸机上、也可以安装在运行Red Hat Enterprise Linux (RHEL)的虚拟机(VM)上。该方法是、在三台物理(或虚拟)计算机上以建议的布局和存储配置执行六个StorageGRID容器化服务的"确定性"安装。一些客户可能会发现按照本技术报告中的示例部署更容易理解部署过程。</block>
  <block id="53721259d4f70a6e22df4cf50cb6a007" category="paragraph">有关StorageGRID和安装过程的更深入的了解、请参见<block ref="138cb63445270d21525dcce6de5e7942" category="inline-link-rx"></block> 产品文档中的[安装、升级和修补程序StorageGRID ]。</block>
  <block id="a65c073029a2585f51e608ca137bdfa6" category="inline-link-macro">安装StorageGRID的前提条件</block>
  <block id="ee6027960e010f4085d66014d7765ecd" category="paragraph">在开始部署之前、让我们先了解一下NetApp StorageGRID软件的计算、存储和网络连接要求。StorageGRID在Podman或Docker中作为容器化服务运行。在此模型中、某些要求是指主机操作系统(托管Docker且运行StorageGRID软件的操作系统)。某些资源会直接分配给每个主机中运行的Docker容器。在此部署中、为了最大程度地提高硬件利用率、我们会为每个物理主机部署两项服务。有关详细信息，请继续下一节， <block ref="dbd241ef02e4fbb756d3e4613e476d0c" category="inline-link-macro-rx"></block>。</block>
  <block id="ce29edc154956369d79ff8276cf747b1" category="paragraph">本技术报告中概述的步骤可在六个裸机主机上正常安装StorageGRID。现在、您已拥有一个工作网格和客户端网络、这在大多数测试场景中都很有用。</block>
  <block id="e3581082ba2aa18febff247afdaf6344" category="paragraph">要详细了解本技术报告中介绍的信息、请查看以下文档资源：</block>
  <block id="d794ca6edf18a97bedb2ad1af37d0c71" category="list-text">NetApp StorageGRID文档中心 <block ref="47ea1c2d0f136bec8b3e66c2121bf70f" category="inline-link-rx"></block></block>
  <block id="f26db73036faf2fd4369e53f7b67c6e7" category="list-text">NetApp StorageGRID支持 <block ref="4d58579ecd86e7d907ec63f13f2199dd" category="inline-link-rx"></block></block>
  <block id="a3fd6da95928caff4c3eee3c06fd7ad8" category="list-text">StorageGRID文档资源页面 <block ref="68d4d5362a15088f2ac3fa494c971af5" category="inline-link-rx"></block></block>
  <block id="8b8bc5296c7be638754abb2f408d2099" category="list-text">NetApp产品文档 <block ref="3cd8b5fe5ca94a9fdb5caaf96875ef7e" category="inline-link-rx"></block></block>
  <block id="fb0cb3928e42fcd12b5e4d384c0b36e1" category="summary">了解如何安装适用于StorageGRID的Docker。</block>
  <block id="4794aa13334c3a67cb956b8bb0b717cc" category="doc">安装适用于StorageGRID的Docker</block>
  <block id="c411a2ac40844c1231d957775a64722d" category="paragraph">要安装Docker、请完成以下步骤：</block>
  <block id="28797c756cc3b531ebc808137254c863" category="list-text">为Docker配置yum repo。</block>
  <block id="a55e65a59807a07ed700dfaa18135965" category="list-text">安装所需的软件包。</block>
  <block id="388ac7e55d7a29e60f0f34508abf8659" category="list-text">启动Docker。</block>
  <block id="36d5897ce670ceac1415b9974a6af5a2" category="list-text">测试Docker。</block>
  <block id="eb010319657e027ec1e22bf845704378" category="list-text">确保Docker在系统启动时运行。</block>
  <block id="a35aaa99aee9ee41d444a5de3983e400" category="summary">了解如何安装StorageGRID依赖关系和软件包。</block>
  <block id="235992e2681e5ebf739b2749c087e907" category="doc">安装StorageGRID依赖关系和软件包</block>
  <block id="a4a1bdc97b6deb2ecbfd5c6f2f05db8c" category="paragraph">要安装StorageGRID依赖关系和软件包、请运行以下命令：</block>
  <block id="6ef045491be09dfac9e36f2f37b4c4ed" category="summary">了解如何为StorageGRID准备节点配置文件。</block>
  <block id="3a02f9f770473e94a2c5462278a048d4" category="doc">为StorageGRID准备节点配置文件</block>
  <block id="1343e23127fc49a20324fb3d78b4473d" category="paragraph">了解如何为StorageGRID准备节点配置文件。</block>
  <block id="7b47d84a33982b36f4cbfb623f0a1050" category="paragraph">总体而言、节点配置过程包括以下步骤：</block>
  <block id="cde8b6ddad7a3759ad08e7c434fcc714" category="list-text">在所有主机上创建<block ref="edca9b547a27d6695f01e9e392e45783" prefix=" " category="inline-code"></block> 目录。</block>
  <block id="5e274809c4a7cb2d1cbd804630e0483e" category="list-text">为每个物理主机创建所需的文件、以匹配容器/节点类型布局。在此示例中、我们在每台主机上的每个物理主机上创建了两个文件。</block>
  <block id="7e6488ac34f370a0f85579eb830a419f" category="admonition">文件名用于定义实际的安装节点名称。例如，<block ref="a9544009b3c44145c6b1db3b64fcb357" prefix=" " category="inline-code"></block> 将成为名为的节点<block ref="a468b3905cece02bad9c64fe5794ba18" prefix=" " category="inline-code"></block>。</block>
  <block id="fdfe223ed38149015f823fb7868e18d5" category="paragraph">--主机1：<block ref="a9544009b3c44145c6b1db3b64fcb357" prefix=" " category="inline-code"></block><block ref="742abc63e42891d5268831dd2f8134cc" prefix=" " category="inline-code"></block></block>
  <block id="af040f5ae1df9ca75718266e039c85d1" category="paragraph">--主机2：<block ref="38e5bd6028d6987bcd32d325143dd7f7" prefix=" " category="inline-code"></block><block ref="9541080e4df5e58006bce54f876e9e42" prefix=" " category="inline-code"></block></block>
  <block id="f316a63ba76df82db79c8bc6f4f1e0cf" category="paragraph">--主机3：<block ref="1d8c11731baba95a999e50a44e6b2240" prefix=" " category="inline-code"></block><block ref="4ece8d01432102ba9cdf99c305c05c79" prefix=" " category="inline-code"></block></block>
  <block id="eb4456c9e23dff5366f92ed1e89879df" category="section-title">正在准备节点配置文件</block>
  <block id="2cf046d44edc64f0af6d74dd8e0e4dfd" category="paragraph">以下示例使用<block ref="c3f30fd512a0d9dd70b8028ed1cc6994" prefix=" " category="inline-code"></block> 格式。您可以运行以下命令来验证路径是否正确：</block>
  <block id="933194e0510283a6d05cc4c3d4cca053" category="paragraph">以及以下命令：</block>
  <block id="7c275602a08732abf91e350f11452e06" category="section-title">主管理节点示例</block>
  <block id="b89155325811ce43c368c0182b207f56" category="paragraph">示例文件名：</block>
  <block id="8ae66bdfd8c1959b6deb73ad07303b65" category="paragraph">示例文件内容：</block>
  <block id="3940fe7127b5c33a341df47bcde67bdf" category="admonition">磁盘路径可以遵循以下示例或使用<block ref="e3cff95c13f96c388b7d6c6b15ba1e95" prefix=" " category="inline-code"></block> 模式命名。请勿使用块设备名称(如)<block ref="bf20f6a37aac19afbbbc2e9364f522c3" prefix=" " category="inline-code"></block> 、因为它们可能会在重新启动时更改、并对网格造成严重损坏。</block>
  <block id="c93beaa6470d0316c3f7069cceab8638" category="section-title">存储节点示例</block>
  <block id="e21aa9066b5020310dd1a649d78cf958" category="section-title">网关节点示例</block>
  <block id="bedf7ff9ba850fa9d1aee9038a594897" category="summary">了解如何为StorageGRID系统指定NTP配置信息、以便在不同服务器上执行的操作可以保持同步。</block>
  <block id="015d358e34f2ad07f88d489ad1e31e30" category="doc">指定StorageGRID的NTP服务器详细信息</block>
  <block id="238e13ad8f1a771af737fb7054cc6288" category="paragraph">为了防止出现时间漂移问题、您必须指定Stratum 3或更高版本的四个外部NTP服务器参考。</block>
  <block id="1868bcdaed76946b66e5b6a72181367e" category="admonition">在为生产级 StorageGRID 安装指定外部 NTP 源时，请勿在 Windows Server 2016 之前的 Windows 版本上使用 Windows 时间（ W32Time ）服务。早期版本的Windows上的时间服务不够准确、Microsoft不支持在要求苛刻的环境(如StorageGRID)中使用此服务。</block>
  <block id="cc04d4f3a95621cd31b1329da77a761f" category="paragraph">外部NTP服务器由先前分配了主要NTP角色的节点使用。</block>
  <block id="32745e943bca7c9a42a1f6c287144f49" category="admonition">客户端网络未在安装过程中尽早启用、无法成为NTP服务器的唯一源。确保至少可以通过网格网络或管理网络访问一个NTP服务器。</block>
  <block id="ebc7cc4c1b9f2a55e75f2c971bf008aa" category="paragraph">要指定NTP服务器信息、请完成以下步骤：</block>
  <block id="00821ee7fcf45bcd3beba61903d8bb8b" category="list-text">在服务器1到服务器4文本框中、指定至少四个NTP服务器的IP地址。</block>
  <block id="f9d565da6115b4f886b1206c3cf163bd" category="list-text">如有必要、请单击最后一个条目旁边的加号以添加更多服务器条目。</block>
  <block id="87647ffe3f4052667a65d48489aa1861" category="inline-image-macro">裸机添加服务器条目</block>
  <block id="1818d7bb505eb0a9356019133c103083" category="summary">了解部署StorageGRID所需的计算、存储、网络、Docker和节点采购。</block>
  <block id="793650804c23880df1a414e076d87de6" category="section-title">计算要求</block>
  <block id="6a2a458810293d5e417a1af6a7ec96c9" category="paragraph">下表列出了每种类型的StorageGRID节点支持的最低资源要求。这是StorageGRID节点所需的最低资源。</block>
  <block id="84d574e626c9caf84d8e3949bd7a2dac" category="cell">节点类型</block>
  <block id="3498e0560fa8448ff0a0f15cd1b168f7" category="cell">CPU核心</block>
  <block id="e3afed0047b08059d0fada10f400c1e5" category="cell">管理员</block>
  <block id="926dec9494209cb088b4962509df1a91" category="cell">网关</block>
  <block id="7f23bd5b9e8af3893c26d04d60493ee5" category="paragraph">此外、每个物理Docker主机至少应分配16 GB RAM、以便正常运行。因此、例如、要在一个物理Docker主机上同时托管表中所述的任意两项服务、应执行以下计算：</block>
  <block id="01ce852738fb02f0af9973314919d2f5" category="paragraph">24 + 24 + 16 = 64 GB RAM、8 + 8 = 16核</block>
  <block id="1e4b750e724ab3a949dbdcb5c26a4249" category="paragraph">由于许多现代服务器都超过了这些要求、因此我们将六种服务(StorageGRID容器)组合到三个物理服务器上。</block>
  <block id="9251700e586dc1a410f2e755a8643751" category="section-title">网络要求</block>
  <block id="32c6e5f658485eda79e0b43678e07a12" category="paragraph">三种类型的StorageGRID流量包括：</block>
  <block id="03b8d62997b82b021f1cce460f811bd9" category="list-text">*网格流量(必需)。*网格中所有节点之间传输的内部 StorageGRID 流量。</block>
  <block id="8c0713aca13d942a760d1df87e3ada36" category="list-text">*管理员流量(可选)。*用于系统管理和维护的流量。</block>
  <block id="d58bf009263dbca3ff838266dcd57c0e" category="list-text">*客户端流量(可选)。*在外部客户端应用程序和网格之间传输的流量，包括来自 S3 和 Swift 客户端的所有对象存储请求。</block>
  <block id="f168a9ca9ebe1aaabeb2520ad716a0f1" category="paragraph">您最多可以配置三个网络以用于StorageGRID系统。每种网络类型都必须位于一个单独的子网上、不能重叠。如果所有节点都位于同一子网上、则不需要网关地址。</block>
  <block id="58d33d08692021c276a56aa4f34be5ac" category="paragraph">在此评估中、我们将部署在两个网络上、其中包含网格和客户端流量。可以稍后添加一个管理网络来执行该附加功能。</block>
  <block id="e7ff37e2b77f00466b1e9cced5b037f9" category="paragraph">将网络一致地映射到所有主机中的接口非常重要。例如、如果每个节点上有两个接口、即ens192和ens224、则它们都应映射到所有主机上的同一网络或VLAN。在此安装中、安装程序会将这些映像映射到Docker容器中、并将其映射为eth0@if2和eth2@if3 (因为环回是容器内的IF1)、因此、一致的模型非常重要。</block>
  <block id="0518b9b910962684e668c4fbda55cf8c" category="section-title">有关Docker网络连接的说明</block>
  <block id="adf63b9293aa7bacbc176db0a9317ee3" category="paragraph">StorageGRID使用网络的方式与某些Docker容器实施方式不同。它不使用Docker (或Kubnetes或Swarm)提供的网络。相反、StorageGRID实际上会将容器生成为--net=none、这样、Docker就不会对容器执行任何网络连接操作。StorageGRID服务生成容器后、将从节点配置文件中定义的接口创建一个新的macvlan设备。该设备具有一个新的MAC地址、并作为一个单独的网络设备、可以从物理接口接收数据包。然后、macvlan设备将移至容器命名空间、并重命名为容器中的eth0、eth1或eth2之一。此时、此网络设备将在主机操作系统中不再可见。在本示例中、Docker容器中的网格网络设备为eth0、客户端网络为eth2。如果我们有一个管理网络、则此设备在容器中将为eth1。</block>
  <block id="6e75cec843fc88e5853e35c0cd6b8a00" category="admonition">在某些网络和虚拟环境中、容器网络设备的新MAC地址可能需要启用混杂模式。此模式允许物理设备接收和发送与已知物理MAC地址不同的MAC地址的数据包。++++如果在VMware vSphere中运行、则在运行RHEL时、必须在提供StorageGRID流量的端口组中接受混杂模式、MAC地址更改和伪传输。在大多数情况下、Ubuntu或Debian都可以在不进行这些更改的情况下运行。++++</block>
  <block id="41b36522e1e1020bad35b072e2f4caeb" category="section-title">存储要求</block>
  <block id="caf25f834fd33813cb804fde9406ddf4" category="paragraph">每个节点都需要下表所示大小的基于SAN的磁盘设备或本地磁盘设备。</block>
  <block id="4491ed1f1284f730663a34bc001e9d82" category="inline-link-macro">物理主机布局和要求</block>
  <block id="755122cb8b85d1b9d1d35543370e43b4" category="admonition">表中的数字适用于每种StorageGRID服务类型、而不适用于整个网格或每个物理主机。根据部署选项，我们将在本文档后面的中计算每个物理主机的数量 <block ref="010aeaa454c3e87113c61b2c557145c0" category="inline-link-macro-rx"></block>。++++安装程序将在StorageGRID容器中创建标有星号的路径或文件系统。管理员不需要手动配置或创建文件系统、但主机需要块设备来满足这些要求。换言之、块设备应使用命令显示<block ref="9d3de2981a7628c02076a5a69f0d0007" prefix=" " category="inline-code"></block> 、但不能在主机操作系统中进行格式化或挂载。++++</block>
  <block id="553ce76e41b15044745c302f9ec38760" category="cell">LUN 用途</block>
  <block id="0af38a14209cc9bc1b292891a3e005da" category="cell">LUN 数量</block>
  <block id="33979902172af2154a44822727bfd415" category="cell">LUN的最小大小</block>
  <block id="83fb8e06fccf8784d7de54416fa4f10e" category="cell">需要手动文件系统</block>
  <block id="04c4f6a3d439ac588e9b26e497a5ae31" category="cell">建议的节点配置条目</block>
  <block id="b1c94ca2fbc3e78fc30069c8d0f01680" category="cell">全部</block>
  <block id="c7232c95509afc90ff3b9b965d54d0ee" category="cell">管理节点系统空间<block ref="37e24b696a51b5760142fb37b5fb713f" prefix=" " category="inline-code"></block> (此处的SSD非常有用)</block>
  <block id="96f71542917bb5841b7afc1220a17bb7" category="cell">每个管理节点一个</block>
  <block id="5c87990b5782555a01d6ca8ddd0d5f63" category="cell">90GB</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="cell">否</block>
  <block id="43799a9c52c418811a96c66e3ed37a9b" category="cell"><block ref="4133d291885f9a83c0565e77583f763a" prefix="" category="inline-code"></block></block>
  <block id="8e904560a3c56737b02e33efac1b72b5" category="cell">所有节点</block>
  <block id="4c69bf4d5ec8c95a9d472133a445da16" category="cell">Docker存储池、位于<block ref="fd8e3ef9a1113451077d22f9276ddcdc" prefix=" " category="inline-code"></block></block>
  <block id="93010090d5095ea979bb68afaa1c27f9" category="cell">每个主机(物理或VM)一个</block>
  <block id="f9e27493dd82660b22ff5302108907c8" category="cell">每个容器100 GB</block>
  <block id="288bf87b9bc94736c0106e80d7c349e1" category="cell">是—etx4</block>
  <block id="7bfcd905aec11ae85f0671ab8790afb2" category="cell">不适用—格式化并挂载为主机文件系统(未映射到容器)</block>
  <block id="a9f342a5d794c36d666e6fcfa44a3b70" category="cell">管理节点审核日志(管理容器中的系统数据)<block ref="e93b971522dbbf8a5b9f5ec855913e2d" prefix=" " category="inline-code"></block></block>
  <block id="f5064b0ffb7a5c0f9ea634aa8516d04c" category="cell">200GB</block>
  <block id="750948c6586298990195f6589ae13db6" category="cell"><block ref="6b07f0e0541841a204b16aad47943783" prefix="" category="inline-code"></block></block>
  <block id="1caadc9924e870acee97ae323bd838c8" category="cell">管理节点表(管理容器中的系统数据)<block ref="2e8bcff599e9b0a2f335c2e6667411e2" prefix=" " category="inline-code"></block></block>
  <block id="386fd6a89b034ea2160cdefabae3b8be" category="cell"><block ref="bc04444ea9a96e7296bf9ea84011cbf3" prefix="" category="inline-code"></block></block>
  <block id="136c07ee64e1881b929de11861c01b0f" category="cell">存储节点</block>
  <block id="f3fe6f8f0e0f6591e4560eabe5fadadf" category="cell">对象存储(块设备) <block ref="93fab8f2410cc2a100007dcee116cd90" prefix=" " category="inline-code"></block> (此处的SSD非常有用) <block ref="faac84775904ee38721272e26794e990" prefix=" " category="inline-code"></block> <block ref="601c2e64e9cb282a5e20a3b4f5427e79" prefix=" " category="inline-code"></block></block>
  <block id="9cdde8629f3f819484f7c5b58e83930b" category="cell">每个存储容器三个</block>
  <block id="357015f8d2535e72e491b099c91834f8" category="cell">4000GB</block>
  <block id="950e2aab71ade2dc91b16bb393adcc5f" category="cell"><block ref="d0974677d2a5b3fe1667da308c12469e" prefix="" category="inline-code"></block></block>
  <block id="171a11a3a2ace52e1a9680ec72263a41" category="paragraph">在此示例中、每种容器类型都需要下表中显示的磁盘大小。每个物理主机的要求将在本文档后面的中进行介绍 <block ref="010aeaa454c3e87113c61b2c557145c0" category="inline-link-macro-rx"></block>。</block>
  <block id="6f4a8f20fa0947e6bb3d27cc47c04327" category="section-title">每个容器类型的磁盘大小</block>
  <block id="97deb65a12dea6a246eb4c828e56f81f" category="section-title">管理容器</block>
  <block id="edbef67b0ae5d71ef92b4e5942caef7a" category="cell">大小 (GiB)</block>
  <block id="0ec85b02f8abe0d9900159bd43332f9b" category="cell">Docker存储</block>
  <block id="e9ca87b36a0a6d6a2983077e94dad2d6" category="cell">100 (每个容器)</block>
  <block id="ed69d276def8ad71180a9e6858c8b533" category="cell">ADM-OS</block>
  <block id="8613985ec49eb8f757ae6439e879bb2a" category="cell">90</block>
  <block id="9b942bb5a023d18ec9d2a67e02170f0d" category="cell">ADM-Audit</block>
  <block id="c510d89ae511ceadf219747940eed7b6" category="cell">ADM-MySQL</block>
  <block id="364336eaff830c257770b6917726a630" category="section-title">存储容器</block>
  <block id="eda76b4bb6805bf01ca46b27319312cc" category="cell">SN-OS</block>
  <block id="6d8c1697c5bbe9285e5b3e019d7711d1" category="cell">Rangedb-0</block>
  <block id="f7efa4f864ae9b88d43527f4b14f750f" category="cell">4096</block>
  <block id="9c2d18c9365880b4258d03e1d600c7e2" category="cell">Rangedb-1</block>
  <block id="c0390e32847783ce81bef86565d40dec" category="cell">Rangedb-2</block>
  <block id="f6b310da68321e1b8c02a23b2d38793a" category="section-title">网关容器</block>
  <block id="37e24b696a51b5760142fb37b5fb713f" category="cell">/var/local</block>
  <block id="7b86d858ba88988d38a0a7691de46189" category="paragraph">通过将上表所示的计算和网络要求相结合、您可以获得此安装所需的一组基本硬件、其中包括三个物理(或虚拟)服务器、16核、64 GB RAM和两个网络接口。如果需要更高的吞吐量、可以在网格或客户端网络上绑定两个或更多接口、并在节点配置文件中使用带VLAN标记的接口、例如bond0.520。如果您希望工作负载更密集、则为主机和容器提供更多内存会更好。</block>
  <block id="14aa6453547abb65e147f9a63bd00ce5" category="paragraph">如下图所示、这些服务器将托管六个Docker容器、每个主机两个。RAM的计算方法是、为每个容器提供24 GB、为主机操作系统本身提供16 GB。</block>
  <block id="fdff05307e339d6ad229d46bf6d02b81" category="inline-image-macro">三台主机的布局示例。</block>
  <block id="9dac9fe9f0bf4e5e3c4e4745d1641723" category="paragraph">每个物理主机(或VM)所需的总RAM为24 x 2 + 16 = 64 GB。下表列出了主机1、2和3所需的磁盘存储。</block>
  <block id="c0cca200fe11cde38a6792401808bf45" category="cell">主机 1</block>
  <block id="bd7aece585ea4045bd93f81c08edca47" category="paragraph">*Docker存储*</block>
  <block id="b804e3c3d905d9bb36198cfb444a93dd" category="cell"><block ref="2e1a4e3f55001820560b237188c70bc3" prefix="" category="inline-code"></block> (文件系统)</block>
  <block id="706906be5856eaaed7da4e22f657ef92" category="cell">200 (100 x 2)</block>
  <block id="eac28d7cce23757bfa93571aa8afaae2" category="paragraph">*管理容器*</block>
  <block id="1a7727aa1be87a5ae945f922dbf62dd0" category="cell"><block ref="75452846fc4694e8dd77c42c1832beeb" prefix="" category="inline-code"></block></block>
  <block id="b7825416881c7fb97e5ae2b693ff21b8" category="cell"><block ref="af4ce7036b04c96874c762dd87978e03" prefix="" category="inline-code"></block></block>
  <block id="2f63ed377bd31cc673e0805da76143df" category="cell"><block ref="7d1de44774290edc24aef96956195f2b" prefix="" category="inline-code"></block></block>
  <block id="46491398ee87a38fe56773b7bdfcaa27" category="paragraph">*存储容器*</block>
  <block id="d6caffa5530089f80d391a102679c52e" category="cell">SN-OS<block ref="37e24b696a51b5760142fb37b5fb713f" prefix=" " category="inline-code"></block> (设备)</block>
  <block id="1d3037b2893b403589196b9af71e6904" category="cell">Rangedb-0(设备)</block>
  <block id="d35a9936d7161fe6977f7b721f870f29" category="cell">Rangedb-1 (设备)</block>
  <block id="4cf99a5f8c6cf7638f8303c9028e9c47" category="cell">Rangedb-2 (设备)</block>
  <block id="6f79df86eb7294a56163138420d9279c" category="cell">主机 2</block>
  <block id="10c1057603ff286b9b5bc62075b51c8d" category="cell"><block ref="2e1a4e3f55001820560b237188c70bc3" prefix="" category="inline-code"></block> (共享)</block>
  <block id="195dbe8d761af1317e88491ce21cb787" category="paragraph">*网关容器*</block>
  <block id="98d9fbcdf0bdd9524f6667f56efe8d8c" category="cell">GW-OS <block ref="37e24b696a51b5760142fb37b5fb713f" prefix="*" category="inline-code"></block></block>
  <block id="f899139df5e1059396431415e770c6dd" category="cell">100</block>
  <block id="a9854072c608a9912405013d0368211c" category="cell"><block ref="37e24b696a51b5760142fb37b5fb713f" prefix="*" category="inline-code"></block></block>
  <block id="b924ddb878a803f19e6d6790654f3bff" category="cell">主机 3</block>
  <block id="96bdd0cf3fb34ac9b972083beaaed91f" category="paragraph">Docker存储的计算方法是、每个/var/local (每个容器)允许100 GB x两个容器= 200 GB。</block>
  <block id="04d1311df0844ba0cb676b70e2c768e6" category="section-title">准备节点</block>
  <block id="ba93eaff9438fae5ed252ac4056f3d57" category="paragraph">要为StorageGRID的初始安装做准备、请先安装RHEL 9.2版并启用SSH。根据最佳实践设置网络接口、网络时间协议(NTP)、DNS和主机名。您需要在网格网络上至少启用一个网络接口、而在客户端网络上至少启用另一个网络接口。如果您使用的是带VLAN标记的接口、请按照以下示例进行配置。否则、只需简单的标准网络接口配置即可。</block>
  <block id="9b27d9e9f79842f85553a61769a1a94f" category="paragraph">如果您需要在网格网络接口上使用VLAN标记、则您的配置应具有以下格式的两个文件<block ref="c2cf612c92facc5f4b080c83ed51c2bf" prefix=" " category="inline-code"></block> ：</block>
  <block id="d1b8b08b5c4160c1393cad2570dee70f" category="paragraph">此示例假设网格网络的物理网络设备为enp67s0。它也可以是绑定的设备、例如、绑定0。无论是使用绑定还是标准网络接口、如果网络端口没有默认VLAN或默认VLAN未与网格网络关联、则必须在节点配置文件中使用带VLAN标记的接口。StorageGRID容器本身不会取消标记以太网帧、因此必须由父操作系统处理。</block>
  <block id="82c43a9353f8eb3d67bb2fa843431d9c" category="section-title">使用iSCSI设置可选存储</block>
  <block id="e14b9c03f9cc5e502bd12475b5f4271c" category="paragraph">如果不使用iSCSI存储、则必须确保host1、host2和host3包含足够大的块设备、以满足其要求。有关host1、host2和host3的存储要求、请参见 <block ref="3ee5a0cacaa11ad486947ccabaf35f08" category="inline-link-macro-rx"></block> 。</block>
  <block id="b39c8876d75a7ff82cd7d801fc50615a" category="paragraph">要使用iSCSI设置存储、请完成以下步骤：</block>
  <block id="a22fa689c8174cfc9a1ca77de9134e9e" category="list-text">如果使用外部iSCSI存储，如NetApp E系列或NetApp ONTAP®数据管理软件，请安装以下软件包：</block>
  <block id="befe75f3c360b54481aaca87a16ea6b1" category="list-text">查找每个主机上的启动程序ID。</block>
  <block id="70ffd3788b6da8ce47eff9a3038a3669" category="list-text">使用步骤2中的启动程序名称、将存储设备上的LUN (即表中所示的数量和大小)映射到每个存储 <block ref="b931fdace7da701b108de4525e5832b6" category="inline-link-macro-rx"></block> 节点。</block>
  <block id="19279b693608729771b2f460a14af491" category="list-text">使用发现并登录到新创建的LUN<block ref="f88921f58beaaae5bcb9dffac54bf5ad" prefix=" " category="inline-code"></block> 。</block>
  <block id="c0ee487fb85ee9bf09fcbe0e0d7e2337" category="inline-link">正在创建iSCSI启动程序</block>
  <block id="e296dadeb4bfa1168294b7371b696946" category="admonition">有关详细信息、请参见<block ref="7faa6525557fc7fd919d1d5540c263b0" category="inline-link-rx"></block> Red Hat客户门户上的。</block>
  <block id="60c1b9cd18ee1b2fd2a4b2dc134902d2" category="list-text">要显示多路径设备及其关联的LUN WWID、请运行以下命令：</block>
  <block id="542f96dda02c7e10ca9aafa03fbc1fab" category="paragraph">如果您不对多路径设备使用iSCSI、只需使用唯一的路径名称挂载设备即可、该名称将保留设备更改并以类似方式重新启动。</block>
  <block id="2b192e8d251786682cfcb43bf83d86f5" category="admonition">如果稍后删除或添加设备、只需使用<block ref="8e0253115e3884baabf09ffd7d63d3d4" prefix=" " category="inline-code"></block> 设备名称可能会导致问题。++++如果使用多路径设备、请按如下所示修改<block ref="dd5ff67ba72768d33f75e645aa2b8e56" prefix=" " category="inline-code"></block> 文件以使用别名。++++</block>
  <block id="ade8c53e941f41b4e616710fb584545f" category="admonition">这些设备可能存在于所有节点上、也可能不存在于所有节点上、具体取决于布局。</block>
  <block id="105bcc4e24a9d88a4b0c0f664b95a746" category="paragraph">在主机操作系统中安装Docker之前、请格式化并挂载LUN或磁盘备份<block ref="2e1a4e3f55001820560b237188c70bc3" prefix=" " category="inline-code"></block>。其他LUN在节点配置文件中进行定义、并直接由StorageGRID容器使用。也就是说、它们不会显示在主机操作系统中、而是显示在容器本身中、这些文件系统由安装程序处理。</block>
  <block id="05c7593a6814f75f0b7038a37ff3e6e2" category="paragraph">如果您使用的是iSCSI支持的LUN、请在fstab文件中放置类似于以下行的内容。如前所述、其他LUN不需要挂载到主机操作系统中、但必须显示为可用块设备。</block>
  <block id="39efa96a1b1e9d0a3925114b426fefdf" category="section-title">准备安装Docker</block>
  <block id="4707519a116b57c16ea90d2a9f6e8143" category="paragraph">要准备Docker安装、请完成以下步骤：</block>
  <block id="9989b8e6d714dc3005d3f1ebc592f516" category="list-text">在所有三台主机的Docker存储卷上创建文件系统。</block>
  <block id="2076f0161b9a4f3618e744d9f624e7b6" category="paragraph">如果使用的是具有多路径的iSCSI设备，请使用<block ref="8fc4a976039678d328cec3fc93e06dc8" prefix=" " category="inline-code"></block>。</block>
  <block id="5fef24e0dc05bdab911b98bc8a95094f" category="list-text">创建Docker存储卷挂载点：</block>
  <block id="730db0bba09e92fd7d5458637879ac8a" category="list-text">将Docker存储卷设备的类似条目添加到<block ref="816a3ef77b62ade41c3f936c958aa555" prefix=" " category="inline-code"></block>。</block>
  <block id="fbf2845836eb73f2319a30d651c8860b" category="paragraph">只有在使用iSCSI设备时、建议使用以下<block ref="cc359d06801619ee1eea3721321c35a9" prefix=" " category="inline-code"></block> 选项。如果您不需要使用本地块设备、则建议使用此设备<block ref="cc359d06801619ee1eea3721321c35a9" prefix=" " category="inline-code"></block><block ref="a4a918a45181164207929d52aec36aec" prefix=" " category="inline-code"></block> 。</block>
  <block id="e942f6acf8bd3a00c0fbbd90f551547e" category="list-text">挂载新文件系统并查看磁盘使用情况。</block>
  <block id="8f8f2336ad1f3a46caa9cb2437bbb264" category="list-text">出于性能原因、请关闭并禁用交换。</block>
  <block id="ba4b643a6c9eb93fd94187f357176ea3" category="list-text">要保留这些设置、请从/etc/fstab中删除所有交换条目、例如：</block>
  <block id="2522e8159c562bc548e18205bb912878" category="admonition">如果未完全禁用交换，则会严重降低性能。</block>
  <block id="259191cf7922ecf85e4d73c28a86f750" category="list-text">对节点执行测试重新启动、以确保<block ref="2e1a4e3f55001820560b237188c70bc3" prefix=" " category="inline-code"></block> 卷持久存在且所有磁盘设备均返回。</block>
  <block id="17e4ff05b492bd90ce69633f7f85fdbc" category="summary">了解如何验证网格配置信息并完成StorageGRID安装过程。</block>
  <block id="c6ae1843b71b6ae53c2de37d4ddc43df" category="doc">检查配置并完成StorageGRID安装</block>
  <block id="04796c10cece5394a89b36c322312d79" category="paragraph">要确保安装成功完成、请仔细查看您输入的配置信息。请按照以下步骤操作：</block>
  <block id="f189abc23cbec9c12167097fbc0853c3" category="list-text">查看摘要页面。</block>
  <block id="ca47c9063377504722d3477106fd35ae" category="inline-image-macro">裸机摘要页面</block>
  <block id="08000e8c53acc4995c5cdb96bd31ada5" category="list-text">验证所有网格配置信息是否正确。使用摘要页面上的修改链接返回并更正任何错误。</block>
  <block id="bbd6e51dda18896691e705ef7cb6c0e0" category="list-text">单击安装。</block>
  <block id="f62afe8922852d8719ba26a61eadfa3f" category="admonition">如果将某个节点配置为使用客户端网络、则当您单击安装时、该节点的默认网关将从网格网络切换到客户端网络。如果连接断开、请确保您通过可访问的子网访问主管理节点。有关详细信息，请参阅"网络安装和配置"。</block>
  <block id="7a38502b21e6c071e5f9ea4561734b32" category="list-text">单击Download Recovery Package。</block>
  <block id="3dd9ec88831f32da6c10dae779e728f9" category="paragraph">在安装过程中，如果网格拓扑已定义，系统将提示您下载恢复软件包文件 <block ref="daf4de58883c030f033f07e61debf025" prefix="(" category="inline-code"></block>()并确认您可以访问此文件的内容。您必须下载恢复软件包文件、以便在一个或多个网格节点发生故障时恢复StorageGRID系统。</block>
  <block id="c45c37ee019c29f21027b6d3ce89ee5b" category="paragraph">确认您可以提取文件的内容<block ref="daf4de58883c030f033f07e61debf025" prefix=" " category="inline-code"></block> 、然后将其保存在两个安全、独立的位置。</block>
  <block id="f4d8ae80d397e410789e20f2792f3323" category="admonition">恢复包文件必须受到保护，因为它包含可用于从 StorageGRID 系统获取数据的加密密钥和密码。</block>
  <block id="0ac3f2812dab16d76fa371e221cefe6f" category="list-text">选择I have successfully downloaded and Verified the Recovery Package File (我已成功下载并验证恢复软件包文件)选项、然后单击Next (下一步)。</block>
  <block id="0a9b7a08c95bf1a8fbcd52964f597bbb" category="inline-image-macro">裸机下载恢复包</block>
  <block id="e02e133dd983517013e337df1e193b4f" category="paragraph">如果安装仍在进行中、则会打开安装状态页面。此页面指示每个网格节点的安装进度。</block>
  <block id="eddfe200de58c486f7de9d38ebd8b9b1" category="inline-image-macro">裸机安装状态</block>
  <block id="d5e898aea811e02df68dafac2216b3b4" category="paragraph">当所有网格节点都达到完成阶段时、将打开网格管理器的登录页面。</block>
  <block id="e7263461f81beaf38395b626bd9228df" category="list-text">以root用户身份使用您在安装期间指定的密码登录到网格管理器。</block>
  <block id="f6075f705fc7db161a3aee43896cccaa" category="summary">了解如何启动StorageGRID主机服务。</block>
  <block id="305ba923e73a73db21932cf8f5d5c002" category="doc">启动 StorageGRID 主机服务</block>
  <block id="8fb078d4ecd2057d8461bdcaf76f17cc" category="paragraph">要启动StorageGRID节点并确保它们在主机重新启动后重新启动、您必须启用并启动StorageGRID主机服务。</block>
  <block id="b8a5b8237cd95fe783239c682c95935d" category="paragraph">要启动StorageGRID主机服务、请完成以下步骤。</block>
  <block id="f446727b85625cf3f064e226c434a768" category="list-text">在每个主机上运行以下命令：</block>
  <block id="3c525ad09a30bd47baf1ff2095b4285c" category="admonition">初始运行时、启动过程可能需要一段时间。</block>
  <block id="baf5d21ed19b5dc989bc0b2ad06a3c93" category="list-text">运行以下命令以确保部署正在进行：</block>
  <block id="a83a21ad0ba97d35e74969db2d4ca559" category="list-text">对于任何返回或状态的节点<block ref="7f67ae1e2fa9559d4de2c02b6614dc6b" prefix=" " category="inline-code"></block><block ref="c23e2b09ebe6bf4cb5e2a9abe85c0be2" prefix=" " category="inline-code"></block>，请运行以下命令：</block>
  <block id="799c444c1e46ade5c2662830d6b1a32a" category="paragraph">例如、根据以下输出、您应启动<block ref="a468b3905cece02bad9c64fe5794ba18" prefix=" " category="inline-code"></block> 节点：</block>
  <block id="49f39fa01cd02432e3201ae8d3d923e8" category="list-text">如果您之前已启用并启动StorageGRID主机服务(或者不确定该服务是否已启用并启动)、请同时运行以下命令：</block>
  <block id="7fe36568a01bf7c87afb035e05192052" category="summary">了解如何上传StorageGRID许可证文件。</block>
  <block id="f537319dd07c38f32de8e7eaf2ab5996" category="doc">添加StorageGRID许可证详细信息</block>
  <block id="f47ea024bde42c8ebabc9ef87ddd126b" category="paragraph">您必须指定 StorageGRID 系统的名称并上传 NetApp 提供的许可证文件。</block>
  <block id="3d9287781608b160fdc88edfc657216c" category="paragraph">要指定StorageGRID许可证信息、请完成以下步骤：</block>
  <block id="20bffa19ed6078d3c9c16b9d2333f4a1" category="list-text">在许可证页面的网格名称字段中、输入StorageGRID系统的名称。安装后、该名称将显示为网格拓扑树中的顶层。</block>
  <block id="138667ce7b68146ab9ef5c9a1fefe55f" category="list-text">单击浏览，找到NetApp许可证文件 <block ref="e6d7d9c1b2548b21ac2921378485020b" prefix="(" category="inline-code"></block>，然后单击打开。此时将验证许可证文件，并显示序列号和许可的存储容量。</block>
  <block id="f085047056aeaf0d4f4296e89bc8d874" category="admonition">StorageGRID 安装归档包含一个免费许可证，不提供产品的任何支持授权。您可以在安装后更新为提供支持的许可证。</block>
  <block id="069650fe3bf49e5264dd21815df31d3e" category="inline-image-macro">裸机更新许可证</block>
  <block id="503ada1cc373e8bb723ff1843faea66e" category="summary">了解如何通过设置配置密码短语和网格管理root用户密码来保护StorageGRID系统。</block>
  <block id="d75b856b08ec8f2f3d651a18a40a2ea6" category="doc">指定StorageGRID的系统密码</block>
  <block id="27f78ad3a95a795c62c63deddf4ee70d" category="paragraph">要输入用于保护StorageGRID系统的密码、请按照以下步骤操作：</block>
  <block id="dd96edfd7fde8d9ceb88859ec43f5087" category="list-text">在配置密码短语中、输入更改StorageGRID系统的网格拓扑所需的配置密码短语。您应将此密码记录在安全的位置。</block>
  <block id="1989d6fb32e83d739318bb21b7ec752a" category="list-text">在确认配置密码短语中、重新输入配置密码短语。</block>
  <block id="e3f9ae4173fd7a392b7aec45609983bf" category="list-text">在网格管理root用户密码中、输入以root用户身份访问网格管理器所使用的密码。</block>
  <block id="92327bac1659a24cea944d48fd3baea6" category="list-text">在确认root用户密码中、重新输入网格管理器密码。</block>
  <block id="f134973c593ceddee8a64f9c163e99f4" category="inline-image-macro">裸机网格管理器密码</block>
  <block id="d67e0d50bf955151686170db4b2a685e" category="list-text">如果您要安装网格以进行概念验证或演示、请取消选择创建随机命令行密码选项。</block>
  <block id="faf54f5c7808a17a3058501f34c61183" category="paragraph">对于生产部署，出于安全原因，应始终使用随机密码。如果您要使用默认密码通过root或admin帐户从命令行访问网格节点、请取消选择仅适用于演示网格的创建随机命令行密码选项。</block>
  <block id="51bd4683761cb1bb8d85278613715f1e" category="admonition">单击“摘要”页面上的“安装”时，系统将提示您下载恢复软件包文件 <block ref="473178645502a5ab705476a4d961c39b" prefix="(" category="inline-code"></block>)。您必须下载此文件才能完成安装。用于访问系统的密码存储在恢复软件包文件中的文件中<block ref="28325afa13c532a62489ef0d7bee3061" prefix=" " category="inline-code"></block> 。</block>
  <block id="ebc063740ea0c84ef8aa213e248e493f" category="summary">了解StorageGRID中裸机节点的升级过程。</block>
  <block id="3f33930b5ea2e47e9b23c46d2d1a313e" category="doc">在StorageGRID中升级裸机节点</block>
  <block id="84f8a977eb1fb845f3354010047efa06" category="paragraph">裸机节点的升级过程与设备或VMware节点的升级过程不同。在执行裸机节点升级之前、您必须先升级所有主机上的RPM文件、然后再通过GUI运行升级。</block>
  <block id="8d62278193a033fd8d40312c70b2cbeb" category="paragraph">现在、您可以通过GUI继续进行软件升级。</block>
  <block id="5a4b77bedbf0b2a5a3c1243b7abd94b2" category="summary">了解如何验证StorageGRID的配置文件内容。</block>
  <block id="4e72b006a6c1258371f937dc58a28562" category="doc">验证StorageGRID配置文件</block>
  <block id="89a3ace61abf5587d364ed74077b7487" category="paragraph">在中为每个StorageGRID节点创建配置文件后<block ref="edca9b547a27d6695f01e9e392e45783" prefix=" " category="inline-code"></block> 、必须验证这些文件的内容。</block>
  <block id="7af406a1a11ca43d1f4d41e02bec23aa" category="paragraph">要验证配置文件的内容，请在每个主机上运行以下命令：</block>
  <block id="c44d5e58056ae33c255438929de34ea7" category="paragraph">如果这些文件正确无误、则输出将显示每个配置文件均已通过：</block>
  <block id="d9c356a8c2546acdeea9b8b1c15f40d5" category="inline-image-macro">base-metal输出-shows-passed</block>
  <block id="90ee582a3c5d5a39be505cb53ef79288" category="paragraph">如果配置文件不正确、问题将显示为警告和错误。如果发现任何配置错误，则必须先更正这些错误，然后再继续安装。</block>
  <block id="4354560354d8408d1c18e9c0b355e09d" category="inline-image-macro">base-metal输出显示警告错误</block>
  <block id="040c89d37bea72830f915c730c54a323" category="summary">了解客户和NetApp IT实施的StorageGRID配置的少数用例。</block>
  <block id="6b3cea9a64792ec5d7e688de3ba29ba0" category="doc">查看基线性能测试</block>
  <block id="d49b79b5786df5b1f9fed49f0ba0061f" category="paragraph">在辅助副本操作中、四个CommvaultMediaAgent将数据备份到NetApp AFF A300系统、并在NetApp StorageGRID上创建了一个辅助副本。有关测试设置环境的详细信息、请阅读技术报告中的"解决方案设计和最佳实践"一节<block ref="03ce17f8b5e1206a493f3bd56ef5953d" category="inline-link-rx"></block> 。</block>
  <block id="56e8d1153024dce00f7f403984ee3961" category="paragraph">测试涉及100个VM和1000个VM、这两个测试都包含50/50的Windows和CentOS VM。下表显示了基线性能测试的结果：</block>
  <block id="416a13b2b42415edb291a65945b1bb85" category="paragraph-title">图1：在不到3小时的时间内删除250万(80 TB)对象。</block>
  <block id="de5b3f7c60647bd68a8d18a9a017432e" category="paragraph-title">图2：在不到3小时的时间内释放80 TB的存储。</block>
  <block id="81078bc0df32babf2ff8f3b64aef9fee" category="doc">运行数据保护作业</block>
  <block id="192dcaa465d88af514c6921f1e1d40ab" category="paragraph">要为StorageGRID配置适用于NetApp的Commvault完 整备份和恢复、请执行以下步骤、以便在Commvault软件 中将StorageGRID添加为云库。</block>
  <block id="bc50a12fdcb65bde15935c8a7e2b1428" category="section-title">第1步：使用StorageGRID配置Commvault</block>
  <block id="0a6dac3bb1f0fb019741566820decf08" category="section-title">第2步：创建以StorageGRID为主要目标的备份计划</block>
  <block id="5919e2d014c71a9ea1cb5865fa258fba" category="section-title">第3步：启动备份作业以保护工作负载</block>
  <block id="dfe7c088f9cb984c175d4bab539f49b3" category="doc">使用StorageGRID和Commvault.备份和恢复数据</block>
  <block id="ffe78245b07181e6bb16ef7751f1a370" category="paragraph">Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Recovery for NetApp软件与NetApp NetApp StorageGRID云存储软件相结合、共同创建了一个联合数据保护解决方案Commvault"完整备份和恢复"和NetApp StorageGRID提供独特且易于使用的解决方案、这些解决方案可以协同工作、帮助您满足全球数据快速增长和法规不断增长的需求。</block>
  <block id="2a44ac46dbbddcee9c4721e0d51c5c71" category="paragraph">许多企业希望将存储迁移到云、扩展系统并自动执行长期保留数据的策略。基于云的对象存储因其弹性、扩展能力以及运营和成本效益而闻名、这使其成为备份目标的自然选择。Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commv NetApp解决方案全球所有类型的客户都采用了Commvault完 整备份和恢复以及StorageGRID组合解决方案。</block>
  <block id="80cbefe3de0bdce70bc4f4315fa0b166" category="section-title">关于Commvault和StorageGRID</block>
  <block id="be01a357ae2c9752875b5385c732b017" category="section-title">主要功能：</block>
  <block id="33d02071d5daf16d46adb3c86985564a" category="inline-link">CommVault支持的技术</block>
  <block id="efd769ba600222207d2ad3d73b6e4787" category="paragraph">有关支持的工作负载的详细信息，请访问<block ref="4c6704a82e4c73d6cf928d19d89974ed" category="inline-link-rx"></block>。</block>
  <block id="30c210e0173f2ff607cc84dc01ffc1f0" category="section-title">备份选项</block>
  <block id="2ce3b2adb5cc8944bbb4c626e4dc565e" category="paragraph">下表列出了StorageGRID中每个备份选项的优势：</block>
  <block id="e8fd0bdde5a4bfaf79b96c31ae019951" category="doc">存储分段一致性级别建议</block>
  <block id="eb0223896e9bfd618eb298de0ad026d8" category="paragraph">如果您的CommVault版本早于11.0.0 - Service Pack 16、请考虑将CommVault升级到最新版本。如果不能这样做、请务必遵循适用于您的版本的准则。</block>
  <block id="0c0ae78122b0f343ea25bef5f2c0f55e" category="doc">StorageGRID规模估算指南</block>
  <block id="dd3b1d5d8791ef51287680775e87cce3" category="section-title">Commvaults规模估算输入</block>
  <block id="1a0adfe145dbf2b37759bb98826087c9" category="paragraph">下表按备份类型列出了平均对象大小、并说明了还原过程从对象存储中读取的内容：</block>
  <block id="0694d153506368640733821297f39291" category="doc">经过测试的解决方案概述</block>
  <block id="5ace00d58e334797dd5e45b5bf7c59af" category="section-title">解决方案设置</block>
  <block id="2be15e39561fa84b25d0eba23d56166d" category="paragraph">对于其数据保护策略、StorageGRID使用集成生命周期管理(ILM)策略来管理和保护数据。在策略中自上而下评估ILM规则。我们实施了下表所示的ILM策略：</block>
  <block id="fabdad0ed11dbcf22ebcc439b13c8b39" category="section-title">StorageGRID硬件规格</block>
  <block id="9b937818d08afa5201fb28d96b471ef4" category="paragraph">下表介绍了此测试中使用的NetApp StorageGRID硬件。采用10Gbps网络连接的StorageGRID SG5712设备是入门级选项、代表了一种基线配置。也可以为SG5712配置25 Gbps网络连接。</block>
  <block id="504f6d3f951c7f8eedbdd452f719fd08" category="section-title">Commvault"和StorageGRID软件要求</block>
  <block id="b301ee4b9911f0f8321c64e6c4bee15b" category="paragraph">下表列出了在我们的测试中安装在VMware软件上的Commvell和NetApp StorageGRID软件的软件要求。安装了四个MediaAgent数据传输管理器和一个CommServe服务器。在测试中、我们为VMware基础架构实施了10 Gbps网络连接。下表</block>
  <block id="0f0740e8993dbdec76dca742beba6153" category="paragraph">下表列出了Commvaults软件的总体系统要求：</block>
  <block id="50206f2358d7c5fce774f80e114e73f4" category="paragraph">在测试环境中、VMware上的NetApp E系列E2812存储阵列上部署了一个虚拟主管理节点和一个虚拟网关节点。每个节点都位于一台单独的服务器上、具有下表所述的最低生产环境要求：</block>
  <block id="85e7d98a8f11e7daca0801c35ec37b71" category="paragraph">下表列出了StorageGRID虚拟管理节点和网关节点的要求：</block>
  <block id="02a8b3b83eb008ecdcb701c8575e79b3" category="summary">了解StorageGRID中的管理安全功能。</block>
  <block id="7c850e41b876cefed53e05371dd22fcc" category="doc">管理安全性功能</block>
  <block id="21021ea0e52be8e9c599f4dff41e5be0" category="cell">功能</block>
  <block id="86408593c34af77fdd90df932f8b5261" category="cell">功能</block>
  <block id="21f59b54f62b5b8b4bc0f63f0f617fc1" category="cell">影响</block>
  <block id="040c0509161cfcd55da966beb37921b1" category="cell">合规性</block>
  <block id="05906ffba5e034944a71a9111afdf705" category="cell">服务器证书(网格管理接口)</block>
  <block id="d20513b4fca5ffa77f89a968771c8ce1" category="paragraph">网格管理员可以将网格管理界面配置为使用由其组织的受信任CA签名的服务器证书。</block>
  <block id="2d5347081a9c22a52251558c61faac47" category="cell">允许使用由其标准可信CA签名的数字证书对管理客户端和网格之间的管理UI和API访问进行身份验证。</block>
  <block id="cfab1ba8c67c7c838db98d666f02a132" category="cell">--</block>
  <block id="54d935076ee0d20093493f2324a28699" category="cell">管理用户身份验证</block>
  <block id="40d07925f107ab33cd0ddba20ec40969" category="paragraph">管理用户使用用户名和密码进行身份验证。管理用户和组可以是本地用户或联合用户、也可以是从客户的Active Directory或LDAP导入的用户和组。本地帐户密码以bcrypt保护的格式存储；命令行密码以SHA-2保护的格式存储。</block>
  <block id="7b082c671c2106fa6151564ce6fe217a" category="cell">对管理UI和API的管理访问进行身份验证。</block>
  <block id="f466077897b4a7562ce25271de69eee4" category="cell">SAML支持</block>
  <block id="5f8e6baa5d9eb34aa5a0ac0f6ed99e37" category="paragraph">StorageGRID支持使用安全断言标记语言2.0 (SAML 2.0)标准的单点登录(SSO)。启用 SSO 后，所有用户都必须经过外部身份提供程序的身份验证，然后才能访问网格管理器，租户管理器，网格管理 API 或租户管理 API 。本地用户无法登录到 StorageGRID 。</block>
  <block id="0188b6cf538a1e80a2d71dbc8cf5e370" category="cell">为网格和租户管理员提供更高级别的安全性、例如SSO和多因素身份验证(MFA)。</block>
  <block id="5be3843c5bd0709d26440921c859d8df" category="cell">NIST SP800-63</block>
  <block id="88dc3f73e7ea5ab818c5af642ed9da03" category="cell">精细的权限控制</block>
  <block id="3f56ceac01eb4c28a51a2f770a4f9f83" category="paragraph">网格管理员可以为角色分配权限、并为管理用户组分配角色、这样可以使用管理UI和API强制执行允许管理客户端执行的任务。</block>
  <block id="9942fce998f0b0d862b20be8a42ff934" category="cell">允许网格管理员管理管理员用户和组的访问控制。</block>
  <block id="4cad14bededdb563df770bfc3c540115" category="cell">分布式审核日志记录</block>
  <block id="7ade29c578c3d1571a9a046883efe0ed" category="paragraph">StorageGRID提供内置的分布式审核日志记录基础架构、可扩展到多达16个站点上的数百个节点。StorageGRID软件节点会生成审核消息、这些消息通过冗余审核中继系统传输、并最终捕获到一个或多个审核日志存储库中。审核消息可捕获对象级别粒度的事件、例如客户端启动的S3 API操作、ILM对象生命周期事件、后台对象运行状况检查以及通过管理UI或API进行的配置更改。</block>
  <block id="5501b37af5f22aca0fe768f97426e4c3" category="paragraph">可以通过CIFS或NFS从管理节点导出审核日志、从而可以使用Splunk和PEK等工具挖掘审核消息。审核消息有四种类型：</block>
  <block id="7483d9bdb3975c2dc4c182437bb694a4" category="list-text">系统审核消息</block>
  <block id="0f4511940e0cd310266a29e9b461e173" category="list-text">对象存储审核消息</block>
  <block id="34088c40fc8a2267586c38cbb1723388" category="list-text">HTTP协议审核消息</block>
  <block id="4497c363c0905834ab08fc50f6a44e4f" category="list-text">管理审核消息</block>
  <block id="5f7e72c509668ff8f7b6390c907882e6" category="cell">为网格管理员提供经验证的可扩展审计服务、使他们能够为各种目标挖掘审计数据。此类目标包括故障排除、审核SLA性能、客户端数据访问API操作以及管理配置更改。</block>
  <block id="f61ec047fca58fcd75291639c4a048aa" category="cell">系统审核</block>
  <block id="7dc8a2105ca4483253ebb1735958d5e1" category="paragraph">系统审核消息可捕获与系统相关的事件、例如网格节点状态、损坏对象检测、根据ILM规则在所有指定位置提交的对象以及系统范围维护任务(网格任务)的进度。</block>
  <block id="29e217ab754b4fea887419607503f4ab" category="cell">帮助客户解决系统问题、并提供根据其SLA存储对象的证据。SLA通过StorageGRID ILM规则实施、并受到完整性保护。</block>
  <block id="cc3eee76f9480cae7c73a9bef870bf2a" category="cell">对象存储审核</block>
  <block id="c86a6e3b8f35e0d928600dbd3d62655c" category="paragraph">对象存储审核消息可捕获对象API事务和生命周期相关事件。这些事件包括对象存储和检索、网格节点到网格节点的传输以及验证。</block>
  <block id="34b562523826be37b4ac7af2277aebde" category="cell">帮助客户审核系统中的数据进度以及是否正在交付SLA (指定为StorageGRID ILM)。</block>
  <block id="7eff4e44bda32d2cd250072cda727a89" category="cell">HTTP协议审核</block>
  <block id="5eccf85b677f8dd922606ceeaf3c3a46" category="paragraph">HTTP协议审核消息可捕获与客户端应用程序和StorageGRID节点相关的HTTP协议交互。此外，客户还可以捕获特定的HTTP请求标头(例如X-Forwarded-for和用户元数据[x-AMZ-meta-*])以进行审核。</block>
  <block id="e9117279901146f8d98dc2a9bcdac878" category="cell">帮助客户审核客户端和StorageGRID之间的数据访问API操作、并跟踪单个用户帐户和访问密钥的操作。客户还可以将用户元数据记录到审核中、并使用日志挖掘工具(例如Splunk或ETK)搜索对象元数据。</block>
  <block id="070c51a140518b977c218a0344ba4f3b" category="cell">管理审计</block>
  <block id="aa84a8490e3e4d04c17f36adbdfb7a54" category="paragraph">管理审核消息会记录管理员用户对管理UI (网格管理接口)或API的请求。对于 API ，并非 GET 或 HEAD 请求的每个请求都会记录一个响应，其中包含 API 的用户名， IP 和请求类型。</block>
  <block id="d2d7093b62e22872a973457ebe5f99fd" category="cell">帮助网格管理员建立系统配置更改记录、记录由哪个用户在哪个时间从哪个源IP进行更改、以及从哪个目标IP进行更改。</block>
  <block id="075a3baae0c7e9cedf3c414c981271e5" category="cell">TLS 1.3支持管理UI和API访问</block>
  <block id="bb9d766506884c6e2d909aefb1f43742" category="paragraph">TLS会为管理客户端与StorageGRID管理节点之间的通信建立握手协议。</block>
  <block id="cdcd74524dc8a54814dd948fce79920d" category="cell">使管理客户端和StorageGRID能够相互识别和身份验证、并在机密性和数据完整性的情况下进行通信。</block>
  <block id="fd563bed1019fdd16506badf8de0be7c" category="cell">SNMPv3、用于StorageGRID监控</block>
  <block id="f810112d0f21af5ebe92b9c3de73fb10" category="paragraph">SNMPv3通过提供强身份验证和数据加密来保护隐私、从而提供安全性。对于v3、协议数据单元将使用CBC-DES作为加密协议进行加密。</block>
  <block id="d308a8644bac0549e4eebc4e204dbdaa" category="paragraph">发送协议数据单元的用户身份验证由HMAC-SHA或HMAC-MD5身份验证协议提供。</block>
  <block id="d861d9fe22241f4954ffbc5f714c6b3e" category="paragraph">SNMPv2和v1仍受支持。</block>
  <block id="3908989ae44796e246abf64ca846e596" category="cell">通过在管理节点上启用SNMP代理、帮助网格管理员监控StorageGRID系统。</block>
  <block id="2f74ef948c0cbd60a355bf0ce31ac523" category="cell">Prometheus指标导出的客户端证书</block>
  <block id="6ed40b41149d6e8329e87c6439140f27" category="paragraph">网格管理员可以上传或生成客户端证书、这些证书可用于提供对StorageGRID Prometheus数据库的安全、经过身份验证的访问。</block>
  <block id="9eb7a3058a62bcc550379f9a7c96d31d" category="cell">网格管理员可以使用客户端证书通过Grafana等应用程序在外部监控StorageGRID。</block>
  <block id="42312419fa3cca4ceb6815611aeab842" category="summary">了解StorageGRID如何与云服务集成。</block>
  <block id="a439aea26c6a48deab5b0e5352cad240" category="doc">云集成</block>
  <block id="a2460242ec10f87bbe298af92d244102" category="cell">基于通知的病毒扫描</block>
  <block id="5be6ecc0e84ecdf8358641cde4ac3a75" category="cell">StorageGRID平台服务支持事件通知。事件通知可与外部云计算服务结合使用、用于对数据触发病毒扫描工作流。</block>
  <block id="c0ece86af9ac026421b58625b1dbbfae" category="cell">允许租户管理员使用外部云计算服务触发数据病毒扫描。</block>
  <block id="c1f98ba9144b5c4acba3f552bd0212de" category="summary">了解StorageGRID中的数据访问安全功能。</block>
  <block id="b457b3583adf5d2d24a86f3257c09ef6" category="doc">数据访问安全功能</block>
  <block id="753a6f803446796fbbff04dfd88f5473" category="cell">可配置传输层安全(TLS)</block>
  <block id="d828d68f264d2c7fea84e99793c324f5" category="paragraph">TLS会为客户端与StorageGRID网关节点、存储节点或负载平衡器端点之间的通信建立握手协议。</block>
  <block id="781a8dad9c44f94841562f732a7396f3" category="paragraph">StorageGRID支持以下TLS密码套件：</block>
  <block id="3399189c01a6f55e6ddbbeb65514d504" category="list-text">TLS_AES_256_GCM_SHA384</block>
  <block id="8a3c1b321499beacc45a33fd42758929" category="list-text">TLS_AES_128_GCM_SHA256</block>
  <block id="e5173d80a1a420882d32605cd379c5ef" category="list-text">ECDHE-ECDSA-AES256-GCM-SHA384</block>
  <block id="4e7ea026ea32e79687f764f49b78e129" category="list-text">ECDHE-RSA-AES256-GCM-SHA384</block>
  <block id="e5de54f78f46d20e5acab91f76f34ee7" category="list-text">ECDHE-ECDSA-AES128-GCM-SHA256</block>
  <block id="ef944609110b8bf159fbc8e5f67a401b" category="list-text">ECDHE-RSA-AES128-GCM-SHA256</block>
  <block id="31937404cd5649d58e878d229fb4dada" category="list-text">DHE-RSA-AES128-GCM-SHA256</block>
  <block id="c1bc421fc57b754da1ecbe38d180d23f" category="list-text">DHE-RSA-AES256-GCM-SHA384</block>
  <block id="1eb7995937b2aa2df86eee93757c88cf" category="list-text">AES256-GCM-SHA384</block>
  <block id="6402f76731704b7c964fa74df1baec24" category="list-text">AES128-GCM-SHA256</block>
  <block id="7f56ad966fda13e8563f6faf577e85d7" category="list-text">TLS_CHACHA20_POLY1305_SHA256</block>
  <block id="fbca494608a7316d7e4aa6c4683cfc68" category="list-text">ECDHE-ECDSA-CHACHA20-POLY1305</block>
  <block id="a6d6322eb07cc3c297ac472e6fcf4c27" category="list-text">ECDHE-RSA-CHACHA20-POLY1305</block>
  <block id="6e32c1287aa4f229067eaef76ad63327" category="paragraph">支持TLS v1.2和1.3。</block>
  <block id="be74196f2c234809a4947513f55a8af5" category="paragraph">不再支持SSLv3、TLS v1.1及更早版本。</block>
  <block id="c7b07a7ebdf337ae1378b0072987f991" category="cell">使客户端和StorageGRID能够相互识别和身份验证、并在保密和数据完整性的情况下进行通信。确保使用最新的TLS版本。现在、您可以在"配置/安全"设置下配置这些用户的用户</block>
  <block id="6c4306aab65ea68e521b0cde733e6f58" category="cell">可配置的服务器证书(负载平衡器端点)</block>
  <block id="c0ac81f384caa4ceb7f9e336f5fd60f3" category="paragraph">网格管理员可以将负载平衡器端点配置为生成或使用服务器证书。</block>
  <block id="82cef1e3b85ce70fb048e22855c8a00f" category="cell">允许使用由其标准可信证书颁发机构(Certificate Authority、CA)签名的数字证书、对每个负载平衡器端点的网格和客户端之间的对象API操作进行身份验证。</block>
  <block id="128ac3932acf146ee4e1b6833bcd45cd" category="cell">可配置的服务器证书(API端点)</block>
  <block id="805178806185d9cd7f41e6ad8a3c8ee9" category="paragraph">网格管理员可以集中配置所有StorageGRID API端点、以使用由其组织的受信任CA签名的服务器证书。</block>
  <block id="6f18c4ddefc0542d80dfedd38275d8f1" category="cell">允许使用由其标准可信CA签名的数字证书对客户端和网格之间的对象API操作进行身份验证。</block>
  <block id="e95bb6f1e85d1ffe0eb983fd5e0fbde8" category="cell">多租户</block>
  <block id="d21e77b5ca3af7b22ebee2ea0c3c24cc" category="paragraph">StorageGRID支持每个网格包含多个租户；每个租户都有自己的命名空间。租户提供S3协议；默认情况下、对分段/容器和对象的访问仅限于帐户中的用户。租户可以拥有一个用户(例如、一个企业部署、其中每个用户都有自己的帐户)或多个用户(例如、一个服务提供商部署、其中每个帐户都是服务提供商的一家公司和一个客户)。用户可以是本地用户、也可以是联合用户；联合用户由Active Directory或轻型目录访问协议(Lightweight-Directory Access Protocol、LDAP)定义。StorageGRID提供了一个按租户显示的信息板、用户可在其中使用其本地或联合帐户凭据登录。用户可以根据网格管理员分配的配额访问有关租户使用情况的可视化报告、包括分段存储的数据和对象中的使用情况信息。具有管理权限的用户可以执行租户级别的系统管理任务、例如管理用户和组以及访问密钥。</block>
  <block id="ab6bfa1f9926f9adbcfedc6a50f480dc" category="cell">允许StorageGRID管理员托管来自多个租户的数据、同时隔离租户访问、并通过将用户与外部身份提供程序(如Active Directory或LDAP)联盟来建立用户身份。</block>
  <block id="f590255bdd37625b95d709d82cdf8336" category="cell">SEC规则17a-4 (f) CTFC 1.31 (c)-（d)(FIRA)规则4511 (c)</block>
  <block id="6290eab0ededf87492453d290ed5254b" category="cell">访问凭据的不可否认性</block>
  <block id="39475094fd770a9dc772b22b71bd411a" category="paragraph">每个S3操作都使用唯一的租户帐户、用户和访问密钥进行标识和记录。</block>
  <block id="3bc4682897671540e2902f202a464db2" category="cell">允许网格管理员确定由哪些个人执行哪些API操作。</block>
  <block id="9195569ffa63f28844da022d973a997c" category="cell">已禁用匿名访问</block>
  <block id="2dee4bc8afe592bcf0b9153ba2002e3d" category="paragraph">默认情况下、S3帐户禁用匿名访问。请求者必须拥有租户帐户中有效用户的有效访问凭据、才能访问帐户中的分段、容器或对象。可以使用显式IAM策略启用对S3存储分段或对象的匿名访问。</block>
  <block id="0b5e9a10290c11d44c8cfb3d77535e46" category="cell">允许网格管理员禁用或控制对分段/容器和对象的匿名访问。</block>
  <block id="752fcf14a8b9daa186c583a7d4158452" category="cell">合规性WORM</block>
  <block id="f691779f675395e50c6284f6ad6cce98" category="paragraph">旨在满足SEC规则17a-4 (f)的要求、并经过Cohasset验证。客户可以在存储分段级别实现合规性。保留期限可以延长、但绝不能减少。 信息生命周期管理(ILM)规则强制实施最低数据保护级别。</block>
  <block id="10d40b9f13b0422b8e7c6c40d93f9daa" category="cell">允许具有法规数据保留要求的租户对存储的对象和对象元数据启用WORM保护。</block>
  <block id="3a695db79c78b1c967cee48fc2a237d5" category="cell">WORm</block>
  <block id="1ff830aee80a46441059414d7211db16" category="paragraph">网格管理员可以通过启用禁用客户端修改选项来启用网格范围的WORM、此选项可防止客户端覆盖或删除所有租户帐户中的对象或对象元数据。</block>
  <block id="0cf860f19fe64063998ee1f67a85e4d6" category="paragraph">S3租户管理员还可以通过指定IAM策略按租户、存储分段或对象前缀启用WORM、此策略包括自定义的对象和元数据覆盖S3：PutOverwriteObject权限。</block>
  <block id="7e5f2815798564dd590d71e02f238580" category="cell">允许网格管理员和租户管理员控制对已存储对象和对象元数据的WORM保护。</block>
  <block id="2e0e9e5d2e03839455cd9eb2f37adfca" category="cell">Kms主机服务器加密密钥管理</block>
  <block id="a3f0233f685ab81bfbe239c4973c7e5b" category="paragraph">网格管理员可以在网格管理器中配置一个或多个外部密钥管理服务器(KMS)、以便为StorageGRID服务和存储设备提供加密密钥。每个KMS主机服务器或KMS主机服务器集群都使用密钥管理互操作性协议(Key Management互操作性协议、KMIP)为关联StorageGRID站点上的设备节点提供加密密钥。</block>
  <block id="584f69c6ee257399bb645ec40c34f8b8" category="cell">实现空闲数据加密。对设备卷进行加密后、您将无法访问设备上的任何数据、除非节点可以与KMS主机服务器进行通信。</block>
  <block id="016980f5fee5180da7eb37d92bbe93a3" category="cell">自动故障转移</block>
  <block id="91a64541fc56f20595a65a15961c9333" category="paragraph">StorageGRID提供内置冗余和自动故障转移功能。即使从磁盘或节点到整个站点发生多个故障、也可以继续访问租户帐户、分段和对象。StorageGRID具有资源感知能力、可自动将请求重定向到可用节点和数据位置。StorageGRID站点甚至可以在隔离模式下运行；如果WAN中断使站点与系统的其余部分断开连接、则可以使用本地资源继续执行读取和写入操作、并在WAN还原后自动恢复复制。</block>
  <block id="492984e9588af59fedc2e2fdc5d9e682" category="cell">支持网格管理员解决正常运行时间、SLA和其他合同义务问题、并实施业务连续性计划。</block>
  <block id="12dd703379c8ba7977dc02d77fec0735" category="paragraph">*特定于S3的数据访问安全功能*</block>
  <block id="edfdb91a1964d9ed68062f44a8ff1fc3" category="cell">AWS签名版本2和版本4</block>
  <block id="0d6a3121917332d81937482e5e2c6990" category="paragraph">对API请求签名可为S3 API操作提供身份验证。Amazon支持签名版本2和版本4的两个版本。签名过程可验证请求者的身份、保护传输中的数据并防止潜在的重放攻击。</block>
  <block id="111c639740042f3b86ec52ab04d9fd4d" category="cell">符合AWS对签名版本4的建议、并支持与签名版本2中的旧应用程序向后兼容。</block>
  <block id="0946e55b3c87b085798341e597961c44" category="cell">S3 对象锁定</block>
  <block id="8b33f7b914b813e19849abc6adea4818" category="paragraph">StorageGRID中的S3对象锁定功能是一种对象保护解决方案、相当于Amazon S3中的S3对象锁定。</block>
  <block id="cd73e50fff336569a69254a44006a8fa" category="cell">允许租户在启用S3对象锁定的情况下创建分段、以符合要求将某些对象保留固定时间或无限期的法规要求。</block>
  <block id="e750fe837d77b3393407dd5684f0ccd5" category="cell">S3凭据的安全存储</block>
  <block id="e73d8e355eec640db89792c3ce5edc01" category="paragraph">S3访问密钥以受密码哈希功能(SHA-2)保护的格式存储。</block>
  <block id="57a523e42059eb10514d9881ec7dc8ab" category="cell">通过组合使用密钥长度(10^31^随机生成的数字)和密码哈希算法来安全存储访问密钥。</block>
  <block id="a6e0d5acc075fc9f4132416b26a4cacf" category="cell">有时间限制的S3访问密钥</block>
  <block id="b486946a20421048a31cdc9591a91a81" category="paragraph">在为用户创建S3访问密钥时、客户可以设置访问密钥的到期日期和时间。</block>
  <block id="e9bf875ba15eec7c176eec55a4ac3b8f" category="cell">为网格管理员提供配置临时S3访问密钥的选项。</block>
  <block id="13cebe025d2b87a87a0032d00eb06d92" category="cell">每个用户帐户具有多个访问密钥</block>
  <block id="2f163680a65a2f40b6738ba05007c096" category="paragraph">通过StorageGRID、可以为一个用户帐户创建多个访问密钥、并使其同时处于活动状态。由于每个API操作都使用租户用户帐户和访问密钥进行记录、因此、即使多个密钥处于活动状态、也会保留不可否认性。</block>
  <block id="65b03ad2f8066caf4748e305bc92b8e4" category="cell">使客户端能够无干扰地轮换访问密钥、并允许每个客户端都有自己的密钥、从而避免在客户端之间共享密钥。</block>
  <block id="18e203212c9ad7c5d1d1e9b064631e1c" category="cell">S3 IAM访问策略</block>
  <block id="45d73bb890cb4cb9d36e0c13b1efcf64" category="paragraph">StorageGRID支持S3 IAM策略、支持网格管理员按租户、分段或对象前缀指定精细访问控制。StorageGRID还支持IAM策略条件和变量、从而支持更动态的访问控制策略。</block>
  <block id="664f0391925837168f5b4a8cbdc1e4a3" category="cell">允许网格管理员按用户组为整个租户指定访问控制；还允许租户用户为自己的分段和对象指定访问控制。</block>
  <block id="37fab3c44e5755f8e5bccbd6918d849c" category="cell">使用StorageGRID托管密钥(SSE)进行服务器端加密</block>
  <block id="3563e31ddbe412705277d2ecbf461e02" category="paragraph">StorageGRID支持SSE、可使用StorageGRID管理的加密密钥对空闲数据进行多租户保护。</block>
  <block id="9bd8463667e55d77a93812c9e30cdb6f" category="cell">允许租户对对象进行加密。要写入和检索这些对象、需要使用加密密钥。</block>
  <block id="b0e6ca251ef8eb40f5140358803620f0" category="cell">使用客户提供的加密密钥(SSE-C)进行服务器端加密</block>
  <block id="a51ff0bc3dd94bb08fc3e0135c03df0a" category="paragraph">StorageGRID支持SSE-C、可使用客户端管理的加密密钥对空闲数据进行多租户保护。</block>
  <block id="788d14dbf950f69d110d594ea3e0ccc4" category="paragraph">虽然StorageGRID负责管理所有对象加密和解密操作、但使用SSE-C时、客户端必须自行管理加密密钥。</block>
  <block id="8fcaac261a43456ba5d28692ad76f1a7" category="cell">使客户端能够使用其控制的密钥对对象进行加密。要写入和检索这些对象、需要使用加密密钥。</block>
  <block id="731de27084d8604a1d6b2d4f3db3e813" category="summary">了解StorageGRID对象存储解决方案不可或缺的安全功能。</block>
  <block id="1258e6ff8b374b8ea1a0bd0ab918bd2b" category="doc">保护对象存储中的StorageGRID数据和元数据的安全</block>
  <block id="37555cad129f87a5d0dbe66af2e608f5" category="paragraph">本文档概述了NetApp®StorageGRID®中的许多安全功能，包括数据访问、对象和元数据、管理访问和平台安全性。它已进行更新、加入了随StorageGRID 11.8.</block>
  <block id="6a26fac444f2fa8249e58b9e1ad5f1f5" category="paragraph">安全性是NetApp StorageGRID对象存储解决方案不可或缺的一部分。安全性尤为重要、因为非常适合对象存储的许多类型的富内容数据在本质上也是敏感的、并受法规和合规性的约束。随着StorageGRID功能的不断发展、该软件提供了许多安全功能、这些功能对于保护组织的安全防护以及帮助组织遵守行业最佳实践至关重要。</block>
  <block id="4a4dabde11a077d631a0208b03dfdd6a" category="paragraph">本文概述了StorageGRID 11.8中的许多安全功能、分为五类：</block>
  <block id="bc9171df5cd05800ed1cfc0f1e57ee3c" category="list-text">对象和元数据安全功能</block>
  <block id="4c09768521a2b8d071ec184101026f0b" category="list-text">平台安全功能</block>
  <block id="bd3813fae65cb7c59dcb2440c1767ac0" category="inline-link">《StorageGRID加强指南》</block>
  <block id="a0a2b190d72ee4645ce0b2c9bb0daaac" category="inline-link">StorageGRID 文档</block>
  <block id="0f07f6589b07549f758f58cff19d1ae8" category="paragraph">本白皮书旨在提供一个安全产品规格、其中并未详细说明如何配置系统以支持中枚举的默认未配置的安全功能。<block ref="a8889d4963e33bc8feee06ac02912ffa" category="inline-link-rx"></block>可在官方页面上找到<block ref="8d80aa7c37bec53b7171a35567fec311" category="inline-link-rx"></block> 。</block>
  <block id="0c39f21f8929ee8b7354d8a05b4f2494" category="inline-link">NetApp产品安全漏洞响应和通知策略</block>
  <block id="e49b7c4182308a3c27dbec32987e8e67" category="paragraph">除了本报告中介绍的功能之外，StorageGRID还遵循<block ref="304cf4448819c099eaccd4f8123ab72d" category="inline-link-rx"></block>。根据产品安全事件响应流程、对报告的漏洞进行验证和响应。</block>
  <block id="23e21fdb0716a632da9ef25685dbc487" category="paragraph">NetApp StorageGRID可为要求苛刻的企业对象存储用例提供高级安全功能。</block>
  <block id="3bdba8537a031ec25e6ed46ff2e22424" category="list-text">NetApp StorageGRID：SEC 17a-4 (f)、FIRA 4511 (c)和CFTC 1.31 (c)-(d)合规性评估 <block ref="dc6d251ee495c96de57ac351b8ca3a6f" category="inline-link-rx"></block></block>
  <block id="2cbf7b84b091bb76f9e653d971faa3e6" category="list-text">StorageGRID 1.18文档页面 <block ref="47ea1c2d0f136bec8b3e66c2121bf70f" category="inline-link-rx"></block></block>
  <block id="682026a33ae6dd46be9dad491b716b01" category="section-title">术语和首字母缩略语</block>
  <block id="5b66d86127a2b0a925034cfcc284c687" category="paragraph">本节提供了文档中所用术语的定义。</block>
  <block id="2a2006e5a6b22cc16fc0894555912667" category="cell">术语或首字母缩略语</block>
  <block id="0b890b1926b90387673882e6ccae7fdc" category="cell">定义</block>
  <block id="e2ab7c65b21ed8cc1c3b642b5e36429e" category="cell">S3</block>
  <block id="a2cbadb148c35ae20844166a4049827a" category="cell">Simple Storage Service。</block>
  <block id="577d7068826de925ea2aec01dbadf5e4" category="cell">客户端</block>
  <block id="c42c95a84762e5df51b8c0379213294d" category="cell">一种可以通过S3协议(用于数据访问)或HTTP协议(用于管理)与StorageGRID连接的应用程序。</block>
  <block id="3a134231e12853479bb60ef7e0bb508f" category="cell">租户管理员</block>
  <block id="dd286a26ffb682c09950bb5a79fe2b38" category="cell">StorageGRID租户帐户的管理员</block>
  <block id="bacfdd208895f840b8bbcbe548dcb465" category="cell">租户用户</block>
  <block id="595d59df4898995cdade3ec2e019fe1f" category="cell">StorageGRID租户帐户中的用户</block>
  <block id="099d7d04319e5191b7473e016c55e320" category="cell">TLS</block>
  <block id="14a55e8a26db2705a0ffd20ba0427338" category="cell">传输层安全性</block>
  <block id="45a63ab8cbf11a8d14e5315e7199fcbd" category="cell">ILM</block>
  <block id="9e69bc9ab0f818cb5a3334e140c5f4c2" category="cell">信息生命周期管理</block>
  <block id="1d59b567d57ca91246c45d7d8bcfbc28" category="cell">LAN</block>
  <block id="7f2e9b596a9563029595ca880522bcf8" category="cell">局域网</block>
  <block id="96dd8ce9bf6a448d9f61d43d8d265801" category="cell">网格管理员</block>
  <block id="638148630ddd9851f81f1bb079fb8496" category="cell">StorageGRID系统的管理员</block>
  <block id="5174d1309f275ba6f275db3af9eb3e18" category="cell">网格</block>
  <block id="4c91f2d56b8af2d77096a2a65babc675" category="cell">StorageGRID系统</block>
  <block id="30edf70db68aa84f05d3e72326807b0c" category="cell">存储分段</block>
  <block id="9fd8560ef55eb33e96cb901223b3d97c" category="cell">存储在S3中的对象的容器</block>
  <block id="2363dee608bcd9f6ce7f980bfdad5789" category="cell">LDAP</block>
  <block id="5fd76d09b267aef5e26007a419170512" category="cell">轻型目录访问协议</block>
  <block id="cde50a071fd29ce8ebf9813061a2db77" category="cell">秒</block>
  <block id="8064a0440a7efca9781a6658cddd1c99" category="cell">证券和交易委员会；管理交易所成员、经纪人或交易商</block>
  <block id="9b473842f8e582b9346c43fc0350da81" category="cell">这是</block>
  <block id="e44fc3a2f3510a05e6ec779e46284a8a" category="cell">金融行业监管机构；遵守SEC规则17a-4 (f)的格式和媒体要求</block>
  <block id="b7856518010c77e5e4b1d0e85318986b" category="cell">CFTC</block>
  <block id="2933610d8d4145b6eef46b5561549528" category="cell">商品期货交易委员会；管理商品期货交易</block>
  <block id="a44b6b00e5eebd7494e1fd00658685e2" category="cell">NIST</block>
  <block id="cc6ebf303b2b8456032b2686a57bb371" category="cell">国家标准和技术研究所</block>
  <block id="09934e3832ffb0b4c9e66c5c04bc0be2" category="summary">了解StorageGRID中的对象和元数据安全功能。</block>
  <block id="4c51cf831c927dc141f320ac2843e74e" category="doc">对象和元数据安全性</block>
  <block id="97f766fafb1834cf5b37cdfef913fd4a" category="cell">高级加密标准(Advanced Encryption Standard、AES)服务器端对象加密</block>
  <block id="faa9044a24e1de3aa29ee8f9cd98f417" category="paragraph">StorageGRID可为对象提供基于AES 128和AES 256的服务器端加密。网格管理员可以启用加密作为全局默认设置。StorageGRID还支持S3 x-AMZ-server-side加密标头、以允许按对象启用或禁用加密。启用后、对象在存储时或在网格节点之间传输时会进行加密。</block>
  <block id="65f1110f71267ce7e4fda5853630c698" category="cell">有助于保护对象的存储和传输、不受底层存储硬件的限制。</block>
  <block id="306ac6be0dc74c6c913817c118194a57" category="cell">内置密钥管理</block>
  <block id="d64aa93292b065628260e9509c89afae" category="paragraph">启用加密后、每个对象都会使用随机生成的唯一对称密钥进行加密、该密钥存储在StorageGRID中、无需外部访问。</block>
  <block id="c3830d20240c4ba204beb61af4e9bd4e" category="cell">无需外部密钥管理即可启用对象加密。</block>
  <block id="26217ba08b7324d30253fffae8ed7ec7" category="cell">符合联邦信息处理标准(Federal Information Processing Standard、FIPS) 140-2的加密磁盘</block>
  <block id="476d9a8f1d131333f205e6793dd28254" category="paragraph">SG5712、SG5760、SG6060和SGF6024 StorageGRID设备可提供符合FIPS 140-2的加密磁盘选项。磁盘的加密密钥可以选择由外部KMIP服务器管理。</block>
  <block id="fdf3619a8a241ec7b5e5a8d0110b4225" category="cell">支持安全存储系统数据、元数据和对象。此外、还提供基于StorageGRID软件的对象加密功能、可保护对象的存储和传输安全。</block>
  <block id="b56b27275ea9fc75a7ac4dda9b49b749" category="cell">后台完整性扫描和自我修复</block>
  <block id="2e6b4c580a8bcff25b5a47d60fcac9d0" category="paragraph">StorageGRID在对象和子对象级别使用哈希、校验和和和循环冗余校验(CrC)的互斥机制、以防止在对象存储和传输过程中出现数据不一致、篡改或修改。StorageGRID会自动检测损坏和被篡改的对象并进行替换、同时隔离更改后的数据并向管理员发出警报。</block>
  <block id="57a6d6612c0b7ac339111e38393db55f" category="cell">支持网格管理员满足SLA、法规和其他有关数据持久性的义务。帮助客户检测尝试加密、篡改或修改数据的勒索软件或病毒。</block>
  <block id="ab3d0bc476ac2aa0ca7007f4d8618e58" category="cell">基于策略的对象放置和保留</block>
  <block id="45154f53b7a3a50bb733581c179d72a2" category="paragraph">StorageGRID支持网格管理员配置ILM规则、用于指定对象保留、放置、保护、过渡和到期时间。网格管理员可以将StorageGRID配置为按对象的元数据筛选对象、并在各种粒度级别应用规则、包括网格范围、租户、存储分段、密钥前缀、 和用户定义的元数据键值对。StorageGRID有助于确保在对象的整个生命周期内根据ILM规则存储对象、除非客户端明确删除这些对象。</block>
  <block id="d0ee1df697b7f408e9089d24fcaec8be" category="cell">有助于强制实施数据放置、保护和保留。帮助客户在持久性、可用性和性能方面实现SLA。</block>
  <block id="6700d1634a0e19cab516f3a4d03a2817" category="cell">后台元数据扫描</block>
  <block id="3a14d699423ed46f9bab55635c106b01" category="paragraph">StorageGRID会定期扫描后台的对象元数据、以应用ILM指定的对象数据放置或保护更改。</block>
  <block id="8f797656852da4a84368d8850bf557ea" category="cell">帮助发现损坏的对象。</block>
  <block id="0c0ee82e6c4aeb0920d436a9efbab494" category="cell">可调一致性</block>
  <block id="7f47a281f3a192a34a395c932aa34f62" category="paragraph">租户可以在存储分段级别选择一致性级别、以确保多站点连接等资源可用。</block>
  <block id="0184cc4eb8ec1ebf5b5b6475bc7ae93c" category="cell">仅当提供所需数量的可用站点或资源时、才可选择向网格提交写入。</block>
  <block id="d8fe39539c6c456faa1024868073f000" category="summary">了解StorageGRID中的平台安全功能。</block>
  <block id="d59438575cef862c3bc97b4eba4702d1" category="cell">内部公共密钥基础架构(PKI)、节点证书和TLS</block>
  <block id="cef4b2f928b6a73e809b14c345e4c29f" category="paragraph">StorageGRID使用内部PKI和节点证书对节点间通信进行身份验证和加密。节点间通信受TLS保护。</block>
  <block id="b29238986a3e915d8670efd789dcfaba" category="cell">有助于保护LAN或WAN上的系统流量、尤其是在多站点部署中。</block>
  <block id="e609a089cd067fd74c91545a318d23a2" category="cell">节点防火墙</block>
  <block id="0a93b0586c28f127fc8c6e010a1dfe33" category="paragraph">StorageGRID会自动配置IP表和防火墙规则、以控制传入和传出网络流量、并关闭未使用的端口。</block>
  <block id="8240359e87e4305d13d50024e6951f23" category="cell">帮助保护StorageGRID系统、数据和元数据免受未经请求的网络流量的影响。</block>
  <block id="9e4d99173a03dafd5cb8f0ffc67d9f78" category="cell">OS强化</block>
  <block id="8816421215ef153ab783d72eb7cd9002" category="paragraph">StorageGRID物理设备和虚拟节点的基本操作系统得到了强化；不相关的软件包将被删除。</block>
  <block id="e7db23c0da6ccf0de96e36b3131daf9f" category="cell">有助于最大限度地减少潜在攻击面。</block>
  <block id="e5e10592566afb713af791145bb4392d" category="cell">定期更新平台和软件</block>
  <block id="90a365cfa6334747b05f0b52c4b08021" category="paragraph">StorageGRID提供常规软件版本、其中包括操作系统、应用程序二进制文件和软件更新。</block>
  <block id="6f3cc3b9dee697e471e3bba31093dbae" category="cell">有助于使用最新的软件和应用程序二进制文件保持StorageGRID系统最新。</block>
  <block id="5a1d0b414c220379a049ebe65853938e" category="cell">已禁用通过安全Shell (SSH)进行root登录</block>
  <block id="1ddde9e67ac5cc8e61b89ce0d43ac0b6" category="paragraph">已在所有StorageGRID节点上禁用通过SSH进行root登录。SSH访问使用证书身份验证。</block>
  <block id="af4f815a408351dab1556dd0f8b12b6b" category="cell">帮助客户防止root登录的潜在远程密码破解。</block>
  <block id="9eb7eec004a2eb766b0f57cef5236954" category="cell">自动时间同步</block>
  <block id="6cff87b0c09df640d5253bc25e8d498c" category="paragraph">StorageGRID会自动将每个节点的系统时钟与多个外部时间网络时间协议(NTP)服务器同步。至少需要四个Stratum 3或更高版本的NTP服务器。</block>
  <block id="bee14ec49046822fecf5839d35c01049" category="cell">确保所有节点的时间参考相同。</block>
  <block id="a8527058dbd158380d69088d151c128f" category="cell">为客户端、管理和内部网格流量分隔网络</block>
  <block id="938b9f24dd23108e0608ac27003a8977" category="paragraph">StorageGRID软件节点和硬件设备支持多个虚拟和物理网络接口、因此客户可以通过不同的网络隔离客户端、管理和内部网格流量。</block>
  <block id="f777260864051786b269b2ef5c60a95f" category="cell">允许网格管理员隔离内部和外部网络流量、并通过具有不同SLA的网络交付流量。</block>
  <block id="cef805f717d8d34ca2cd9fa1d0556ec1" category="cell">多个虚拟LAN (VLAN)接口</block>
  <block id="3b98e97486d2b14be6f93cfbaada26f6" category="paragraph">StorageGRID支持在StorageGRID客户端和网格网络上配置VLAN接口。</block>
  <block id="d7ad4db946d899fffddd4489759f0fac" category="cell">网格管理员可以对应用程序流量进行分区和隔离、以提高安全性、灵活性和性能。</block>
  <block id="0aabc95acf5f661325f376501ce3bc42" category="cell">不可信客户端网络</block>
  <block id="5e6626b2ac43f3672327fc052e31b7dc" category="paragraph">不可信客户端网络接口仅接受已显式配置为负载平衡器端点的端口上的入站连接。</block>
  <block id="ad5adf22258fe15684493fa8e3041106" category="cell">确保暴露给不可信网络的接口安全。</block>
  <block id="738d14d12529b97de8983b0ad1514552" category="cell">可配置防火墙</block>
  <block id="77d3a2aa3ace89769c7000c9ff0fbc33" category="paragraph">管理管理管理、网格和客户端网络的开放和关闭端口。</block>
  <block id="76057cb1a942a10a1c814ef26644d04a" category="cell">允许网格管理员控制端口访问、并管理经过批准的设备对端口的访问。</block>
  <block id="d4988ead674101baad112a63743a2a90" category="cell">增强的SSH行为</block>
  <block id="cd5528ec1d42717a5a54ed1ec3c7235b" category="paragraph">将节点升级到StorageGRID 11.5时、系统会生成新的SSH主机证书和主机密钥。</block>
  <block id="11b82c0c383478059e3312f6a2c9d4c4" category="cell">增强中间人攻击防护。</block>
  <block id="e1a64d42ff187e4fae5c35973efe7842" category="cell">节点加密</block>
  <block id="44e5f619c850028058ea9f33d77d3189" category="paragraph">作为新的KMS主机服务器加密功能的一部分、StorageGRID设备安装程序会添加一个新的节点加密设置。</block>
  <block id="bb4fa26d9532e5da4f8e902beb9711c3" category="cell">必须在设备安装的硬件配置阶段启用此设置。</block>
  <block id="d1d4aaa210b3b6cacaf0000f0aebb381" category="summary">StorageGRID技术报告的简介页面。</block>
  <block id="7ce86dc69f6c4f549fbbada4c776c93f" category="doc">StorageGRID技术报告简介</block>
  <block id="8727881150b0ace8b598a648cdfcd4e1" category="paragraph">NetApp StorageGRID 是一款软件定义的对象存储套件、支持公共、私有和混合多云环境中的各种用例。StorageGRID 为Amazon S3 API提供本机支持、并提供行业领先的创新技术、例如自动化生命周期管理、以便长期经济高效地存储、保护和保留非结构化数据。</block>
  <block id="cf32db28f5310610ef2ec4f200f4bb88" category="paragraph">StorageGRID提供的文档涵盖了有关多种StorageGRID功能和集成的最佳实践和建议。</block>
  <block id="7ff15a408c1c333b121632bc18877f9d" category="doc">了解StorageGRID配置的几个用例</block>
  <block id="0e84c9d3a7eff27f8e3423b1eedd1879" category="paragraph">以下示例说明了StorageGRID客户(包括NetApp IT)实施的配置。</block>
  <block id="8365f1d55086260e6b4280883ebc86af" category="section-title">用于S3存储分段的F5 BIG-IP本地流量管理器运行状况检查监控器</block>
  <block id="69f04f21bfc3a8fe46dc750163ab8524" category="paragraph">要配置F5 BIG-IP本地流量管理器运行状况检查监控器、请执行以下步骤：</block>
  <block id="2174ae3c011dd873d4828a40887bbf88" category="list-text">创建新显示器。</block>
  <block id="7dd36e4004b883e56033959afc6c72f7" category="list-text">在Type字段中，输入<block ref="0e8433f9a404f1f3ba601c14b026d321" prefix=" " category="inline-code"></block>。</block>
  <block id="dd21ebb285037d96102dacb19cbb91f4" category="list-text">根据需要配置时间间隔和超时。</block>
  <block id="bd181fa499b4297ca0f96b237f19b965" category="list-text">在发送字符串字段中，输入<block ref="97f7892b24df272e50350757ceb43b37" prefix=" " category="inline-code"></block> \r\n表示回车；不同版本的大IP软件需要零个、一个或两组\r\n序列。有关详细信息，请参见<block ref="4852b727b6bde26d63d1e5b08662c2e2" category="inline-link-rx"></block>。</block>
  <block id="902b77afbc5629cc8ee652e06adcac1b" category="list-text">在Receive String (接收字符串)字段中，输入：<block ref="26c1e7b2e4b9c3ad6ee704fe983ca1d9" prefix=" " category="inline-code"></block>。</block>
  <block id="1334477fa01ccc253171d26254c84e05" category="inline-image-macro">监控器配置页面</block>
  <block id="f520303aafcd791ddca69170ea616ff7" category="list-text">在创建池中、为所需的每个端口创建一个池。</block>
  <block id="bca66e85df16d449451771c1dfaa0e04" category="list-text">分配在上一步中创建的运行状况监控器。</block>
  <block id="61ca2f0cf79f8dd539c0ade05c7afc1b" category="list-text">选择负载平衡方法。</block>
  <block id="3e62e147cce7e19b5cdfdddcad829e3e" category="list-text">选择服务端口：18082 (S3)。</block>
  <block id="319c86754c5300da22dc054d5ce5f176" category="list-text">添加节点。</block>
  <block id="53862fa374ea6d558ed8c96310f005f8" category="section-title">Citrix NetScaler</block>
  <block id="e2b1b2da185af550ff7fc51267e83b11" category="paragraph">Citrix NetScaler为存储端点创建一个虚拟服务器，并将StorageGRID存储节点称为应用程序服务器，然后将其分组到“服务”中。</block>
  <block id="b6f68780a83a8ae1e60d74d7fdbc1cf1" category="paragraph">使用HTTP-ECV运行状况检查监控器创建自定义监控器，以便通过选项请求和接收来执行建议的运行状况检查<block ref="3644a684f98ea8fe223c713b77189a77" prefix=" " category="inline-code"></block>。为HTTP-ECV配置了发送字符串并验证接收字符串。</block>
  <block id="b6e45c53457b3e5a3fb4ff9901c40d5b" category="inline-link">HTTP-ECV运行状况检查监控器的配置示例</block>
  <block id="b32f00d1e6048938e59a0b57c3b8d0f6" category="paragraph">有关详细信息，请参阅Citrix文档<block ref="9c02ec018ed76228b267d66ae485d4da" category="inline-link-rx"></block>。</block>
  <block id="880796fcaaa4d949a777ed4943c18341" category="inline-image-macro">Citrix NetScaler Monitor配置页</block>
  <block id="f1a019d81ace49ae05c637e3b257bb30" category="inline-image-macro">Configure-monitor.png</block>
  <block id="713be778c8d38f91dc492a2180ad5e93" category="section-title">Loadbalancer.org</block>
  <block id="c804c2ec3b0c9faa88da01d5d7557790" category="paragraph">Loadbalancer.org已对StorageGRID进行了自己的集成测试，并提供了大量的配置指南：<block ref="03a0be03bae2b471b941b5ca6dcd6c59" category="inline-link-rx"></block>。</block>
  <block id="d46ddb287552508c0c54b94c7dec1628" category="section-title">凯普</block>
  <block id="e55f30cfbe2a50cb0af0ce68bcf66c43" category="paragraph">KEMP已对StorageGRID进行了自己的集成测试，并提供了大量的配置指南：<block ref="23f639141c9bfe961e734bf8d30af119" category="inline-link-rx"></block>。</block>
  <block id="6a812150273423f1f875479281529d1a" category="section-title">HA 代理</block>
  <block id="a776aae0af1b740523926cda64b17852" category="paragraph">将HAProxy配置为使用options request、并在haproxy.cfg中检查运行状况检查的200状态响应。您可以将前端的绑定端口更改为其他端口、例如443。</block>
  <block id="701ed7fe70971c02f2164caf627e882b" category="paragraph">以下是在HAProxy上终止SSL的示例：</block>
  <block id="aa176ccc5951b5ded67b3f8906094b9e" category="paragraph">以下是SSL直通示例：</block>
  <block id="2f318c9fdc19b60bf0979ddd49ca78ac" category="inline-link">HAProxy配置示例</block>
  <block id="4a81f64fbb9c95c931964885623a00c7" category="paragraph">有关StorageGRID配置的完整示例、请参见<block ref="3a5a97c84ef2199b00eb391e62fdbb8e" category="inline-link-rx"></block> GitHub上的。</block>
  <block id="9643a935a5078eb74226f0a1020ee7a1" category="summary">了解StorageGRID中全局负载平衡的设计注意事项和要求。</block>
  <block id="6dc3d5f61c3a6c9b229ed85a045b5e5d" category="doc">了解StorageGRID的全局负载平衡要求</block>
  <block id="34f6a9aeab830b6ab672e2d23cb23df0" category="paragraph">全局负载平衡需要与DNS集成、以便在多个StorageGRID站点之间提供智能路由。此功能不在StorageGRID域中、必须由第三方解决方案(如上文讨论的负载平衡器产品)和/或DNS流量控制解决方案(如Infoblox)提供。此顶级负载平衡可提供到命名空间中最近的目标站点的智能路由、以及中断检测和重定向到命名空间中的下一个站点。典型的GSLB实施由顶级GSLB组成、其中站点池包含站点本地负载平衡器。站点负载平衡器包含本地站点存储节点的池。这可能包括用于GSLB功能的第三方负载平衡器和提供站点本地负载平衡的StorageGRID的组合、或者第三方的组合、或者前面讨论的许多第三方的组合可以同时提供GSLB和站点本地负载平衡。</block>
  <block id="598e19149cea7c839958d9b5ebe55aa2" category="inline-image-macro">通用GSLB</block>
  <block id="8544d9ff7415a439150dd5b56d854dc3" category="summary">了解第三方和全局负载平衡器在StorageGRID等对象存储系统中的作用。</block>
  <block id="7c37f16e9cbf7999830f6d447e5139cc" category="doc">将第三方负载平衡器与StorageGRID结合使用</block>
  <block id="3edd1c33d7ef33f3f2d4bd6d83866d6a" category="paragraph">使用第三方负载平衡器实施NetApp®StorageGRID®的一般指导。</block>
  <block id="36b135b4163edadebf01fc4fe5ce9908" category="paragraph">对象存储与"云存储"一词同义、正如您所期望的那样、利用云存储的应用程序会通过URL为该存储寻址。在这一简单URL的支持下、StorageGRID可以在单个站点或分布在不同地理位置的站点上扩展容量、性能和持久性。负载平衡器是实现这种精简性的组件。</block>
  <block id="c13ea3656f9ac47ed9e02fcd68d33302" category="paragraph">本文档的目的是向StorageGRID客户介绍负载平衡器选项、并提供配置第三方负载平衡器的一般指导。</block>
  <block id="3af5d994a44a191598417f7e5984e350" category="section-title">负载平衡器基础知识</block>
  <block id="ced6da2d844a75b99ad7de81dfc4b594" category="paragraph">负载平衡器是StorageGRID等企业级对象存储系统的基本组件。StorageGRID由多个存储节点组成、每个存储节点都可以为给定StorageGRID实例提供整个简单存储服务(Simple Storage Service、S3)名称空间。负载平衡器会创建一个高度可用的端点、我们可以将StorageGRID节点放置在该端点的后面。StorageGRID在与S3兼容的对象存储系统中是独一无二的、因为它提供自己的负载平衡器、但它也支持第三方或通用负载平衡器、例如F5、Citrix NetScaler、HA代理、NGINX等。</block>
  <block id="34c95b85eab9d149c0654c4541686dfe" category="paragraph">下图使用示例URL/完全限定域名(FQDN) s3.company.com”。负载平衡器会创建一个虚拟IP (VIP)、该IP可通过DNS解析为FQDN、然后将应用程序的任何请求定向到StorageGRID节点池。负载平衡器会对每个节点执行运行状况检查、并仅与运行状况良好的节点建立连接。</block>
  <block id="4941784a59eb11e9e82511a31694404a" category="inline-image-macro">本地流量管理器负载平衡器</block>
  <block id="1ef102b3c8ff2a21a3fcb109669d2c4b" category="paragraph">此图显示了StorageGRID提供的负载平衡器、但第三方负载平衡器的概念相同。应用程序使用负载平衡器上的VIP建立HTTP会话、流量将通过负载平衡器传输到存储节点。默认情况下、从应用程序到负载平衡器以及从负载平衡器到存储节点的所有流量都会通过HTTPS进行加密。HTTP是一个受支持的选项。</block>
  <block id="d24d04f6bb41a4779a65a52fbb1b6dd6" category="section-title">本地和全局负载平衡器</block>
  <block id="7929df38aedb7ea6e0c08ca19bba1388" category="paragraph">负载平衡器有两种类型：</block>
  <block id="ebb9b96ddb8b66c0457c63e673aaa46e" category="list-text">*本地交通管理系统(LTM)*。将连接分布在单个站点的一个节点池中。</block>
  <block id="4d736f50f71244acbc9879b3832aba87" category="list-text">*全局服务负载平衡器(GSLB)*。将连接分布在多个站点上、从而有效地对LTM负载平衡器进行负载平衡。可以将GSLB视为智能DNS服务器。当客户端请求StorageGRID端点URL时、GSLB会根据可用性或其他因素(例如、哪个站点可以为应用程序提供更低的延迟)将其解析为LTM的VIP。虽然LTM始终是必需的、但GSLB是可选的、具体取决于StorageGRID站点数量和应用程序要求。</block>
  <block id="6e5719150c17b7187b56efe10910488a" category="section-title">StorageGRID网关节点负载平衡器与第三方负载平衡器</block>
  <block id="985cddaf031056a0e7f9c7846573f5a5" category="paragraph">在与S3兼容的对象存储供应商中、StorageGRID是独一无二的、因为它提供了一个本机负载平衡器、可用作专用设备、VM或容器。StorageGRID提供的负载平衡器也称为网关节点。</block>
  <block id="d7fedc6af143d4726f5c7ad4e510dd9d" category="paragraph">对于尚未拥有F5、Citrix等负载平衡器的客户、实施第三方负载平衡器可能非常复杂。StorageGRID负载平衡器可显著简化负载平衡器操作。</block>
  <block id="237e90320edbf098bc62e0161517b6da" category="paragraph">网关节点是一种高可用性、高性能的企业级负载平衡器。客户可以选择在同一网格中实施网关节点、第三方负载平衡器甚至两者。网关节点是本地流量管理器、而不是GSLB。</block>
  <block id="36685bb356ea7da456ace20502e454bb" category="paragraph">StorageGRID负载平衡器具有以下优势：</block>
  <block id="9bc8bba0abbc122de22d748ff08b19f6" category="list-text">*精简性*。自动配置资源池、运行状况检查、修补和维护、所有这些都由StorageGRID进行管理。</block>
  <block id="5de0527bb678c4839b7a7514acd707e1" category="list-text">*性能*。StorageGRID负载平衡器专用于StorageGRID、您不会与其他应用程序争用带宽。</block>
  <block id="692af6e70011627635f367e5950c9f9b" category="list-text">*成本*。虚拟机(VM)和容器版本免费提供。</block>
  <block id="9c3101f6b24804233b40ae6450fa1503" category="list-text">*交通分类*。高级流量分类功能支持StorageGRID专用的QoS规则以及工作负载分析。</block>
  <block id="38c8ceefadaf4e89ae919f5a807ea085" category="list-text">*未来的StorageGRID特定功能*。在即将发布的版本中、StorageGRID将继续优化负载平衡器并为其添加创新功能。</block>
  <block id="7302dd9b1eb0aec4bf1250e7f29bf191" category="paragraph">有关部署StorageGRID网关节点的详细信息，请参见<block ref="babf3072d9403ab5e1ffb9e4bb9a27cb" category="inline-link-rx"></block>。</block>
  <block id="84005d607f0a93e852033c0b519062be" category="list-text">StorageGRID F5负载平衡器设计注意事项 <block ref="d95e85e5d4376a35e480ee8024e749b5" category="inline-link-rx"></block></block>
  <block id="5846f1f21b96d1c9adc26d24e614abde" category="list-text">Loadbalancer.org—Load平衡NetApp StorageGRID <block ref="dd7f3d493284188c8c1493c8c18338b0" category="inline-link-rx"></block></block>
  <block id="af8fdca32c51642ca8690dcf5f1416f5" category="list-text">KEMP—负载平衡NetApp StorageGRID <block ref="fb965c799555a65bc346633ea438a59b" category="inline-link-rx"></block></block>
  <block id="c8516ee2c182bb804cdaf1cef683a7c5" category="summary">浏览有关本地流量管理器负载平衡器的指导、并确定最佳配置。</block>
  <block id="5cb57a8e98262e7f15746e1841dbbae5" category="doc">了解本地流量管理器负载平衡器</block>
  <block id="d8a97edac0dc83276ee1f6b51c7e6807" category="paragraph">下面介绍了配置第三方负载平衡器的一般指导。与负载平衡器管理员一起确定适合您环境的最佳配置。</block>
  <block id="0953ff2a02bf56fd006a43f9b371bf3a" category="section-title">创建存储节点的资源组</block>
  <block id="d5d3fac451b37a0efe3d4ff345fdf2af" category="paragraph">将StorageGRID存储节点分组到资源池或服务组中(术语可能因特定负载平衡器而异)。StorageGRID存储节点会在以下端口上提供S3 API：</block>
  <block id="1da429ce7afc680b03de98de9cd43757" category="list-text">S3 HTTPS：18082</block>
  <block id="2fd8946bb1879d9df03f27cc4efde186" category="list-text">S3 HTTP：18084</block>
  <block id="72b9d3dd7ddc37e412bb8e4c9d1834df" category="paragraph">大多数客户选择通过标准HTTPS和HTTP端口(443和80)在虚拟服务器上提供API。</block>
  <block id="f96949b535b1fd2ee5eb12ac3e290226" category="admonition">每个StorageGRID站点默认需要三个存储节点、其中两个节点必须运行状况良好。</block>
  <block id="327e0eb0a2fbc6bd06b0d709850dd5d1" category="section-title">运行状况检查</block>
  <block id="f616bf082e1c35a92080ad8a5ff48cbe" category="paragraph">第三方负载平衡器需要一种方法来确定每个节点的运行状况及其接收流量的资格。NetApp建议使用HTTP<block ref="164dd62adb30ca051b5289672a572f9b" prefix=" " category="inline-code"></block> 方法执行运行状况检查。负载平衡器会向每个存储节点发出HTTP<block ref="164dd62adb30ca051b5289672a572f9b" prefix=" " category="inline-code"></block> 请求、并需要<block ref="3644a684f98ea8fe223c713b77189a77" prefix=" " category="inline-code"></block> 状态响应。</block>
  <block id="1309129181bc088d6d4efafa6bc2459d" category="paragraph">如果任何存储节点未提供<block ref="3644a684f98ea8fe223c713b77189a77" prefix=" " category="inline-code"></block> 响应、则该节点将无法处理存储请求。您的应用程序和业务要求应确定这些检查的超时时间以及负载平衡器所执行的操作。</block>
  <block id="30337b2a9652b78efd47d8fdfabc94dc" category="paragraph">例如、如果数据中心1中的四个存储节点中有三个已关闭、您可以将所有流量定向到数据中心2。</block>
  <block id="14259d0853f5bc991cccbd611ac804a4" category="paragraph">建议的轮询间隔为每秒一次、在三次检查失败后将节点标记为脱机。</block>
  <block id="857c943885e7f0f60957c2c221b0e2d6" category="section-title">S3运行状况检查示例</block>
  <block id="ebefb6168a42a33ed09d5fc28e45c30d" category="paragraph">在以下示例中，我们会发送<block ref="164dd62adb30ca051b5289672a572f9b" prefix=" " category="inline-code"></block> 并检查<block ref="3c3f2943d4337318cf737f45d5b564cd" prefix=" " category="inline-code"></block>。我们使用<block ref="164dd62adb30ca051b5289672a572f9b" prefix=" " category="inline-code"></block> 、因为Amazon S3)不支持未经授权的请求。</block>
  <block id="944e650545f586c2533698f54ae046e4" category="section-title">基于文件或内容的运行状况检查</block>
  <block id="8d74fb21e11e609ac1408447dcf42911" category="paragraph">通常、NetApp不建议执行基于文件的运行状况检查。例如，通常在具有只读策略的存储分段中创建一个小文件 <block ref="f7c59f9a077a48a22df9b4a5c860de80" prefix="—" category="inline-code"></block>。然后、负载平衡器会提取并评估此文件。这种方法有几个缺点：</block>
  <block id="6e08d9e43b67aeb9663b45d8cf895ecc" category="list-text">*取决于单个帐户。*如果禁用了拥有该文件的帐户、则运行状况检查将失败、并且不会处理任何存储请求。</block>
  <block id="30fdf01ddc135514f5f090d7f79cd1d6" category="list-text">*数据保护规则。*默认数据保护方案采用双副本方法。在这种情况下、如果托管运行状况检查文件的两个存储节点不可用、则运行状况检查将失败、并且存储请求不会发送到运行状况良好的存储节点、从而使网格脱机。</block>
  <block id="af772eef8069ad2b5877b4187c2a0a03" category="list-text">*审核日志膨胀。*负载平衡器每X分钟从每个存储节点提取一次文件、从而创建许多审核日志条目。</block>
  <block id="b95466f89b6c9d28afd5ab1a42d0b63f" category="list-text">*资源密集型。*每隔几秒钟从每个节点提取运行状况检查文件会占用网格和网络资源。</block>
  <block id="302356df7844b71c527033f2c351c2f5" category="paragraph">如果需要执行基于内容的运行状况检查、请使用具有专用S3存储分段的专用租户。</block>
  <block id="4b447f7f6bb5fd884f8399908b64502a" category="section-title">会话持久性</block>
  <block id="d570e08156a1a75c83a0373836d9ecea" category="paragraph">会话持久性(即、保持性)是指允许给定HTTP会话持续的时间。默认情况下、存储节点会在10分钟后丢弃会话。持久性越长、性能越好、因为应用程序不必为每个操作重新建立会话；但是、保持这些会话处于打开状态会占用资源。如果您确定工作负载将受益、则可以减少第三方负载平衡器上的会话持久性。</block>
  <block id="b5241d8b4b26299e8408f118c96613fd" category="section-title">虚拟托管模式寻址</block>
  <block id="f7f1495ae157a19526e43b7ca9a78cfd" category="paragraph">现在、虚拟托管模式已成为AWS S3的默认方法、虽然StorageGRID和许多应用程序仍支持路径模式、但最佳做法是实施虚拟托管模式支持。虚拟托管模式请求的主机名包含分段。</block>
  <block id="f8e10d294bca3db5877bb05838f21c7c" category="paragraph">要支持虚拟托管模式、请执行以下操作：</block>
  <block id="db9f2738a572be271325c13d85d29eba" category="list-text">支持通配符DNS查找：*。.s3.company.com</block>
  <block id="98d80b620ac6c8a6c571a93b081c2303" category="list-text">使用带有主题可选名称的SSL证书支持通配符：*。.s3.company.com一些客户已经表达了有关使用通配符证书的安全问题。StorageGRID继续支持路径模式访问、FabricPool等关键应用程序也是如此。也就是说、如果没有虚拟托管支持、某些S3 API调用会失败或行为不正确。</block>
  <block id="d9a94fedb0d33e7dcf8c150a123252ed" category="section-title">SSL终止</block>
  <block id="1de64f0562630d746156fa7eeeb16186" category="paragraph">第三方负载平衡器上的SSL终止具有安全优势。如果负载平衡器受损、网格将被分割。</block>
  <block id="4ed24736a515100c8d6950f6ff3ed62f" category="paragraph">支持三种配置：</block>
  <block id="d6e4c3b29ae0c77be00db314da9e1331" category="list-text">*SSL传递。*SSL证书作为自定义服务器证书安装在StorageGRID上。</block>
  <block id="b116ed212c0ba853803f9e6088a72995" category="list-text">*SSL终止和重新加密(建议)。*如果您已经在负载平衡器上执行SSL证书管理、而不是在StorageGRID上安装SSL证书、则这可能会很有用。此配置还具有将攻击面限制在负载平衡器上的其他安全优势。</block>
  <block id="36a514a78b88994ea1264f5b091f3e77" category="list-text">*使用HTTP终止SSL。*在此配置中、SSL将在第三方负载平衡器上终止、负载平衡器与StorageGRID之间的通信将不进行加密、以利用SSL卸载功能(由于SSL库嵌入在现代处理器中、因此优势有限)。</block>
  <block id="b0ce6d41556d237705f880fb1cbc58e2" category="section-title">直通配置</block>
  <block id="c666f44b35b6f5bae6eb186d8a5f50cd" category="paragraph">如果您要为负载平衡器配置直通、则必须在StorageGRID上安装证书。转到菜单：配置[服务器证书&gt;对象存储API服务端点服务器证书]。</block>
  <block id="00b3073e4bde9143ed448a64de50fe0d" category="section-title">源客户端IP可见性</block>
  <block id="da94e46e17307ba49c38eddee784cb7f" category="inline-link">如何配置StorageGRID以使用第三方第7层负载平衡器。</block>
  <block id="6486655584a024f5a235e284c4cad86c" category="paragraph">StorageGRID 11.4引入了可信第三方负载平衡器的概念。要将客户端应用程序IP转发到StorageGRID、必须配置此功能。有关详细信息、请参见 <block ref="32acef5d2ab544fec627bc88853f8c78" category="inline-link-rx"></block></block>
  <block id="c0400e41ca55c346979620ec8e555156" category="paragraph">要启用XFF标头以查看客户端应用程序的IP、请执行以下步骤：</block>
  <block id="4fa0b415b79ede3b9e2b64dd5517c3bc" category="list-text">在审核日志中记录客户端IP。</block>
  <block id="1459641ad60f57ac22b593639cdbd6a7" category="list-text">使用<block ref="24d92e955dfcd833caf78794ad6c4b4b" prefix=" " category="inline-code"></block> S3存储分段或组策略。</block>
  <block id="8d9e209680fe6291e6e0093cc70c1d8d" category="section-title">负载平衡策略</block>
  <block id="82c813398ff8179fe57ed6f84185788e" category="paragraph">大多数负载平衡解决方案都提供多种负载平衡策略。以下是常见策略：</block>
  <block id="a36c5a01c6f56865d8d943d708a8a079" category="list-text">*循环*通用配置、但节点较少且传输量较大、从而使单个节点堵塞。</block>
  <block id="5eac1fa5d7d3794b7df31fa40fb64b0c" category="list-text">*最少连接。*非常适合小型对象工作负载和混合对象工作负载、从而使连接平等分布到所有节点。</block>
  <block id="e16f59112984a5105de82065c78eb39e" category="paragraph">随着可供选择的存储节点数量不断增加、算法的选择就不再那么重要了。</block>
  <block id="58aeb1821a5a54ad4f38db0809197926" category="section-title">数据路径</block>
  <block id="53664b9c2e935bd322645067435c564d" category="paragraph">所有数据流经本地流量管理器负载平衡器。StorageGRID不支持直接服务器路由(DSR)。</block>
  <block id="5925ef6606510afb41d51d1fb0afc45b" category="section-title">验证连接分布</block>
  <block id="2a96b8364aea60ce0e324422c2ac6b92" category="paragraph">要验证您的方法是否在存储节点之间均匀分布负载、请检查给定站点中每个节点上已建立的会话：</block>
  <block id="f1f12929a6298f4153ad32e9eb434de6" category="list-text">*用户界面方法。*转到菜单：Support[Metrics &gt; S3 Overview &gt; LDR HTTP S语]</block>
  <block id="53a6d2eb05162bd509099a7097d7cc0f" category="list-text">*Metrics API.*使用<block ref="50ffff513c166e8d2dd4800339157da9" prefix=" " category="inline-code"></block></block>
  <block id="25df6dbb9f782398d628902e353a6290" category="summary">了解在StorageGRID中实施SSL证书的重要性和步骤。</block>
  <block id="c987ff2e46c0fe0315a334a6e7d16a45" category="doc">了解如何在StorageGRID中为HTTPS实施SSL证书</block>
  <block id="26d477d6a3ca9e01b2839b4b5460b686" category="paragraph">如果您使用的是HTTPS、则必须具有安全套接字层(SSL)证书。SSL协议可识别客户端和端点、并验证它们是否可信。SSL还可对流量进行加密。客户端必须信任SSL证书。为此、SSL证书可以来自全局受信任的证书颁发机构(CA)、例如、数码证书、在基础架构中运行的私有CA或主机生成的自签名证书。</block>
  <block id="afe23f7f1e2db42e42b9827fa945ca33" category="paragraph">首选方法是使用全局受信任的CA证书、因为无需执行其他客户端操作。证书将加载到负载平衡器或StorageGRID中、客户端信任并连接到端点。</block>
  <block id="c9c63c7d8960b36b40cd611a70f57eaa" category="paragraph">使用私有CA要求将根证书和所有从属证书添加到客户端。信任专用CA证书的过程可能因客户端操作系统和应用程序而异。例如、在ONTAP for FabricPool中、您必须单独将链中的每个证书(根证书、从属证书、端点证书)上传到ONTAP集群。</block>
  <block id="f99f5ec7c8468db8426b435e16ded574" category="paragraph">使用自签名证书要求客户端信任提供的证书、而不使用任何CA来验证其真实性。某些应用程序可能不接受自签名证书、并且无法忽略验证。</block>
  <block id="38a5b90f9a7bf320916ff566cf67a564" category="paragraph">SSL证书在客户端负载平衡器StorageGRID路径中的放置取决于您需要SSL终止的位置。您可以将负载平衡器配置为客户端的终止端点、然后使用新的SSL证书对负载平衡器与StorageGRID的连接进行重新加密或热加密。或者、您也可以通过此流量并让StorageGRID成为SSL终止端点。如果负载平衡器是SSL终止端点、则此证书将安装在负载平衡器上、并包含DNS名称/URL的使用者名称以及客户端配置为通过负载平衡器连接到StorageGRID目标的任何备用URL/DNS名称。 包括任何通配符名称。如果为负载平衡器配置了直通、则必须在StorageGRID中安装SSL证书。同样、证书必须包含DNS名称/URL的使用者名称、以及客户端配置为通过负载平衡器连接到StorageGRID目标的任何备用URL/DNS名称、包括任何通配符名称。证书中无需包含单个存储节点名称、只需包含端点URL即可。</block>
  <block id="16bb68daba73384a82c256705fe23940" category="inline-image-macro">StorageGRID中加载的证书示例</block>
  <block id="a04db2c21d01462f1cae1d4b38f98d8d" category="summary">了解如何在StorageGRID中配置受信任的第三方负载平衡器。</block>
  <block id="2c7c333a0f0c1ab6f715438b601fd166" category="doc">在StorageGRID中配置受信任的第三方负载平衡器</block>
  <block id="c6bbdb189be1d0f0a2fa1a1499673e59" category="inline-link">如何配置StorageGRID以使用第三方第7层负载平衡器</block>
  <block id="aba026bf015b573afdc24d49b090b44a" category="paragraph">如果使用的是一个或多个外部第7层负载平衡器以及基于IP的S3分段或组策略、则StorageGRID必须确定实际发送方的IP地址。它通过查看负载平衡器插入到请求中的X-Forwarded-for (XFF)标头来执行此操作。由于在直接发送到存储节点的请求中、XFF标头很容易受到保护、因此StorageGRID必须确认每个请求都由可信的第7层负载平衡器路由。如果StorageGRID无法信任请求源、则会忽略XFF标头。有一个网格管理API允许配置受信任的外部第7层负载平衡器列表。此新API为专用API、未来的StorageGRID版本可能会有所更改。有关最新信息，请参见知识库文章<block ref="7ce3cc811407230a3b69ca449290d572" category="inline-link-rx"></block>。</block>
  <block id="809fea3850e388a22c3b797ab2dfa619" category="summary">了解如何在StorageGRID中验证SSL连接。</block>
  <block id="d2df1b921459d014b27414ae6e72f3ee" category="doc">验证StorageGRID中的SSL连接</block>
  <block id="a8d9f8b6913236d31d5914fba558b66d" category="paragraph">配置负载平衡器后、您应使用OpenSSL和AWS命令行界面等工具验证连接。S3浏览器等其他应用程序可能会忽略SSL配置不当。</block>
  <block id="668e52d3e720e48e2f9f1ea3fa20d2ad" category="summary">了解如何在NetApp StorageGRID中使用CURL和授权令牌通过命令行界面访问指标、以便高效检索数据。</block>
  <block id="7eb79121551f1e3005513aa949a80511" category="doc">在StorageGRID中使用CURL访问指标</block>
  <block id="aa512d6acafe8a51fe84289eaf3a41cb" category="paragraph">了解如何使用CURL通过命令行界面访问指标。</block>
  <block id="24f5aae2ddab353694b1206be3e4889b" category="paragraph">要执行此操作、您必须先获取授权令牌。要请求令牌、请执行以下步骤：</block>
  <block id="26cc51752576fff1f28165235ec5a4a3" category="list-text">从GMI中、选择菜单：帮助[API文档]。</block>
  <block id="582d423c7a52fa2fe26a0d9a1509065f" category="list-text">向下滚动到身份验证以查找授权操作。以下屏幕截图显示了POST方法的参数。</block>
  <block id="732b4622672af9b45ee02ccc42e301ac" category="inline-image-macro">monitor-post-方法</block>
  <block id="aa72021339b76cb303ef4aaaa760841d" category="list-text">单击试用并使用您的GMI用户名和密码编辑正文。</block>
  <block id="e3ee8218b1f6b4812ec9cd6f6f55e5bc" category="list-text">单击“执行”。</block>
  <block id="3b4593aa2662753fd8b1b1e2c2138bc6" category="list-text">复制在卷曲部分中提供的卷曲命令、并将其粘贴到终端窗口中。此命令如下所示：</block>
  <block id="a2050b63d73bc4aa8080dc5a78e9df9e" category="admonition">如果您的GMI密码包含特殊字符、请记得使用\转义特殊字符。例如，替换! 使用\!</block>
  <block id="d0091ffabd8a5951ade89029dee45269" category="list-text">运行上述URL命令后、输出将为您提供一个授权令牌、如下例所示：</block>
  <block id="c4c0bac50c4fd5e17677cabb1fe78a5b" category="inline-link-macro">StorageGRID中的高级监控</block>
  <block id="a6b1960b13e563d852f0a623a6a4b50e" category="paragraph">现在、您可以使用授权令牌字符串通过CURL访问指标。访问度量指标的过程与第节中的步骤类似 <block ref="e252bc019813f3e66a7ae7f9c0ce4e99" category="inline-link-macro-rx"></block>。但是、出于演示目的、我们显示了一个示例、其中在"指标"类别中选择了GET /grid /metric-labels/｛label"｝/values。</block>
  <block id="cdc100e5f716cb082e925903180eaafe" category="list-text">例如、以下带有上述授权令牌的URL命令将在StorageGRID中列出站点名称。</block>
  <block id="6100a428d2b7ee39cb431e0e5ea5306f" category="paragraph">Curl命令将生成以下输出：</block>
  <block id="5204e8903c6bcc04b3dd578223392ce0" category="summary">了解如何使用指标API监控StorageGRID。</block>
  <block id="878fa4b98d38eb1c08345ff577008ec4" category="paragraph">了解如何访问和导出指标以帮助解决问题。</block>
  <block id="d78cb05ef4141e30f21311d8a0ad4d7c" category="section-title">通过Prometheus查询查看指标API</block>
  <block id="5777f62f583151ef7c49b156e0aef90f" category="paragraph">Prometheus是一款用于收集指标的开源软件。要通过GMI访问StorageGRID的嵌入式ProMetheus、请转到菜单：Support[Metrics ]。</block>
  <block id="0bea5c98ba2eef48d7bd8a847691d237" category="inline-image-macro">monitor-metrics-page</block>
  <block id="cf4b35655f5bc5daf680006f1b1ce15e" category="paragraph">或者、您也可以直接导航到该链接。</block>
  <block id="833bcd82b8ef62520e5be8f2701347ac" category="inline-image-macro">Monitor-Prometheus-interface</block>
  <block id="c7f89929fc543735065ba8d00b6e18c3" category="paragraph">通过此视图、您可以访问Prometheus界面。您可以从此处搜索可用指标、甚至可以尝试查询。</block>
  <block id="f0f563ade1da817bd8a439292d0e8d3c" category="paragraph">要进行Prometheus URL查询、请按照以下步骤操作：</block>
  <block id="164f408beb950c8617e791861fda776a" category="list-text">在查询文本框中开始键入。键入时、将列出指标。对于我们而言、只有以StorageGRID和Node开头的指标才很重要。</block>
  <block id="053386f0d5445d6121c8baab8583296f" category="list-text">要查看每个节点的HTTP会话数，请键入<block ref="81395af7a720741ca394c882a197c66b" prefix=" " category="inline-code"></block> ，然后选择<block ref="50ffff513c166e8d2dd4800339157da9" prefix=" " category="inline-code"></block>。单击Execute、并以图形或控制台格式显示信息。</block>
  <block id="23575e1dc3cfb15deb18275e322e553c" category="inline-image-macro">monitor-http-sesps</block>
  <block id="007cc7fa2832e8f022af5678d4379431" category="admonition">通过此URL构建的查询和图表不会持久保留。复杂查询会占用管理节点上的资源。NetApp建议您使用此视图来浏览可用指标。</block>
  <block id="114d8b9251665a84a3c3949c46b6b3a1" category="admonition">建议不要直接连接到Prometheus实例、因为这需要打开其他端口。建议使用安全的方法通过API访问指标。</block>
  <block id="7d70779a6347af3f7b93052d4e5bd3f0" category="section-title">通过API导出指标</block>
  <block id="f4f39f3b6524de963876bde3e46f650a" category="paragraph">您还可以通过StorageGRID管理API访问相同的数据。</block>
  <block id="e161a976d6ab825ed87cd37d3e7f790b" category="paragraph">要通过API导出指标、请执行以下步骤：</block>
  <block id="1e5da00c579a9d593a4dc8fdeebbf0ae" category="list-text">向下滚动到Metrics、然后选择GET /grid / metric-query-。</block>
  <block id="ffe2d973e52165efa20480acbec18814" category="inline-image-macro">monitor-metrics-Query</block>
  <block id="b6f0f95818bbc67704d1047ffb6d723f" category="paragraph">此响应包含可通过Prometheus URL查询获取的相同信息。您可以再次查看当前在每个存储节点上建立的HTTP会话的数量。您还可以下载JSON格式的响应以供阅读。下图显示了Prometheus查询响应示例。</block>
  <block id="a0508d80e9851dbd1352c1dbe4cac298" category="inline-image-macro">monitor-sSample—Prometheus-query-responses</block>
  <block id="8b406d1ef5b4e8a5bdd44a92dfd742db" category="admonition">使用API的优势在于、它可以执行经过身份验证的查询</block>
  <block id="14624ae0105638df9429a5c0a3b15261" category="summary">了解如何使用StorageGRID中的警报系统监控问题、管理自定义警报以及通过SNMP或电子邮件延长警报通知。</block>
  <block id="2e75e86d5ab1f43204d531b899ed8692" category="doc">使用警报监控StorageGRID</block>
  <block id="86b6821a8140c3a123e4da536fc2d434" category="paragraph">了解如何使用StorageGRID中的警报系统监控问题、管理自定义警报以及使用SNMP或电子邮件扩展警报通知。</block>
  <block id="46a52e7d5776f0aa7882af2f177a9ec3" category="paragraph">警报提供了重要信息、可用于监控StorageGRID系统中的各种事件和状况。</block>
  <block id="da96e8b1e5121f0b4f9ecd27598c5664" category="paragraph">警报系统是用于监控StorageGRID系统中可能发生的任何问题的主要工具。警报系统侧重于系统中可操作的问题、并提供一个易于使用的界面。</block>
  <block id="f5adcd28854de4372b5a783ff6ba8e13" category="paragraph">我们提供了各种默认警报规则、旨在帮助您监控系统并对其进行故障排除。您可以通过创建自定义警报、编辑或禁用默认警报以及静音警报通知来进一步管理警报。</block>
  <block id="8d368b940b80393acec92024695dfea6" category="paragraph">警报也可通过SNMP或电子邮件通知进行扩展。</block>
  <block id="c8e7df2a2380c318fe11cb3712f83906" category="paragraph">有关警报的详细信息、请参见在线提供的PDF格式的<block ref="63d022ce0a9d09ca6b2f8a1572ff8d9a" category="inline-link-rx"></block> 。</block>
  <block id="8f3f7af47397a0f4e4e9024290b90272" category="summary">了解如何使用StorageGRID审核日志详细了解租户和网格活动、以及如何利用Splunk等工具进行日志分析。</block>
  <block id="e9139dba94839b12cdf1426ab7ae209a" category="doc">使用审核日志监控StorageGRID</block>
  <block id="318d17ce8f6159e7929a8c9312dac57e" category="paragraph">了解如何使用StorageGRID审核日志详细了解租户和网格活动、以及如何利用Splunk等工具进行日志分析。</block>
  <block id="579fbddbda80cf085b53241b07c71853" category="paragraph">通过StorageGRID审核日志、您可以收集有关租户和网格活动的详细信息。可以通过NFS公开审核日志以供分析。有关如何导出审核日志的详细说明，请参阅《管理员指南》。</block>
  <block id="11168d7973493bbd0624e5ae6fc9529a" category="paragraph">导出审核后、您可以使用Splunk或Logstash + ElashSearch等日志分析工具了解租户活动或创建详细的计费和成本分摊报告。</block>
  <block id="f553cd67933721b76f9ccab00ac4a892" category="inline-link">审核消息</block>
  <block id="bef3821fd4c3cdb3b1f511cae1c0502f" category="paragraph">有关审核消息的详细信息、请参见StorageGRID文档。请参阅。<block ref="79d0e733fb384d792eb7077ddcd7a09e" category="inline-link-rx"></block></block>
  <block id="31f5a51bea763eab7f0c7cb206d000af" category="summary">使用GMI信息板开始监控NetApp StorageGRID、简要概述网格及其核心组件。</block>
  <block id="1a1efc70f6fd2e0a0d5f78f987a7b225" category="doc">使用GMI信息板监控StorageGRID</block>
  <block id="39b81327c86d279ca5a4de77b6a927a7" category="paragraph">StorageGRID网格管理界面(GMI)信息板提供了StorageGRID基础架构的集中视图、可用于监控整个网格的运行状况、性能和容量。</block>
  <block id="59eb9298b03ce6ca974397e8e2898877" category="paragraph">使用GMI信息板检查网格的每个核心组件。</block>
  <block id="e10bb47bce8369170055e6153c06dd7b" category="inline-image-macro">monitor-storagegrid—GMI-Dashboard</block>
  <block id="e84df7ca41541e6bf514f7b1469d1fc9" category="section-title">您应定期监控的信息</block>
  <block id="a936f4db17b50337c719059ebf9bd705" category="inline-link">监控和故障排除指南</block>
  <block id="38118fa7d20262a8aee8b9506304a278" category="paragraph">本技术报告的上一版本列出了要定期检查的指标与趋势。该信息现在包含在中<block ref="9cfbf35549c931909cca159205c8231f" category="inline-link-rx"></block>。</block>
  <block id="397ff519378919ad01f5ff6493abc78d" category="section-title">监控存储</block>
  <block id="d3a62c045e68aeaf1e92ed0e727d6b36" category="paragraph">本技术报告的先前版本列出了监控重要指标的位置、例如对象存储空间、元数据空间、网络资源等。该信息现在包含在中<block ref="9cfbf35549c931909cca159205c8231f" category="inline-link-rx"></block>。</block>
  <block id="fc83432423f389dfeb4486d21dfba0e3" category="summary">了解如何在NetApp StorageGRID中使用Grafana实现指标可视化、包括访问预构建的信息板进行监控和故障排除。</block>
  <block id="1072efb14859f3ef534685b2fc04356b" category="doc">使用StorageGRID中的Grafana信息板查看指标</block>
  <block id="741125291f423eed65b9a02a21f9b48a" category="paragraph">了解如何使用Grafana界面可视化和监控StorageGRID数据。</block>
  <block id="3931760e45121760ff7b13e1c2e9ee24" category="paragraph">Grafana是一款用于度量可视化的开源软件。默认情况下、我们预先构建了信息板、可提供有关StorageGRID系统的有用而强大的信息。</block>
  <block id="cb49c0279f62347065a9ead80bc2a741" category="paragraph">这些预先构建的信息板不仅可用于监控、还可用于对问题进行故障排除。有些供技术支持使用。例如、要查看存储节点的指标、请执行以下步骤。</block>
  <block id="598dcdb07778ee7be35cb70f33132df4" category="list-text">在GMI中、菜单：Support[Metrics ]。</block>
  <block id="8dc71bbaf46676b033897ad3ee641092" category="list-text">在Grafana部分下、选择Node信息板。</block>
  <block id="6f03fa78a12197917356dfcd4afbd9ab" category="inline-image-macro">monitor-node信息板</block>
  <block id="fcd3fcf32cd8b9433cdf7272580e9eb2" category="list-text">在Grafana中、将主机设置为要查看指标的任何节点。在这种情况下、将选择一个存储节点。提供的信息比以下屏幕截图所示的信息要多。</block>
  <block id="6f9b566bf84106070754272dc0b149dc" category="inline-image-macro">monitor-grafana指标</block>
  <block id="ca268a6974bf87ebc32af9f071cc48cb" category="summary">深入了解NetApp StorageGRID、其错误条件以及如何使用Splunk等外部应用程序有效监控它。</block>
  <block id="a0c0cdc4f328b27bd17c7ba7acb3b816" category="doc">StorageGRID监控简介</block>
  <block id="ee525877dfb65d89a979b93b5bf5836f" category="paragraph">了解如何使用外部应用程序(例如Splunk)监控StorageGRID系统。</block>
  <block id="e48b9c153423cfa1671419b36f322597" category="paragraph">通过有效监控NetApp StorageGRID基于对象的存储、管理员可以快速响应紧急问题、并主动添加资源来处理不断增长的工作负载。本报告提供了有关如何监控关键指标以及如何利用外部监控应用程序的一般性指导。本文档旨在补充现有的"监控和故障排除"指南。</block>
  <block id="ac772831aac5287b38325bb5a1d92383" category="paragraph">NetApp StorageGRID部署通常由多个站点和多个节点组成、这些站点和节点用于创建分布式容错对象存储系统。在StorageGRID等分布式弹性存储系统中、出现错误情况是正常的、而网格仍正常运行。作为管理员、您面临的挑战是、了解错误条件(例如节点关闭)出现问题时应立即解决的阈值、以及应分析的信息。通过分析StorageGRID提供的数据、您可以了解自己的工作负载并做出明智的决策、例如何时添加更多资源。</block>
  <block id="1f64141901489e1aee1cff91cf4ba60c" category="paragraph">StorageGRID提供了深入探讨监控主题的出色文档。本报告假设您熟悉StorageGRID、并且已阅读有关它的文档。我们不会重复这些信息、而是参阅本指南中的产品文档。StorageGRID产品文档以PDF格式在线提供。</block>
  <block id="7982a7b57d5440ac99532630181000d5" category="paragraph">本文档旨在对产品文档进行补充、并讨论如何使用外部应用程序(例如Splunk)监控StorageGRID系统。</block>
  <block id="d1107e5839e1db0f331201116234fc6d" category="section-title">数据源</block>
  <block id="86881ac89f4fffdb5b47f5f21ee4e81b" category="paragraph">要成功监控NetApp StorageGRID、请务必了解从何处收集有关StorageGRID系统运行状况和操作的数据。</block>
  <block id="9d8365fd1a5e73f5dda75b47d0c39019" category="list-text">*Web UI和信息板。*StorageGRID网格管理器提供了一个顶级视图、可显示管理员在逻辑演示文稿中需要查看的信息。作为管理员、您还可以深入了解服务级别信息、以便进行故障排除和收集日志。</block>
  <block id="ad4fe8515196f4b996458ea2d3e76025" category="list-text">*审核日志。*StorageGRID会保留有关放置、获取和删除等租户操作的精细审核日志。您还可以跟踪对象从数据管理规则的加热到应用的整个生命周期。</block>
  <block id="130db5b54e5cf2479bd883be21a31cef" category="list-text">*Metrics API.*StorageGRID GMI的底层是开放式API、因为UI是API驱动的。通过这种方法、您可以使用外部监控和分析工具提取数据。</block>
  <block id="60bdd67b75f07dde5258c5206655c465" category="list-text">适用于Splunk的NetApp StorageGRID应用程序 <block ref="0d95a78a88fa8d96d947b6305a27d13a" category="inline-link-rx"></block></block>
  <block id="a132518a088435a24e855ec1f6dce02a" category="summary">了解适用于Splunk的NetApp StorageGRID应用程序、该应用程序可从StorageGRID导入和丰富数据、并提供强大的搜索和分析功能。</block>
  <block id="4fc8dfff282c98107b486a03ba8fc2e6" category="doc">使用适用于Splunk的StorageGRID应用程序</block>
  <block id="9619f1b60561ca2194f45765711107fe" category="paragraph">了解适用于Splunk的NetApp StorageGRID应用程序、该应用程序允许您在Splunk平台中监控和分析StorageGRID环境。</block>
  <block id="7af103cdaa9cc3f91fa8b96e99ccf811" category="paragraph">Splunk是一个软件平台、用于导入计算机数据并为其编制索引、以提供强大的搜索和分析功能。NetApp StorageGRID应用程序是适用于Splunk的附加软件、用于导入和丰富从StorageGRID利用的数据。</block>
  <block id="2852851a403e844956bb4c52551c2703" category="paragraph">有关如何安装、升级和配置StorageGRID加载项的说明、请参见：<block ref="e0c796f34df445d3b49ee787aa5586d3" category="inline-link-rx"></block></block>
  <block id="2e94a477efe02c34bac4f12e2fb601f9" category="summary">了解如何在StorageGRID 11.4中设置和监控流量分类策略、以实现高效的流量管理和网络带宽优化。</block>
  <block id="c52660cfce0be7ba160d637b65b97317" category="doc">在StorageGRID中使用流量分类策略</block>
  <block id="afa2c3ef109418519c4a5c27a826be50" category="paragraph">了解如何设置和配置流量分类策略、以管理和优化StorageGRID中的网络流量。</block>
  <block id="b7d6fd77b9044510fed0d36a2b6bc166" category="paragraph">流量分类策略提供了一种根据特定租户、分段、IP子网或负载平衡器端点监控和/或限制流量的方法。网络连接和带宽是StorageGRID的特别重要的衡量指标。</block>
  <block id="df4fe1b471bcd8a12e037d89e7a98172" category="paragraph">要配置流量分类策略、请执行以下步骤：</block>
  <block id="38ce066577bda9af2221e4085ecc61b4" category="list-text">在GMI上、导航到菜单：配置[系统设置&gt;交通分类]。</block>
  <block id="1c22793d32081864b48f6d5da3630499" category="list-text">单击创建+</block>
  <block id="29c37d543374c10557413e6541903743" category="list-text">输入策略的名称和说明。</block>
  <block id="bb1373c782eeaa4a75814ecc4d060720" category="list-text">创建匹配规则。</block>
  <block id="d1f77d643e48713d15284108e2d2892d" category="inline-image-macro">monitor-匹 配规则</block>
  <block id="8a9e39209ee3ce8078d159a32779c53f" category="list-text">设置限制(可选)。</block>
  <block id="7912061336d88a40313f1f8ada5bfcc1" category="inline-image-macro">监视器限制</block>
  <block id="3b727c8c658892fe06eeaaf4bf43735f" category="list-text">保存策略</block>
  <block id="80d191ed333edf4462cdac0a5abcf6c0" category="inline-image-macro">monitor-Traffic策略</block>
  <block id="568bfe018800e0496038cca7115baecb" category="paragraph">要查看与您的流量分类策略关联的指标、请选择您的策略、然后单击指标。此时将生成Grafana信息板、其中显示负载平衡器请求流量和平均请求持续时间等信息。</block>
  <block id="ae911ae935b9eff49beadfdf25b5afe6" category="inline-image-macro">monitor-metric-showing—指标</block>
  <block id="4654119eb3a8fb68470adc28025fd4b3" category="summary">了解勒索软件攻击以及如何利用StorageGRID安全最佳实践保护数据。</block>
  <block id="73784bce4aa908b9919866212fd51853" category="doc">保护StorageGRID S3对象免遭勒索软件的攻击</block>
  <block id="f784ee965f00ba2af19faeea46ccbae6" category="paragraph">勒索软件攻击呈上升趋势。本文档就如何保护StorageGRID上的对象数据提供了一些建议。</block>
  <block id="bcd229d01aac228dbc2b27950e02ea91" category="paragraph">如今、勒索软件已成为数据中心面临的一个始终存在的威胁。勒索软件旨在对数据进行加密、使依赖该数据的用户和应用程序无法使用该数据。保护从强化网络和可靠用户安全实践的常规防御开始、我们需要遵循数据访问安全实践。</block>
  <block id="46a4cfb5088318360438846a3d0c0f4a" category="paragraph">勒索软件是当今最大的安全威胁之一。NetApp StorageGRID团队正在与我们的客户合作、以防范这些威胁。通过使用对象锁定和版本控制、您可以防止不必要的更改并从恶意攻击中恢复。数据安全是一项多层风险、您的对象存储只是数据中心的一部分。</block>
  <block id="dad105bf47838f7f255d1754fdaaac0d" category="section-title">StorageGRID最佳实践</block>
  <block id="7639d37e78d550fdbd6b7b7b123aec76" category="paragraph">对于StorageGRID、安全最佳实践应包括使用HTTPS和签名证书进行管理和对象访问。为应用程序和个人创建专用用户帐户、不要使用租户root帐户进行应用程序访问或用户数据访问。换言之、遵循最小特权原则。使用具有定义的身份和访问管理(IAM)策略的安全组来管理用户权限以及特定于应用程序和用户的访问帐户。实施这些措施后、您仍然必须确保数据受到保护。对于简单存储服务(S3)、在修改对象以对其进行加密时、可以通过覆盖原始对象来实现。</block>
  <block id="8b02df0d6350b8ab5f74dd9d85f45102" category="section-title">辩护方法</block>
  <block id="ffa205d96ea7d1648422fa1cf5e284be" category="paragraph">S3 API中的主要勒索软件保护机制是实施对象锁定。并非所有应用程序都与对象锁定兼容、因此本报告中介绍了另外两个保护对象的选项：复制到启用了版本控制的另一个存储分段以及使用IAM策略进行版本控制。</block>
  <block id="ed76a757e8880e5a565be3b003d83f36" category="summary">了解如何使用StorageGRID CloudMirror将对象复制到二级存储分段。</block>
  <block id="7140addf2e260dae673005b904fc64d8" category="doc">使用具有版本控制的复制存储分段进行勒索软件防护</block>
  <block id="a81ea98a29cd5048dff2c3835d4390a3" category="paragraph">并非所有应用程序和工作负载都能与对象锁定兼容。另一种方法是、将对象复制到同一网格中的二级存储分段(最好是访问受限的不同租户)、或者使用StorageGRID平台服务CloudMirror的任何其他S3端点。</block>
  <block id="cb1408a510a08465c011262c363f3ed1" category="paragraph">StorageGRID CloudMirror是StorageGRID的一个组件、可以配置为在将某个存储分段的对象移入源存储分段时将其复制到定义的目标、而不会复制删除。由于CloudMirror是StorageGRID的一个集成组件、因此不能关闭它、也不能被基于S3 API的攻击所操纵。您可以在启用版本控制的情况下配置此复制分段。在这种情况下、您需要对复制的存储分段的旧版本进行一些可安全丢弃的自动清理。为此、您可以使用StorageGRID ILM策略引擎。创建规则、根据非当前时间管理对象放置、持续数天、足以识别攻击并从攻击中恢复。</block>
  <block id="29dad7f198588ca155dd54b4b817d848" category="paragraph">这种方法的一个缺点是、它会通过保留存储分段的完整第二个副本以及多个版本的对象一段时间来消耗更多存储。此外、必须从复制的存储分段中手动删除主存储分段中特意删除的对象。产品之外还有其他复制选项、例如NetApp CloudSync、可以为类似的解决方案复制删除。二级存储分段启用了版本控制而未启用对象锁定的另一个缺点是、存在许多特权帐户、这些帐户可能会导致二级位置损坏。其优势在于、它应该是该端点或租户存储分段的唯一帐户、而这种损害可能不包括对主位置上的帐户的访问、反之亦然。</block>
  <block id="a16563897828d821edf628dd82945758" category="paragraph">创建源分段和目标分段并为目标配置版本控制后、您可以按如下所示配置和启用复制：</block>
  <block id="be9daa31583599df724c8df59a503c9d" category="list-text">要配置CloudMirror、请为S3目标创建一个平台服务端点。</block>
  <block id="611b96ea17eadbd463eab3da4b006a08" category="inline-image-macro">勒索软件保护创建端点</block>
  <block id="c510dab2c8ac5ee4b4411e8a49d4b5d3" category="list-text">在源存储分段上、配置复制以使用配置的端点。</block>
  <block id="805bfc00046708ebf1a16ab68b556a21" category="list-text">创建ILM规则以管理存储放置和版本存储持续时间管理。在此示例中、配置了要存储的对象的非最新版本。</block>
  <block id="e0a4f9c43eaf312a13fbe59879babc68" category="inline-image-macro">勒索软件保护创建ILM规则</block>
  <block id="7a24b133e2a2c80e8e545596903ecba1" category="inline-image-macro">勒索软件保护-cree-ilm-맦 퓲-step 2</block>
  <block id="933502478320f8d29965512cb963bbee" category="paragraph">站点1中有两个副本、保留30天。此外、您还可以根据在ILM规则中使用加载时间作为参考时间来为当前版本的对象配置规则、以匹配源存储分段存储持续时间。可以对对象版本的存储放置进行卷或复制。</block>
  <block id="e07a8c072ea1ca6e4d3dcdbd6c83dcef" category="summary">了解StorageGRID中的对象锁定如何提供WORM模型来防止数据删除或覆盖、以及如何满足法规要求。</block>
  <block id="2d3bfc77a9312b4c20c2c11de2543112" category="doc">使用对象锁定进行勒索软件防护</block>
  <block id="8e8b850c50836368da6868cf55982b1a" category="inline-link">评估的协资产</block>
  <block id="b63f442fe306001a7f6efc0b06fbf90b" category="paragraph">对象锁定提供了WORM模型、可防止删除或覆盖对象。StorageGRID实施对象锁定<block ref="d1d72b3d24daa0e79e5e3016d3af2f63" category="inline-link-rx"></block> 有助于满足法规要求、支持合法保留、合规模式和对象保留监管模式以及默认分段保留策略。您必须在创建分段和版本控制过程中启用对象锁定。对象的特定版本被锁定、如果未定义版本ID、则保留将放置在对象的当前版本上。如果当前版本配置了保留、并且尝试删除、修改或覆盖对象、则会创建一个新版本、其中包含删除标记、或者对象的新修订版作为当前版本。 锁定的版本将保留为非当前版本。对于尚不兼容的应用程序、您仍可以使用对象锁定以及存储分段上的默认保留配置。定义配置后、此操作会对放入存储分段的每个新对象应用对象保留。只要将应用程序配置为在保留时间过去之前不删除或覆盖对象、此操作就有效。</block>
  <block id="7f3a7e051943fe9cb2537a82f23c79d6" category="paragraph">以下是使用对象锁定API的几个示例：</block>
  <block id="3e4044f6be4e5b510163848a3b8bcc49" category="paragraph">对象锁定合法保留是应用于对象的简单开/关状态。</block>
  <block id="6753b18d5535d38f5d3281852fcf2849" category="paragraph">设置合法保留状态成功后不会返回任何值、因此可以通过GET操作进行验证。</block>
  <block id="81df85e12b9a4097495ca429a55e411f" category="paragraph">要关闭合法保留、请应用关闭状态。</block>
  <block id="706de121c73bc01dbe50f1b91d52dd8c" category="paragraph">设置对象保留时、会使用保留到时间戳。</block>
  <block id="1dae5744ff4dde14bc9594bcba3a8ddf" category="paragraph">同样、成功时也不返回任何值、因此您可以通过GET调用来验证保留状态。</block>
  <block id="dcd62b77f4d8492dd7080f57725bddd9" category="paragraph">为启用了对象锁定的存储分段设置默认保留期限时、保留期限以天和年为单位。</block>
  <block id="032d36d2167b2e38e51791d5247a34c6" category="paragraph">与大多数操作一样、成功后不会返回任何响应、因此、我们可以执行GET以验证配置。</block>
  <block id="33348857d8d05a0aa7f501b37973fff8" category="paragraph">接下来、您可以在应用保留配置的情况下将对象放入存储分段中。</block>
  <block id="db092c9920edfde56339bc59ae8ffe95" category="paragraph">Put操作确实会返回响应。</block>
  <block id="267af08682121916a5a400445ee13e8e" category="paragraph">在保留对象上、上例中为分段设置的保留持续时间将转换为对象上的保留时间戳。</block>
  <block id="342e456d8956d624a6bc2bd15db54a7a" category="summary">了解如何通过在StorageGRID中对存储分段启用版本控制并对用户安全组实施IAM策略来保护您的数据。</block>
  <block id="c3c2efe1bc77ac368b03118b030e960b" category="doc">使用版本控制和保护性IAM策略进行勒索软件防御</block>
  <block id="865383bbbfa775e3d6b22d489517f4bb" category="paragraph">在不使用对象锁定或复制的情况下保护数据的一种方法是、在存储分段上启用版本控制、并在用户安全组上实施IAM策略、以限制用户管理对象版本的能力。在发生攻击时、系统会创建新的错误数据版本作为当前版本、而最新的非最新版本是安全清理数据。为获得数据访问权限而泄露的帐户无权删除或以其他方式更改用于保护数据以供日后还原操作的非最新版本。与上一种情形一样、ILM规则可在您选择的持续时间内管理非最新版本的保留。缺点是、仍然可能存在针对恶意攻击者攻击的特权帐户、但必须为所有应用程序服务帐户和用户配置限制性更强的访问。限制性组策略必须明确允许您希望用户或应用程序能够执行的每个操作、并明确拒绝您不希望用户或应用程序能够执行的任何操作。NetApp建议不要使用通配符allow、因为将来可能会引入新的操作、您需要控制是允许还是拒绝该操作。对于此解决方案、拒绝列表必须包括DeleteObjectVersion、PutBucketPolicy、DeleteBucketPolicy、PutLifecycleConfiguration和PutketVersioning、以防止用户或编程更改分段和对象版本的版本控制配置。</block>
  <block id="14721ed09b53cff866a4251ecf8be9ad" category="paragraph">在StorageGRID 11.7中、引入了一个新的S3组策略选项"Ransmans要 缓解"、以便于实施此解决方案。在租户中创建用户组时、在选择组权限后、您可以看到此新的可选策略。</block>
  <block id="45e24bd145ccdb664274ea3753a3feb3" category="inline-image-macro">勒索软件保护创建组</block>
  <block id="5f1cf2bf2a76a7221d167793f6f1d80f" category="paragraph">下面是组策略的内容、其中包括显式允许的大多数可用操作以及所需的最小拒绝值。</block>
  <block id="1b46922bca2761ea0a6c327c6ff7fb97" category="paragraph">本配置指南基于StorageGRID 11.5和Enterprise Vault 14.1。对于一次写入、使用S3对象锁定、StorageGRID 11.5和Enterprise Vault 14.2.2进行多次读取(WORM)模式存储。有关这些准则的更多详细信息、请参见<block ref="8d80aa7c37bec53b7171a35567fec311" category="inline-link-rx"></block> 页面或联系StorageGRID专家。</block>
  <block id="1dd36541ff76792b9a1f4286f706f550" category="admonition">对于WORM存储(对象锁定)、需要使用StorageGRID 11.5或更高版本。</block>
  <block id="d713154cf1f274827caf27a31f82cb45" category="admonition">对于WORM存储(对象锁定)、需要Enterprise Vault 14.2.2或更高版本。</block>
  <block id="03c9d88cda3782913d26a1a7bc26f136" category="list-text">已创建StorageGRID租户、访问密钥、机密密钥和存储分段。</block>
  <block id="e0824b7fe5042443d6867a035cbc059d" category="list-text">已创建StorageGRID负载平衡器端点(HTTP或HTTPS)。</block>
  <block id="ccfce46e320ba5260f1ee1d4082cf063" category="list-text">启动Enterprise Vault管理控制台。</block>
  <block id="12b199291b692b06fcee61cbd72a4fe4" category="list-text">在适当的存储库中创建新的存储分区。展开存储组文件夹、然后展开相应的存储。右键单击分区并选择菜单：新建[Partition (分区)]。</block>
  <block id="e0e90cb563fd5221ff22be442b6bdc5c" category="list-text">按照新建分区创建向导进行操作。从存储类型下拉菜单中、选择NetApp StorageGRID (S3)。单击下一步。</block>
  <block id="507de6a31abd8f6192d0bad8a99c7fa4" category="list-text">保持选中"Store Data in WORM Mode Using S3 Object Lock"(使用S3对象锁定在WORM模式下存储数据)选项。单击下一步。</block>
  <block id="27297a1fb14386d9429c63e79efd9d13" category="list-text">在连接设置页面上、提供以下信息：</block>
  <block id="d407ce3c6418b602c5e62d17e75153e2" category="list-text">访问密钥 ID</block>
  <block id="864021d1cb190319b62722e58e59a8bf" category="list-text">机密访问密钥</block>
  <block id="32795074a39344590d17540d2b201838" category="list-text">服务主机名称：确保包括在StorageGRID中配置的负载平衡器端点(LBE)端口(例如\https：//Data &lt;hostname&gt;：&lt;LBE_port&gt;)</block>
  <block id="dc0c9174fafe0994fbdccfb9e7717229" category="list-text">存储分段区域：<block ref="c800b6d9163b0db7d28f86c1470a9542" prefix=" " category="inline-code"></block> 为默认值。</block>
  <block id="c25b4f67628ba5b52c9f09be180c1934" category="list-text">要验证与StorageGRID存储分段的连接、请单击测试。验证连接测试是否成功。单击"OK"(确定)、然后单击"Next"(下一步)。</block>
  <block id="5e28a4c450ff551f8cb9499edeacde68" category="list-text">StorageGRID不支持S3复制参数。为了保护对象、StorageGRID使用信息生命周期管理(ILM)规则指定数据保护方案-多个副本或纠删编码。选择When Archived Files Existing on the Storage (存储上存在归档文件时)选项、然后单击Next (下一步)。</block>
  <block id="7749207f8271fb7f649b1f3ef39fbf5d" category="list-text">验证摘要页面上的信息、然后单击完成。</block>
  <block id="f9bacafb1759e46379558a1bd77251a0" category="list-text">成功创建新的存储分区后、您可以在以StorageGRID作为主存储的企业存储中存档、还原和搜索数据。</block>
  <block id="ba40de2abbe8f22c1ddefaf0652eb8c0" category="summary">了解如何使用S3对象锁定为WORM存储配置StorageGRID。</block>
  <block id="316bb55238f2402b36fc9a4ad643a5ad" category="doc">为WORM存储配置StorageGRID S3对象锁定</block>
  <block id="bb4d69716f1ec83dcb07464a3fd52211" category="section-title">为WORM存储配置StorageGRID的前提条件</block>
  <block id="729b65fd2c5c356ea31a180bb37c2025" category="paragraph">对于WORM存储、StorageGRID使用S3对象锁定来保留对象以满足合规性要求。这需要使用StorageGRID 11.5或更高版本、其中引入了S3对象锁定默认分段保留功能。Enterprise Vault还需要14.2.2或更高版本。</block>
  <block id="8c870accaec595079cdf496f1793a55e" category="section-title">配置StorageGRID S3对象锁定默认分段保留</block>
  <block id="30db1e0d890f9510d7b8712976fcb137" category="paragraph">要配置StorageGRID S3对象锁定默认分段保留、请完成以下步骤：</block>
  <block id="d24937db40b8a84dc942039cba3a9100" category="list-text">在StorageGRID租户管理器中、创建存储分段、然后单击继续</block>
  <block id="a626ce66e7eaf62b35b215d06cb11fcd" category="list-text">选择Enable S3 Object Lock选项、然后单击Create Bucket.</block>
  <block id="6caf33ef1cee8f3afaaf1c820d8f1299" category="list-text">创建存储分段后、选择存储分段以查看存储分段选项。展开"S3 Object Lock"(S3对象锁定)下拉选项。</block>
  <block id="6e2728e25476dcd5ed065f06fa9da3a9" category="list-text">在默认保留下、选择启用并设置默认保留期限1天。单击 Save Changes 。</block>
  <block id="7d3ee9eb31d48b068ee9afc974c6688e" category="paragraph">存储分段现已准备就绪、可供Enterprise Vault用来存储WORM数据。</block>
  <block id="cdf294cdb11d58c4a1cf6c6b989f7ac0" category="section-title">配置Enterprise Vault</block>
  <block id="2b8482f3259b54a252e32e6c77841bea" category="paragraph">要配置Enterprise Vault、请完成以下步骤：</block>
  <block id="416206518e27ed2ec8b8e0876078af35" category="inline-link-macro">基本配置</block>
  <block id="0fdd01b1b915af6ef0310b3ded5842a9" category="list-text">重复部分中的步骤1-3 <block ref="b0733c8485b73f6326917495c59e375f" category="inline-link-macro-rx"></block> 、但这次选择使用S3对象锁定在WORM模式下存储数据选项。单击下一步。</block>
  <block id="0b5abcc8070dd573f1f60f2342e139a1" category="list-text">输入S3存储分段连接设置时、请确保输入的S3存储分段的名称已启用S3对象锁定默认保留。</block>
  <block id="9a5b0fcd0b1275de30e89b6c94f15569" category="list-text">测试连接以验证设置。</block>
  <block id="b37ab6844ec455af7b65aaae53986022" category="summary">了解如何在灾难恢复场景中配置StorageGRID站点故障转移。</block>
  <block id="6b27dcb8002b0f1590dd7594cf75a822" category="doc">配置StorageGRID站点故障转移以实现灾难恢复</block>
  <block id="0bfe801b13cf3e81901c3410c8570e2e" category="paragraph">在配置StorageGRID站点故障转移之前、请验证以下前提条件：</block>
  <block id="60ae5f0a3dc3e41cb1a8d17ca4ae3cc4" category="list-text">有一个双站点StorageGRID部署；例如、Site1和Site2。</block>
  <block id="c216325d17aa822764283030cb5baddc" category="list-text">已在每个站点上创建一个运行负载平衡器服务的管理节点或一个网关节点来实现负载平衡。</block>
  <block id="0862790262d5b3e1ee94cd33347dfc2f" category="list-text">已创建StorageGRID负载平衡器端点。</block>
  <block id="6e7ba5fe6520e0b407ab10ee11b1d696" category="section-title">配置StorageGRID站点故障转移</block>
  <block id="308d28d08b7f81ec7b11883d6d4f9102" category="paragraph">要配置StorageGRID站点故障转移、请完成以下步骤：</block>
  <block id="921a4d863daf068a5f614c53c331ed7a" category="list-text">要确保在站点出现故障期间连接到StorageGRID、请配置高可用性(HA)组。在StorageGRID网格管理器界面(GMI)中、单击配置、高可用性组和+创建。</block>
  <block id="bf2e77e2f5492ada5768dcb61171ca77" category="list-text">输入所需信息。单击Select Interfaces"(选择接口)、并包括Site1和Site2的网络接口、其中Site1 (主站点)是首选主站点。在同一子网中分配一个虚拟IP地址。单击保存。</block>
  <block id="b7f012b6955d2acff12a09570fab346e" category="list-text">确保将数据复制到站点1和站点2。这样、如果Site1发生故障、则仍可从Site2访问对象数据。这是通过首先配置存储池来实现的。</block>
  <block id="2f8cd206e8f11440f6d566a145683d88" category="paragraph">在StorageGRID GMI中、单击"ILM、Storage Pools"(ILM、存储池)、然后单击+"Cree"(创建)。按照向导创建两个存储池：一个用于Site1、另一个用于Site2。</block>
  <block id="569b553d1a29238d3f49a97309bb7e7f" category="paragraph">存储池是节点的逻辑分组、用于定义对象放置</block>
  <block id="08576c5d4b4ca78ca9766ffe2b9fa81f" category="list-text">在StorageGRID GMI中、单击"ILM、规则"、然后单击+创建。按照向导中的说明创建ILM规则、为每个站点指定一个要存储的副本、并将其导出行为设置为平衡。</block>
  <block id="457cde276ecbe36449d34f4da631a90d" category="list-text">将ILM规则添加到ILM策略中并激活此策略。</block>
  <block id="f2633f86de73d147465e5df7ca640192" category="paragraph">此配置会产生以下结果：</block>
  <block id="457068c4a125d38f71a7790879029a8f" category="list-text">一种虚拟S3端点IP、其中Site1为主端点、Site2为二级端点。如果Site1发生故障、VIP将故障转移到Site2。</block>
  <block id="f23ea2f2d2e408d14ea72e7895f24a9b" category="doc">为站点故障转移配置StorageGRID简介</block>
  <block id="b240db17f82e985f3d0d364567a003be" category="section-title">参考架构</block>
  <block id="632423b5da71d682caee956a05b4fd2b" category="sidebar">TR-4993:《NetApp StorageGRID与大数据分析》</block>
  <block id="73b0d6bd4229ce34d5668acb219b4052" category="sidebar">TR-4994：《Hadoop S3A调整最佳实践》</block>
  <block id="f3bee8cc791d63235a8d1d05244f54b7" category="sidebar">TR-4871：《Commvault"完整备份和恢复以及NetApp StorageGRID》</block>
  <block id="d04cca1c9316b8465b2731c191305549" category="sidebar">TR-4645：安全功能</block>
  <block id="398ab7fa1cdf69da3a866bb409f80421" category="sidebar">TR-4921：勒索软件防御</block>
  <block id="1cfe9266fd97efe523e3b7ce11ebb1f1" category="sidebar">TR-4765：《监控StorageGRID》</block>
  <block id="7f3e8b5f38d9b9937162a27e3c86aa63" category="sidebar">TR-4882：安装StorageGRID裸机网格</block>
  <block id="f3035506aa0c64c91592bc491a349515" category="sidebar">StorageGRID技术报告简介</block>
  <block id="7879c124051e0d93a93b1bfe6ea06158" category="sidebar">TR-4993:《NetApp StorageGRID与大数据分析》</block>
  <block id="4f6534c0c689f1866062f2d4e37a0485" category="sidebar">TR-4994：《Hadoop S3A调整》</block>
  <block id="76bfb2ad6cb61e79089f6e267e7d75f4" category="sidebar">TR-4871：使用Commvault.配置StorageGRID以进行备份和恢复</block>
  <block id="bce176eca00db60493e95c59f7b3f0e4" category="sidebar">StorageGRID备份和恢复—使用Commvault"存储和恢复数据</block>
  <block id="ef4f50cfdab78eaa027ccf2feec613db" category="sidebar">TR-4626：负载平衡器</block>
  <block id="9353b972c4e72ec79456feca60f654bd" category="sidebar">StorageGRID负载平衡器-第三方和全局负载平衡器</block>
  <block id="9d652cf4eda8c8ac6073f606de32d361" category="sidebar">StorageGRID 11.7中的安全功能—保护对象存储中的数据和元数据的安全</block>
  <block id="03a7b4c156470d8fc2b690c3a1de4583" category="sidebar">使用StorageGRID进行勒索软件防护—保护S3对象</block>
  <block id="5d2c0bd1227536451d2080f49e26d77a" category="sidebar">使用外部应用程序监控StorageGRID</block>
  <block id="70ca7442b81ada7ae57803224dad0c83" category="sidebar">在StorageGRID中使用Grafana查看指标</block>
  <block id="57e828039531aa32aed96923380fee16" category="sidebar">在裸机主机上安装StorageGRID</block>
  <block id="1d9276cf0fbeb5d3c213ee2bed5d0046" category="sidebar">指定StorageGRID的NTP服务器详细信息</block>
  <block id="ae52e3c45bd713b4082b98c518149807" category="sidebar">为WORM存储配置StorageGRID</block>
  <block id="654021875452c0979ec25d167125283d" category="sidebar">配置StorageGRID以实现灾难恢复</block>
  <block id="5795a3af3561471cfdd0a268caf7368a" category="section-title">StorageGRID支持密钥管理器</block>
  <block id="fe6eab8e7673d5eb1a0a49056f895bf1" category="list-text">《Terles CipherTrust Manager 2.0》</block>
  <block id="1be1b8a1d10784fc59532046a1fee62e" category="list-text">《Terles CipherTrust Manager 2.1》</block>
  <block id="c7c12d4f3f68fcfd6e01c5a9c9cb6be3" category="list-text">《Terles CipherTrust Manager 2.2》</block>
  <block id="07be740d89172b04613b66fbf4493720" category="list-text">Terles CipherTrust Manager 2.3</block>
  <block id="c937c1e76cb9d940133655488d7c43eb" category="list-text">Terles CipherTrust Manager 2.4</block>
  <block id="3b829853ddebde484f648bc5c9ff36cf" category="list-text">Terles CipherTrust Manager 2.8</block>
  <block id="2db577d75cf947cc8e3715192da24f13" category="list-text">Terles CipherTrust Manager 2.9</block>
  <block id="10eb31bcd0e31682a1be9a0888ceb5bc" category="list-text">Entrust KeyControl 10.2</block>
  <block id="530ce7b6e1084fa16ad1ed834d4073fe" category="list-text">Hashitorp Vault 1.15.0.</block>
  <block id="d6aec4929de76bf44c7073a73eb7aef4" category="list-text">Terles CipherTrust Manager 2.10</block>
  <block id="667fb8e439d3dc487e67b38a8abcbde6" category="list-text">《Terles CipherTrust Manager 2.11》</block>
  <block id="5f4d89602a81547894d41dd65645b683" category="list-text">Terles CipherTrust Manager 2.12</block>
  <block id="46fad314fdbc03f6e06527dc5732d12d" category="list-text">Terles CipherTrust Manager 2.13</block>
  <block id="3447b7450cb0c3a342ab8a5c8c53086e" category="list-text">Terles CipherTrust Manager 2.14</block>
  <block id="2118853f538fca485356f21c05a7d4f8" category="list-text"><block ref="2118853f538fca485356f21c05a7d4f8" category="inline-link-rx"></block></block>
  <block id="22e833c8d6d091d576273597a887e60e" category="list-text"><block ref="22e833c8d6d091d576273597a887e60e" category="inline-link-rx"></block></block>
  <block id="be89a903679bdf28679c22b4ed6c9806" category="list-text"><block ref="be89a903679bdf28679c22b4ed6c9806" category="inline-link-rx"></block></block>
  <block id="79007772b99cbebaceca4f4abdc9236b" category="paragraph">通过StorageGRID 11.6系统日志转发功能、您可以配置外部系统日志服务器来收集和分析StorageGRID 日志消息。ELK (Elasticsearch、Logstash、Kibana)已成为最受欢迎的日志分析解决方案之一。观看以查看示例的<block ref="a42387db058ee8ea3a8dcc51c8812963" category="inline-link-rx"></block> 模拟配置、以及如何使用它来识别失败的S3请求并对其进行故障排除。本文提供了Logstash配置、Kibana查询、图表和信息板的示例文件、可帮助您快速开始StorageGRID 日志管理和分析。</block>
  <block id="31b606c7f1c871f0b8ba92c74d0c9480" category="list-text">在StorageGRID 管理器图形用户界面中、配置外部系统日志服务器以向Logstash发送日志消息。有关详细信息、请参见<block ref="2216f063c2431b11fee834376e17fce1" category="inline-link-rx"></block> 。</block>
  <block id="4ecf6b273d67f2120caae7734e1fcf14" category="list-text">Rubeck</block>
  <block id="c2d8fc700534345077a260fb9791fba1" category="summary">为潜在客户访问StorageGRID评估软件的步骤。</block>
  <block id="bc47929a96a58ef3444da8ba390888bc" category="doc">访问StorageGRID评估软件的步骤</block>
  <block id="0984c1edd8b74672c83f621be7c2371d" category="paragraph">本说明面向与NetApp合作的NetApp销售人员、合作伙伴和潜在客户。</block>
  <block id="d45294caa04dc2a59a6a9779ecb261e1" category="section-title">注册帐户</block>
  <block id="8c41baf1ca98e1184f48c4721d44d431" category="inline-link">NetApp 支持站点</block>
  <block id="6b2e1d4820e2c64094628af51b07c4ae" category="list-text">使用您的业务电子邮件在上注册帐户<block ref="a49f41675f7c48eedf0647a0a62c5043" category="inline-link-rx"></block> 。</block>
  <block id="c3864a0d9e7266b854aa1d673036710a" category="list-text">如果您已有帐户、请继续执行下一步。</block>
  <block id="0fedb2e26434d49a94f9450ce477c3cc" category="list-text">使用创建的帐户登录。</block>
  <block id="0c6d9ab23098fd3e876c216fe1ca7ffc" category="inline-link">报告问题</block>
  <block id="8751d140672b36b77b265c8fe793befc" category="list-text">创建非技术支持案例、将访问级别提升到"潜在客户"。要执行此操作、请单击 <block ref="94c9ec214c60b057a12eaba547e0acae" category="inline-link-rx"></block>网站页脚中的""链接。</block>
  <block id="940ab06ee98cba17f3c21dea0e603eb5" category="list-text">选择"注册问题"作为反馈类别。</block>
  <block id="c1d4a23af565c411cff6271ce577104f" category="list-text">在备注部分、写下："我希望获得潜在客户访问权限、以下载StorageGRID评估软件。"</block>
  <block id="ea7ab0148c9999f65837f6a1483f42ee" category="list-text">提及建议潜在客户访问请求的NetApp内部人员的姓名。</block>
  <block id="ed721060d54c51e35da28db6ea8337ef" category="section-title">下载StorageGRID</block>
  <block id="aed8ceb0f85821c90dc49c2c3bf1e494" category="list-text">在您的支持案例经过审核和批准后、NetApp支持部门将通过电子邮件通知您、您的帐户已获得潜在客户访问权限。</block>
  <block id="6b387b831a4d44d44954a7effb99b5a1" category="inline-link">StorageGRID评估软件</block>
  <block id="ad33c2b21ecd662fa9473920d4d724a3" category="list-text">下载<block ref="5b76293412a08db37d60e839e13bbf32" category="inline-link-rx"></block>。</block>
  <block id="9149b5be5a51932ba9646a6a3707055b" category="paragraph">此Eval许可证文件位于此zip文件中。解压缩后、文件名称为StorageGRID-WebScale &lt;version&gt;\vSphere NLF000000.txt。</block>
  <block id="51b1dd6c5fdbd0546171ebae104eca57" category="paragraph">下载软件是一个涉及贸易合规措施以遵守法律要求的过程。为了确保合规性、用户必须先创建帐户并创建支持案例、然后才能获得访问权限。此流程有助于我们保持适当的控制和文档记录、同时为潜在客户提供他们所需的生产就绪软件。</block>
  <block id="c4adfd76b7112414ec7a702816418613" category="paragraph">我们提供StorageGRID的"生产就绪"版本、它不是开源版本或替代版本。需要注意的是，除非潜在客户升级到生产许可证，否则不提供*支持*。</block>
  <block id="f20e94f5bb986812208034209609d5f1" category="paragraph">如在上述步骤中遇到任何问题、请联系StorageGRID.Feedback@netapp.com。</block>
  <block id="2988dc07d3c7f2675b337739e6a81ff7" category="sidebar">试用StorageGRID</block>
  <block id="af628eae5a4bda33fe7f98b90dfd07ad" category="paragraph">有关此测试环境的技术详细信息、请阅读技术报告中的"解决方案设计和最佳实践"一节<block ref="42208ea06469332a89cb87f688663202" category="inline-link-rx"></block> 。</block>
  <block id="d448077c68c161f782d3bf423a865381" category="paragraph">表7显示了基线性能测试的结果。在辅助副本操作中、四个CommvaultMediaAgent将数据备份到NetApp AFF A300系统、并在NetApp StorageGRID上创建了一个辅助副本。有关测试设置环境的详细信息、请阅读技术报告中的"解决方案设计和最佳实践"一节<block ref="42208ea06469332a89cb87f688663202" category="inline-link-rx"></block> 。</block>
  <block id="6254689add36612cde2207c4eeb003c9" category="inline-link">StorageGRID S3对象锁定已通过Veritas NetBackup的验证</block>
  <block id="a712bd63fac80e1aca62c3ed8e924142" category="list-text">2023年1月18日：<block ref="6179dfb2fcec0a08c60e48740241db0a" category="inline-link-rx"></block></block>
  <block id="14f977b97d7dbd181f04d50ec1ed468e" category="summary">从ONTAP S3迁移到StorageGRID。</block>
  <block id="c748d5315fae1e52e5f773402cf3e67c" category="doc">通过将基于对象的存储从ONTAP S3无缝迁移到StorageGRID来实现企业级S3</block>
  <block id="7b3c0eb00dc33b1a631328955bc9b836" category="section-title">迁移演示</block>
  <block id="2c5eb617201a058feceb919d646677f1" category="paragraph">本演示将用户和分段从ONTAP S3迁移到StorageGRID。</block>
  <block id="1783e046b7fe7c378da7c227231027e0" category="section-title">迁移S3密钥</block>
  <block id="edb86190528e859c24c52b1166d4d97c" category="paragraph">对于迁移、大多数情况下您都需要迁移用户的凭据、而不是在目标端生成新的凭据。StorageGRID提供API以允许将S3密钥导入到用户。</block>
  <block id="945e89158728b42e91a54f60d737accb" category="paragraph">登录到StorageGRID管理UI (而不是租户管理器UI)、打开API文档Swagger页面。</block>
  <block id="9c8536e856e330218749728fda422921" category="inline-image-macro">打开API文档</block>
  <block id="3506a2e330cc3467a9ad96d0994f1299" category="paragraph"><block ref="3506a2e330cc3467a9ad96d0994f1299" category="inline-image-macro-rx" type="image"></block></block>
  <block id="41dc275fd67e3aa5346fd71812fb601d" category="paragraph">展开"accounts"(帐户)部分、选择"POST /grid /account-enable－s3-key-import "、单击"试用"按钮、然后单击"execute"(执行)按钮。</block>
  <block id="53f9aa67bd72c2cdd9d7a7b1c052ec1c" category="inline-image-macro">启用S3密钥导入</block>
  <block id="7c685a71f19dd935a19a0a88d28cd1b8" category="paragraph"><block ref="7c685a71f19dd935a19a0a88d28cd1b8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="96741f14b1eeac7c6c4d68b472646f40" category="paragraph">现在仍在"accounts"下向下滚动到"POST /grid /accounts/｛id｝/user/｛user_id｝/s3-access-keys"</block>
  <block id="b50cdc016573ea5afe0879acc5936ff3" category="paragraph">下面是我们要输入先前收集的租户ID和用户帐户ID的位置。在json框中填写来自我们的ONTAP用户的字段和密钥。您可以设置密钥的到期时间、也可以删除"、"Expires"：3456789 "、然后单击"执行"。</block>
  <block id="ee83287b94198af6e1adaab7cb856b99" category="inline-image-macro">导入S3密钥</block>
  <block id="77e95fb77226dac54e27441c3e4ad1b0" category="paragraph"><block ref="77e95fb77226dac54e27441c3e4ad1b0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3f5ce7271fcf0ca72073075f787f388d" category="paragraph">完成所有用户密钥导入后、您应在"accounts""POST /grid /account-disable" s3-key-import"中禁用密钥导入功能</block>
  <block id="417545bdfccc96b32165dda23e4cae49" category="inline-image-macro">禁用S3密钥导入</block>
  <block id="fe85615f433dcd9f0c52fb145e63e6cd" category="paragraph"><block ref="fe85615f433dcd9f0c52fb145e63e6cd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7ed390d6527135d2c4847cea90fff8fd" category="paragraph">如果我们在租户管理器UI中查看用户帐户、可以看到新密钥已添加。</block>
  <block id="6c71616b3b352a37f779acd74de2f813" category="inline-image-macro">用户密钥</block>
  <block id="69c1ba0ccf07e95f969128f46a279d12" category="paragraph"><block ref="69c1ba0ccf07e95f969128f46a279d12" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eb21098d13b81a8ffc4044c79b1490ce" category="section-title">最终转换</block>
  <block id="95e6ee1587d0ceb3b3f9e4df062bd818" category="paragraph">如果打算永久将存储分段从ONTAP复制到StorageGRID、您可以到此结束。如果是从ONTAP S3迁移到StorageGRID、则需要结束迁移并进行转换。</block>
  <block id="c8d22ed512ddedd9ac3f36314a291bb0" category="paragraph">在ONTAP系统管理器中、编辑S3组并将其设置为"ReadOnlyAccess"。这将防止用户再向ONTAP S3存储分段写入数据。</block>
  <block id="700d575cb12e48533c1f3424c58278a2" category="inline-image-macro">将ONTAP组设置为只读</block>
  <block id="81544e391a684ffda7638a9876ff732c" category="paragraph"><block ref="81544e391a684ffda7638a9876ff732c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="652bf7eb59a04cac2463054dc1c39587" category="paragraph">只需将DNS配置为从ONTAP集群指向StorageGRID端点即可。请确保端点证书正确无误、如果需要虚拟托管模式请求、请在StorageGRID中添加端点域名</block>
  <block id="39a9f4fb89ab2cddfdb856cb888d5019" category="paragraph"><block ref="39a9f4fb89ab2cddfdb856cb888d5019" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5d68231d18be913f9a645c3c636ab7f0" category="paragraph">您的客户端需要等待TTL过期、或者刷新DNS以解析到新系统、以便您可以测试一切正常。剩下的只是清理用于测试StorageGRID数据访问的初始临时S3密钥(而不是导入的密钥)、删除SnapMirror关系、然后删除ONTAP数据。</block>
  <block id="2ccd23bbd57324bd4619072b8f8501bc" category="paragraph">作者：拉斐尔·吉德斯和阿伦·克莱因</block>
  <block id="5b66143188e929285ce4259f3cef73f4" category="section-title">填充源存储分段</block>
  <block id="61dd7bb6a68b9468979c9dd027c3c0e7" category="paragraph">让我们将一些对象放在源ONTAP分段中。我们将使用S3Browser进行此演示、但您可以使用您熟悉的任何工具。</block>
  <block id="1b176c01bbfcb191297aa148baab6da7" category="paragraph">使用上面创建的ONTAP用户S3密钥、将S3Browser配置为连接到ONTAP系统。</block>
  <block id="cb41001b51d0090b7d292134a65aaf4a" category="inline-image-macro">S3Browser-config</block>
  <block id="81ce4395cdc6b12d91ae25346528f6e3" category="paragraph"><block ref="81ce4395cdc6b12d91ae25346528f6e3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0c922c601c50c24c7a3dd43d1db08ba1" category="paragraph">现在、我们将一些文件上传到启用了版本控制的存储分段。</block>
  <block id="c46a4a4b6181b39a4e9396fad75ec7a2" category="inline-image-macro">单击上传</block>
  <block id="ca5cdcc16ae630e806298b063046f485" category="paragraph"><block ref="ca5cdcc16ae630e806298b063046f485" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1e1612be1f37edad00c8cb80dd90158d" category="inline-image-macro">选择要上传的文件</block>
  <block id="3557157f4c9e7e18f142bc76c34e6bad" category="paragraph"><block ref="3557157f4c9e7e18f142bc76c34e6bad" category="inline-image-macro-rx" type="image"></block></block>
  <block id="293fc6e4068205eefc9df77baa941b5f" category="inline-image-macro">已上传文件</block>
  <block id="d675998f2d4289e47fe145bb1fd69438" category="paragraph"><block ref="d675998f2d4289e47fe145bb1fd69438" category="inline-image-macro-rx" type="image"></block></block>
  <block id="90b606ced696b2ed871d1d8a622652e9" category="paragraph">现在、让我们在分段中创建一些对象版本。</block>
  <block id="e905c485a94d23f34cf95a215259dc1d" category="paragraph">删除文件。</block>
  <block id="b80b4ad2e703a2f5ddf4eff8e5b57bfb" category="inline-image-macro">删除文件</block>
  <block id="44f25c4b033691468a52cb061d98e30b" category="paragraph"><block ref="44f25c4b033691468a52cb061d98e30b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3984a410dc20249f4a4852b6d78c1277" category="paragraph">上传存储分段中已存在的文件以复制该文件并创建其新版本。</block>
  <block id="62359f48fa5e49e4942386318b168185" category="inline-image-macro">上传已存在的文件</block>
  <block id="4ff9fdbbe683cc44c224b66deb98de1f" category="paragraph"><block ref="4ff9fdbbe683cc44c224b66deb98de1f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53c26fef5387cf81693d7943b21612a7" category="paragraph">在S3Browser中、我们可以查看刚刚创建的对象的版本。</block>
  <block id="78427a671180994263dd4cbf23fb350e" category="inline-image-macro">查看版本</block>
  <block id="7dd07afda409774ee242c0948ad6383a" category="paragraph"><block ref="7dd07afda409774ee242c0948ad6383a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f0cc421ed326a461c5f0874594d1d240" category="section-title">建立复制关系</block>
  <block id="0ed6ca41d82d38f21d992d4aa4bed18f" category="paragraph">让我们开始将数据从ONTAP发送到StorageGRID。</block>
  <block id="c2020f00595514288b21bfce34022b0c" category="paragraph">在ONTAP系统管理器中、导航到"保护/概述"。向下滚动到"Cloud object stores"(云对象存储)、然后单击"Add"(添加)按钮并选择StorageGRID (添加)。</block>
  <block id="57252445efd7d3ab6d473d30ed72352f" category="inline-image-macro">ONTAP保护</block>
  <block id="0c6ab570024b5f9690d5ddd940442d96" category="paragraph"><block ref="0c6ab570024b5f9690d5ddd940442d96" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0d4b7a7f586d7a5b2b93a96583c3c3d0" category="paragraph">通过提供名称和URL样式来输入StorageGRID信息(在此演示中、我们将使用Path-styleURL)。将对象存储范围设置为"Storage VM"。</block>
  <block id="a872e75393e5b7cfee8a70de0ae0bc57" category="inline-image-macro">输入StorageGRID信息</block>
  <block id="1b535a08aa91b34200eddd5d2bc9c5f7" category="paragraph"><block ref="1b535a08aa91b34200eddd5d2bc9c5f7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="551f5221c10ec5f7ee2f0b4d61a17bf8" category="paragraph">如果您使用的是SSL、请设置负载平衡器端点端口并在此处复制StorageGRID端点证书。否则、请取消选中"SSP"框并在此处输入HTTP端点端口。</block>
  <block id="e229a1d7b0308e6585ca1573057494bb" category="paragraph">为目标输入上述StorageGRID配置中的StorageGRID用户S3密钥和存储分段名称。</block>
  <block id="18fcda5616e3e713cf27733c1b0c6103" category="paragraph"><block ref="18fcda5616e3e713cf27733c1b0c6103" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a6aeb9bd73491bcf1712de697de6b638" category="paragraph">现在、我们已配置目标、可以为此目标配置策略设置。展开"本地策略设置"、然后选择"持续"。</block>
  <block id="88df0c4e805c29553bc039ef84e69340" category="inline-image-macro">本地策略设置</block>
  <block id="4bbea4d0051ef50dfe8b36e07eef800e" category="paragraph"><block ref="4bbea4d0051ef50dfe8b36e07eef800e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="13a2198af60cd718923f537163dd5412" category="paragraph">编辑持续策略并将"恢复点目标"从"1小时"更改为"3秒"。</block>
  <block id="354d4b16948c7e767e3ce6fb2aa8516e" category="inline-image-macro">本地策略设置编辑</block>
  <block id="04bf99072ca4977cd92a49e76b37c8b8" category="paragraph"><block ref="04bf99072ca4977cd92a49e76b37c8b8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="865e5172d02296d12d4c3077f7b37073" category="paragraph">现在、我们可以将SnapMirror配置为复制存储分段。</block>
  <block id="fdf3a76d6e1b2fc248d186dbe429ec20" category="paragraph">SnapMirror create -ssource-path sv_demo：/bket/bket-target-path sgws_demo：/objstore -policy continuous</block>
  <block id="e8567630fe85d755fed9996bd6f55a0c" category="inline-image-macro">创建SnapMirror关系</block>
  <block id="7ee063ac689e33edf05fa89215b26255" category="paragraph"><block ref="7ee063ac689e33edf05fa89215b26255" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1d8f46cb77f0064dbb97e41792e84703" category="paragraph">此时、存储分段将在受保护的存储分段列表中显示一个云符号。</block>
  <block id="57c9ce100b486743ab9fff8cc61cbf2c" category="inline-image-macro">存储分段受云目标保护</block>
  <block id="8d3a7d937b6862dbc7e6fc8ae632c722" category="paragraph"><block ref="8d3a7d937b6862dbc7e6fc8ae632c722" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eb86c505873ad47fa4a174f670d7469f" category="paragraph">如果我们选择存储分段并转到SnapMirror (ONTAP或云)选项卡、我们将看到SnapMirror repationship状态。</block>
  <block id="04eebe2fdfc7eba5901d4d867884daaf" category="inline-image-macro">检查SnapMirror关系</block>
  <block id="325d40a34e1ca19110896923461f65a8" category="paragraph"><block ref="325d40a34e1ca19110896923461f65a8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="252fa3b3eebd82056be1bab16c67f39e" category="section-title">复制详细信息</block>
  <block id="625d7876e4a4b4d15ac6fdd9b1f95c7c" category="paragraph">现在、我们已成功将存储分段从ONTAP复制到StorageGRID。但实际上复制的是什么？我们的源和目标都是分版本分段。先前版本是否也会复制到目标？如果我们使用S3Browser查看StorageGRID存储分段、我们会发现现有版本未复制、删除的对象不存在、该对象的删除标记也不存在。我们的复制对象在StorageGRID存储分段中只有1个版本。</block>
  <block id="7654b3c6ecce42bd6d80d3c3eda0d460" category="inline-image-macro">初始同步后StorageGRID存储分段的S3浏览器视图</block>
  <block id="7360ed33a91141894312965ee102e374" category="paragraph"><block ref="7360ed33a91141894312965ee102e374" category="inline-image-macro-rx" type="image"></block></block>
  <block id="67d39cdd9eb9df4138519617ca637a14" category="paragraph">在ONTAP分段中、让我们向先前使用的同一对象添加一个新版本、并了解其复制方式。</block>
  <block id="8fb4fd5d2f752fa5f7b226c4d527a69a" category="inline-image-macro">上传新版本后ONTAP存储分段的S3浏览器视图</block>
  <block id="2ed59d66171d22d74d133c63c225e251" category="paragraph"><block ref="2ed59d66171d22d74d133c63c225e251" category="inline-image-macro-rx" type="image"></block></block>
  <block id="351c27f6243057013664721b76d198d3" category="paragraph">从StorageGRID的角度来看、我们会发现此存储分段中也创建了一个新版本、但缺少SnapMirror关系之前的初始版本。</block>
  <block id="e9c51f250ae2c68745b305d518c752c8" category="paragraph"><block ref="e9c51f250ae2c68745b305d518c752c8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="085edea4486b9c58286039b2de3e0da8" category="paragraph">这是因为ONTAP SnapMirror S3进程仅复制对象的当前版本。这就是我们在StorageGRID端创建分版本存储分段作为目标的原因。这样、StorageGRID就可以维护对象的版本历史记录。</block>
  <block id="a5394f6191bef59bac44916c2ef5ad14" category="section-title">正在准备ONTAP</block>
  <block id="da850783b45b977935f2d31304e870a5" category="paragraph">为了便于演示、我们将创建SVM对象存储服务器、用户、组、组策略和分段。</block>
  <block id="aafb42088c8c68e1842dadde9625370b" category="section-title">创建Storage Virtual Machine</block>
  <block id="a180e0d1788e522c9e3007f9463891d1" category="paragraph">在ONTAP系统管理器中、导航到Storage VM并添加新的Storage VM。</block>
  <block id="470a3393e959f3a189834c2a8a7e38ac" category="inline-image-macro">添加新的 SVM</block>
  <block id="4b5db63d899d14fabaecf07c458ed106" category="paragraph"><block ref="4b5db63d899d14fabaecf07c458ed106" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c5a07e569188d4c87bdc33aa4bc22888" category="paragraph">选中"启用S3"和"启用TLS"复选框并配置HTTP (S)端口。如果您的环境未使用默认值或不需要、请定义IP、子网掩码并定义网关和广播域。</block>
  <block id="df05aef739eda5cc136be34597b24d9a" category="inline-image-macro">配置新的SVM</block>
  <block id="abe5d2e753bf10753566e313e20dd8be" category="paragraph"><block ref="abe5d2e753bf10753566e313e20dd8be" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7543da458aba2be8e44022f8ff61edc1" category="paragraph">在创建SVM过程中、将创建用户。下载此用户的S3密钥并关闭窗口。</block>
  <block id="7500624d3292ede4cdd31e43d2ff8c65" category="inline-image-macro">下载S3密钥</block>
  <block id="afa0ccf6bcc8dfa395e380b0bb87c2cc" category="paragraph"><block ref="afa0ccf6bcc8dfa395e380b0bb87c2cc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3205d46c79d604835a90642c77ed3d72" category="paragraph">创建SVM后、编辑SVM并添加DNS设置。</block>
  <block id="ab77fcf006331856d1c6b528f9fea219" category="inline-image-macro">配置DNS</block>
  <block id="3a89c6c94d91b3298a519dab2512852f" category="paragraph"><block ref="3a89c6c94d91b3298a519dab2512852f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2cfea9be4158dc7848cc45788ead4cbc" category="paragraph">定义DNS名称和IP。</block>
  <block id="ea9c1b9d1059e7bba9ae9290a0500dff" category="inline-image-macro">配置DNS服务器</block>
  <block id="892d3d984b1c02a6dd52c1fcdfff0424" category="paragraph"><block ref="892d3d984b1c02a6dd52c1fcdfff0424" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5ad4fea59478c49704959e0edf00758a" category="section-title">创建SVM S3用户</block>
  <block id="5aad1eae2b8325639985e48478aac16d" category="paragraph">现在、我们可以配置S3用户和组。编辑S3设置。</block>
  <block id="d3b07e00903941108f0fec78a82a8966" category="inline-image-macro">配置 S3</block>
  <block id="2d1d9a180589699ff2921b13d35ac9c5" category="paragraph"><block ref="2d1d9a180589699ff2921b13d35ac9c5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7903f9f562fe20e9352ef79291d03baf" category="paragraph">添加新用户。</block>
  <block id="08ec0f7654cccad69821337b3c47af67" category="inline-image-macro">添加新用户</block>
  <block id="78aae283d542d8cf187bf641aef50061" category="paragraph"><block ref="78aae283d542d8cf187bf641aef50061" category="inline-image-macro-rx" type="image"></block></block>
  <block id="69d6084c745c16018f644076d47e62df" category="paragraph">输入用户名和密钥到期日期。</block>
  <block id="f358c7744fea47b4bdf515ca606e1570" category="paragraph">为新用户下载S3密钥。</block>
  <block id="de32b1bd35a50047cc179f6deaba3fe8" category="inline-image-macro">新用户S3密钥</block>
  <block id="45fa7bdf93cb91dd943a187cb2a5c03d" category="paragraph"><block ref="45fa7bdf93cb91dd943a187cb2a5c03d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="398671caeda44244f5153c7dbe9665a3" category="section-title">创建SVM S3组</block>
  <block id="fb86a24a628266c1afe5c96a8ae7caac" category="paragraph">在SVM S3设置的组选项卡上、添加一个具有上述创建用户和FullAccess权限的新组。</block>
  <block id="d3666b040f101e51f2ec63e2972245f7" category="inline-image-macro">添加S3组</block>
  <block id="5108782f4b51f14cff0bab234a568697" category="paragraph"><block ref="5108782f4b51f14cff0bab234a568697" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dc28c4546d839545501ba1ac361d079a" category="section-title">创建SVM S3存储分段</block>
  <block id="a35233ef2933210164f63ea2c98a885b" category="paragraph">导航到"存储分段"部分、然后单击"+Add"按钮。</block>
  <block id="299fbfe2cdb9679387811daaf3a0d442" category="inline-image-macro">添加存储分段</block>
  <block id="a1984921fedda4350f65c7ebd76836b3" category="paragraph"><block ref="a1984921fedda4350f65c7ebd76836b3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a78a668508f8dc7e9b29b11fff445e2" category="paragraph">输入名称、容量并取消选中"Enable ListBucket"复选框、然后单击"更多选项"按钮。</block>
  <block id="2af7572db33e32d97c2a172374697a61" category="paragraph"><block ref="2af7572db33e32d97c2a172374697a61" category="inline-image-macro-rx" type="image"></block></block>
  <block id="953602c2739e355d7b031c7048d621b1" category="paragraph">在"更多选项"部分中、选中"启用版本控制"复选框、然后单击"保存"按钮。</block>
  <block id="823e3d309f271d17abda0806debebd13" category="inline-image-macro">启用版本控制</block>
  <block id="52c810af819e4fe293f29a8b476f201e" category="paragraph"><block ref="52c810af819e4fe293f29a8b476f201e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12b0bebdc5fd6d89d65dca8f905b046c" category="paragraph">重复此过程、并在未启用版本控制的情况下创建第二个存储分段。输入一个名称、与存储分段1的容量相同、并取消选中"Enable ListBucket"复选框、然后单击"Save (保存)"按钮。</block>
  <block id="d7ee833a734bb3582435c86b1ef4b2d9" category="inline-image-macro">添加存储分段2</block>
  <block id="28a98808203cd08ab1f44fb3be7c4c70" category="paragraph"><block ref="28a98808203cd08ab1f44fb3be7c4c70" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6be12c1b6627a3a9bb2aa4cb185fc866" category="section-title">正在准备 StorageGRID</block>
  <block id="9c9f246dc3e4119f5c0f1c814f738dc2" category="paragraph">继续配置此演示、我们将创建租户、用户、安全组、组策略和存储分段。</block>
  <block id="393cb18603dfc01f76621e7fa99d7e34" category="section-title">创建租户</block>
  <block id="756b2d5b0f7e310581deb6b02911b947" category="paragraph">导航到"租 户"选项卡、然后单击"创建"按钮</block>
  <block id="08e9570c93c393f2ec223840c1c187ed" category="inline-image-macro">添加租户按钮</block>
  <block id="88ed9671d8147896ed27652bc742cd36" category="paragraph"><block ref="88ed9671d8147896ed27652bc742cd36" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cd5c40dbc94691aa20e5da986f322339" category="paragraph">填写提供租户名称的租户的详细信息、选择S3作为客户端类型、不需要配额。无需选择平台服务或允许S3选择。如果选择、您可以选择使用自己的身份源。设置root密码、然后单击完成按钮。</block>
  <block id="21b4425fcc55a66cff28a256101916d6" category="paragraph">单击租户名称可查看租户详细信息。*稍后您将需要租户ID、因此请将其复制*。单击登录按钮。此操作将转到租户门户登录页面。保存此URL以供将来使用。</block>
  <block id="120b3f55b543341ae3eb65aa66d41fab" category="inline-image-macro">选择租户</block>
  <block id="91645b25c5815c71cd2f5cb6c50c2851" category="paragraph"><block ref="91645b25c5815c71cd2f5cb6c50c2851" category="inline-image-macro-rx" type="image"></block></block>
  <block id="46458c8f8b233f76c65f13928652d03b" category="paragraph">此操作将转到租户门户登录页面。保存此URL以供将来使用、然后输入root用户凭据。</block>
  <block id="914fa618e5db704c65410405b1df86a6" category="inline-image-macro">租户登录</block>
  <block id="a016ff6a8701161b71a08e297f187eb6" category="paragraph"><block ref="a016ff6a8701161b71a08e297f187eb6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ba4a9cd6fb5b572946d710f33f0fc386" category="section-title">创建用户</block>
  <block id="51e8cab66c71f8d79e6d4fd1dcdde969" category="paragraph">导航到用户选项卡并创建新用户。</block>
  <block id="6968f54a13a1210fd95b00282bf4714c" category="inline-image-macro">导航到用户</block>
  <block id="18a47360ef32adef1d918eabfb601cf0" category="paragraph"><block ref="18a47360ef32adef1d918eabfb601cf0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ccfd9806bc9889d5c0e4b2f361f54f4" category="inline-image-macro">创建新用户</block>
  <block id="1d32fcd034450d4ebf3390b23bb911d8" category="paragraph"><block ref="1d32fcd034450d4ebf3390b23bb911d8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c6086e8a1623c95be5be3d08ed5b94d0" category="paragraph">创建新用户后、单击用户名以打开该用户的详细信息。</block>
  <block id="8b5dfc9215c2fc5f932c21b6d0ebc76b" category="paragraph">复制URL中的用户ID、以供日后使用。</block>
  <block id="7fdef6b904b4c3e44ac8ac680498b585" category="inline-image-macro">复制新ID</block>
  <block id="9c3b107cf4e3b9cd613c7ae73f6a04c7" category="paragraph"><block ref="9c3b107cf4e3b9cd613c7ae73f6a04c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="111d0ae2406ffba81e61eae4abd88478" category="paragraph">要创建S3密钥、请单击用户名。</block>
  <block id="80e223872fabdc66def1d7f6d84eba90" category="inline-image-macro">创建S3密钥</block>
  <block id="7b714043efafa7cd3253909adeaa05eb" category="paragraph"><block ref="7b714043efafa7cd3253909adeaa05eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fceda54795e2936815d59a603b141cfd" category="paragraph">选择"Access keys"(访问密钥)选项卡、然后单击"Create Key"(创建密钥)按钮。无需设置到期时间。下载S3密钥、因为关闭窗口后将无法再次检索这些密钥。</block>
  <block id="57622436ec5afc45d57d88509732a0f8" category="inline-image-macro">下载密钥</block>
  <block id="4f9d0e4a47e5db245b20e8015d5483c7" category="paragraph"><block ref="4f9d0e4a47e5db245b20e8015d5483c7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="63a7bded731937b2466a7a856f89b5e5" category="section-title">创建安全组</block>
  <block id="85b69a80b60a46ce65a37f198db050d7" category="paragraph">现在转到组页面并创建新组。</block>
  <block id="e94f58e4efb3f77e13519c199bc52d97" category="inline-image-macro">创建新组</block>
  <block id="c7cace6f39583aa80b87737955c7ce6c" category="paragraph"><block ref="c7cace6f39583aa80b87737955c7ce6c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5b9d87901ac015cd0e913a32b7750e7f" category="paragraph">将组权限设置为只读。这是租户UI权限、而不是S3权限。</block>
  <block id="f63c2840bbc9107b66637b31a5d83b7d" category="inline-image-macro">设置组权限</block>
  <block id="61eb214a9c613b4f9d50d03f9328f9a9" category="paragraph"><block ref="61eb214a9c613b4f9d50d03f9328f9a9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a36618049720e6ba43c39aeb8f3944f8" category="paragraph">S3权限通过组策略(IAM策略)进行控制。将组策略设置为自定义、然后将json策略粘贴到框中。此策略将允许此组的用户列出租户的分段、并在名为"分段"的分段中执行任何S3操作、或者在名为"分段"的分段中执行子文件夹。</block>
  <block id="7ffcbf68734e791cd72723c4954078e9" category="inline-image-macro">定义组策略</block>
  <block id="417574f285186847a5cc21d2dc9bb598" category="paragraph"><block ref="417574f285186847a5cc21d2dc9bb598" category="inline-image-macro-rx" type="image"></block></block>
  <block id="50ba0663e964492af6c417f7d4eb7c56" category="paragraph">最后、将用户添加到组中并完成操作。</block>
  <block id="4e1fd25cbe5209a6e6a9745d4f04f365" category="inline-image-macro">将用户添加到组</block>
  <block id="a9ccd02f003e46b00d3a716dcf834823" category="paragraph"><block ref="a9ccd02f003e46b00d3a716dcf834823" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0cc1b9650560b6c78ec6580fd6be669b" category="section-title">创建两个存储分段</block>
  <block id="254d4d81ebac5c31e21f263ce47c7bf0" category="paragraph">导航到存储分段选项卡、然后单击创建存储分段按钮。</block>
  <block id="e68caa30e18a2772e791ada342429dc5" category="inline-image-macro">创建分段页面</block>
  <block id="63337c401341a8003ca291ca9423ea04" category="paragraph"><block ref="63337c401341a8003ca291ca9423ea04" category="inline-image-macro-rx" type="image"></block></block>
  <block id="95278a2006be88dde456d823cc988fcf" category="paragraph">定义分段名称和区域。</block>
  <block id="f1a6bfffa76920f61aad594fdb6d4ed3" category="paragraph"><block ref="f1a6bfffa76920f61aad594fdb6d4ed3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="902cd2ab3474775e36ce6ac47b4bc8df" category="paragraph">在第一个存储分段上启用版本控制。</block>
  <block id="bc34f789fb5cbcd94af4d0d494f8ea6d" category="inline-image-macro">设置版本控制</block>
  <block id="e783640cb4c279880a25388159e378a4" category="paragraph"><block ref="e783640cb4c279880a25388159e378a4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c1053c509b131ad2d2e7358d439718ab" category="paragraph">现在、在未启用版本控制的情况下创建第二个存储分段。</block>
  <block id="c3153d971e754e0e427d68d00ae2c9b0" category="inline-image-macro">创建第二个存储分段</block>
  <block id="f3f081810932233601f313ac610053e4" category="paragraph"><block ref="f3f081810932233601f313ac610053e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="289a0e5b9a11398ac0c72f14f45cb30b" category="paragraph">请勿在此第二个存储分段上启用版本控制。</block>
  <block id="89c44b922ff9edd703a49957f01f0c84" category="inline-image-macro">请勿设置版本控制</block>
  <block id="515386d5ad040c09a8fe4a0d2d7bab46" category="paragraph"><block ref="515386d5ad040c09a8fe4a0d2d7bab46" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e3276058dd2b8a3501db3ed1cf59e11b" category="paragraph"><block ref="e3276058dd2b8a3501db3ed1cf59e11b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f33f7e4c550d5b049658bb48a6dc3d01" category="paragraph"><block ref="f33f7e4c550d5b049658bb48a6dc3d01" category="inline-image-macro-rx" type="image"></block></block>
  <block id="900b0263e9b753b83cbaf04a42f90dec" category="paragraph"><block ref="900b0263e9b753b83cbaf04a42f90dec" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6217ffd1eea9981985eb67bb0c9544ef" category="paragraph"><block ref="6217ffd1eea9981985eb67bb0c9544ef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7f0b6f9e91c398d8a72444fc496f8b15" category="list-text">对要批准的每个待定网格节点重复步骤1-8。</block>
  <block id="c436c7c9f6644d1f59916eb145eccbce" category="paragraph"><block ref="c436c7c9f6644d1f59916eb145eccbce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cbc2c719a4b646ec1b829378cffbb62c" category="paragraph"><block ref="cbc2c719a4b646ec1b829378cffbb62c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3f22b7f4ed72e66d6e3b89cde323b775" category="paragraph"><block ref="3f22b7f4ed72e66d6e3b89cde323b775" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ad761804c8db2c35db1b04a938fdbc45" category="paragraph"><block ref="ad761804c8db2c35db1b04a938fdbc45" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2505da9cc59525ea8ea38913a61f3d1d" category="paragraph"><block ref="2505da9cc59525ea8ea38913a61f3d1d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="73fabd06e0fa7f38e657122a29a67e63" category="paragraph"><block ref="73fabd06e0fa7f38e657122a29a67e63" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bb697ffd76758d63ea2359b938dec45f" category="paragraph"><block ref="bb697ffd76758d63ea2359b938dec45f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="534c560757a42aaeb317ce7c91023fef" category="paragraph"><block ref="534c560757a42aaeb317ce7c91023fef" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2578e5a28b1f21ed43560903ded7bd2e" category="paragraph"><block ref="2578e5a28b1f21ed43560903ded7bd2e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54ddba979e33f92dff27be78ae040e96" category="paragraph"><block ref="54ddba979e33f92dff27be78ae040e96" category="inline-image-macro-rx" type="image"></block></block>
  <block id="230e927ef1cbcfb4706e2ca2fe79b068" category="paragraph"><block ref="230e927ef1cbcfb4706e2ca2fe79b068" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6cfd96f46e0c61db4b057de9b2f02787" category="paragraph"><block ref="6cfd96f46e0c61db4b057de9b2f02787" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7c648110d8b752889f98cd2d87517c0f" category="section-title">《使用S3对象存储对数据仓库和湖屋进行基准测试：比较研究》</block>
  <block id="3f7d606956bcb4f8b565d2799da4a4e3" category="paragraph">本文介绍了使用NetApp StorageGRID的各种数据仓库和温室生态系统的综合基准。其目标是确定哪个系统在使用S3对象存储时性能最佳。请参阅此内容<block ref="ca1f374596a7de7e13cf95753411f6e0" category="inline-link-rx"></block>、了解有关数据存储/数据库架构和表格格式(镶木地板和冰山一角)的更多信息。</block>
  <block id="39b5836a4532001dfbe7e05fb49461e4" category="list-text">VM集群、每个VM具有128 G RAM和24个vCPU、用于系统磁盘的SSD存储</block>
  <block id="37e59045c327c8ae9b2d4f7b4f136217" category="list-text">多米奥V23 (1个协调员+ 5个执行者)</block>
  <block id="1543c40ac4e68e60ea63a94bfab320ec" category="list-text">Trino v438 (1名协调员+ 5名员工)</block>
  <block id="e9940dffc6cb8987f8ea2849d2c81a2c" category="list-text">Starburst v453 (1个协调员+ 5个员工)</block>
  <block id="e6626cf4bf50ce440a045708b2e1f1e5" category="list-text">NetApp^®^ StorageGRID^®^ 11.8(3 x SG6060+1x SG1000负载平衡器)</block>
  <block id="20536af82697c291683798ab540160e0" category="list-text">对象保护-2个副本(结果与EC 2+1类似)</block>
  <block id="b9d35717430d39eef24c76f0c1796c11" category="list-text">对于使用镶木地板格式的每个查询测试、在所有生态系统中禁用了缓存。对于icerberg格式、我们比较了禁用缓存和启用缓存的情形之间的S3获取请求数量和总查询时间。</block>
  <block id="cdbfde1ab888a940af383c70c682b87a" category="paragraph">TPC-DS包括99个为基准测试而设计的复杂SQL查询。我们测量了执行所有99个查询所需的总时间、并通过检查S3请求的类型和数量进行了详细分析。我们的测试对两种常见的表格格式(镶木地板和冰山一角)的效率进行了比较。</block>
  <block id="96e14f82cc6500529b0c04afc6ebafa1" category="paragraph">*镶木地板表格式的TPC-DS查询结果*</block>
  <block id="f37fa2c6484789a1a50f7d43e5b6c2df" category="cell">星突发</block>
  <block id="c98abcd54e4d3791a1400bab7aa399fe" category="cell">1084 ^1^</block>
  <block id="6364d3f0f495b6ab9dcf8d3b5c6e0b01" category="cell">32</block>
  <block id="33e75ff09dd601bbe69f351039152189" category="cell">28</block>
  <block id="75b00b5e6500e718036f28f893b7dee1" category="paragraph">S3请求细分</block>
  <block id="e1327a62998567085c28d8caac25a097" category="cell">1,504,212</block>
  <block id="61f6b2bbbbcd552b422c8740065ff520" category="cell">1,495,039</block>
  <block id="c7eb1fdd90d51dff9000a413a518c83c" category="cell">范围获取大小：100 KB以下50%、1 MB左右16%、27% 2 MB到9 MB、3500到4000次请求/秒</block>
  <block id="f8bc1fd43d6bb150e5b0b51185508a46" category="cell">范围获取大小：100 KB以下50%、1 MB左右16%、27% 2 MB到9 MB、4000到5000个请求/秒</block>
  <block id="e2230b853516e7b05d79744fbd4c9c13" category="cell">509</block>
  <block id="cfcd208495d565ef66e7dff9f98764da" category="cell">0</block>
  <block id="a6555d2b06722bde8a106c16e353a06a" category="cell">1,504,721</block>
  <block id="794b1e43f91a9913da14ea20cd4198c9" category="cell">1,499,551</block>
  <block id="f1cab053650b93fe71331be2c4c9c40d" category="paragraph">^1^ Hive无法完成查询编号72</block>
  <block id="2e09f209b7749073d8732d856a6afe12" category="paragraph">*TPC-DS查询结果，带icerberg表格格式*</block>
  <block id="077385462ac0cf8f7fe1ddb0b3983c42" category="cell">TPCDS 99查询+总分钟数(缓存已禁用)</block>
  <block id="34173cb38f07f89ddbebc2ac9128303f" category="cell">30</block>
  <block id="b6d767d2f8ed5d21a44b0e5886680cb9" category="cell">22</block>
  <block id="95df7e4eb2568a2c428c70b695f7cac2" category="cell">TPCDS 99次查询+总分钟数(已启用缓存)</block>
  <block id="d81fdeb5a429e85d04118048e4b3485d" category="cell">21.5</block>
  <block id="b7ae258c3f8653133aa9c0c448f67516" category="cell">GET (缓存已禁用)</block>
  <block id="3bb0dd7ec24af388f7e49723482fb553" category="cell">2,154,747</block>
  <block id="817c2a89c3531f80836a2db8d06d85b3" category="cell">938,639</block>
  <block id="5f4363558dd08c8d9c04d30802266c70" category="cell">931,582</block>
  <block id="18c14d7f109f020c287a26f7a8f428d4" category="cell">GET (已启用缓存)</block>
  <block id="e3f91fa6ba87f03f3166a20beea1c344" category="cell">5,389</block>
  <block id="6b11f97cb60ca2cd6f46178c1e7cf4f3" category="cell">30,158</block>
  <block id="bc06fdbde6a0ac6d6d654b6614f9b5d7" category="cell">3,281</block>
  <block id="76de71b9903e9b839668c173592c80be" category="cell">范围获取大小：67% 1MB、15% 100KB、10% 500KB、3000 - 4000次请求/秒</block>
  <block id="5819eb0ec4b00d343de26ea1746d62b0" category="cell">范围获取大小：100 KB以下42%、1 MB左右17%、33% 2 MB到9 MB、3500到4000次请求/秒</block>
  <block id="a6939d8de1e94d811eb67cb92270c822" category="cell">范围获取大小：100 KB以下43%、1 MB左右17%、33% 2 MB到9 MB、4000到5000个请求/秒</block>
  <block id="46ba9f2a6976570b0353203ec4474217" category="cell">284</block>
  <block id="e087b5b2372a325fbbc3eb02013bd513" category="cell">1,261</block>
  <block id="2d6a14455d72488e5e91089f0b50905c" category="cell">请求总数(缓存已禁用)</block>
  <block id="2096b1864713f451954f320346ec801a" category="cell">2,156,578</block>
  <block id="bfd8a8a359e411cea773da89ea7b516e" category="cell">939,148</block>
  <block id="95368980785d6fcc2e447b3569f7e08e" category="cell">932,071</block>
  <block id="e7c4b70d9a61af19b7bb26b3656a04a7" category="paragraph">如第一个表所示、Hive的速度明显低于其他现代数据数据库生态系统。我们发现、Hive发送了大量S3列表对象请求、这些请求在所有对象存储平台上通常都很慢、尤其是在处理包含许多对象的分段时。这会显著增加整体查询持续时间。此外、现代的温室生态系统可以并行发送大量GET请求、每秒从2000到5、000个不等、而Hive的每秒请求数为50到100个。Hive和Hadoop S3A的标准文件系统模拟导致Hive在与S3对象存储交互时运行的很小。</block>
  <block id="64e5657b42a88da8f35487a29fd462a0" category="paragraph">要将Hadoop (无论是在HDFS还是S3对象存储上)与Hive或Spark结合使用、需要掌握Hadoop和Hive或Spark的丰富知识、并了解每个服务的设置如何进行交互。它们共有1、000多种设置、其中许多设置相互关联、无法单独更改。要找到设置和值的最佳组合、需要花费大量时间和精力。</block>
  <block id="b466c5196d6e79148750db2791c91da3" category="paragraph">通过比较镶木地板和冰山一角的结果、我们发现表格格式是一个主要的性能因素。在S3请求数量方面、iciceberg表格格式比镶木地板更高效、与镶木地板格式相比、请求数量减少了35%到50%。</block>
  <block id="e42410a9640211b1ecea1110a2d993ef" category="paragraph">但是、集群的性能主要取决于集群的计算能力。虽然这三个系统都使用S3A连接器建立S3对象存储连接、但它们不需要Hadoop、并且这些系统不会使用Hadoop的大多数FS.S3A设置。这样可以简化性能调整、无需学习和测试各种Hadoop S3A设置。</block>
  <block id="ae292ab8583812dbb91d237b1397afd3" category="paragraph">根据此基准测试结果、我们可以得出结论、针对基于S3的工作负载优化的大数据分析系统是一个主要性能因素。现代的温室可优化查询执行、高效利用元数据并提供对S3数据的无缝访问、从而在使用S3存储时获得比Hive更高的性能。</block>
  <block id="e5a51e32ae018b0fd70ad8a44e42454d" category="paragraph">请参见此指南<block ref="e4ec3c3ef03861ef67845dfb086c7b17" category="inline-link-rx"></block>以使用StorageGRID配置drefio S3数据源。</block>
  <block id="29ba7c2ce7db44a399c2e6636ce805cf" category="paragraph"><block ref="29ba7c2ce7db44a399c2e6636ce805cf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="debd8913c08ffb1db2be4aa0bc738660" category="paragraph"><block ref="debd8913c08ffb1db2be4aa0bc738660" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8693d74f9ca58a57f81e33290d37abd5" category="paragraph"><block ref="8693d74f9ca58a57f81e33290d37abd5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="54ec027559e8cb37be54da6a71ba6e63" category="paragraph"><block ref="54ec027559e8cb37be54da6a71ba6e63" category="inline-image-macro-rx" type="image"></block></block>
  <block id="780ce03a8949a98dc11122083b493ba7" category="paragraph"><block ref="780ce03a8949a98dc11122083b493ba7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0f9b1c23e72398af55f49e1c186c08a1" category="paragraph"><block ref="0f9b1c23e72398af55f49e1c186c08a1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8deceed456e38579761b6f74cb6a622d" category="paragraph"><block ref="8deceed456e38579761b6f74cb6a622d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e4d0bf69638b007cb9a3a5bf173e57ad" category="paragraph"><block ref="e4d0bf69638b007cb9a3a5bf173e57ad" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a92cd8149a6e9e0fcf5b7e6cfd1bbf6a" category="paragraph"><block ref="a92cd8149a6e9e0fcf5b7e6cfd1bbf6a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2ac92ea2fe96038032e77a5244ff8ada" category="paragraph"><block ref="2ac92ea2fe96038032e77a5244ff8ada" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b248313f534e233f9a6155f8a4919aac" category="paragraph"><block ref="b248313f534e233f9a6155f8a4919aac" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8ae78a82d807f1873522dac87932d193" category="paragraph"><block ref="8ae78a82d807f1873522dac87932d193" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c498909fdbe99559943a55360091ec41" category="paragraph"><block ref="c498909fdbe99559943a55360091ec41" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8bae6995b49758e07b2ce0b2ce8c03dd" category="paragraph"><block ref="8bae6995b49758e07b2ce0b2ce8c03dd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7fcb1884a4c99208bc8ce2172ecf5bea" category="paragraph"><block ref="7fcb1884a4c99208bc8ce2172ecf5bea" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a254cd213ae260bb546051560ac3febe" category="paragraph"><block ref="a254cd213ae260bb546051560ac3febe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="11955bb281ad17761bb704aaa81280c0" category="paragraph"><block ref="11955bb281ad17761bb704aaa81280c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f17f01baaedf7370779a00e3853677ba" category="paragraph"><block ref="f17f01baaedf7370779a00e3853677ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="355dc6b033e8a213d7dae817c6e13b50" category="paragraph"><block ref="355dc6b033e8a213d7dae817c6e13b50" category="inline-image-macro-rx" type="image"></block></block>
  <block id="78d37a7f254e84c36902ce5704c6ab79" category="paragraph"><block ref="78d37a7f254e84c36902ce5704c6ab79" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5f8d58a12bc433f7b344b7c33f1904e6" category="paragraph"><block ref="5f8d58a12bc433f7b344b7c33f1904e6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="87190992f3ceae55c586605f4aa1de5c" category="paragraph"><block ref="87190992f3ceae55c586605f4aa1de5c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c143bb79bc8328f8a6c0bffcf736eefd" category="paragraph"><block ref="c143bb79bc8328f8a6c0bffcf736eefd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="034ae50adccad2698bbc81fb44360894" category="summary">了解如何实施StorageGRID 11.5和Veritas Enterprise Vault 14.1的基本配置。</block>
  <block id="72eb1b8133e1520504346d36c5fac9d1" category="doc">配置StorageGRID和Veritas Enterprise Vault</block>
  <block id="ef4718392779b0750969af799ad151bb" category="paragraph">了解如何实施StorageGRID 11.5或更高版本以及Veritas Enterprise Vault 14.1或更高版本的基本配置。</block>
  <block id="372d595448d97ec17e5756118c9e3486" category="section-title">配置StorageGRID和Veritas Enterprise Vault的前提条件</block>
  <block id="94940e3825739e86d43d20b71a2bdb81" category="list-text">在使用Veritas Enterprise Vault配置StorageGRID之前、请验证以下前提条件：</block>
  <block id="e1b2071d5db8fac237a17040ea82b8ef" category="list-text">已安装Veritas Enterprise Vault 14.1或更高版本。</block>
  <block id="367e5e1fbaf108d8dbf97e500327dc8b" category="list-text">已创建存储组和存储存储。有关详细信息、请参见《Veritas Enterprise Vault管理指南》。</block>
  <block id="6c73463ffeddef6e57a34a14bafd3419" category="inline-link">Veritas知识库文章</block>
  <block id="ddf1e2343a6c7e2d16b8597f3e961548" category="list-text">如果使用自签名证书、请将StorageGRID自签名CA证书添加到企业存储服务器。有关详细信息，请参见此<block ref="96b16704d1203901b729f96db3886a57" category="inline-link-rx"></block>。</block>
  <block id="15022c2cf46544f0b3a7bf0180d8ebe5" category="list-text">更新并应用最新的企业存储配置文件以启用受支持的存储解决方案、例如NetApp StorageGRID。有关详细信息，请参见此<block ref="9c1aa3a99115a819862872de47644b63" category="inline-link-rx"></block>。</block>
  <block id="2b95da50afe417c5fdfe08882fc95a9a" category="section-title">使用Veritas Enterprise Vault配置StorageGRID</block>
  <block id="5785dc46caf2287e47aa188701676c27" category="paragraph">要使用Veritas Enterprise Vault配置StorageGRID、请完成以下步骤：</block>
  <block id="e5c9b80471f693a4c039200dd452f7e7" category="inline-image-macro">介质/Veritas/Veritas企业存储</block>
  <block id="1536385a41cec4888a286618d0d7ee3e" category="paragraph"><block ref="1536385a41cec4888a286618d0d7ee3e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2692509554a8301ebc2f9196b6b9e543" category="inline-image-macro">介质/Veritas/Veritas-Enterprise vault-2</block>
  <block id="418979d7615d02076bc62d5b450374e4" category="paragraph"><block ref="418979d7615d02076bc62d5b450374e4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="19d94215e1bbbf668cc58181d0a1d895" category="inline-image-macro">Veritas/Veritas-new-partition</block>
  <block id="55eaf5c34b171bde6516f1a74103f3ce" category="paragraph"><block ref="55eaf5c34b171bde6516f1a74103f3ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9b5f6e03ed7ce22016b559be63917ac" category="inline-image-macro">Veritas/Veritas新分区-2</block>
  <block id="28757f2a18d6cf522e8bb4fc1c67febf" category="paragraph"><block ref="28757f2a18d6cf522e8bb4fc1c67febf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7455d4ada214bb6150c4ee66c1ab09f0" category="list-text">存储分段名称：预先创建的目标存储分段的名称。Veritas Enterprise Vault不会创建存储分段。</block>
  <block id="8852ee40f2eb647ba4c5cf75d93a5771" category="inline-image-macro">Veritas/Veritas新分区-3</block>
  <block id="e5bb5ea5b4f52f12bf40531ebfa8b110" category="paragraph"><block ref="e5bb5ea5b4f52f12bf40531ebfa8b110" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6e898938cfae63ee693fd08b9be8a594" category="inline-image-macro">Veritas/Veritas-new-partition—4</block>
  <block id="ea846d505fa8c64ca8e878a6bb7d89eb" category="paragraph"><block ref="ea846d505fa8c64ca8e878a6bb7d89eb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b0d36dc673bf1097c502e15527f31976" category="inline-image-macro">Veritas/Veritas-new-partition－5</block>
  <block id="fe808ac3f774c55de92ec52f7d85a2f8" category="paragraph"><block ref="fe808ac3f774c55de92ec52f7d85a2f8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4de953b055a0d26d8590cf0bcd5bf01c" category="inline-image-macro">Veritas/Veritas-new-partition－6</block>
  <block id="41ae360fa86c17098be8743d2d050c92" category="paragraph"><block ref="41ae360fa86c17098be8743d2d050c92" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b6fe3747f6c4d112310386474c670a3f" category="inline-image-macro">Veritas/Veritas-new-partition－7</block>
  <block id="22b735d20517887fa4f06cf49bd4d449" category="paragraph"><block ref="22b735d20517887fa4f06cf49bd4d449" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3eebf8254fde4e8d2c6a816c4320f21e" category="inline-image-macro">网址：veritas-create-bucket.png</block>
  <block id="95291b4cdd19db828a0d045364518fbd" category="paragraph"><block ref="95291b4cdd19db828a0d045364518fbd" category="inline-image-macro-rx" type="image"></block></block>
  <block id="094b5581d50a9ae9dfef7ab77a3db688" category="inline-image-macro">网址：veritas-create-bucket-2.png</block>
  <block id="380edd7a9cba0915b0ad9309b0db539c" category="paragraph"><block ref="380edd7a9cba0915b0ad9309b0db539c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dbfd501fb101bf802a7ee81a1fac837d" category="inline-image-macro">网址：veritas-overview.png</block>
  <block id="df94ba3f30910a83d6bd5b670f112e3b" category="paragraph"><block ref="df94ba3f30910a83d6bd5b670f112e3b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="c921c13e8cd3cb94aadeb8c25da58859" category="inline-image-macro">Veritas/Veritas-s3-object-lock</block>
  <block id="2c5ae5790fe14e007a8ce6ef21272460" category="paragraph"><block ref="2c5ae5790fe14e007a8ce6ef21272460" category="inline-image-macro-rx" type="image"></block></block>
  <block id="305ed56e9cc761a6928f149d8a7fed68" category="inline-image-macro">veritas/veritas-new-partition－8</block>
  <block id="d42aa79a11be13d3f0d5a09babb765cb" category="paragraph"><block ref="d42aa79a11be13d3f0d5a09babb765cb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="64b0c79c0081965bc7ce9c6cc6a3f774" category="paragraph">StorageGRID架构部署通常采用多站点模式。站点可以是主动-主动站点、也可以是主动-被动站点、用于灾难恢复。在灾难恢复场景中、请确保Veritas Enterprise Vault能够保持与其主存储(StorageGRID)的连接、并在站点发生故障期间继续导入和检索数据。本节简要介绍了双站点主动-被动部署的配置指导。 有关这些准则的详细信息、请参见 <block ref="8efc367b31c66b8aa3b87a5daa8b07fa" category="inline-link-macro-rx"></block> 页面或联系StorageGRID专家。</block>
  <block id="fc1d41b2ff28c31ef720aa29cbdb1625" category="section-title">使用Veritas Enterprise Vault配置StorageGRID的前提条件</block>
  <block id="568f836336942515cf2ad370aa171e55" category="inline-image-macro">veritas/veritas-cree-high-availability组</block>
  <block id="97b5b099aca023f024fd3ca7169b6e8e" category="paragraph"><block ref="97b5b099aca023f024fd3ca7169b6e8e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6a856baab30258bd4bf6b3c8e997af43" category="inline-image-macro">veritas/veritas-edit-high-availability组</block>
  <block id="d921e5624986d96c28deaf8b0b782be3" category="paragraph"><block ref="d921e5624986d96c28deaf8b0b782be3" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e17fb1e3d997076f324b7246b7f7dff3" category="list-text">此虚拟IP (VIP)地址应与Veritas Enterprise Vault分区配置期间使用的S3主机名相关联。VIP地址将流量解析为Site1、在Site1发生故障期间、VIP地址会将流量透明地重新路由到Site2。</block>
  <block id="0def3d0da889c0e13e06d8e1ff2af9dd" category="inline-image-macro">veritas/veritas-storage-pool-细节-site-1</block>
  <block id="43ad61add042d6d64a01afe1db28f05c" category="paragraph"><block ref="43ad61add042d6d64a01afe1db28f05c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1c4cb0eddc44a68196819920f522f16a" category="inline-image-macro">veritas/veritas-storage-pool-细节-site-2</block>
  <block id="f4d48050c229a4cd522d6ca91d710a64" category="paragraph"><block ref="f4d48050c229a4cd522d6ca91d710a64" category="inline-image-macro-rx" type="image"></block></block>
  <block id="75381ece1664fa46e0387e8b6436f7ea" category="inline-image-macro">veritas/veritas-storage-pool-细节-site-3</block>
  <block id="3e2cf841de27a979e1d058590ff5e98e" category="paragraph"><block ref="3e2cf841de27a979e1d058590ff5e98e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="419754dcc8bb78c19b08aef3cde80cfb" category="list-text">从Veritas Enterprise Vault发送归档数据时、StorageGRID可确保一个副本存储在Site1中、另一个DR副本存储在Site2中。如果站点1发生故障、Enterprise Vault将继续从站点2进行加网和检索。</block>
  <block id="32b3440d0a295232731c116fa5442f36" category="admonition">这两种配置对于Veritas Enterprise Vault是透明的。S3端点、存储分段名称、访问密钥等均相同。无需在Veritas Enterprise Vault分区上重新配置S3连接设置。</block>
  <block id="f5ab4938048291a0a6cd674b47551852" category="summary">了解Veritas Enterprise Vault如何使用StorageGRID作为灾难恢复的主要存储目标。</block>
  <block id="e4d96bf38daf6358642e31e511c4e3ae" category="paragraph">本配置指南介绍了将NetApp®StorageGRID®配置为Veritas Enterprise Vault主存储目标的步骤。此外、还介绍了如何在灾难恢复(DR)情形下配置StorageGRID以实现站点故障转移。</block>
  <block id="b9faea4479e9fc1bc458b58b8247cda0" category="paragraph">StorageGRID为Veritas Enterprise Vault提供了一个与S3兼容的内部云备份目标。下图展示了Veritas Enterprise Vault和StorageGRID架构。</block>
  <block id="055f9879907c22c8cfd3c54bd9f610cb" category="inline-image-macro">Veritas/Veritas-Veritas企业存储和StorageGRID架构</block>
  <block id="52cb822768beb11d3d42a3f9b19804d9" category="paragraph"><block ref="52cb822768beb11d3d42a3f9b19804d9" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7a14e19b8ee1a0a04a0446df31d46f8c" category="list-text">Veritas Enterprise Vault 11.</block>
  <block id="6369bbbcf565d042b20a283550fe3ed1" category="list-text">Veritas Enterprise Vault 12.</block>
  <block id="9d9543f7e1d6b0664f04ff4f8a7c47b9" category="list-text">Veritas NetBackup 8.0</block>
  <block id="ff5cfc1dbf017ecb8959d053238bf56b" category="list-text">Veritas Enterprise Vault 14.</block>
  <block id="176411398f4cd808898ca8b28d32a473" category="list-text">Veritas Enterprise 14.2.2</block>
  <block id="630b3115bbfc0cab3a6c9f0257baa041" category="list-text">Veritas 10.1.1及更高版本</block>
  <block id="8bab4d54d9f4be0e126140976cdd93e4" category="list-text">ElASCSearch Snapshot (包括冻结层)</block>
  <block id="f12757e29dee512b70563c66186ae3d8" category="paragraph">建议始终保持最新、并为Veeam Backup &amp; Replication 12或12.1系统应用最新的修补程序。目前、我们建议至少安装Veeam 12修补程序P20230718。</block>
  <block id="d9077bfff46af079bd1370f652df5fc8" category="paragraph">对于Veeam部署、建议使用带有最新修补程序的NetApp StorageGRID 11.7或11.8.建议始终保持最新、并为StorageGRID系统应用最新的修补程序。</block>
  <block id="ab04d5a9409dc8a45ac13596c3483cbe" category="inline-link-macro">NetApp StorageGRID 11.8产品文档</block>
  <block id="0b27dbe2229bcc6cc460d4c9db01ca59" category="list-text"><block ref="0b27dbe2229bcc6cc460d4c9db01ca59" category="inline-link-macro-rx"></block></block>
  <block id="734ae27bd626f001863fc96cdf284a4c" category="sidebar">将基于对象的存储从ONTAP S3迁移到StorageGRID</block>
  <block id="7278573c930789840fac32f75102c4cb" category="sidebar">TR-4904：《使用Veritas Enterprise Vault配置StorageGRID》</block>
  <block id="c4661d92ec5bfd72a43733aea8dc23dd" category="sidebar">从ONTAP S3迁移到StorageGRID</block>
  <block id="d3aa740f8e2398fe1df8b4f9eb4d398c" category="sidebar">填充并复制存储分段</block>
  <block id="083e747ac97fd71c385f2c89f8eefdb7" category="sidebar">迁移用户和密钥、然后进行转换</block>
  <block id="81022eb5da399c3a2fd9f2b07db1afd3" category="sidebar">StorageGRID灾难恢复—使用Veritas Enterprise Vault配置StorageGRID以实现站点故障转移</block>
  <block id="454255deb718c7d2b26df2342f80d3d3" category="list-text">2024年2月2日： <block ref="890e1ea9b3a6310b9da56310b581c035" category="inline-link-rx"></block></block>
</blocks>