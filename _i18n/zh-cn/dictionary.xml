<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="03a51c290895d5f1a6828b0491c2a44a" category="summary">以下是此站点的最新更改。</block>
  <block id="490414e0366b091220802d406e52c076" category="doc">新增功能</block>
  <block id="8b69c0257aaf35a9ec0a1259d54ff096" category="paragraph">使用此文档集可了解如何在您的环境中启用应用程序和工具以及如何使用StorageGRID 测试功能。您可以在此处找到一些示例和指南、这些示例和指南在产品文档基础上进行了扩展、并提供了评估和集成StorageGRID 的后续步骤。</block>
  <block id="b8e7b465df7c5979dc731d06e84ce2cf" category="cell">版本。</block>
  <block id="ad0b6652f18f25a574f9f4900521e06b" category="cell">发生了哪些变化</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="36552b079970ffb2dd1314115af76c4b" category="paragraph">11.6.</block>
  <block id="b8c1c014b9752469294df284a3fc13cc" category="paragraph">初始版本。包括StorageGRID 11.2-11.6版的指南和经验证的第三方解决方案列表。</block>
  <block id="213bf2ec1d0bd70bddfd4c935885677a" category="summary">已针对StorageGRID 11.3进行验证的第三方解决方案</block>
  <block id="0147e507e7b15a9ed1a38c66a279beb6" category="doc">StorageGRID 11.3经验证的第三方解决方案</block>
  <block id="7190c305424285fe4256ab8cdf614311" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.3结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="ae0059acd69f3c963f558e0836885ebd" category="section-title">已在StorageGRID 上验证的第三方解决方案</block>
  <block id="76ad060973d3a7496e879a9a4e27c43b" category="paragraph">这些解决方案已与相应的合作伙伴合作进行了测试。</block>
  <block id="84fc43d78afb43b9be9fd32800c39e14" category="list-text">Activio</block>
  <block id="8026ca17ba2e3a987c9fc1ebbfa3b2f2" category="list-text">Cantemo</block>
  <block id="bfe4a98ea39df43ecba3c8d81fcc406a" category="list-text">Citrix内容协作</block>
  <block id="9f261daecd1acf3f272449558565c275" category="list-text">Commvault 11</block>
  <block id="9c7bdce226629cb4a20d49af20efddcf" category="list-text">Ctera门户6.</block>
  <block id="845c7d7e641b871eaa30a5ea02be05e5" category="list-text">达莱特</block>
  <block id="3f781d47f2e5d89a93134863d08f310b" category="list-text">Data Dynamics StorageX</block>
  <block id="608d7a3725a65397d284fed2077eca9c" category="list-text">默认X</block>
  <block id="7a0544f18be9ec8b7501804c3f19c86c" category="list-text">Interica</block>
  <block id="04f35663b44ba178a51b9ba61068586f" category="list-text">Komprise</block>
  <block id="99df5bd357117615d75315f590990b3a" category="list-text">很好</block>
  <block id="878104a806df63b5f965361247b7a859" category="list-text">Nasuni</block>
  <block id="14567310e264c20e4722d80d29f2ca18" category="list-text">OpenText文档16.4</block>
  <block id="a0446088f8be69cb1f7ca15146abf100" category="list-text">采用CyanGate Cloud的OpenText Media Management 16.5</block>
  <block id="3e9ddaaf6a6f980a64ddec983d935475" category="list-text">Panzura</block>
  <block id="10f5ba42ae6dbd321e57bede0c83ec2a" category="list-text">点归档网关2.0</block>
  <block id="c28db35a9854d4fa7280c032d2eae288" category="list-text">指向Storage Manager 6.4</block>
  <block id="bc038212039876aff8158c4afb937ef2" category="list-text">Primestream</block>
  <block id="d36bb4409abcdf753c1103a769bf94a9" category="list-text">Quantum StorNext 5.4.0.1</block>
  <block id="c758745dbf39c7b4da86cae8edf2ec63" category="list-text">Rubrik CDM 5.0.1 P1-1342</block>
  <block id="f27bd3342419229be7da8dd9234adbd4" category="list-text">Signiant</block>
  <block id="83b20ea3ae67e47021c38e81e4f589ca" category="list-text">Splunk智能存储</block>
  <block id="3c03c9aa39f09aa3bf70c853404ab185" category="list-text">varnish Enterprise 6.0.4</block>
  <block id="01d16ea73fb659ea507974db4f28b791" category="list-text">Veeam 9.5.4</block>
  <block id="683c5d7a06c262f5e2e17cbb84869a3d" category="list-text">Veritas Enterprise Vault 11</block>
  <block id="1f61ef960fbeb10906bd09932e1faa5e" category="list-text">Veritas Enterprise Vault 12</block>
  <block id="aa92d10a39cb2c4707a61d62d73be93f" category="list-text">Veritas NetBackup 8.0</block>
  <block id="2bfecc5738e4f19170da7b6787f2aac4" category="list-text">Viispine</block>
  <block id="e1b55d6b6904a9bbd61463de2b1306c9" category="summary">已针对StorageGRID 11.5进行验证的第三方解决方案</block>
  <block id="5c77045b793e49a2c9356629fa42247c" category="doc">StorageGRID 11.5经验证的第三方解决方案</block>
  <block id="a3c271786c8eb7cf6e9beebf6c8792f6" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.5结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="0f678aab91e44750e132ec71d8e8b27d" category="list-text">Moonwalk Universal</block>
  <block id="e8089c684949d337dcfc2355146ea8ee" category="list-text">OpenText文档21.4</block>
  <block id="cfbf45bf3636e57e75d2d19e94581808" category="list-text">OpenText InfoArchive 16 EP7</block>
  <block id="95e97cbf382fde28370be90f19cb74b7" category="list-text">Veeam 11.</block>
  <block id="6edef17a1a8c1377d059d1da9e0875fa" category="list-text">Vertica 10.x</block>
  <block id="5c89f8abd30585311811b6067eeaf96d" category="section-title">第三方解决方案已在具有对象锁定的StorageGRID 上进行验证</block>
  <block id="6876ee74f7cdb6259933dce90e333623" category="summary">已针对StorageGRID 11.2进行验证的第三方解决方案</block>
  <block id="f0579cc7b6353a01b20e6af293042053" category="doc">StorageGRID 11.2验证了第三方解决方案</block>
  <block id="02baabb078f56a4b2eaed00d5476df83" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.2结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="5b334f642369a1ed86af886a70b9a70a" category="summary">已针对StorageGRID 11.4进行验证的第三方解决方案</block>
  <block id="bf535f2769af42cb4a0ef69bf5605f50" category="doc">StorageGRID 11.4经验证的第三方解决方案</block>
  <block id="e9a092b9753e7fc3b79569222be951af" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.4结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="598a701d550c449b8c8b6fbf28ac59f7" category="summary">已针对StorageGRID 11.6进行验证的第三方解决方案</block>
  <block id="95cf74ab542e1ad06be5bdbad0153b3e" category="doc">StorageGRID 11.6经验证的第三方解决方案</block>
  <block id="fbc9e339224fe0b0576e98b4bab07ea8" category="paragraph">以下第三方解决方案已通过验证、可与StorageGRID 11.6结合使用。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="bb2bd99338b18762ef6953ad2cbfafc7" category="list-text">Apache Kafka</block>
  <block id="59c21e020bd89c6971219d3b6d98e955" category="list-text">富士尼尔姆对象归档</block>
  <block id="09af2487255bbc1b9747ab2c0f958375" category="list-text">GitHub企业服务器</block>
  <block id="391115de0fbff45e2374fc17057efc2a" category="list-text">IBM文件集</block>
  <block id="156393fd2d6d5720c9c89cf61b4b63af" category="list-text">IBM Spectrum Protect Plus</block>
  <block id="ec8f51b51cf3e627e98adab6a9707073" category="list-text">Microsoft SQL Server大数据集群</block>
  <block id="003600b94a5f1f52b3d6bc2e8863271a" category="list-text">PixitMedia ngena</block>
  <block id="e53636996ad9257c31aa596f6c267dbd" category="list-text">轻松实现存储</block>
  <block id="dbaa460bd61bfe1c91c1c136338013e6" category="list-text">Veritas Enterprise Vault 14</block>
  <block id="f1ef2cbfa857a0d2a7b845499f219ef8" category="list-text">Weka v3.10或更高版本</block>
  <block id="58440fea435f9474a314a8f58636ba4e" category="list-text">员工</block>
  <block id="1c4333b49a7b43ae27f876070a712cb8" category="list-text">Commvault 11功能版本26</block>
  <block id="d78ff41b8e44ae00b917e9776f3ecd41" category="summary">NetApp与我们的合作伙伴合作、已对这些解决方案进行了验证、以供StorageGRID 使用。查看本节中的信息、了解哪些解决方案已通过验证、并在适用时获取其他说明。</block>
  <block id="4a5b1a544c031534fcf2fa85a625ce63" category="doc">经验证的第三方解决方案：概述</block>
  <block id="df245b9cfd302a8af7987f33f6ed60df" category="inline-link">立即成为联盟合作伙伴</block>
  <block id="98e55b10201a07cc0419d8c723a34cf1" category="paragraph">与NetApp携手合作、在您创建经过测试的同类最佳NetApp解决方案时、加快产品组合创新、提高市场知名度并提高销量。<block ref="c243ccaaa8a956e841065a878a76ac60" category="inline-link-rx"></block>。</block>
  <block id="a1224e8e1d42e54574d1b861a3df5f2f" category="summary">NetApp StorageGRID 是一款软件定义的对象存储套件，支持公有 ，私有云和混合多云环境中的各种用例。StorageGRID 利用自动化生命周期管理等行业领先的创新技术来存储，保护，保护和保留非结构化数据，以便在很长时间内用于多种用途。</block>
  <block id="696ea9ebe2a9f57bb062aba5c1d58b10" category="doc">如何在您的环境中启用StorageGRID</block>
  <block id="932b23c9adc6de8aea5fed582f4afb76" category="summary">S3cmd是一个用于S3操作的免费命令行工具和客户端。您可以使用S3cmd在StorageGRID 上测试和演示S3访问。</block>
  <block id="450d1a071fcbc323ff4710aa7452fdd5" category="doc">使用S3cmd测试和演示StorageGRID 上的S3访问</block>
  <block id="1905fbd5d74fe86a969eaff7ff00f7fc" category="paragraph">S3cmd是一个用于S3操作的免费命令行工具和客户端。您可以使用s3cmd在StorageGRID 上测试和演示S3访问。</block>
  <block id="744511f8f2fbc194c76d0d79673bfae6" category="section-title">安装和配置S3cmd</block>
  <block id="afb33c859ca6b8231970317fad403dd6" category="inline-link">命令行S3客户端</block>
  <block id="43ce8a46c220f7e1200c26cf9fdda89e" category="paragraph">要在工作站或服务器上安装S3cmd、请从下载它<block ref="7378b19c1bb6e55a9a8910d8ad3a0679" category="inline-link-rx"></block>。s3cmd会作为一种工具预先安装在每个StorageGRID 节点上、以协助进行故障排除。</block>
  <block id="aeb3ce9dba65427ab03cba1cf27c246b" category="section-title">初始配置步骤</block>
  <block id="524f45072627111da5b21bda68e3200d" category="list-text">s3cmd -configure</block>
  <block id="71b08894081527233da8439cba4e157c" category="list-text">请仅提供access_key和secret_key、其余请保留默认值。</block>
  <block id="f87598afee396ede6fded5c127f5710b" category="list-text">是否使用提供的凭据测试访问？[Y/n]：n (跳过测试、因为测试将失败)</block>
  <block id="8f8b232ac491b44abd4e3c73095be26f" category="list-text">是否保存设置？[Y/N] y</block>
  <block id="20fc045a3cb98f5d53190a084eab5777" category="list-text">配置已保存到"/root/.s3cfg"</block>
  <block id="2a0dc1b5996fa32c9cff4613164a9fa7" category="list-text">在.s3cfg中、使"="符号后面的字段host_base和host_bucket为空：</block>
  <block id="d6a40235079422dc94593513bb262a4f" category="list-text">host_base =</block>
  <block id="deffd87ba6416775ccd717de678a52f6" category="list-text">host_bucket =</block>
  <block id="0c4b929b440945de149593225ef4d11a" category="admonition">如果在步骤4中指定host_base和host_bucket、则无需在命令行界面中使用-host指定端点。示例</block>
  <block id="24bf95be39d5b143037e293fd845755a" category="section-title">基本命令示例</block>
  <block id="40ff4deace0a58ba7da244066c61b419" category="list-text">*创建存储分段：*</block>
  <block id="2b55d1dacc7066c55f775211c6d2d6fb" category="paragraph">`s3cmd MB S3：//s3cmdbucket -host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="b3cfb276af36f62a54a7575fde41c5c3" category="list-text">*列出所有分段：*</block>
  <block id="5a9e189ea6aff52db6c42ed8dc13a581" category="paragraph">`s3ls命令-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="a500560628b5b26184ccd1c5bb710ad7" category="list-text">*列出所有分段及其内容：*</block>
  <block id="e39715fa32da966d21a67b6f4b657375" category="paragraph">`s3cmd la -host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="a0e8caa1006eb0cb202216f58d3ef3bc" category="list-text">*列出特定分段中的对象：*</block>
  <block id="99cf6d132b68c3ee42ec1c2868670095" category="paragraph">`s3cmd ls s3：//&lt;bucket&gt;-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="1253bae3769a3e203047d32867d8d8b5" category="list-text">*删除分段：*</block>
  <block id="33baac546bf69d3cba8e4e55809362c2" category="paragraph">`s3RB cmd S3：//s3cmdbucket -host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="4baf4031f964504db7c312e4eb5032f9" category="list-text">*放置对象：*</block>
  <block id="99ada43576cbc748a543ef56c15239fd" category="paragraph">`s3cmd PUT &lt;file&gt; s3：//&lt;bucket&gt;-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="cf50e7bb0c83a17917775f6502fd592c" category="list-text">*获取对象：*</block>
  <block id="7afaf73cd0748a5fd70da28b10e8f9e3" category="paragraph">`s3cmd get S3：//&lt;bucket&gt;/&lt;object&gt;&lt;file&gt;-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="11ce41b9c95136feb022ed6b7dc35f56" category="list-text">*删除对象：*</block>
  <block id="85977fbb9d2313217f8fcad9ab99ec24" category="paragraph">`s3cmd del S3：//&lt;bucket&gt;/&lt;object&gt;-host=&lt;endpoint&gt;：&lt;port&gt;-no-check-certificate`</block>
  <block id="bb59d42d40970acdd091a1d9e3013ed1" category="summary">本指南介绍在NetApp StorageGRID 上使用公共存储创建Vertica Eon模式数据库的操作步骤。</block>
  <block id="3944f79e14bd534dce03dc9377e507b2" category="doc">使用NetApp StorageGRID 作为公共存储的Vertica Eon模式数据库</block>
  <block id="0b79795d3efc95b9976c7c5b933afce2" category="section-title">简介</block>
  <block id="1351a64c902bed1342b8e0b3b15016e1" category="paragraph">Vertica是一款分析数据库管理软件。它是一个柱形存储平台、专为处理大量数据而设计、可在传统密集型情形下实现非常快速的查询性能。Vertica数据库以两种模式之一运行：Eon或Enterprise。您可以在内部或云中部署这两种模式。</block>
  <block id="0ff6ef083e5937ae37d85f7e32b9c415" category="paragraph">Eon和企业模式在数据存储位置方面主要不同：</block>
  <block id="742f8282711edec5deb4f1c27cba460b" category="list-text">Eon模式数据库使用公共存储来存储其数据。这是Vertica的建议。</block>
  <block id="10b13e2ff5733c9c1736ca88a58fce37" category="list-text">企业模式数据库将数据本地存储在构成数据库的节点的文件系统中。</block>
  <block id="da071698872dd5a11fcfcdc6e87ce00b" category="section-title">Eon模式架构</block>
  <block id="eacdb46886950f67125163a0ac7c547b" category="paragraph">Eon模式可将计算资源与数据库的公用存储层分离、从而使计算和存储可以单独进行扩展。Eon模式下的Vertica经过优化、可处理各种工作负载、并通过使用单独的计算和存储资源彼此隔离。</block>
  <block id="c9537751a44904cbd1595766ea947357" category="paragraph">Eon模式将数据存储在名为公共存储的共享对象存储中、即S3存储分段、托管在内部或Amazon S3上。</block>
  <block id="ae79effc6d45e14ea71e610bb3d9669c" category="image-alt">使用公用存储的Vertica Eon模式集群</block>
  <block id="d9bdcaa0d990474197d196d3848befca" category="section-title">公用存储</block>
  <block id="f208cb9b2076d8b42eb21a99f5e12b86" category="paragraph">Eon模式不会在本地存储数据、而是对所有数据和目录(元数据)使用一个公共存储位置。公共存储是数据库的集中存储位置、在数据库节点之间共享。</block>
  <block id="d00864c661d9eea6d6bc179f2c282e45" category="paragraph">公共存储具有以下属性：</block>
  <block id="e7bc675af5b1688f139c70343df7051b" category="list-text">与单个计算机上的磁盘存储相比、云或内部对象存储中的公共存储更具弹性、并且由于存储故障而不易受到数据丢失的影响。</block>
  <block id="e1a644db903707c56d177424599944ca" category="list-text">任何使用相同路径的节点都可以读取任何数据。</block>
  <block id="363e9f9d5ab59fe87846e1fa6280937c" category="list-text">容量不受节点上磁盘空间的限制。</block>
  <block id="e41c3434b54256834c20bb764ccb3dfb" category="list-text">由于数据是以社区方式存储的、因此您可以灵活地扩展集群以满足不断变化的需求。如果数据存储在节点本地、则添加或删除节点需要在节点之间移动大量数据、以便将其从要删除的节点或新创建的节点上移出。</block>
  <block id="2aa2d7b479eff89354f5a5d47c966c7b" category="section-title">仓库</block>
  <block id="69b552cd0cc8cd7cedbb740166c2b67d" category="paragraph">公共存储的一个缺点是速度。从共享云位置访问数据比从本地磁盘读取数据要慢。此外、如果许多节点同时从公共存储读取数据、则与该存储的连接可能会成为瓶颈。为了提高数据访问速度、Eon模式数据库中的节点会维护一个名为存储库的本地数据磁盘缓存。执行查询时、节点会首先检查所需数据是否位于仓库中。如果是、则它将使用数据的本地副本完成查询。如果数据不在存储库中、则节点将从公共存储中提取数据、并在存储库中保存一份副本。</block>
  <block id="adefcaa5a25e4b7dd144fc0f19c1cfcd" category="section-title">NetApp StorageGRID 建议</block>
  <block id="770d5275891c4480deae83e407a6f54f" category="paragraph">Vertica将数据库数据存储在对象存储中、即数千(或数百万)个压缩对象(观察到的大小为每个对象200到500 MB)。当用户运行数据库查询时、Vertica会使用byte-range get调用并行从这些压缩对象检索选定的数据范围。每个字节范围GET大约为8 KB。</block>
  <block id="041a4ffdefdbba3e879952330449b52f" category="paragraph">在10 TB数据库仓库用户查询测试期间、每秒向网格发送4、000到10、000个GET (字节范围GET)请求。在使用SG6060设备运行此测试时、尽管每个设备节点的CPU利用率百分比较低(约为20%到30%)、但2/3的CPU时间正在等待I/O在SGF6024上观察到I/O等待的百分比非常小(0%到0.5%)。</block>
  <block id="ee5b06737289123ef2b5504214d0a959" category="paragraph">由于对小型IOPS的需求较高且延迟要求非常低(平均值应小于0.01秒)、NetApp建议对对象存储服务使用SFG6024。如果非常大的数据库需要使用SG6060、则客户应与Vertica客户团队合作进行仓库规模估算、以支持主动查询的数据集。</block>
  <block id="69eb0bfa315677fb31292eb1879ef1e2" category="paragraph">对于管理节点和API网关节点、客户可以使用SG100或SG1000。选择此选项取决于并行用户查询请求的数量和数据库大小。如果客户希望使用第三方负载平衡器、NetApp建议为高性能需求工作负载配置一个专用的负载平衡器。有关StorageGRID 规模估算、请咨询NetApp客户团队。</block>
  <block id="75a344cafb10d96419edf5a61e63c7c0" category="paragraph">其他StorageGRID 配置建议包括：</block>
  <block id="5b0c5b5e09678e4458f93ea143915cd4" category="list-text">*网格拓扑*。请勿在同一网格站点上将SGF6024与其他存储设备型号混合使用。如果您希望使用SG6060进行长期归档保护、请在其自己的网格站点(物理或逻辑站点)中为活动数据库保留具有专用网格负载平衡器的SGF6024、以提高性能。在同一站点混用不同型号的设备会降低站点的整体性能。</block>
  <block id="a8b59be6737824c8ebdf70e871ae770b" category="list-text">*数据保护*。使用复制副本进行保护。请勿对活动数据库使用纠删编码。客户可以使用纠删编码对非活动数据库进行长期保护。</block>
  <block id="37b5ca073879940e05a508cb8e173209" category="list-text">*请勿启用网格压缩*。Vertica会先压缩对象、然后再存储到对象存储。启用网格压缩不会进一步节省存储使用量、并且会显著降低字节范围GET性能。</block>
  <block id="e0a0f5ab016a2e63cf33ff41b6c64f8d" category="list-text">* HTTP与HTTPS S3端点连接*。在基准测试期间、我们观察到从Vertica集群到StorageGRID 负载平衡器端点使用HTTP S3连接时、性能提高了大约5%。此选项应根据客户的安全要求来选择。</block>
  <block id="4b28b0ac82f7df42e45ed03d7ec68cbe" category="paragraph">Vertica配置的建议包括：</block>
  <block id="12e901de5151934289876684be69dbd3" category="list-text">读取和写入操作已启用* Vertica数据库默认存储库设置(值= 1)*。NetApp强烈建议保持启用这些仓库设置以提高性能。</block>
  <block id="dd75d17318890d52ab1d8e037befc36f" category="inline-xref">禁用流限制</block>
  <block id="b5cea23fe7560dccda4bff6fe086b074" category="list-text">*禁用流式传输限制*。有关配置详细信息、请参见一节 <block ref="622e251fe1340a5a963a60975f5cfd66" category="inline-xref-macro-rx"></block>。</block>
  <block id="a49ece59a164bea53c1c444816a1423e" category="section-title">在StorageGRID 上使用公用存储在内部安装Eon模式</block>
  <block id="c120fe39689790c17f819d12b1470734" category="inline-link-macro">在内部安装Eon模式数据库</block>
  <block id="60c5f0d9d4093b532349fb2c84a2f907" category="paragraph">以下各节介绍了在StorageGRID 上使用公共存储在内部安装Eon模式的顺序操作步骤。用于配置内部简单存储服务(S3)兼容对象存储的操作步骤 类似于Vertica指南中的操作步骤。 <block ref="291481b0beedb487e265883c3de1da25" category="inline-link-macro-rx"></block>。</block>
  <block id="18d45b04dd1a7895a2c977550f8911d7" category="paragraph">以下设置用于功能测试：</block>
  <block id="afdaec41fcd7f8ba541d0750dcbd6960" category="list-text">StorageGRID 11.4.0.4</block>
  <block id="c6624074e9b8a278bfe04013c96fc36e" category="list-text">Vertica 10.1.0</block>
  <block id="e2faa2feaa265e01fe33c216af9efb3d" category="list-text">使用三个虚拟机(VM)和CentOS 7.x操作系统为Vertica节点构建集群。此设置仅用于功能测试、不适用于Vertica生产数据库集群。</block>
  <block id="fe8be754482a7a11d9d5a2d53443cedc" category="paragraph">这三个节点都设置了安全Shell (SSH)密钥、以允许在集群中的节点之间使用SSH而不使用密码。</block>
  <block id="f5d7d5da5cd7e937a30a5f247eee8768" category="section-title">NetApp StorageGRID 需要提供的信息</block>
  <block id="784d884ec512d4e088d2a6cb0c7a12ec" category="paragraph">要在StorageGRID 上使用公共存储在内部安装Eon模式、您必须具备以下前提条件信息。</block>
  <block id="9ce37b571d32bd29d59a6463c83b9056" category="list-text">StorageGRID S3端点的IP地址或完全限定域名(FQDN)和端口号。如果您使用的是HTTPS、请使用在StorageGRID S3端点上实施的自定义证书颁发机构(CA)或自签名SSL证书。</block>
  <block id="222a56bb23dfff9aa9774dd9c3e4ee56" category="list-text">存储分段名称。它必须已预先存在且为空。</block>
  <block id="fdae6c2e4ab36d6033d962c50f414ccb" category="list-text">访问密钥ID和密钥访问密钥、对存储分段具有读写访问权限。</block>
  <block id="98c67820d16a1b9909ecb5354f6822a6" category="section-title">创建授权文件以访问S3端点</block>
  <block id="beaa6107ac08a69977170ef5066ba7d5" category="paragraph">在创建授权文件以访问S3端点时、需要满足以下前提条件：</block>
  <block id="7a83bfd6cbc9c75248c5c1aa0561e094" category="list-text">已安装Vertica。</block>
  <block id="52bb7b8803b5d17a4da99db7aba31c93" category="list-text">集群已设置、配置完毕、可用于创建数据库。</block>
  <block id="aa3fedd0a7a12417c91b0d938a4d2f1d" category="paragraph">要创建授权文件以访问S3端点、请执行以下步骤：</block>
  <block id="b87e30a2e9d3e21c51073e1db74466e2" category="list-text">登录到要运行`admintools`的Vertica节点以创建Eon模式数据库。</block>
  <block id="302df0b551a339ce9b649c1c77f6f22f" category="paragraph">默认用户为`dbadmin`、在Vertica集群安装期间创建。</block>
  <block id="32307e5a5d0dcaf9f32db0202471f86a" category="list-text">使用文本编辑器在`/home/DBadmin`目录下创建文件。文件名可以是所需的任何内容、例如、`sg_auth.conf`。</block>
  <block id="c13f6f849620f8cc13bc4474d9555200" category="list-text">如果S3端点使用的是标准HTTP端口80或HTTPS端口443、请跳过端口号。要使用HTTPS、请设置以下值：</block>
  <block id="3068a18f4c22a22b0a2ecd5b1416a5ec" category="list-text">`awsenablehttps = 1`、否则将值设置为`0`。</block>
  <block id="116bd825db022c3159b1677a3dc64f06" category="list-text">`awsauth =&lt;S3 access key ID&gt;：&lt;机密访问密钥&gt;`</block>
  <block id="1d33a1b42749a2480d0f6640c5ff2e84" category="list-text">`awsendpoint =&lt; StorageGRID S3 Endpoint&gt;：&lt;端口&gt;`</block>
  <block id="e6e1ee0e7535b2e405ebb8e300b98120" category="paragraph">要对StorageGRID S3端点HTTPS连接使用自定义CA或自签名SSL证书、请指定证书的完整文件路径和文件名。此文件必须位于每个Vertica节点上的同一位置、并对所有用户具有读取权限。如果StorageGRID S3端点SSL证书由公共已知CA签名、请跳过此步骤。</block>
  <block id="696e259f94c7ad1305f19356063ef22a" category="paragraph">`−awscfilm =&lt;文件路径/文件名&gt;`</block>
  <block id="0d1ac53170a5118fa04c541efad5bb4d" category="paragraph">例如、请参见以下示例文件：</block>
  <block id="fc77af791d1dc32525fcc72feee625e1" category="admonition">在生产环境中、客户应在StorageGRID S3负载平衡器端点上实施一个由公共已知CA签名的服务器证书。</block>
  <block id="59826e109f3e784088f86690d77d3668" category="section-title">在所有Vertica节点上选择存储库路径</block>
  <block id="b4129381183bb3a2dcc258f9cf71eee3" category="paragraph">在每个节点上为存储库存储路径选择或创建一个目录。为depot storage path参数提供的目录必须具有以下内容：</block>
  <block id="a77408fa769995f6c1b1614db78cd9d3" category="list-text">集群中所有节点上的相同路径(例如、`/home/DBadmin/depot`)</block>
  <block id="a3505e1f8f85c906e127d552d198d4ed" category="list-text">可由DBadmin用户读取和写入</block>
  <block id="05a29aef1a17d794559074061ce7180e" category="list-text">存储充足</block>
  <block id="a11c22527e5b1ee68fbaab45fce06809" category="inline-link-macro">估算Eon模式数据库的Vertica集群规模</block>
  <block id="00dadf185ad569b9ff9af5c62063d2ec" category="paragraph">默认情况下、Vertica会将包含目录的文件系统空间的60%用于存储库存储。您可以在`create_db`命令中使用`-storage-size`参数来限制存储库的大小。请参见 <block ref="5ed72ba4f95868ac00a71daae1b19940" category="inline-link-macro-rx"></block> 有关Vertica规模估算一般准则的文章、或者咨询您的Vertica客户经理。</block>
  <block id="298b1561e22818ad31df6e4836a6aca2" category="paragraph">如果不存在存储库路径、`admintools create_db`工具会尝试为您创建一个路径。</block>
  <block id="4536a0f0846353aa5de6714204bd897a" category="section-title">创建Eon内部数据库</block>
  <block id="6ed9ef1283f8a665ad7dbfe450f4616c" category="paragraph">要创建Eon内部数据库、请执行以下步骤：</block>
  <block id="c8fac0ae7f28a985c6f7041e704cb9e9" category="list-text">要创建数据库、请使用`admintools create_db`工具。</block>
  <block id="ba1f54172ea851b435ebad930979214e" category="paragraph">以下列表简要说明了本示例中使用的参数。有关所有必需参数和可选参数的详细说明、请参见Vertica文档。</block>
  <block id="d560ea5a8e684843d3e61026f97988ea" category="inline-xref">"创建授权文件以访问S3端点"</block>
  <block id="49231ccf7e1f2892d02e363b3996f6b1" category="list-text">-x &lt;在中创建的授权文件的路径/文件名 <block ref="ff01d755c02cf9eac8acabe776f4ae31" category="inline-xref-macro-rx"></block> &gt;。</block>
  <block id="f405bc9fea0f983aec86bf3b39598931" category="paragraph">成功创建后、授权详细信息将存储在数据库中。您可以删除此文件、以避免公开S3密钥。</block>
  <block id="8bb92892cb170f0a2e9faa38b08707d2" category="list-text">-communal-storage-location &lt;S3：//storagegrid bucketname&gt;</block>
  <block id="730286a138b893db744ec9b6d5eb53cc" category="list-text">-s &lt;用于此数据库的Vertica节点的逗号分隔列表&gt;</block>
  <block id="ff3ce7ef8f8faa42ab218e0e6a952005" category="list-text">-d &lt;要创建的数据库名称&gt;</block>
  <block id="cbfebf618a39b6eebd458ebccb35811d" category="list-text">-p &lt;要为此新数据库设置的密码&gt;。例如、请参见以下命令示例：</block>
  <block id="f0f9a3849fe5730a2c9d6f1fec222ca3" category="paragraph">根据数据库的节点数、创建新数据库需要几分钟的持续时间。首次创建数据库时、系统将提示您接受许可协议。</block>
  <block id="3b8065a08e54f4e0956f3b822ffb8a91" category="paragraph">例如、请参见以下授权文件示例和`create db`命令：</block>
  <block id="011babd6bb6bec44f7f5c42f6c3e7a38" category="cell">对象大小(字节)</block>
  <block id="e6ada8a15e80a48f024520ab8ffb24a5" category="cell">存储分段/对象密钥完整路径</block>
  <block id="8f283c17785e8043629e6a7e1d721498" category="paragraph">`61`</block>
  <block id="194ed05748ef16c0095eca9bbdccfd15" category="paragraph">`s 3：//Vertica/051/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a07/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a07_0_0_0.dfs`</block>
  <block id="729c949b77c1b640517910da82d0009e" category="paragraph">`145`</block>
  <block id="02dde8fef0da052a66cc199f0d934f95" category="paragraph">`s 3：//Vertica/2c4/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a3d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a3d_0dfdfd0.dfdf`</block>
  <block id="436383be1a5ea8f6f9a05e8b93c69d9d" category="paragraph">`146`</block>
  <block id="70e1bd6136404a49a88f7fb3dd3465c3" category="paragraph">`s 3：//Vertica/33c/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a1d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a1d_0_dfdfd.df`</block>
  <block id="715eac993d42a26a194f16062429238e" category="paragraph">`40`</block>
  <block id="29cbdad4e0c6e39f8d84a0d5416eb1e8" category="paragraph">`s 3：//Vertica/382/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a31/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a31_0_0.dfs`</block>
  <block id="4ddd669e9e695a865f4ee77b92335a6b" category="paragraph">`s 3：//Vertica/42f/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a21/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a21a21a21_0_0.dfs`</block>
  <block id="a0531813d4911f4468a61b1a8b8be492" category="paragraph">`34`</block>
  <block id="f99e684ff65b8e3fa1b1115a8e4f6455" category="paragraph">`s 3：//Vertica/472/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a25/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a25_0_0.dfs`</block>
  <block id="964578668d432e948ebd36046dbb63a0" category="paragraph">`41`</block>
  <block id="0d8920cf1f46e7225ad12a12aa3ef7fa" category="paragraph">`s 3：//Vertica/476/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a2d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a2d_0_0.dfs`</block>
  <block id="ee33f05ae2d631fbc7214baa242bbe6b" category="paragraph">`s 3：//Vertica/52a/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a5d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a5d_0_dfdfd.df`</block>
  <block id="54070e15a029f7447e1ecebc3d82b773" category="paragraph">`131`</block>
  <block id="66f64ef6cf860c2f0ce6a5a2c23761e3" category="paragraph">`s 3：//Vertica/5d2/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a19/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a19_0_0.dfs`</block>
  <block id="bd8b3b2174b3dc482b0c5e38e6cddac3" category="paragraph">`91`</block>
  <block id="162c559c21f5cc69fe9ebd819fde72e2" category="paragraph">`s 3：//Vertica/5F7/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a11/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a11_0_0.dfs`</block>
  <block id="dc16a418b068800db4274918cfb8cbd5" category="paragraph">`118`</block>
  <block id="c891ece8fdff5a56142befae63efdf59" category="paragraph">`s 3：//Vertica/82d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a15/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a15_0_0.dfs`</block>
  <block id="cfcfa2b8b73ab4ebd558c0c1fef3ddb5" category="paragraph">`115`</block>
  <block id="a153a0e9f0ae1d6ee55d81dc814a6b1a" category="paragraph">`s 3：//Vertica/9a2/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a61/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a61_0_0.dfs`</block>
  <block id="df6e76b7db7e1995b581978628f232d2" category="paragraph">`33`</block>
  <block id="adf4c765585112bb17f45e76f9d9d590" category="paragraph">`s 3：//Vertica/ACD/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a29-026d63ae9d4a33237bf0e2c2cf2a794a00a000021a29_0_0.dfs`</block>
  <block id="5bad592e6f7fea9a405f17f8f9340030" category="paragraph">`133`</block>
  <block id="87316eaa24ad32afbe0ef544c6bca09a" category="paragraph">`s 3：//Vertica/b98/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a4d/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a4d_0_dfdfd.df`</block>
  <block id="82923f5350a7cf37b21ea38721c005a9" category="paragraph">`38`</block>
  <block id="614c8126b9e7031460260b44d16aeeee" category="paragraph">`s 3：//Vertica/db3/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a49-026d63ae9d4a33237bf0e2c2cf2a794a00a000021a49_0_0.dfs`</block>
  <block id="ccc61782f821297d4d0f1d6adc8c005b" category="paragraph">`s 3：//Vertica/EBA/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a599/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a59_0_0.dfs`</block>
  <block id="0688523b1b9b233c01258f78a3b678d1" category="paragraph">`21521920`</block>
  <block id="5bd0f2c4067288be395e7abd381a1c08" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a000000002152/026d63ae9d4a33237bf0e2c2cf2a794a00a00002152.tar`</block>
  <block id="bc9b86685d9566e8f05dc5bf8d3a1fbc" category="paragraph">`6865408`</block>
  <block id="d38e8ffa6625a5a4b6bad1c1d7382fb5" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021602/026d63ae9d4a33237bf0e2c2cf2a794a00a00002162.tar`</block>
  <block id="af6664da5e630dd702d05572ececa175" category="paragraph">`204217344`</block>
  <block id="de27bd64b0a8f6533689f4b16da6bfb0" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021610/026d63ae9d4a33237bf0e2c2cf2a794a00a000021610.tar`</block>
  <block id="9ef62a917e9958765d5bcb465a51ac57" category="paragraph">`16109056`</block>
  <block id="3783651d1a6b717d08885cf53bd7d16e" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000217e0/026d63ae9d4a33237bf0e2c2cf2a794a00a0000217e0.tar`</block>
  <block id="c3d8042b5920b9834cdc8c607700579b" category="paragraph">`12853248`</block>
  <block id="cb5e272ca193ebaf253184d8cfc81f6c" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021800/026d63ae9d4a33237bf0e2c2cf2a794a00a00002180.tar`</block>
  <block id="9f99944286c11b6b1d4ae4f3afeaccce" category="paragraph">`8937984`</block>
  <block id="5c7d0ca56c0f98a44c9694b3b23638a6" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a000000002187a/026d63ae9d4a33237bf0e2c2cf2a794a00a00002187a.tar`</block>
  <block id="953a580241e2775e0639090df2123983" category="paragraph">`56260608`</block>
  <block id="b91fb7e8554567dee7fd85bf527a5d61" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a00000000218b2/026d63ae9d4a33237bf0e2c2cf2a794a00a0000218b2.tar`</block>
  <block id="2eab01f0a4f4ba0111890349a5f85444" category="paragraph">`53947904`</block>
  <block id="f27cf13b696134d286beb7542a5b8ee9" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a00000000219ba/026d63ae9d4a33237bf0e2c2cf2a794a00a0000219ba.tar`</block>
  <block id="5b1513e00fa72794bd306e4661c0d8af" category="paragraph">`44932608`</block>
  <block id="66e66fba54c58c7cfab3b8c11a8b73a3" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a00000000219de/026d63ae9d4a33237bf0e2c2cf2a794a00a0000219de.tar`</block>
  <block id="82901f02268c81d3e27980ba5e0b77d5" category="paragraph">`256306688`</block>
  <block id="7914ba13e7d387d65c9411aeea0e0892" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021a6e/026d63ae9d4a33237bf0e2c2cf2a794a00a000021a6e.tar`</block>
  <block id="bf40bf1f33abeba0c5f6118b0b478254" category="paragraph">`8062464`</block>
  <block id="89fe14ef338a0aad387cf40439c765d3" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021e34-026d63ae9d4a33237bf0e2c2cf2a794a00a000021e34.tar`</block>
  <block id="f09043d36889d1d269a7e6511fafff88" category="paragraph">`20024832`</block>
  <block id="9f4bb57d3119e159eda6dc91b421e12c" category="paragraph">`s 3：//Vertica/metadata/VMart/Libraries/026d63ae9d4a33237bf0e2c2cf2a794a00a0000000021e70/026d63ae9d4a33237bf0e2c2cf2a794a00a000021e70.tar`</block>
  <block id="75dc180047a4a65cc91cdc34bafd5f13" category="paragraph">`10444`</block>
  <block id="5fe8f5a5faaf24b63d974fff8f45ad49" category="paragraph">`s 3：//Vertica/metadata/VMart/cluster_config.json`</block>
  <block id="cb455610261549601a968727f75e173c" category="paragraph">`823266`</block>
  <block id="734d9f32a69fc76666aa927960e1ba72" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c13_chkpt_1.cat.gz`</block>
  <block id="fdbaf1b0ee4e02044e36d36dd4518eb0" category="paragraph">`254`</block>
  <block id="1fd58d19f264e720bbbb53577d7a2e49" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c13/已完成`</block>
  <block id="0dde90dd52d8ff73123cc9260d7786ec" category="paragraph">`2958`</block>
  <block id="13a8345978900e79a14d95d85370d8e4" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c2_chkpt_1.cat.gz`</block>
  <block id="ef3a67b278f31bdbebbe75fa5f8c0d8f" category="paragraph">`231`</block>
  <block id="6d2efa8379c2fd39a36d84564be5a1b4" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c2_completed`</block>
  <block id="2912813aa00f32add6928d2cd9f830d6" category="paragraph">`822521`</block>
  <block id="f141618d089b11b78013a4fad88af223" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c4_chkpt_1.cat.gz`</block>
  <block id="6c6fe7b656c6c32a26871dfb19f4b7b3" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/checkpoints/c4_4/completed`</block>
  <block id="703d5c404aa85c4c6a2e4cd844293b36" category="paragraph">`746513`</block>
  <block id="4640693ffd9b0eb61a5ee402925c804c" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_14_g14.cat`</block>
  <block id="bd064eec6e4122c37fd1528794b1faec" category="paragraph">`2596`</block>
  <block id="6fa963a88e2173bc42c4994cd74cf77e" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_3_g3.cat.gz`</block>
  <block id="f1b0090937d01be346c5db6567a13320" category="paragraph">`821065`</block>
  <block id="84e5609dfad6367600760692fafa2463" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_4_g4.cat.gz`</block>
  <block id="5b767a2a9f98b85fae682314aaeb580a" category="paragraph">`6440`</block>
  <block id="738665eaf340c6f336e0ac44a1fbd7f1" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_5_g5.cat`</block>
  <block id="1ff46952208a49a43363ce080cfdfc26" category="paragraph">`8518`</block>
  <block id="960d9a61ddbe51dee57ad226374094a3" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_8_g8.cat`</block>
  <block id="2911e600bbad981e24b3e2a2b3a03f82" category="paragraph">`0`</block>
  <block id="cc11cb8ec5bc5124b58731d343024acf" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0016/Catalog/859703b06a3456d95d0be28575a673/tiered_catalog.cat`</block>
  <block id="e5f72d0ac30042b1e1228050cf4db009" category="paragraph">`822922`</block>
  <block id="fe509c64685e0e86b37d4a4168383981" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/checkpoint/C14_7/chkpt_1.cat.gz`</block>
  <block id="c874813a1ab759170832ad00490add5b" category="paragraph">`232`</block>
  <block id="a7b6a33ea6804bc24f95087a2767144a" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/checkpoint/C14_7/completed`</block>
  <block id="607ce6df5f7416ceecf46b2565cf78b6" category="paragraph">`822930`</block>
  <block id="f16dd1621cefe9daf11aa717c6f5ff3c" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_14_g7.cat.gz`</block>
  <block id="1a4a32022249a74ade4da57bc540ae45" category="paragraph">`755033`</block>
  <block id="ee70ce19fcb6a37181f0f2a1b295cac2" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_15_g8.cat`</block>
  <block id="ef88602de03096d5337e01c415fb757e" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0017/Catalog/859703b06a3456d95d0be28575a673/tiered_catalog.cat`</block>
  <block id="cfa501ab966cb7076ab4bea35887c268" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/checkpoint/C14_7/chkpt_1.cat.gz`</block>
  <block id="0efaef21765abae97f8823284089d92e" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/checkpoint/C14_7/completed`</block>
  <block id="f8a27da0cd8f29eeb5dec4c51b6ddaed" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_14_g7.cat.gz`</block>
  <block id="9137c061f66498d02d0a5dae8cd11fb7" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/Txnlogs/txn_15_g8.cat`</block>
  <block id="6c4e066b2f26281da7b7403d03d8a904" category="paragraph">`s 3：//Vertica/metadata/VMart/nodes/v_vmart node0018/Catalog/859703b06a3456d95d0be28575a673/tiered_catalog.cat`</block>
  <block id="377e8de315163c073e4c65030a631ab8" category="paragraph">此操作步骤 基于适用于其他内部对象存储的Vertica指南、应适用于StorageGRID。</block>
  <block id="7a62369a8bc7139feef72cf70ca75b13" category="list-text">创建数据库后、通过将`AWSStreamingConnectionPercentage`配置参数设置为`0`来禁用该参数。对于使用公共存储的Eon模式内部安装、不需要此设置。此配置参数用于控制Vertica用于流式读取的对象存储连接数。在云环境中、此设置有助于避免对象存储中的流式数据占用所有可用的文件句柄。它会使某些文件句柄可用于其他对象存储操作。由于内部对象存储的延迟较低、因此没有必要使用此选项。</block>
  <block id="9bbb476c1b20d451a6b1efc6d9f3c996" category="list-text">使用`vsql`语句更新参数值。此密码是您在"创建Eon内部数据库"中设置的数据库密码。例如、请参见以下示例输出：</block>
  <block id="bbbc233057e904f5095141454e43564f" category="section-title">验证返厂设置</block>
  <block id="fd9c0f2a65006cc20a093358569ff9c4" category="paragraph">已为读写操作启用Vertica数据库默认存储库设置(值= 1)。NetApp强烈建议保持启用这些仓库设置以提高性能。</block>
  <block id="1844bf3855f7b6c5d660568fcf9d8381" category="section-title">加载示例数据(可选)</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link-macro">此处</block>
  <block id="6be5fbd5ae75780985c67dc6ceac5c11" category="paragraph">如果此数据库用于测试并将被删除、您可以将样本数据加载到此数据库以进行测试。Vertica随附了示例数据集VMart、位于每个Vertica/node/opt/Vertica/Examples/VMart_Schema/``下。有关此示例数据集的详细信息、请参见 <block ref="a43712dd91d6373beb0a27dc61f34970" category="inline-link-macro-rx"></block>。</block>
  <block id="b3b0c649f69631d0d5f8abca04e393df" category="paragraph">按照以下步骤加载示例数据：</block>
  <block id="30cd3777be39c484720b1ce07e97b8a4" category="list-text">以DBadmin身份登录到Vertica节点之一：cd /opt/vertica/examples/VMart_Schemas/</block>
  <block id="7ec0cfc5ec14c9333b6810bbf84fe541" category="list-text">将示例数据加载到数据库中、并在子步骤c和d中出现提示时输入数据库密码：</block>
  <block id="a8900c6772f9006786fee28bf50ff58e" category="list-text">`cd /opt/vertica/examples/VMart_Schema`</block>
  <block id="c43a7b61de777223de68bb230032f64f" category="list-text">`。/vmart根`</block>
  <block id="16c970dcd26069436e93acae9cef7ad7" category="list-text">`vsql&lt; vmart定义架构.sql`</block>
  <block id="08af76b6687df620bd989c053338f859" category="list-text">`vsql &lt; vmart load_data.sql`</block>
  <block id="89e26598cb765dcbe94f71e860e94c64" category="list-text">有多个预定义的SQL查询、您可以运行其中一些查询、以确认测试数据已成功加载到数据库中。例如：`vsql &lt; vmart queries1.sql`</block>
  <block id="4bb047f8c530785002e490ef17fa725e" category="section-title">从何处查找追加信息</block>
  <block id="7d5b957cd473f6eaf5ad335a9c63c4ff" category="paragraph">要了解有关本文档中所述信息的更多信息，请查看以下文档和 / 或网站：</block>
  <block id="8a9cd131f57d065d753803a90387c310" category="inline-link-macro">StorageGRID 数据表</block>
  <block id="d6ed371e4ca6112ef8dca75d49381711" category="list-text"><block ref="d6ed371e4ca6112ef8dca75d49381711" category="inline-link-macro-rx"></block></block>
  <block id="0e25eb5c75f8069f3e7864cc794fc73f" category="inline-link-macro">Vertica 10.1产品文档</block>
  <block id="8f6785fde2797084dc5e67b73921c890" category="list-text"><block ref="8f6785fde2797084dc5e67b73921c890" category="inline-link-macro-rx"></block></block>
  <block id="f6a738f75f76f62a241636eca02cd87d" category="section-title">版本历史记录</block>
  <block id="34b6cd75171affba6957e308dcbd92be" category="cell">version</block>
  <block id="44749712dbec183e983dcd78a7736c41" category="cell">Date</block>
  <block id="8002bc13927c65b5f265b031079ce1d4" category="cell">文档版本历史记录</block>
  <block id="3798985ee5e15c84c4263815d5a4d0b7" category="paragraph">版本 1.0</block>
  <block id="d802637b72ebddd27cf9b28f9f198763" category="paragraph">2021年9月</block>
  <block id="ea9349a37bfee247df0f87cbcacca796" category="paragraph">初始版本。</block>
  <block id="0a7fcea811cb899434230e06e3477b84" category="summary">通过Hadoop、可以使用简单的编程框架在多个计算机集群之间分布式处理大型数据集。Hadoop旨在从单个服务器扩展到数千台计算机、每台计算机都提供本地计算和存储。</block>
  <block id="e28a2374ec10c84082a75afb2254f4e2" category="doc">将Cloudera Hadoop S3A连接器与StorageGRID 结合使用</block>
  <block id="ae19997258b86e93601b9072dd73b100" category="section-title">为什么要使用S3A执行Hadoop工作流？</block>
  <block id="ab8402eb6a573e76dfe21f21689c9ae9" category="paragraph">为了应对这些挑战、Hadoop S3A客户端可为S3对象存储提供高性能I/O。使用S3A实施Hadoop工作流有助于将对象存储用作数据存储库、并将计算和存储分开、进而使您能够独立扩展计算和存储。通过分离计算和存储、您还可以将适当数量的资源专用于计算作业、并根据数据集的大小提供容量。因此、您可以降低Hadoop工作流的总体TCO。</block>
  <block id="95c00c41a442070ea0794b977de417b8" category="section-title">将S3A连接器配置为使用StorageGRID</block>
  <block id="ee68e5b99222bbc29a480fcb0d1d6ee2" category="section-title">前提条件</block>
  <block id="d26ba44c410bd88ab784003c4e881389" category="list-text">用于Hadoop S3A连接测试的StorageGRID S3端点URL、租户S3访问密钥和机密密钥。</block>
  <block id="6762ef556fff500baba3e28bdce2febb" category="list-text">Cloudera集群以及对集群中每个主机的root或sudo权限、用于安装Java软件包。</block>
  <block id="0f00c0e9578f0ff277a08d08ef376836" category="paragraph">截至2022年4月、使用Cloudera 7.1.7的Java 11.0.14已针对StorageGRID 11.5和11.5进行了测试。但是、新安装时的Java版本号可能会有所不同。</block>
  <block id="4064bf12468c8bc6d21b4c1c947f9ed1" category="section-title">安装Java软件包</block>
  <block id="3408188787a55fb9708798cddbce37b0" category="inline-link">Cloudera支持表</block>
  <block id="e9be8954eba184e4880371339e422a20" category="list-text">检查<block ref="31da88a07df8e391e811822caa135aca" category="inline-link-rx"></block> 支持的JDK版本。</block>
  <block id="162479463df046cb4a74da2008354eed" category="inline-link">Java 11.x软件包</block>
  <block id="4c2d03bf2e98573fa9436705b37a57a1" category="list-text">下载<block ref="60b96115cb33d167b5449475d0ab85e0" category="inline-link-rx"></block> 与Cloudera集群操作系统匹配。将此软件包复制到集群中的每个主机。在此示例中、rpm软件包用于CentOS。</block>
  <block id="149f40ea9f9ffb02d7eeba792298fe1e" category="list-text">以root身份或使用具有sudo权限的帐户登录到每个主机。在每个主机上执行以下步骤：</block>
  <block id="52afb08cb748c04055be489c0b9a888e" category="list-text">安装软件包：</block>
  <block id="88499cbc0c83e386e53fdb36804337d9" category="list-text">检查Java的安装位置。如果安装了多个版本、请将新安装的版本设置为默认值：</block>
  <block id="b26c64ac085c28a1738346e2ec4d1520" category="list-text">将此行添加到`/etc/profile`的末尾。路径应与上述选择的路径匹配：</block>
  <block id="5f88743172c002de2f07047875fd2634" category="list-text">运行以下命令以使配置文件生效：</block>
  <block id="3659ebed6f89d43e919d92d8a4f7279e" category="section-title">Cloudera HDFS S3A配置</block>
  <block id="4839d2f25cc35b249d5db15efa1afd75" category="paragraph">* 步骤 *</block>
  <block id="c1d889a86b4ee1f584c957eb2c6788a5" category="list-text">从Cloudera Manager GUI中、选择Clusters &gt; HDFS、然后选择Configuration。</block>
  <block id="47f7c5aaea9ec9316850eea3fb28134a" category="list-text">在类别下、选择高级、然后向下滚动以找到`core-site.xml的集群范围高级配置片段(安全阀)`。</block>
  <block id="0f4af84337510994f3225d2912229b08" category="list-text">单击(+)符号并添加以下值对。</block>
  <block id="49ee3087348e8d44e1feda1917443987" category="cell">Name</block>
  <block id="689202409e48743b914713f96d93947c" category="cell">价值</block>
  <block id="7755119082c17ec5a3af74f22d8f3aeb" category="paragraph">fs.s3a.access.key</block>
  <block id="b7be29f43cb131b105a1709a4f9c9a47" category="paragraph">_&lt; StorageGRID 中的租户S3访问密钥&gt;_</block>
  <block id="cf2f74e5c9b775c0484e6cbc43fad16f" category="paragraph">fs.s3a.secret.key</block>
  <block id="519b3534e0953e9f790740bb65fa9c85" category="paragraph">_&lt; StorageGRID 中的租户S3密钥&gt;_</block>
  <block id="44b80c022f07d7386faad66ac455d150" category="paragraph">fs.s3a.connection.ssl.enabled</block>
  <block id="e7c95635ca48bb5a8924d326b1bb75b3" category="paragraph">true或false (如果缺少此条目、则默认为https)</block>
  <block id="57f2049492fc15207b8727a44d9de577" category="paragraph">fs.s3a.endpoint</block>
  <block id="62c6bd01433e2f02e630f1c410723151" category="paragraph">StorageGRID S3端点：端口&gt;_</block>
  <block id="1a95b45b39a6285f9154d0687dc81b19" category="paragraph">fs.s3a.impl</block>
  <block id="2227817813f0b981f0f8fdd5a9deaffa" category="paragraph">org.apache.hadoop.fs.s3a.s3AFileSystem</block>
  <block id="f5a9c1cd529c584fa53b0a52eb61dcd3" category="paragraph">fs.s3a.path.style.access</block>
  <block id="e935d7bd3d4a49248bd3ef5e65504984" category="paragraph">true或false (如果缺少此条目、则默认为虚拟主机模式)</block>
  <block id="0d5c3854a6a39265583df58f1d37b3a2" category="paragraph">*屏幕截图示例*</block>
  <block id="b956fcc114b2bdd5a14d25ccea32b2ea" category="image-alt">S3A配置</block>
  <block id="13a78f349c69274252fa8cde26ca554d" category="list-text">单击保存更改按钮。从HDFS菜单栏中选择陈旧配置图标、在下一页上选择重新启动陈旧服务、然后选择立即重新启动。</block>
  <block id="1e9d3fb4b7267b5c4de2a7f67956da90" category="image-alt">重新启动Hadoop的陈旧服务图标</block>
  <block id="68dbc18976f73773bc2d5deb27f4780f" category="section-title">测试与StorageGRID 的S3A连接</block>
  <block id="a13db3eed845386ceaab26fb7644f80a" category="section-title">执行基本连接测试</block>
  <block id="8a494f649ac7828977d5f96db63466eb" category="paragraph">登录到Cloudera集群中的一个主机、然后输入`Hadoop FS -ls S3a：//&lt;bucket-name&gt;_/`。</block>
  <block id="0dfddb891adaa02cdfc088a098890620" category="paragraph">以下示例将使用路径sysle和已有的HDFS-test分段以及一个测试对象。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="section-title">故障排除</block>
  <block id="d42e8fbcf79f7de1303918aafa7d9fa7" category="section-title">场景 1</block>
  <block id="6dec63b261842f0351dbe18a56aa7703" category="paragraph">使用HTTPS连接到StorageGRID 、并在15分钟超时后收到`shapore_failure`错误。</block>
  <block id="fe585fc6e6e5b4d2d51d9d6e24fe5d87" category="paragraph">*原因：*旧版JRE/JDK使用过时或不受支持的TLS密码套件连接到StorageGRID。</block>
  <block id="f37ed697750770b7a12ad7e08848a5f2" category="paragraph">*错误消息示例*</block>
  <block id="2f463c682630a0a4549da5e367566421" category="paragraph">*解析：*确保已安装JDK 11.x或更高版本并将其设置为默认Java库。请参见 <block ref="16e523618132c52360c79287d334eb35" category="inline-xref-macro-rx"></block> 部分、了解更多信息。</block>
  <block id="0f85bc5e180a369ebccc65db2ddf9288" category="section-title">场景2：</block>
  <block id="2cd1296de7ffb189828b5d1d8f8c74db" category="paragraph">无法连接到StorageGRID 、并显示错误消息`无法找到所请求目标的有效证书路径`。</block>
  <block id="608bb8a9d2247ad73a54f0b36e35e529" category="paragraph">*原因：* StorageGRID S3端点服务器证书不受Java程序信任。</block>
  <block id="71f31feeda8d8d4f38fbd0e77d82c5a9" category="paragraph">错误消息示例：</block>
  <block id="3233e5ff1af3df3490648806d2e307fb" category="paragraph">*解决方法：* NetApp建议使用由已知的公有 证书签名颁发机构颁发的服务器证书、以确保身份验证安全。或者、也可以向Java信任存储库添加自定义CA或服务器证书。</block>
  <block id="70135898629d17d48ccbf801de69bd60" category="paragraph">要将StorageGRID 自定义CA或服务器证书添加到Java信任存储、请完成以下步骤。</block>
  <block id="45eab7349f288790d0a805a261f1e633" category="list-text">备份现有的默认Java cacerts.</block>
  <block id="96a3c1cb03afb8a8fdc408548dea3311" category="list-text">将StorageGRID S3端点证书导入到Java信任存储。</block>
  <block id="ddbb2c51fdb8d9c867287e4815a4bc07" category="section-title">故障排除提示</block>
  <block id="92530c0f71b6f0c67f81127b722a268b" category="list-text">提高Hadoop日志级别以进行调试。</block>
  <block id="7434b0a8c7df6a944a97a97dab787fa2" category="paragraph">`export Hadoop_root_logger = hadoop.root.logger = debug、console`</block>
  <block id="fb10d0d432199779c224d4da6d5acf10" category="list-text">执行命令、并将日志消息定向到error.log。</block>
  <block id="c774f55d8bba0b0011caed823df573f4" category="paragraph">`Hadoop FS -ls S3a：//&lt;bucket-name&gt;_/&amp;&gt;error.log`</block>
  <block id="5acb44ecb8d9d7e55b00e2a97ca3c4f5" category="summary">您可以在此处找到每个NetApp StorageGRID 版本的完整文档。</block>
  <block id="d55a0f29052225dac98466ee9b92f4a1" category="doc">NetApp StorageGRID 文档</block>
  <block id="22c5de521c44ad2015e5ce711b46bebf" category="paragraph">您可以在此处找到每个NetApp StorageGRID 版本的完整文档：</block>
  <block id="dc2c61abf0171b5abd61211f37552e18" category="inline-link">StorageGRID 11.6.</block>
  <block id="1f24789c68b06d446e0ebee3e2b81c66" category="list-text"><block ref="1f24789c68b06d446e0ebee3e2b81c66" category="inline-link-rx"></block></block>
  <block id="c7bb2251d54b13e3891aea37cdb54cd1" category="inline-link">StorageGRID 11.5</block>
  <block id="1a433578de1b07641fbd7e4fa310d058" category="list-text"><block ref="1a433578de1b07641fbd7e4fa310d058" category="inline-link-rx"></block></block>
  <block id="32e750dc43168f85f193ec7b20f6e5c4" category="inline-link">StorageGRID 11.4.</block>
  <block id="ab11b93693987b00bd58948f5b72c34a" category="list-text"><block ref="ab11b93693987b00bd58948f5b72c34a" category="inline-link-rx"></block></block>
  <block id="37ef4cafeb8ccc9607db85cd3fab57f8" category="inline-link">StorageGRID 11.3</block>
  <block id="c18e44cb0cb6bc2f462d1e006c443b06" category="list-text"><block ref="c18e44cb0cb6bc2f462d1e006c443b06" category="inline-link-rx"></block></block>
  <block id="13947b810d54d07e62ef2873b8620fe7" category="inline-link">StorageGRID 11.2</block>
  <block id="fa96f2375d9c1354445489d7c5ab86dc" category="list-text"><block ref="fa96f2375d9c1354445489d7c5ab86dc" category="inline-link-rx"></block></block>
  <block id="7c9bea5c137c35be356406479a949aef" category="summary">对象锁定提供了一个WORM模型、用于防止删除或覆盖对象。对StorageGRID 对象锁定实施情况进行了评估、以帮助满足法规要求、支持对象保留的合法保留和合规模式以及默认存储分段保留策略。</block>
  <block id="33978f74a8897c3da7935e1ac3118552" category="doc">测试并演示StorageGRID 上的S3对象锁定</block>
  <block id="1d1d2f802d9cc6b6eb57739286faf4b3" category="paragraph">对象锁定提供了一个WORM模型、用于防止删除或覆盖对象。对StorageGRID 对象锁定实施情况进行了评估、以帮助满足法规要求、支持对象保留的合法保留和合规模式以及默认存储分段保留策略。</block>
  <block id="56971a583f52c8e863bd76946fd7e4df" category="paragraph">本指南将演示S3对象锁定API。</block>
  <block id="1e3a85ebb1c233113bf042fe963e7cf5" category="section-title">合法保留</block>
  <block id="deb6fc774008b995e323cca66b1facaf" category="list-text">对象锁定合法保持是应用于对象的简单开/关状态。</block>
  <block id="93c9236e0c41f2878728edae2046ae50" category="list-text">使用GET操作对其进行验证。</block>
  <block id="147baac1f38a06bbf4e892a7420f03bb" category="list-text">关闭合法保留</block>
  <block id="ef1f6350727f7558bf0dcb99de8b43a4" category="section-title">合规模式</block>
  <block id="ca03998a8a72276e144b390281ede11f" category="list-text">对象保留是使用"保留到"时间戳完成的。</block>
  <block id="f50bafdbea3b79e2d9f5fdd9a5add716" category="list-text">验证保留状态</block>
  <block id="71b2566ef5a1fcd229a2d9785ed41db7" category="section-title">默认保留</block>
  <block id="7dd96a99846895f9e3a3b91e8b8ec0fa" category="list-text">将保留期限设置为天数和年数以及使用每个对象API定义的保留截止日期。</block>
  <block id="25b92ba9ae0e5c3886d5397a33f4ce21" category="list-text">将对象放入存储分段中</block>
  <block id="4aa3f3b4e7b7410ce27736bcc6748358" category="list-text">存储分段上设置的保留持续时间将转换为对象上的保留时间戳。</block>
  <block id="6a0f60b1ed8b19b1d7db3515b6695da6" category="section-title">测试删除已定义保留的对象</block>
  <block id="d0cdc49fa0022b266468f0e306c00e54" category="paragraph">对象锁定基于版本控制构建。保留是在对象的某个版本上定义的。如果尝试删除定义了保留的对象、但未指定版本、则会创建一个删除标记作为对象的当前版本。</block>
  <block id="42ae4cc4d992b73b098cf1a15b7b156f" category="list-text">删除定义了保留的对象</block>
  <block id="80f89ef3a56a59415fb7de5ec8de5095" category="list-text">列出存储分段中的对象</block>
  <block id="b4f9a7eae41a98dfb0771f92707d7f68" category="list-text">请注意、此对象未列出。</block>
  <block id="cc3153459e96342ef7d219589d19f208" category="list-text">列出可查看删除标记的版本以及原始锁定版本</block>
  <block id="8697c94dccfe3cbc3ee4e7cd58a5022a" category="list-text">删除对象的锁定版本</block>
  <block id="ce2702286f63f4ae6103107902322a34" category="summary">StorageGRID 和S3 API提供了多种不同的方法来加密空闲数据。</block>
  <block id="9c1f8aaacc1a56ce4e9a0dad8b9f85d5" category="doc">在StorageGRID 上测试和演示S3加密选项</block>
  <block id="a8e93751c131aa808a9eafa1b8e11286" category="inline-link">查看 StorageGRID 加密方法</block>
  <block id="d303cdd8f1d3ee1dde4e3ada41998deb" category="paragraph">StorageGRID 和S3 API提供了多种不同的方法来加密空闲数据。要了解更多信息，请参见<block ref="54fa7d466db811b97852dfc564ca4383" category="inline-link-rx"></block>。</block>
  <block id="492f68a8c44fdeeefd5fdfecd42dbccc" category="paragraph">本指南将演示S3 API加密方法。</block>
  <block id="8851edf36d0b5638c8a4f6ac64923370" category="section-title">服务器端加密(SSR)</block>
  <block id="0eb4ff54e584f9eaf62705a77663a748" category="paragraph">使用SSE、客户端可以存储对象、并使用由StorageGRID 管理的唯一密钥对其进行加密。请求对象时、该对象将通过存储在StorageGRID 中的密钥进行解密。</block>
  <block id="941f37e6c0faf75d7632b45e2853416d" category="section-title">SS一 示例</block>
  <block id="63e43077ce3ba881fa5ae9806e2d3e5f" category="list-text">使用SSR放置对象</block>
  <block id="6aa955f0cbda4b4e5c5d34ea6d859a7c" category="list-text">对对象执行HEAD以验证加密</block>
  <block id="a4214b559bb4db0e923b33d1d6f2d0ff" category="list-text">获取对象</block>
  <block id="9e334fc718c77d2698ec6aaa3259bb80" category="section-title">使用客户提供的密钥(SSI-C)进行服务器端加密</block>
  <block id="18bc90d6da56c6a0ca8a43370fb89730" category="paragraph">通过"SSE "、客户端可以存储对象、并使用客户端随对象提供的唯一密钥对其进行加密。请求对象时、必须提供相同的密钥才能解密并返回对象。</block>
  <block id="aaf850473d937d172559cb570dab234d" category="section-title">SSI-C示例</block>
  <block id="1e7708d7f60a3422da31ffb25df4f214" category="list-text">出于测试或演示目的、您可以创建加密密钥</block>
  <block id="422423cacc3731aece78081dcce4a364" category="list-text">创建加密密钥</block>
  <block id="684f8aafe1c1f1de5e081831230eabd7" category="list-text">放置具有生成密钥的对象</block>
  <block id="06154eb3744171105830473b1636041a" category="list-text">为对象设置头</block>
  <block id="e5f9c75d403887203c2b7b0f94663953" category="admonition">如果不提供加密密钥、则会收到错误"An error occurred (404) when calling the HeadObject operation：not found"(调用HeadObject操作时出错(404)：未找到)</block>
  <block id="9dd97e164ee8102cf66ded8b2e6365f9" category="list-text">获取对象</block>
  <block id="25800fc2c4fb712f003b8dde72f89e9b" category="admonition">如果不提供加密密钥、则在调用GetObject操作时将收到错误"An error occurred (InvalidRequest)：The object was stored using a form of Server side Encryption"。要检索对象、必须提供正确的参数。"</block>
  <block id="b7aaef273d10ecbd096947fb1bedf595" category="section-title">存储分段服务器端加密(SSI-S3)</block>
  <block id="c61a8c52ec13232670b3fcf3aa61ecb1" category="paragraph">SSI-S3允许客户端为存储在存储在存储分段中的所有对象定义默认加密行为。这些对象使用由StorageGRID 管理的唯一密钥进行加密。请求对象时、该对象将通过存储在StorageGRID 中的密钥进行解密。</block>
  <block id="af888980113838f4be36b5dc77e84a11" category="section-title">存储分段SSI-S3示例</block>
  <block id="8256c537cf6e9ece3847813951e9fdfb" category="list-text">创建新存储分段并设置默认加密策略</block>
  <block id="2c63f6f1bb6a77a8a7fd5977aead1d84" category="list-text">创建新存储分段</block>
  <block id="8117fcb97cf86729cfbe315fb7c069c7" category="list-text">放入存储分段加密</block>
  <block id="87edd78cd55896c283c8e2897bc9ba41" category="summary">本指南详细说明了如何使用Amazon OpenSearch服务或内部Elasticsearch配置NetApp StorageGRID 11.6搜索集成服务。</block>
  <block id="c86030d76e5f59c53ee3bc844dccdbd2" category="doc">配置StorageGRID 搜索集成服务</block>
  <block id="f14bf9907ae948f8af2bfd00dbd85f09" category="paragraph">本指南详细说明了如何使用Amazon OpenSearch服务或内部Elasticsearch配置NetApp StorageGRID 11.6搜索集成服务。</block>
  <block id="24aceb5c24cf5a3bbe879def9dd06dd3" category="paragraph">StorageGRID 支持三种类型的平台服务。</block>
  <block id="fde5ed7646cf684c0972be9a066f6914" category="list-text">* StorageGRID CloudMirror复制*。将特定对象从StorageGRID 存储分段镜像到指定的外部目标。</block>
  <block id="8e304e3c51ae41ba284a04741c9b3ffd" category="list-text">*通知*。按存储分段发送事件通知、以便向指定的外部Amazon Simple Notification Service (Amazon SNS)发送有关对对象执行的特定操作的通知。</block>
  <block id="6829b0de5985e8a1d0e7cdb7a6f93842" category="list-text">*搜索集成服务*。将简单存储服务(S3)对象元数据发送到指定的Elasticsearch索引、您可以在该索引中使用外部服务搜索或分析元数据。</block>
  <block id="95309527f7dabbe3fe32e0802fc9852c" category="inline-link">使用平台服务的注意事项</block>
  <block id="a45c124a240baea662f0da5e22df0d82" category="paragraph">S3租户可通过租户管理器UI配置平台服务。有关详细信息，请参见<block ref="4ebe502af7f5bafb1d6a5d8f629eaf76" category="inline-link-rx"></block>。</block>
  <block id="59544fa9157551ea504a21302a6951ec" category="inline-link">《StorageGRID 11.6租户指南》</block>
  <block id="05cc541a01f9762a12d5264d6eb03ae8" category="paragraph">本文档是对的补充<block ref="eeb341388640105e8957a286cb4738c0" category="inline-link-rx"></block> 和为搜索集成服务的端点和存储分段配置提供了分步说明和示例。此处提供的Amazon Web Services (AWS)或内部Elasticsearch设置说明仅用于基本测试或演示。</block>
  <block id="615d163ca568994b3435939b26db5805" category="paragraph">受众应熟悉网格管理器和租户管理器、并可访问S3浏览器、以便为StorageGRID 搜索集成测试执行基本的上传(PUT)和下载(GET)操作。</block>
  <block id="f612053df248affdc8387fca6d9bee0a" category="section-title">创建租户并启用平台服务</block>
  <block id="27daf95e5e10f8ac74651d4d9130e719" category="list-text">使用Grid Manager创建S3租户、输入显示名称并选择S3协议。</block>
  <block id="fbfe9415a29f758b59248cc814fe3c18" category="list-text">在权限页面上、选择允许平台服务选项。如果需要、也可以选择其他权限。</block>
  <block id="f9472d6ac345c05d3cc61568620086f6" category="image-alt">选择权限屏幕截图</block>
  <block id="9b0222bb86df62edf8f9a4fd84ba7bdf" category="list-text">设置租户root用户初始密码、或者如果在网格上启用了标识联合、则选择具有root访问权限的联合组来配置租户帐户。</block>
  <block id="b363f2379a05efb18c601af7e4e70d90" category="list-text">单击以root用户身份登录、然后选择分段：创建和管理分段。</block>
  <block id="27c6c9b9ce32fafa453c2df32dcbedd9" category="paragraph">此时将转到租户管理器页面。</block>
  <block id="9fd75fca62b65c4af75fe743c1571eef" category="list-text">在租户管理器中、选择我的访问密钥以创建并下载S3访问密钥、以供日后测试。</block>
  <block id="0ec9b083d174497de65ea36e8f62118c" category="section-title">使用Amazon OpenSearch搜索集成服务</block>
  <block id="d3a3d7e6d3be793f5878e195a0502f20" category="section-title">Amazon OpenSearch (以前称为Elasticsearch)服务设置</block>
  <block id="ca543db8f60ee6d618b2fce4e398ff9d" category="inline-xref-macro">使用内部Elasticsearch搜索集成服务</block>
  <block id="91ca81266b2f6987e787fc132213833b" category="paragraph">使用此操作步骤 可以快速简单地设置OpenSearch服务、但仅用于测试/演示。如果您使用内部Elasticsearch搜索集成服务、请参见一节 <block ref="7949c0a8df6276ef905e1f32c3cd38da" category="inline-xref-macro-rx"></block>。</block>
  <block id="7a39dc4b754c9843c8b8e82e129df95a" category="admonition">要订阅OpenSearch服务、您必须拥有有效的AWS控制台登录名、访问密钥、机密访问密钥和权限。</block>
  <block id="04465e32e50f755028937109f8195d88" category="inline-link-macro">AWS OpenSearch服务入门</block>
  <block id="f072124705611ed25ec02b7577163209" category="list-text">按照中的说明创建新域 <block ref="db5f7712c2bd05f059f1113f251a8653" category="inline-link-macro-rx"></block>、但以下情况除外：</block>
  <block id="29d9d092d398fb44d9f8798062efa761" category="list-text">第 4 步域名：sgdemo</block>
  <block id="5ac3c34060203d7e326e3102ecdaba60" category="list-text">第10步：细化访问控制：取消选择启用细化访问控制选项。</block>
  <block id="016ccae457dbedb93f0de7d4602d6c4b" category="list-text">第12步：访问策略：选择配置级别访问策略、然后选择JSON选项卡以使用以下示例修改访问策略：</block>
  <block id="4f6a3e5d8a887d3c8d485fbcacc2fb47" category="list-text">将突出显示的文本替换为您自己的AWS身份和访问管理(IAM) ID和用户名。</block>
  <block id="53e9754db1787f07e19e5680b1b0b11e" category="list-text">将突出显示的文本(IP地址)替换为用于访问AWS控制台的本地计算机的公有 IP地址。</block>
  <block id="ff323c6f0c5ceb97eed49121babcec0f" category="inline-link"><block ref="ff323c6f0c5ceb97eed49121babcec0f" category="inline-link-rx"></block></block>
  <block id="b001a21bb86d7507e75c22c5e0711e4d" category="list-text">打开浏览器选项卡以<block ref="d59cf0c4ab596379c6604694ab2ef059" category="inline-link-rx"></block> 以查找公有 IP。</block>
  <block id="f8f40f877af3c3d201008b8c5be2c37d" category="image-alt">搜索集成屏幕截图</block>
  <block id="29053e2d92070487f785eef51e730dc4" category="list-text">等待15到20分钟、使此域变为活动状态。</block>
  <block id="f0eda7032507e6d5560f84391d733351" category="image-alt">激活域屏幕截图</block>
  <block id="28424454f1de84544a80fe8c1c48775c" category="list-text">单击OpenSearch Dashboards URL以在新选项卡中打开域以访问此信息板。如果出现访问被拒绝错误、请验证访问策略源IP地址是否已正确设置为您的计算机公有 IP、以允许访问域信息板。</block>
  <block id="b53d0b4902659d8d2f913cad2204dafa" category="list-text">在信息板欢迎页面上、选择"Explore on your own"。从菜单中、转到"Management"-&gt;"Dev Tools"</block>
  <block id="64529406325d80102a66bca5577acc93" category="list-text">在Dev Tools -&gt; Console下、输入`PUT &lt;index&gt;`、在此可以使用索引存储StorageGRID 对象元数据。我们在以下示例中使用索引名称"gmetadata"。单击小三角形符号以执行PUT命令。预期结果显示在右侧面板上、如以下示例屏幕截图所示。</block>
  <block id="d109971fa7c388dc06d7b1809b235b8d" category="image-alt">使用PUT命令查看索引屏幕截图</block>
  <block id="e10dd1b001fba4bfb5226f32dff82bfb" category="list-text">验证索引是否可从Amazon OpenSearch UI的sgdomain &gt;索引下查看。</block>
  <block id="efe6f3e30e8b2c5483ffdf27a0654511" category="image-alt">正在验证索引屏幕截图</block>
  <block id="2b3c30e7f44f2aac501d2e83c6219832" category="section-title">平台服务端点配置</block>
  <block id="8c4ec52c2351d47f61041ea0f6d68abc" category="paragraph">要配置平台服务端点、请执行以下步骤：</block>
  <block id="2f79efe541087dee090636fcc45a179f" category="list-text">在租户管理器中、转至存储(S3)&gt;平台服务端点。</block>
  <block id="b34d3c3f94b41d3571f8ca1f3cddd7e5" category="list-text">单击创建端点、输入以下内容、然后单击继续：</block>
  <block id="a6dbfe22a145135ffcb921b9d47c971b" category="list-text">显示名称示例`AWS-OpenSearch`</block>
  <block id="c8ebb37d076b51461df1832842943a56" category="list-text">示例中的域端点会在URI字段中的上述操作步骤 的步骤2下显示屏幕截图。</block>
  <block id="62ac5878f5ad652b348bf756180bd23b" category="list-text">在URN字段中、上述操作步骤 的步骤2中使用的域ARN、并将`/&lt;index&gt;/_doc`添加到ARN末尾。</block>
  <block id="55d2f2cd1ece54b1c4d553e157cfa3a2" category="paragraph">在此示例中、URN变为`arn：AWS：es：us-east-1：211234567890：domain/sgdemo /sgmedata/_doc`。</block>
  <block id="f8a9b600f50cc5b60751952c56d0f3fc" category="image-alt">端点详细信息屏幕截图</block>
  <block id="3c56a593460a6f84bfc344ffe6150097" category="list-text">要访问Amazon OpenSearch sgdomain、请选择访问密钥作为身份验证类型、然后输入Amazon S3访问密钥和机密密钥。要转到下一页、请单击继续。</block>
  <block id="aa0f9a4ba593122d011f03e2316ce19b" category="image-alt">对端点连接进行身份验证屏幕截图</block>
  <block id="d078b4431fcc80fbee2cd9a3c87293b1" category="list-text">要验证端点、请选择使用操作系统CA证书和测试并创建端点。如果验证成功、则会显示一个类似于下图的端点屏幕。如果验证失败、请确认URN在路径末尾包含`/&lt;index&gt;/_doc`、并且AWS访问密钥和机密密钥正确无误。</block>
  <block id="fe28f79fc55095a8e58030809820fe42" category="image-alt">平台服务端点屏幕截图</block>
  <block id="9d7ff9ab7c49eef4133e233cbed1198b" category="section-title">内部Elasticsearch设置</block>
  <block id="a7d37b98c9dd326efe3690654fe9d37f" category="paragraph">此操作步骤 仅用于使用Docker快速设置内部Elasticsearch和Kibana、以便用于测试目的。如果Elasticsearch和Kibana服务器已存在、请转至步骤5。</block>
  <block id="5061a9f622798427aca0d360cc138888" category="inline-link-macro">Docker安装操作步骤</block>
  <block id="d180e3941d65b33ef407bed8ae52ddc8" category="inline-link-macro">CentOS Docker安装操作步骤</block>
  <block id="80f7fe607a20803747ad9b40d526935c" category="list-text">请遵循此操作 <block ref="3b1e055afa87d3b585871c5e6a6e5a09" category="inline-link-macro-rx"></block> 安装Docker。我们使用 <block ref="bac8b475dc6eefa0e27bba4925d480b4" category="inline-link-macro-rx"></block> 在此设置中。</block>
  <block id="8244486218d0bcf97251923ef2f0be45" category="list-text">要在重新启动后启动Docker、请输入以下内容：</block>
  <block id="2bcd57548845273190401d9ba79767a3" category="list-text">将`vm.max_map_count`值设置为262144：</block>
  <block id="43433bec04d909d718c7800aa96f1beb" category="list-text">要在重新启动后保留此设置、请输入以下内容：</block>
  <block id="67003ee2f4042eb1f705313a4dc58cfd" category="inline-link-macro">Elasticsearch快速入门指南</block>
  <block id="1c046e86c75e8fd764a3285f110da4d7" category="list-text">按照 <block ref="f2c2be7ac1a239dac97b7af8519d2c7b" category="inline-link-macro-rx"></block> 自管理部分、用于安装和运行Elasticsearch和Kibana Docker。在此示例中、我们安装了8.1版。</block>
  <block id="193e2040e8163613cb1974450d2af29c" category="admonition">记下由Elasticsearch创建的用户名/密码和令牌、您需要使用它们来启动Kibana UI和StorageGRID 平台端点身份验证。</block>
  <block id="a7d9a6a3c74bd9faac38bc1bb130a796" category="image-alt">搜索集成弹性搜索屏幕截图</block>
  <block id="332f50821b852451ef88ea9dbe07a0dc" category="list-text">启动Kibana Docker容器后、控制台中将显示URL链接`\https://0.0.0.0:5601`。将0.0.0.0替换为URL中的服务器IP地址。</block>
  <block id="90ec7e4d1719c2a884a27d95126c0f0f" category="list-text">使用用户名`弹性`和Elastic在上一步中生成的密码登录到Kibana UI。</block>
  <block id="9e4e15cd3018d0529612a23324c26d35" category="list-text">首次登录时、请在信息板欢迎页面上选择"Explore on your own"。从菜单中、选择"Management"&gt;"Dev Tools"。</block>
  <block id="7ce90614c51c6b29f6b2ef2391c41a72" category="list-text">在开发工具控制台屏幕上、输入`PUT &lt;index&gt;`、在此可以使用此索引存储StorageGRID 对象元数据。我们在此示例中使用索引名称`sgmetadata`。单击小三角形符号以执行PUT命令。预期结果显示在右侧面板上、如以下示例屏幕截图所示。</block>
  <block id="6b2c56310234326372b84f2537bfb34b" category="image-alt">执行PUT命令屏幕截图</block>
  <block id="d2c398101283b85a574ecda90393e5b0" category="paragraph">要为平台服务配置端点、请执行以下步骤：</block>
  <block id="6988d11970dc632c6cbaea778ec31ebd" category="list-text">在租户管理器上、转至存储(S3)&gt;平台服务端点</block>
  <block id="2411ab8836570fc720961d9ca4d31170" category="list-text">显示名称示例：`弹性搜索`</block>
  <block id="c3ab52d125350a189f9be76434bf5565" category="list-text">URI：`\https://&lt;elasticsearch-server-ip或hostname&gt;：9200`</block>
  <block id="97fbbb5c5782ba00d7871db3cbbcaadc" category="list-text">urn：`urn：&lt;something&gt;：es：：：&lt;部分唯一文本&gt;/&lt;索引名称&gt;/_doc`、其中索引名称是您在Kibana控制台上使用的名称。示例：`urn：local：es：：：sgmd/sgmetadata/_doc`</block>
  <block id="c21a9f9baede4b3ff45e83c1195d954e" category="image-alt">平台服务端点详细信息屏幕截图</block>
  <block id="9c530e0250b2365dd2bc6de7cd8226af" category="list-text">选择基本HTTP作为身份验证类型、输入用户名`弹性`以及Elasticsearch安装过程生成的密码。要转到下一页、请单击继续。</block>
  <block id="90686e747228f4ffd85f26a78549d504" category="image-alt">平台服务端点身份验证屏幕截图</block>
  <block id="16dab22118d1bb9c774fc20b7eff75bf" category="list-text">选择不验证证书和测试并创建端点以验证端点。如果验证成功、则会显示类似于以下屏幕截图的端点屏幕。如果验证失败、请验证URN、URI和用户名/密码条目是否正确。</block>
  <block id="18f6fe973b6c5651f69da53d3aafaf5c" category="image-alt">已成功验证端点</block>
  <block id="e20dd85152fb7211af43f55d94499b76" category="section-title">存储分段搜索集成服务配置</block>
  <block id="874357ee35df6a54445e352c3dbb57e2" category="paragraph">创建平台服务端点后、下一步是在存储分段级别配置此服务、以便在创建、删除对象或更新其元数据或标记时将对象元数据发送到定义的端点。</block>
  <block id="69f509c71b61364d5893d46c8b9dba26" category="paragraph">您可以使用租户管理器配置搜索集成、以便将自定义StorageGRID 配置XML应用于存储分段、如下所示：</block>
  <block id="0e9ce58fdfd458e352fcd0b7403656ca" category="list-text">在租户管理器中、转至存储(S3)&gt;分段</block>
  <block id="6492a87a353e042bb5a4f6ac7f70ce04" category="list-text">单击Create Bucket、输入存储分段名称(例如、`sgmetada-test`)并接受默认值`us-east-1` Region。</block>
  <block id="147431664d9610b7596ebb51b74d698d" category="list-text">单击"继续"&gt;"创建存储分段"。</block>
  <block id="cbdfd9b1c3376777ffe0bd1bb6f31691" category="list-text">要打开存储分段概述页面、请单击存储分段名称、然后选择平台服务。</block>
  <block id="ff02db931d00676bbd2e49c8d66ba260" category="list-text">选择启用搜索集成对话框。在提供的XML框中、使用以下语法输入配置XML。</block>
  <block id="f1c5bfdd87a5f745188dfcf269154c5e" category="paragraph">突出显示的URN必须与您定义的平台服务端点匹配。您可以打开另一个浏览器选项卡以访问租户管理器、并从定义的平台服务端点复制URN。</block>
  <block id="ee4590422d317c3015f14170526c3977" category="paragraph">在此示例中、我们不使用前缀、这意味着此分段中每个对象的元数据将发送到先前定义的Elasticsearch端点。</block>
  <block id="26add7d33fe03962af376f500b33916e" category="list-text">使用S3浏览器使用租户访问/密钥连接到StorageGRID 、将测试对象上传到`sgmetada-test`存储分段、并向对象添加标记或自定义元数据。</block>
  <block id="09b447705582a66ef41783e259fb6a78" category="image-alt">上传测试对象屏幕截图</block>
  <block id="174949bad1f8938630874b6623815f20" category="list-text">使用Kibana UI验证对象元数据是否已加载到sgmetadata的索引中。</block>
  <block id="e3fdae847eec4a409ba0a70f299d8ee3" category="list-text">从菜单中、选择"Management"&gt;"Dev Tools"。</block>
  <block id="d322ac9e51a4b7cf746cfe0af7c0445c" category="list-text">将示例查询粘贴到左侧的控制台面板中、然后单击三角形符号以执行该查询。</block>
  <block id="49806491d4539bc7e2a5b05d737ab750" category="paragraph">以下示例屏幕截图中的查询1示例结果显示了四条记录。这与存储分段中的对象数匹配。</block>
  <block id="65201bc39dd240892dab55de46e2a0bb" category="image-alt">查询1结果示例屏幕截图</block>
  <block id="53573d96c3d967152d1c791a2e79dcb5" category="paragraph">以下屏幕截图中的查询2示例结果显示了标记类型为jpg的两条记录。</block>
  <block id="1962b22fc9378586da892a0bc564acda" category="image-alt">查询2示例</block>
  <block id="110f5c1e103a95f521005d2b098ea662" category="inline-link">什么是平台服务</block>
  <block id="05bcb775989a8e045997b61b4712bd11" category="list-text"><block ref="05bcb775989a8e045997b61b4712bd11" category="inline-link-rx"></block></block>
  <block id="68482d23bcdb3015258243e1b9aacf51" category="inline-link">StorageGRID 11.6 文档</block>
  <block id="e33f6ccf77d0d8efe2a762267b6fd088" category="list-text"><block ref="e33f6ccf77d0d8efe2a762267b6fd088" category="inline-link-rx"></block></block>
  <block id="12934b080defe99c475857cf35fc736b" category="summary">如果要将StorageGRID 对象移动到外部S3存储分段、则可以使用云存储池。外部存储分段可以属于Amazon S3 (AWS)或Google Cloud。</block>
  <block id="5726c3e825fdb258e1525c22d51442ea" category="doc">为AWS或Google Cloud创建云存储池</block>
  <block id="3ed256c1f351a8fcb6f88836f9344657" category="list-text">已配置StorageGRID 11.6。</block>
  <block id="d3c15aac7a26c8e69f0d3a923ebea0d3" category="list-text">您已在AWS或Google Cloud上设置外部S3存储分段。</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步骤</block>
  <block id="e0d561a0d43acc9575b7bc753d813e5c" category="list-text">在网格管理器中、导航到* ILM *&gt;*存储池*。</block>
  <block id="19ac403a0d6c78e78c0d289e7331185e" category="list-text">在页面的 Cloud Storage Pools 部分中，选择 * 创建 * 。</block>
  <block id="d97d852e8166f1982454eda55e5c517b" category="paragraph">此时将显示创建云存储池弹出窗口。</block>
  <block id="27bc4f94bb55216da5446bb2fdb8ced0" category="list-text">输入显示名称。</block>
  <block id="b9a5f574231e2fdc69a9ccace21be039" category="list-text">从提供程序类型下拉列表中选择* Amazon S3*。</block>
  <block id="b99241459e3ab67c1795a54b1eadb85a" category="paragraph">此提供程序类型适用于AWS S3或Google Cloud。</block>
  <block id="28e89d4189931a40a6eaa1548a6f0da4" category="list-text">输入要用于云存储池的S3存储分段的URI。</block>
  <block id="4f2400827753dc0695dede1947e79e86" category="paragraph">允许使用两种格式：</block>
  <block id="a0678dbf696ee57402a994b15a017fed" category="paragraph">`https://host:port`</block>
  <block id="bcca4a11cec95b0dcec0633cf0aa2e53" category="paragraph">`http://host:port`</block>
  <block id="773a527b6815140da355b051effea746" category="list-text">输入S3存储分段名称。</block>
  <block id="4bec2393e5f6d93abd85adfa9ee9f170" category="paragraph">您指定的名称必须与S3存储分段的名称完全匹配；否则、创建云存储池将失败。保存云存储池后，您无法更改此值。</block>
  <block id="d539647e4ced58d3f54c2a4ce23c5708" category="list-text">或者、输入访问密钥ID和机密访问密钥。</block>
  <block id="1486b2fc2d7628bc94918b17dd1e2dbc" category="list-text">从下拉列表中选择*不验证证书*。</block>
  <block id="4cc186df234138a57b2e8c5d8e5f7f8d" category="list-text">单击 * 保存 * 。</block>
  <block id="7c73eae507b98bafb559cd915f7f9750" category="paragraph">确认已为Amazon S3或Google Cloud创建云存储池。</block>
  <block id="b80a3dfef6be295438d7e805b11c4bc9" category="summary">如果要将StorageGRID 对象移动到外部Azure容器、则可以使用云存储池。</block>
  <block id="749b3ee0b1315337c79533871bba825a" category="doc">为Azure Blob Storage创建云存储池</block>
  <block id="861ae314cc8e000e48d818fcd75a2966" category="paragraph">如果要将StorageGRID 对象移动到外部Azure容器、则可以使用云存储池。</block>
  <block id="0106fb5b56f13c91c190596b35b034a4" category="list-text">您已设置外部Azure容器。</block>
  <block id="8bb07513ee1970ee4c61dec825ef35cc" category="list-text">从提供程序类型下拉列表中选择* Azure Blob Storage*。</block>
  <block id="fdcdebdb8587867805e6b14c39279411" category="list-text">输入Azure容器名称。</block>
  <block id="d4bed7a2666bc07a1fdf0b1b0a0d76ba" category="paragraph">您指定的名称必须与Azure容器名称完全匹配；否则、创建云存储池将失败。保存云存储池后，您无法更改此值。</block>
  <block id="f7c6315a28b94e99eab96017afd099b2" category="list-text">或者、输入Azure容器的关联帐户名称和帐户密钥进行身份验证。</block>
  <block id="77d01b70f1590b2dce595a6504470002" category="paragraph">确认已为Azure Blob Storage创建云存储池。</block>
  <block id="aaeeb364be922e789a908072881b88ea" category="summary">您可以创建ILM规则、将对象移动到云存储池进行备份。</block>
  <block id="85020881afe59b6c9413c4d50d2a26d0" category="doc">使用云存储池进行备份</block>
  <block id="4b0e54b770307ad63bdf2f9e861d65d8" category="paragraph">您可以创建ILM规则、将对象移动到云存储池进行备份。</block>
  <block id="9c23d5280c083a21f3e88f979b42a529" category="list-text">在网格管理器中、导航到* ILM *&gt;*规则*&gt;*创建*。</block>
  <block id="ce8eebfe6fafce433c006d354edaf1a1" category="list-text">输入问题描述。</block>
  <block id="329e9e5f00527442ffb8ddb0d1d33273" category="list-text">输入触发规则的条件。</block>
  <block id="5a378b18f7bf0c4cabc6c655cd2f535e" category="list-text">单击 * 下一步 * 。</block>
  <block id="67e0764defc4dc09f19960feb173f810" category="list-text">将对象复制到存储节点。</block>
  <block id="971a29d2c438993347d735d425c2a162" category="list-text">添加布局规则。</block>
  <block id="39c7ca89a1c72a8fd424c69cd35616bc" category="list-text">将对象复制到云存储池</block>
  <block id="d00aaeae3c5233d689ab6c1fa3391d6c" category="paragraph">确认保留示意图显示了存储在StorageGRID 本地和云存储池中用于备份的对象。</block>
  <block id="eccd0905bbb9877cfd0ba7f4cc26a3c6" category="paragraph">确认在触发ILM规则后、云存储池中存在副本、您可以在本地检索对象而无需执行对象还原。</block>
  <block id="c27ce751e131719af380702f6711a49d" category="sidebar">如何启用StorageGRID</block>
  <block id="3778f3873debfe11e2ace6bb6af1e417" category="sidebar">StorageGRID 文档</block>
  <block id="7b99b0e0bb2f7f24ff67fbcc39f899f1" category="sidebar">经验证的第三方解决方案</block>
  <block id="3b878279a04dc47d60932cb294d96259" category="sidebar">概述</block>
  <block id="bc7a074f94cb3e6b09ba943468b03bd0" category="sidebar">产品功能指南</block>
  <block id="e02e6c7dee6578ec85d1e57d9e5d7505" category="sidebar">为AWS或Google创建云存储池</block>
  <block id="f1f92d294ec1c6f6fdea0f29b7e96f97" category="sidebar">为Azure Blob存储创建云存储池</block>
  <block id="1cf458dbfa770c9c7189b79723753358" category="sidebar">配置搜索集成服务</block>
  <block id="408cdd6548bf39b1766ce095fd112e06" category="sidebar">工具和应用程序指南</block>
  <block id="d83a76224c587ea0af02d9f6d8ee0099" category="sidebar">使用Cloudera Hadoop S3A连接器</block>
  <block id="c305708b9554a582b18cd4563fac118b" category="sidebar">使用公共存储创建Vertica Eon模式数据库</block>
  <block id="71a42bc38b535445f495ee32a46355ba" category="sidebar">使用S3cmd测试和演示S3访问</block>
  <block id="e8aaf062a960aeba132419a40c4e85ef" category="sidebar">过程和API示例</block>
  <block id="a82a0897ec719037339f7e557ccdc5b3" category="sidebar">测试和演示S3加密</block>
  <block id="d1fc85d07fb8abfaa8142a6bddefd16f" category="sidebar">测试和演示S3对象锁定</block>
  <block id="81a123ccab93cd947289b672b0e50348" category="sidebar">演示教程</block>
  <block id="37a22f48989cdc6e7e3429f09be3fc5c" category="sidebar">StorageGRID 视频库</block>
  <block id="f8e43c2f779dd11ddf192ae101019ea1" category="sidebar">NetApp 学习服务</block>
  <block id="dfcc398099d6a64026e51ab282e16253" category="sidebar">更多资源</block>
  <block id="5c8fba8e6a4b1c808cb6fcd601dd89ce" category="sidebar">StorageGRID 支持页面</block>
  <block id="697ea025ecb303d4f40d1bf3a8b4bde0" category="sidebar">NetApp 互操作性表工具（ IMT ）</block>
  <block id="8ef596bf4eb7277f78ad1d7ad4cc04de" category="sidebar">StorageGRID 知识库</block>
  <block id="c2d388654878e1108f99fdeaa465fcac" category="sidebar">NetApp 博客</block>
  <block id="a310588c148d934b9b30c31802d4a30b" category="sidebar">NetApp 社区</block>
  <block id="024f3a8ba5709643c2f09c8eabccae87" category="sidebar">经验证的第三方解决方案—概述</block>
  <block id="f4bf6c62a8784f065cebbacf57a1c62c" category="sidebar">测试和演示S3对象锁定</block>
  <block id="401b6d44d3c927f0424adce982cc6506" category="list-text">Veritas Enterprise Vault 14.2.2</block>
  <block id="51e1f53c9c33ce7f260e99f66853181d" category="summary">通过StorageGRID 11.6系统日志转发功能、您可以配置外部系统日志服务器来收集和分析StorageGRID 日志消息。ELK (Elasticsearch、Logstash、Kibana)已成为最受欢迎的日志分析解决方案之一。本文包括用于筛选和定义日志消息模式的Logstash配置示例、Kibana查询、图表和信息板示例、可帮助您快速开始StorageGRID 日志管理和分析。</block>
  <block id="ba8b98c81be3d04d10309b1945f41b3c" category="doc">使用ELK堆栈进行StorageGRID 日志分析</block>
  <block id="febdad8f949c4133d32f6ec0e8b0ca1c" category="inline-link">使用ELK视频进行StorageGRID 日志分析</block>
  <block id="b165bee40a44e630afb8a902059ed458" category="paragraph">通过StorageGRID 11.6系统日志转发功能、您可以配置外部系统日志服务器来收集和分析StorageGRID 日志消息。ELK (Elasticsearch、Logstash、Kibana)已成为最受欢迎的日志分析解决方案之一。请观看<block ref="1c3903c549bd0599ac0ebb1c424871aa" category="inline-link-rx"></block> 查看ELK配置示例以及如何使用它来识别失败的S3请求并对其进行故障排除。本文提供了Logstash配置、Kibana查询、图表和信息板的示例文件、可帮助您快速开始StorageGRID 日志管理和分析。</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="section-title">要求</block>
  <block id="b30496f397e70350f3c0324082c41741" category="list-text">StorageGRID 11.6.0.2或更高版本</block>
  <block id="b8dc02d4e6fb27304a65c0d58fbdf121" category="list-text">ELK (Elasticsearch、Logstash和Kibana)已安装并运行7.1x或更高版本</block>
  <block id="9db4c047fbc2df77e904876ca407a10a" category="section-title">示例文件</block>
  <block id="7d62fedde871da77290cb136048ab8ae" category="inline-link-macro">下载Logstash 7.x示例文件包</block>
  <block id="7f736656dd8100c22291010843e5658f" category="list-text"><block ref="f317985ee56adafb12c2258472a6183e" category="inline-link-macro-rx"></block> +* MD5 checksum* 148c23d0021d9a4bb4a6c0287464deab +* SHA256 checksum* f5ec9e2e3f842d5a7861566b167a561b4373038b4e7bb3b3d522adf2d6</block>
  <block id="69cc1f5bcff32557cde6f7f5b4b365ed" category="inline-link-macro">下载Logstash 8.x示例文件包</block>
  <block id="a87365d5d3e0619dfacb72153399871c" category="list-text"><block ref="61afb638ef1cfaa2ac62beb76c59b80b" category="inline-link-macro-rx"></block> +* MD5 checksum* e11ba3a662f87c3ef363d0fe06835 +* SHA256 checksum* 5c670755742cfdf5aa723a596b087e0153a65bcaef3934afdb682f61cd278d</block>
  <block id="cdcccab01175eb4e232499c66bfa50af" category="section-title">假设</block>
  <block id="430bacfb127efaca8a86b36b918f14b8" category="paragraph">读者熟悉StorageGRID 和ELK的术语和操作。</block>
  <block id="c742c5a36b6307267bb709355feb2c41" category="section-title">说明</block>
  <block id="eac3387862d4c7d3f970561bfc3f7c02" category="paragraph">由于Grok模式定义的名称不同、因此提供了两个示例版本。+例如、Logstash配置文件中的SYSLOGBASE格式根据安装的Logstash版本定义不同的字段名称。</block>
  <block id="4f709f3097a2dcda180a37ee47844c13" category="paragraph">* Logstash 7.17示例*</block>
  <block id="4f81ab746526b7ac4b040718ec7acade" category="image-alt">Logstash 7.17示例</block>
  <block id="91106d0591f097e8bbf222df7706bd2d" category="paragraph">* Logstash 8.23示例*</block>
  <block id="c59ad685927ef7bba94abe95eaa87376" category="image-alt">Logstash 8.23示例</block>
  <block id="bb8122fb7f8c30744fed84c9462b305d" category="list-text">根据您安装的ELK版本解压缩提供的示例。+此示例文件夹包含两个Logstash配置示例：+* sglog-2-file.conf：*此配置文件会将StorageGRID 日志消息输出到Logstash上的文件中、而不会进行数据转换。您可以使用此命令来确认Logstash正在接收StorageGRID 消息、或者帮助了解StorageGRID 日志模式。+* sglog-2-es.conf：*此配置文件使用各种模式和筛选器转换StorageGRID 日志消息。其中包括示例drop语句、这些语句根据模式或筛选器丢弃消息。输出将发送到Elasticsearch以编制索引。+根据文件中的说明自定义选定的配置文件。</block>
  <block id="3ed4288764d66f2a65f7b85b652b32d3" category="list-text">测试自定义的配置文件：</block>
  <block id="4c6585842bcd6ea99d8f33b205b2620e" category="paragraph">如果返回的最后一行与以下行类似、则此配置文件没有语法错误：</block>
  <block id="49e1ff176740ef27a71315d47a28cec0" category="list-text">将自定义的conf文件复制到Logstash服务器的配置：/etc/logstash/conf.d+如果尚未在/etc/logstash/logstash.yml中启用config.reload.automatic、请重新启动Logstash服务。否则、请等待配置重新加载间隔过。</block>
  <block id="1e2849b34515b73b14e350b3cfc6a222" category="list-text">检查/var/log/logstash/logstash-plain.log并确认在使用新配置文件启动Logstash时没有错误。</block>
  <block id="25b182c5b3173c341b5471a371174d7d" category="list-text">确认TCP端口已启动并正在侦听。+在此示例中、使用TCP端口5000。</block>
  <block id="225e60e541052bd49fdac4b77ffecbc9" category="inline-link">演示视频</block>
  <block id="fa1074da41258119adddd6a31eb40641" category="list-text">在StorageGRID 管理器图形用户界面中、配置外部系统日志服务器以向Logstash发送日志消息。请参见<block ref="144d48037e96a9804672c6dc7123d436" category="inline-link-rx"></block> 了解详细信息。</block>
  <block id="defe6f8b45f596c620301bef8fdfbee9" category="list-text">您需要在Logstash服务器上配置或禁用防火墙、以允许StorageGRID 节点连接到定义的TCP端口。</block>
  <block id="9391523be65dad63e7fad8e0d28ee818" category="list-text">在Kibana GUI中、选择Management -&gt; Dev Tools。在控制台页面上、运行此get命令以确认已在Elasticsearch上创建新索引。</block>
  <block id="30d46e8002bdd5c520a62523d772ebca" category="list-text">在Kibana GUI中、创建索引模式(ELK 7.x)或数据视图(ELK 8.x)。</block>
  <block id="291020c626f44ee2ce32684bc3a13980" category="list-text">在Kibana GUI的顶部中间的搜索框中输入"saved objects"。+在已保存对象页面上、选择导入。在导入选项下、选择"请求冲突操作"</block>
  <block id="d5a554fb68642d807aee43887546b43a" category="image-alt">Kibana导入选项</block>
  <block id="42451b291f11e82724f65b3c852cca1d" category="paragraph">导入ELK &lt;version&gt;-query-chart -sample.ndjson。+当系统提示您解决冲突时、请选择您在第8步中创建的索引模式或数据视图。</block>
  <block id="bc1a8499a0350f03b4ca75964eaad9cb" category="image-alt">Kibana冲突</block>
  <block id="d304b6866d45389dd644b1c1788bfd5a" category="paragraph">导入以下Kibana对象： +*查询*+* audit-msg-s3rq-orlm +* byncast log S3相关消息+*日志级别警告或更高+*失败的安全事件+*图表*+* S3请求计数基于bycast.log +* HTTP状态代码+*审核消息类型细分+*平均S3响应 时间+*信息板*+* S3请求信息板使用上述图表。</block>
  <block id="367c071ddbe8d1248ceb63f940e9b3cc" category="paragraph">现在、您可以使用Kibana执行StorageGRID 日志分析了。</block>
  <block id="8cd58c89ff3d51a256ecfe3fe8bab20f" category="section-title">其他资源</block>
  <block id="925a38c6c8bc1c84ae702d840efa1ef4" category="inline-link">系统日志101</block>
  <block id="43b4ce193ce75a7c51a41a392da0e953" category="list-text"><block ref="43b4ce193ce75a7c51a41a392da0e953" category="inline-link-rx"></block></block>
  <block id="36df17c33644048e4c07c17be01b2524" category="inline-link">什么是ELK堆栈</block>
  <block id="2403480f61f37fce13a75f67d092ed18" category="list-text"><block ref="2403480f61f37fce13a75f67d092ed18" category="inline-link-rx"></block></block>
  <block id="19d3c10a857b63064e06411baf1285b1" category="inline-link">Grok模式列表</block>
  <block id="7c6102b1302815b75a46740d436c93fc" category="list-text"><block ref="7c6102b1302815b75a46740d436c93fc" category="inline-link-rx"></block></block>
  <block id="13fc1087c795f112d8979eb5e2780e5c" category="inline-link">Logstash入门指南：Grok</block>
  <block id="a39eed6135a0acdcad49fe799eb1bd27" category="list-text"><block ref="a39eed6135a0acdcad49fe799eb1bd27" category="inline-link-rx"></block></block>
  <block id="1482da3b9a25b116ee5827795ac8fbbd" category="inline-link">Logstash实用指南：系统日志深度剖析</block>
  <block id="9a51320cc75988e79a130ea7dc86875c" category="list-text"><block ref="9a51320cc75988e79a130ea7dc86875c" category="inline-link-rx"></block></block>
  <block id="3a280b4922aa9eb7ce4c328f7f7dbbb3" category="inline-link">Kibana指南—浏览文档</block>
  <block id="ffe5d2718c9048b9edb4a4a97d96e90f" category="list-text"><block ref="ffe5d2718c9048b9edb4a4a97d96e90f" category="inline-link-rx"></block></block>
  <block id="98d2f29265a464a9765db0d88f294336" category="inline-link">StorageGRID 审核日志消息参考</block>
  <block id="baba0109751acb7c22b021c76b6d7b51" category="list-text"><block ref="baba0109751acb7c22b021c76b6d7b51" category="inline-link-rx"></block></block>
  <block id="288e0e9ab8b8ac8737afefecf16f61fd" category="list-text">Dremio</block>
  <block id="e07088b3eedf498bf832f9346b0e3c02" category="list-text">Reveille v10内部版本220706或更高版本</block>
  <block id="edf1439075a83a447fb8b630ddc9c8de" category="list-text">白雪片</block>
  <block id="e6a211de1fc20ed87589cd9c30f29ac3" category="list-text">Virtalica StorageFabric</block>
  <block id="e2b1887bff53094ff4de31a5b6be8203" category="sidebar">使用Elasticsearch、Logstash和Kibana进行日志分析</block>
  <block id="958e51c613c42a5edd4e8f06fad6128b" category="sidebar">使用ELK堆栈进行StorageGRID 日志分析| NetApp TV</block>
  <block id="a55559222587bd5f2986759b8e95387a" category="summary">本技术报告详细说明了如何为NetApp StorageGRID 11.6配置外部Prometheus和Grafana服务。</block>
  <block id="ec88743b2ce92a6f481315232bded2cc" category="doc">使用Prometheus和Grafana延长指标保留期限</block>
  <block id="19e3e1c7497754486f9fce5eaded999d" category="paragraph">StorageGRID 使用Prometheus存储指标、并通过内置的Grafana信息板对这些指标进行可视化。通过配置客户端访问证书并为指定客户端启用Prometheus访问、可以从StorageGRID 安全地访问Prometheus指标。目前、此指标数据的保留受管理节点存储容量的限制。为了获得更长的持续时间并能够创建这些指标的自定义可视化效果、我们将部署一个新的Prometheus和Grafana服务器、配置我们的新服务器以从StorageGRID实例中擦除这些指标、并使用对我们重要的指标构建一个信息板。您可以获取有关在中收集的Prometheus指标的详细信息<block ref="b4322fd604ba4ce3b6c052facca6761f" category="inline-link-rx"></block>。</block>
  <block id="4ea04e03e09a38c155d3e71e1fb7de4c" category="section-title">联合Prometheus</block>
  <block id="4d27d8d41585fe5291670dc3d60f75a7" category="section-title">实验室详细信息</block>
  <block id="85bef63997bbb31cf4fa40eff8acef2b" category="paragraph">在本示例中、我将使用StorageGRID 11.6节点的所有虚拟机以及Debian 11服务器。StorageGRID 管理界面配置了一个公共信任的CA证书。本示例将不会介绍StorageGRID 系统或Debian Linux安装的安装和配置过程。您可以使用Prometheus和Grafana支持的任何Linux模式。Prometheus和Grafana都可以安装为Docker容器、从源代码构建或预编译的二进制文件。在此示例中、我将直接在同一Debian服务器上安装Prometheus和Grafana二进制文件。从下载并按照基本安装说明进行操作<block ref="89724ccad5c62d1626a6c4f814f7ad92" category="inline-link-rx"></block> 和<block ref="14b4aeaebc6939fe5db011cfca13bded" category="inline-link-rx"></block> 。</block>
  <block id="e6c56f2ad47108b72210c45d114ab981" category="section-title">为Prometheus客户端访问配置StorageGRID</block>
  <block id="a5b8a4af4e814e777e9666e98c1489b1" category="paragraph">要访问StorageGRID Stored Prometheus指标、您必须生成或上传具有专用密钥的客户端证书、并为客户端启用权限。StorageGRID 管理接口必须具有SSL证书。此证书必须由Prometheus服务器信任、或者由可信CA信任、如果是自签名证书、则此证书必须手动受信任。要了解更多信息、请访问<block ref="10adb8f93432a6d42dbae4551371be78" category="inline-link-rx"></block>。</block>
  <block id="76f344ac7fba487473f1b7a1890e9f8e" category="list-text">在StorageGRID 管理界面中、选择左下方的"configuration"、然后在第二列的"Security"下单击Certificates。</block>
  <block id="6672f37bb0822d570acc565c15cb698f" category="list-text">在"证书"页面上、选择"客户端"选项卡、然后单击"添加"按钮。</block>
  <block id="2f33cc1441b10d118155c459b7c0ec4f" category="list-text">提供要授予访问权限的客户端的名称并使用此证书。单击"允许用户"前面的"权限"下的框、然后单击"继续"按钮。</block>
  <block id="e59f14e1cf84d2b0c36bfe68a98c16ed" category="image-alt">证书名称</block>
  <block id="b47c072e73067166591337127c6332cf" category="list-text">如果您拥有CA签名的证书、则可以选择"上传证书"单选按钮、但在我们的情况下、我们将通过选择"生成证书"单选按钮让StorageGRID 生成客户端证书。此时将显示要填写的必填字段。输入客户端服务器的FQDN、服务器的IP、主题和有效天数。然后单击"生成"按钮。</block>
  <block id="efdc2e922559f9410d73ad5e9763cfe1" category="image-alt">证书详细信息</block>
  <block id="512a2185a4d8f29cd92f5eeca5299428" category="list-text">下载证书对等文件和专用密钥对等文件。</block>
  <block id="950d1a08b94affeab69ad5298853bcab" category="image-alt">证书下载</block>
  <block id="c7d534d2e8c571fc60886fffffaed71d" category="section-title">准备Linux服务器以安装Prometheus</block>
  <block id="1a1198e75df118c29ed3f2cfe6f42314" category="paragraph">在安装Prometheus之前、我希望为我的环境做好准备、让Prometheus用户、目录结构做好准备、并为指标存储位置配置容量。</block>
  <block id="53012110a3b12b6dbece7a2d3329563c" category="list-text">创建Prometheus用户。</block>
  <block id="75ad7bfc7b05da8e590553a1ba59d00e" category="list-text">为Prometheus、客户端证书和指标数据创建目录。</block>
  <block id="cf93e27e07f84a6f34c0baad77d73502" category="list-text">我使用ext4文件系统格式化了用于指标保留的磁盘。</block>
  <block id="dba914a2be67f5826db730febd483dbb" category="list-text">然后、我将文件系统挂载到Prometheus指标目录。</block>
  <block id="1db6657920c882fe516dc56a8fc42ae0" category="list-text">获取用于指标数据的磁盘的UUID。</block>
  <block id="de5a7b5d75aef0f9aa929a3ffdd7bf91" category="list-text">在/etc/fstab/中添加一个条目、使挂载在重新启动后仍会使用/dev/sdb的uuid。</block>
  <block id="e7184db422126b9a8ae98daa3ef08b00" category="section-title">安装和配置Prometheus</block>
  <block id="51006cba71ff2e50795b3bf3c2b2e223" category="paragraph">现在、服务器已准备就绪、我可以开始安装Prometheus并配置此服务。</block>
  <block id="c99b7eb31cdbd3d09abc27ebdcb5325d" category="list-text">提取Prometheus安装包</block>
  <block id="6d1af4201bd8173d4f87201195065c96" category="list-text">将二进制文件复制到/usr/local/bin、并将所有权更改为先前创建的Prometheus用户</block>
  <block id="22971a12624067801ed27bf22a1a43d4" category="list-text">将控制台和库复制到/etc/Prometheus</block>
  <block id="c0b8e90b4197c0bc1a63ab18dad551cb" category="list-text">将先前从StorageGRID 下载的客户端证书和专用密钥对等文件复制到/etc/Prometheus/Certs</block>
  <block id="6fd6fe03d0bae048f49350a7b29d2b20" category="list-text">创建Prometheus配置YAML文件</block>
  <block id="650d2cc27d4f8021f93af373465ebb1d" category="list-text">插入以下配置。作业名称可以是您所需的任何名称。将"-targets"更改为管理节点的FQDN、如果更改了证书名称和专用密钥文件名、请更新tls_config部分以使其匹配。然后保存文件。如果您的网格管理界面正在使用自签名证书、请下载此证书并将其与具有唯一名称的客户端证书一起放置、然后在tls_config部分中添加ca_file：/etc/Prometheus/Cert/UIcert.pem</block>
  <block id="adbbb69e4573c242198e942a4c984a56" category="list-text">在此示例中、我将收集以alertmanager、Cassandra、node和StorageGRID 开头的所有指标。您可以在中查看有关Prometheus指标的详细信息<block ref="b4322fd604ba4ce3b6c052facca6761f" category="inline-link-rx"></block>。</block>
  <block id="2a83272e8be3a9939618ae5d54c15280" category="paragraph">如果网格管理界面使用的是自签名证书、请下载此证书并将其与具有唯一名称的客户端证书一起放置。在tls_config部分中、将证书添加到客户端证书和专用密钥行上方</block>
  <block id="9d5f73c80f9dcd64a2b4f51ed7df1c74" category="list-text">将/etc/Prometheus和/var/lib/Prometheus中所有文件和目录的所有权更改为Prometheus用户</block>
  <block id="94394bcffb3c751d1a1c75adf1dd3339" category="list-text">在/etc/systemd/system中创建一个Prometheus服务文件</block>
  <block id="1c83729b0147981bd53a386123e950b2" category="list-text">插入以下行、请注意#-storage.tsdb.retention.time=1y#、它会将指标数据的保留期限设置为1年。或者、您也可以使用#-storage.tsdb.retention.size=300GiB#根据存储限制确定保留期限。这是设置指标保留的唯一位置。</block>
  <block id="c44e8fe3436b496aa03fa98464a357bb" category="list-text">重新加载systemd服务以注册新的Prometheus服务。然后启动并启用Prometheus服务。</block>
  <block id="a95dc294578d84798aa85e589b1d7169" category="list-text">检查服务是否运行正常</block>
  <block id="efb4923d4171f8bbe31a74fc17e7a4ea" category="list-text">现在、您应该能够浏览到Prometheus服务器的UI<block ref="9c036ae021e9b80558a889223ee0da28" category="inline-link-rx"></block> 并查看UI</block>
  <block id="6246893720a6bc3db5f56c322fc01d95" category="image-alt">Prometheus UI页面</block>
  <block id="bc9d8c8501595ac689577e371305dd0c" category="list-text">在"Status" Targets下、您可以看到我们在Prometheus.yml中配置的StorageGRID 端点的状态</block>
  <block id="ef446049ce3cd8c094f34cb3047e10d7" category="image-alt">Prometheus状态菜单</block>
  <block id="b46ccb7031f632fe5680ae39d381aac5" category="image-alt">Prometheus目标页面</block>
  <block id="d438cb3ada618e17e8da5458906319f6" category="list-text">在图形页面上、您可以执行测试查询并验证数据是否已成功擦除了。例如、在查询栏中输入"storagegRid_node_cpu_utilization_percentage "、然后单击执行按钮。</block>
  <block id="a4b484847ff4cdaf28ddb0fbdebf7234" category="image-alt">执行Prometheus查询</block>
  <block id="4b9bf479d75eb40b84a86c9d4d9829c6" category="section-title">安装和配置Grafana</block>
  <block id="d6c4e0d91ac95c90048b7b552f962b83" category="paragraph">在Prometheus安装完毕并正常工作之后、我们可以继续安装Grafana并配置信息板</block>
  <block id="28946a57c620a6d61330c3ec2b855ea1" category="section-title">Grafana安装</block>
  <block id="886d386fd41ddae5268cb47bd2c0f6f7" category="list-text">安装最新的企业版Grafana</block>
  <block id="2b486298e7630814372aec36baee859f" category="list-text">为稳定版本添加此存储库：</block>
  <block id="166a21daf7286fbeb21167b5802de660" category="list-text">添加存储库后。</block>
  <block id="2557b3cde7450f332315bc10e61bdba8" category="list-text">重新加载systemd服务以注册新的grafana服务。然后启动并启用Grafana服务。</block>
  <block id="c96bdac515037faefe395a7292cce691" category="list-text">现在、Grafana已安装并正在运行。打开浏览器访问HTTP：//Prometheus-server：3000时、您将看到Grafana登录页面。</block>
  <block id="b5ed0857233fefc7884d300cb79511cc" category="list-text">默认登录凭据为admin/admin、您应根据提示设置新密码。</block>
  <block id="a201e49270e34f12f6f8e8e17b7f63b4" category="section-title">为StorageGRID 创建Grafana信息板</block>
  <block id="8fa4555fc2e45c8e0b51029500b0ed27" category="paragraph">在Grafana和Prometheus安装并运行的情况下、现在是时候通过创建数据源和构建信息板来连接这两者了</block>
  <block id="4824e95e765437e0267119c28a2ebf58" category="list-text">在左侧窗格中、展开"配置"并选择"数据源"、然后单击"添加数据源"按钮</block>
  <block id="5ab8c2d2b825ee44ae77e39f44377ef6" category="list-text">Prometheus将是可供选择的顶级数据源之一。如果不是、请使用搜索栏找到"Prometheus"</block>
  <block id="bef2ae359538161990ca7f4f33bcbb9b" category="list-text">通过输入Prometheus实例的URL以及与Prometheus间隔匹配的擦除间隔来配置Prometheus源。我还禁用了警报部分、因为我未在Prometheus上配置警报管理器。</block>
  <block id="a40cb233948efde79195641883d0e611" category="image-alt">Grafana Prometheus配置</block>
  <block id="b84470c739701819ce6f044fb322a73b" category="list-text">输入所需设置后、向下滚动到底部、然后单击"Save &amp; test"(保存并测试)</block>
  <block id="a4d1cacdf98710f66261bf842712805f" category="list-text">配置测试成功后、单击Explore按钮。</block>
  <block id="0dbc8986f05d1af0419dde8bc4a17614" category="list-text">在"浏览"窗口中、您可以使用我们使用"storagegrid node_cpu_utilization_percentage "测试的相同指标、然后单击"运行查询"按钮</block>
  <block id="65408cc1057e1983691b2ab33f411afc" category="image-alt">Grafana Prometheus指标探索</block>
  <block id="59c74787b5c8d94700e0808eb7f7080d" category="list-text">现在、我们已配置数据源、可以创建一个信息板。</block>
  <block id="2dbede5ad9fd60cdbd41384214e737a8" category="list-text">在左侧窗格中、展开Dashboards、然后选择"+" new Dashboard"</block>
  <block id="9b8670951f7b4684c224ee7c839d456e" category="list-text">选择"添加新面板"</block>
  <block id="0679a10db91cc04805eaf260fa1cf908" category="list-text">通过选择指标来配置新面板、我将再次使用"storagegrid node_cpu_utilization_percentage "、输入面板标题、展开底部的"选项"、并将图例更改为自定义、然后输入"｛｛instance｝｝"来定义节点名称、并在右侧窗格的"标准选项"下将"单元"设置为"Misc 100/percent (0%)"。然后单击"应用"将面板保存到信息板。</block>
  <block id="5a2f263537e34f8a641847b07c2dbb3a" category="image-alt">配置grafana面板</block>
  <block id="171b2836c7ab4655438b8b81bc7d0d7f" category="list-text">我们可以继续为所需的每个指标构建这样的信息板、但幸运的是、StorageGRID 已经拥有包含面板的信息板、我们可以复制到自定义信息板中。</block>
  <block id="0045460d4b8ee6e2ccf21ba85bb61aa2" category="list-text">从StorageGRID 管理界面的左侧窗格中、选择"Support"、然后在"Tools"列的底部单击"Metrics "。</block>
  <block id="dacb92a5479161b14f63fe1bc9ae9551" category="list-text">在指标中、我将选择中间列顶部的"网格"链接。</block>
  <block id="d41d9476c523c25b4f286c1fb9f71af1" category="image-alt">StorageGRID 指标</block>
  <block id="bcb5b82ee118287323cbbcf5705d51fd" category="list-text">在网格信息板中、我们选择"已用存储-对象元数据"面板。单击小下箭头和面板标题的末尾以下拉菜单。从此菜单中选择"检查"和"面板JSON"。</block>
  <block id="3283a20d4b70f7f18e4ffa4329564dec" category="image-alt">StorageGRID 信息板</block>
  <block id="bdfde960a4b9f7a6f52bc1bbcfb809ea" category="list-text">复制JSON代码并关闭窗口。</block>
  <block id="0ae78f538d8850bb1adf673ad3d9b9de" category="image-alt">StorageGRID JSON</block>
  <block id="dd5507576d8e651777535414a2a4d89c" category="list-text">在新信息板中、单击图标以添加新面板。</block>
  <block id="b87847301cad106c92101bdca1149176" category="image-alt">Grafana添加面板</block>
  <block id="e7db75cfcf6183907b6f092041507fab" category="list-text">应用新面板而不进行任何更改</block>
  <block id="28117e550ca797c69346cfabb47d4275" category="list-text">就像使用StorageGRID 面板一样、检查JSON。从StorageGRID 面板中删除所有JSON代码并将其替换为复制的代码。</block>
  <block id="243663c8bbd4a1adc19a8656ea49f52a" category="image-alt">Grafana检查面板</block>
  <block id="045121a7dd658eca0fb920eae2865bc5" category="list-text">编辑新面板、在右侧、您将看到一条带有"迁移"按钮的迁移消息。单击按钮、然后单击"应用"按钮。</block>
  <block id="57a8b8008e71c9674e7cceda50fba182" category="image-alt">Grafana编辑面板菜单</block>
  <block id="f810aaf1536bfcba66e5b92d051c04df" category="image-alt">Grafana编辑面板</block>
  <block id="4d3250551177a4d9cd85c16745cc024a" category="list-text">将所有面板安装到位并根据需要进行配置后。单击右上角的磁盘图标以保存信息板、并为您的信息板指定一个名称。</block>
  <block id="6f8b794f3246b0c1e1780bb4d4d5dc53" category="section-title">结论</block>
  <block id="3c381cb8a7d35d21cb305dce81f773fb" category="paragraph">现在、我们推出了一款具有可自定义数据保留和存储容量的Prometheus服务器。这样、我们就可以继续构建自己的信息板、其中包含与我们的运营最相关的指标。您可以获取有关在中收集的Prometheus指标的详细信息<block ref="b4322fd604ba4ce3b6c052facca6761f" category="inline-link-rx"></block>。</block>
  <block id="7045f46ad76322e4dc3af49b0bb57c27" category="list-text">模式9</block>
  <block id="d5b38301ef87d6a23fb50fbf5a064be8" category="list-text">Modzy</block>
  <block id="d48885bf40ed8b15489c6b02ba7daa08" category="list-text">磁盘转换数据</block>
  <block id="d59db7846bd10b6d60d21543df9faa9e" category="list-title">您需要的内容</block>
  <block id="9db3241b54bebb9425e6b4d63d712bb2" category="paragraph-title">预期结果</block>
  <block id="e3cd39cab4140108c69a9666712a418b" category="list-text">Veritas NetBackup 10.1.1及更高版本</block>
  <block id="bb1497981ff73cef48984bbf2d12f88d" category="summary">配置Datadog HQ以收集StorageGRID SNMP指标和陷阱。</block>
  <block id="1d93d7550158f858bd468fbde662a33b" category="doc">Datadog SNMP配置</block>
  <block id="eb2afb3c5447bd1a294d03f85bdbf78f" category="paragraph">配置Datadog以收集StorageGRID SNMP指标和陷阱。</block>
  <block id="254e743ae1bb1477fc76b5f265d1b669" category="section-title">配置Datadog</block>
  <block id="8ba5d4dc38f50df01cecfabd149412dd" category="paragraph">Datadog是一种监控解决方案 、可提供指标、可视化和警报功能。以下配置是在StorageGRID 系统本地部署的Ubuntu 22.04.1主机上使用Linux代理版本7.43.1实施的。</block>
  <block id="44719a19440665d12ba92afc2fa7ee3a" category="section-title">从StorageGRID MIB文件生成的数据日志配置文件和陷阱文件</block>
  <block id="af2ae71ceff4ddeec277e30874556f23" category="paragraph">Datadog提供了一种将产品MIB文件转换为映射SNMP消息所需的数据日志参考文件的方法。</block>
  <block id="9555064e7f86713428cb59d575ff3094" category="paragraph">按照找到的说明生成用于数据日志陷阱解析映射的StorageGRID YAML文件<block ref="f343456bb923e7885796647eeadd3d6e" category="inline-link-rx"></block>。+将此文件放在/etc/datadog-agent/conf.d/snmp.d/traps_db/+中</block>
  <block id="75ba4473ac4c25785bc326af04575c33" category="inline-link-macro">下载陷阱YAML文件</block>
  <block id="3e53958fa504c3583e8828bcb2bf3916" category="list-text"><block ref="461124e25f1a3166dde077560e5de2e8" category="inline-link-macro-rx"></block> +</block>
  <block id="f8270aacb253f160ebc0e425a2587b7b" category="list-text">* MD5校验和* 42e27e4210719945a46172b98c379517 +</block>
  <block id="93d38624cd5c44ecfa7169d96b24a075" category="list-text">* SHA256校验和* d0fe5c8e6ca3c902d054f854b70a85f928cb8b7c76391d356f05d2cf73b6887 +</block>
  <block id="92fd2ccb250e828423815a378d8d3826" category="paragraph">此StorageGRID 配置文件YAML文件用于数据日志指标映射、此文件是按照找到的说明生成的<block ref="3045d5a4d00639b5530941114ac5cf83" category="inline-link-rx"></block>。+将此文件放置在/etc/datadog-agent/conf.d/snmp.d/profiles/+中</block>
  <block id="d2dd3c2a17a766ace1b1579f47e2fb56" category="inline-link-macro">下载配置文件YAML文件</block>
  <block id="2cfc11f4b4bdccb2c0363e65e6ef371b" category="list-text"><block ref="170544ba2681432bd143113cc39acf47" category="inline-link-macro-rx"></block> +</block>
  <block id="08a71a3ef2942911802e950874c5f3e5" category="list-text">* MD5校验和* 72bb7784f4801adda4e0c3ea77df19aa +</block>
  <block id="06724753af3a8dde065ac4a183962269" category="list-text">* SHA256校验和* b6b7fadd330 63422a8bb8e39b3ead8ab38349ee0229926eadc8585f0087b8cee +</block>
  <block id="445562a58e90a6652889435ed9ad0c4e" category="section-title">用于衡量指标的SNMP Datadog配置</block>
  <block id="d06e2ca98a9d51ff9586ddb7e12ca3ca" category="paragraph">可以通过两种方式管理为指标配置SNMP。您可以通过提供包含StorageGRID 系统的网络地址范围来配置自动发现、也可以定义各个设备的IP。根据所做的决定、配置位置会有所不同。自动发现在数据日志代理YAML文件中定义。在SNMP配置YAML文件中配置显式设备定义。以下是同一StorageGRID 系统中的每个示例。</block>
  <block id="b5fac60116712074e4581a0451a7d934" category="section-title">自动发现</block>
  <block id="aa456ba5b2a0193fe062645b5f7e8d06" category="paragraph">配置位于/etc/datadog-agent/datadog.yaml中</block>
  <block id="f3fe7f4238c77636cfd3cb9045c1d862" category="section-title">单个设备</block>
  <block id="494f3f84f8f27f7e6a534b587f59eb86" category="paragraph">/etc/datadog-agent/conf.d/snmp.d/conf.yaml</block>
  <block id="8ee614ce7a2c762cd130b8e12208891f" category="section-title">陷阱的SNMP配置</block>
  <block id="d22624c97bdf44f40377df61b6463bc6" category="paragraph">SNMP陷阱的配置在datadog配置yaml文件/etc/datadog-agent/datadog.yaml中定义</block>
  <block id="629386ff1e9bf6511474fca8de181896" category="section-title">StorageGRID SNMP配置示例</block>
  <block id="2a9f8de2dc701df774b911de893f1dcc" category="paragraph">StorageGRID 系统中的SNMP代理位于配置选项卡的监控列下。启用SNMP并输入所需信息。如果要配置陷阱、请选择"陷阱目标"并为包含陷阱配置的Datadog代理主机创建一个目标。</block>
  <block id="3bcc2a20e293e30e57142a6f40a3f3b9" category="image-alt">StorageGRID SNMP配置</block>
  <block id="db5cf800912823f17ae08432336e8fc1" category="summary">如何使用端口重新映射。</block>
  <block id="acaf7e6854a9128b9491ba362d72abd1" category="doc">如何使用端口重新映射</block>
  <block id="f58678d019bf671b6804715b8a92be9f" category="paragraph">由于多种原因、您可能需要重新映射传入或出站端口。您可以从原有的CLB负载平衡器服务迁移到当前的nginx服务负载平衡器端点、并保持相同的端口以减少对客户端的影响、或者希望在管理节点客户端网络上为客户端S3使用端口443、或者设置防火墙限制。</block>
  <block id="4a0a1689981e56bfe0cae3cedb6a2794" category="section-title">通过端口重新映射将S3客户端从CLB迁移到NGINX</block>
  <block id="bbaaf9c22d5e2039997011dbc346f453" category="paragraph">在StorageGRID 11.3之前的版本中、网关节点上包含的负载平衡器服务是连接负载平衡器(CLB)。在StorageGRID 11.3中、NetApp引入了NGINX服务、作为功能丰富的集成解决方案 、用于平衡HTTP流量的负载。由于CLB服务在当前版本的StorageGRID 中仍然可用、因此您不能在新的负载平衡器端点配置中重复使用端口8082。要解决此问题、8082入站端口将重新映射到10443。这样、传入网关端口8082的所有HTTPS请求都会重定向到端口10443、从而绕过CLB服务、而是连接到NGINX服务。尽管以下说明适用于VMware、但所有安装方法都具有port_remap功能、您可以对裸机部署和设备使用类似的过程。</block>
  <block id="7726cb4ae51497b918d06ab5c00bcc41" category="section-title">VMware虚拟机网关节点部署</block>
  <block id="32c57c85de9742d548e025b40fcb450b" category="paragraph">以下步骤适用于使用StorageGRID 开放式虚拟化格式(OVF)在VMware vSphere 7中将网关节点部署为VM的StorageGRID 部署。此过程需要删除虚拟机并使用相同名称和配置重新部署虚拟机。在启动VM之前、请更改vApp属性以重新映射端口、然后启动VM并按照节点恢复过程进行操作。</block>
  <block id="7c8213913912043a5b5fc24ca449cb0c" category="list-text">您正在运行StorageGRID 11.3或更高版本</block>
  <block id="c502d2640b4493815312b1ec133633e4" category="list-text">您已下载并有权访问已安装的StorageGRID 版本VMware安装文件。</block>
  <block id="9c64cd89435575e44f429843d544ef5f" category="list-text">您拥有一个vCenter帐户、该帐户有权打开/关闭VM、更改VM和vApp的设置、从vCenter中删除VM以及通过OVF部署VM。</block>
  <block id="8815fdf6ff2c55e7296dffb2aec14521" category="list-text">您已创建负载平衡器端点</block>
  <block id="a66196ce653d06d45221584bf8852afb" category="list-text">此端口已配置为所需的重定向端口</block>
  <block id="31d78e3c03fd7966ea974e218ee9e7e0" category="list-text">端点SSL证书与在配置/服务器证书/对象存储API服务端点服务器证书中为CLB服务安装的证书相同、或者客户端可以接受证书更改。</block>
  <block id="bcb202433930795c39aeaaaac1732e14" category="section-title">销毁第一个网关节点</block>
  <block id="8b492c89f3e9eadb813da7cd99b82545" category="paragraph">要销毁第一个网关节点、请执行以下步骤：</block>
  <block id="9088243625c17cecb6cc9cbb8fab3cdb" category="list-text">如果网格包含多个、请选择要从其开始的网关节点。</block>
  <block id="f578499a6a5d4e99e51260ea6f901c94" category="list-text">如果适用、从所有DNS轮循实体或负载平衡器池中删除节点IP。</block>
  <block id="7c756592f17f71e15e66ceae005b5721" category="list-text">等待生存时间(TTL)并打开会话过期。</block>
  <block id="5c2e6ff175e76bb9e990068801b548a8" category="list-text">关闭VM节点。</block>
  <block id="478ceb19860ae182e1eebf6d11e90791" category="list-text">从磁盘中删除VM节点。</block>
  <block id="e753b6d0c296afcb396f7c9d7092ef0b" category="section-title">部署替代网关节点</block>
  <block id="e9bdcbe25d437987ed75a39aadaaecae" category="paragraph">要部署替代网关节点、请执行以下步骤：</block>
  <block id="f02589424168a3ac3057a3a896c3be98" category="list-text">从OVF部署新虚拟机、从从从支持站点下载的安装包中选择.OVF、.MF和.vmdk文件：</block>
  <block id="7b22456f38890563bcb235553bd7d9ee" category="list-text">vsphere-gateway.mf</block>
  <block id="dbdfc6d64b5d051e203939b63154bddb" category="list-text">vsphere-gateway.OVF</block>
  <block id="67e5f0e53462232f2aa589a464eea4b8" category="list-text">netapp-sg-11.4.0-20200721.1338.d3969b3.vmdk</block>
  <block id="579b803b8e20891c89683e797fdbd01f" category="list-text">部署虚拟机后、从虚拟机列表中选择该虚拟机、然后选择配置选项卡vApp选项。</block>
  <block id="07ab08f304d7cfe4d3d5ea13bbde9f1d" category="inline-image-macro">vApp选项选项卡</block>
  <block id="c9fc6d8e3be4de1d4c27b9f0b82c5e2a" category="list-text">向下滚动到属性部分、然后选择port_remap_inbound属性</block>
  <block id="9e24f5887a5bfec21b66a7a9bf2c2e9e" category="inline-image-macro">端口重新映射入站</block>
  <block id="44149ca1e58524f8537ae00b2d6e4b99" category="list-text">滚动到属性列表顶部、然后单击编辑</block>
  <block id="fb1b9b4a3c929c6a466a1452400315f4" category="inline-image-macro">编辑按钮</block>
  <block id="0e8c86fd50178cb280113dfa414bfaef" category="list-text">选择类型选项卡、确认已选中用户可配置复选框、然后单击保存。</block>
  <block id="71f961422f32dab92bd408435e59e11f" category="inline-image-macro">键入Tab</block>
  <block id="083e7091efe8fb649ee9fb0c0870917c" category="list-text">在"Properties"列表顶部、仍选择了"port_remap_inbound"属性、然后单击"Set value"。</block>
  <block id="58a9fe2002d87ad86a952f2aa06b652f" category="inline-image-macro">设置值按钮</block>
  <block id="7cabe4a6c37ea2ab4c5afff39965feca" category="list-text">在属性值字段中、输入网络(网格、管理员或客户端)、TCP、原始端口(8082)和新端口(10443)、每个值之间均包含"/"、如下所示。</block>
  <block id="c8e309d9efc8bcc3c0a6de4a0a6bde89" category="inline-image-macro">属性值</block>
  <block id="b755dc1994e1391a0aff77ad323c4d58" category="list-text">如果使用多个网络、请使用逗号(、)分隔网络字符串、例如GRIDE/TCP/8082/10443、admin/TCP/8082/10443、client/TCP/8082/10443</block>
  <block id="a053ed3549ecf3e6087e7328aeace847" category="section-title">恢复网关节点</block>
  <block id="0e495d4bce7b9fde6238de8cfff28959" category="paragraph">要恢复网关节点、请执行以下步骤：</block>
  <block id="7679db7e2b0055ab46be43f42a01bf23" category="list-text">导航到网格管理UI的维护/恢复部分。</block>
  <block id="e46a0719f8df97ff4d12f03dd8ce959c" category="inline-image-macro">维护菜单</block>
  <block id="c086be1149c183dc763a11cf3ad5faea" category="list-text">打开VM节点的电源、并等待此节点显示在网格管理UI的维护/恢复待定节点部分中。</block>
  <block id="b91ce83799a5a14738726ef1b7dbd9f7" category="inline-image-macro">恢复待定</block>
  <block id="bf30086dfd38bd897ca450b6573d0874" category="list-text">恢复节点后、如果适用、可以将此IP包括在所有DNS轮循实体或负载平衡器池中。</block>
  <block id="6b6336923a8b76c43c7d0a3bd89a11ce" category="paragraph">现在、端口8082上的任何HTTPS会话都会转到端口10443</block>
  <block id="eca02f566d0b3032cdf4b10c546bf899" category="section-title">重新映射端口443、以便在管理节点上进行客户端S3访问</block>
  <block id="5ed2b115742b0eff3aa61d09c627a761" category="paragraph">StorageGRID 系统中管理节点或包含管理节点的HA组的默认配置是、为管理和租户管理器UI保留端口443和80、并且不能用于负载平衡器端点。要执行此操作、解决方案 将使用端口重新映射功能并将入站端口443重定向到将配置为负载平衡器端点的新端口。完成后的客户端S3流量将能够使用端口443后、网格管理UI将只能通过端口8443访问、租户管理UI将只能通过端口9443访问。重新映射端口功能只能在节点安装时进行配置。要对网格中的活动节点实施端口重新映射、必须将其重置为预安装状态。这是一个具有破坏性的操作步骤 、在进行配置更改后会进行节点恢复。</block>
  <block id="18c1a696eb608448df297bede4857b98" category="section-title">备份日志和数据库</block>
  <block id="014c03da469f3067ccc3ff9bebacc715" category="paragraph">管理节点包含审核日志、Prometheus指标以及有关属性、警报和警报的历史信息。拥有多个管理节点意味着您拥有此数据的多个副本。如果您的网格中没有多个管理节点、则应确保保留此数据、以便在此过程结束时恢复此节点后进行还原。如果网格中还有其他管理节点、则可以在恢复过程中从该节点复制数据。如果网格中没有其他管理节点、则可以按照以下说明复制数据、然后再销毁此节点。</block>
  <block id="b51ed4bc19034de7a115af8950bb1e14" category="section-title">复制审核日志</block>
  <block id="b49d416c5f1ef8021854b13b24ab8093" category="list-text">登录到管理节点：</block>
  <block id="c7aa9be1c8fd37c075edba3a4073253f" category="list-text">输入以下命令：<block ref="893fbdaf85496f428ec5ee3fb396b601" prefix=" " category="inline-code"></block></block>
  <block id="700a38780f22dd0bcf544970e8d449e6" category="list-text">输入中列出的密码<block ref="28325afa13c532a62489ef0d7bee3061" prefix=" " category="inline-code"></block> 文件</block>
  <block id="aacfb09e5ff36425a74a452ef6b304fb" category="list-text">输入以下命令切换到root：<block ref="305eb7199fe9189e006b2d60d7221664" prefix=" " category="inline-code"></block></block>
  <block id="d5ed36cf573fac8e8c5a8bb8d1be3d4b" category="list-text">将 SSH 专用密钥添加到 SSH 代理。输入 ...<block ref="3f7bb7914b751ca9467e926e5ad5c306" prefix=" " category="inline-code"></block></block>
  <block id="c0e5dff85f9da9a642946e884fdc4f4a" category="list-text">输入中列出的SSH访问密码<block ref="28325afa13c532a62489ef0d7bee3061" prefix=" " category="inline-code"></block> 文件</block>
  <block id="28a6869f1b6015dcee0791c0407f14b2" category="list-text">创建目录以将所有审核日志文件复制到单独网格节点上的临时位置。使用_storage_node_01_：</block>
  <block id="0a61743bb33ab598f7fde50d348546b0" category="list-text"><block ref="70a89925f7bd7f97d974d84f8e94caec" prefix="" category="inline-code"></block></block>
  <block id="a42ba8884ec16cd9952837d8ec5309cc" category="list-text"><block ref="aa394b245c0bf48947593a677f05d8d6" prefix="" category="inline-code"></block></block>
  <block id="e1083ceccf1ce237984866a9d2fc9267" category="list-text">返回管理节点、停止AMS服务以防止其创建新的日志文件：<block ref="7746f9f32013186f9d484d9201f0ab64" prefix=" " category="inline-code"></block></block>
  <block id="8acc534ecf057b9ef50d01827f7d07cb" category="list-text">重命名 audit.log 文件，使其在复制到已恢复的管理节点时不会覆盖现有文件。</block>
  <block id="f2d95467df0c137dbcfd23af2c4ac061" category="list-text">将 audit.log 重命名为唯一编号的文件名，例如 yyyy-mm-dd.txt.1 。例如、您可以将审核日志文件重命名为2015-10-25.txt</block>
  <block id="d5ec7f781f03902f72576ed5d4973025" category="list-text">重新启动AMS服务：<block ref="ae8918f1e1a4da1db2bc24c7571b1a06" prefix=" " category="inline-code"></block></block>
  <block id="540fe4d620139f77d8a99273336086b6" category="list-text">复制所有审核日志文件：<block ref="da5b29edacd9088471c331eb4f58fc3e" prefix=" " category="inline-code"></block></block>
  <block id="9f195229ea460e36d2a4e12c22a35e14" category="section-title">复制Prometheus数据</block>
  <block id="cc670fc4a71e44ccb42fd7b0de6174d0" category="admonition">复制 Prometheus 数据库可能需要一个小时或更长时间。在管理节点上停止服务时、某些Grid Manager功能将不可用。</block>
  <block id="7310684c8dcbbfaabdf20201a8358cd2" category="list-text">创建目录以将Prometheus数据复制到单独网格节点上的临时位置、我们将再次使用_storage_node_01_：</block>
  <block id="0da0fdfdce25fb3258c8606dd3c98a96" category="list-text">登录到存储节点：</block>
  <block id="e3e3892db3fe841f9e2b77b7e3818040" category="list-text">输入以下命令：<block ref="70a89925f7bd7f97d974d84f8e94caec" prefix=" " category="inline-code"></block></block>
  <block id="f81680a45409f9d92d776cda7d01fffd" category="list-text">mkdir -p /var/local/tmp/Prometheus`</block>
  <block id="94975e4b13e4b0a18c40a960c94db2a8" category="list-text">输入以下命令：<block ref="aeb11d865bcf0a27bb503f64cd61cb76" prefix=" " category="inline-code"></block></block>
  <block id="20d93dfee3e8f8ae30d5b9a4f8efa05b" category="list-text">从管理节点中、停止Prometheus服务：<block ref="b9b286406d96941553a3bebbe76c28bd" prefix=" " category="inline-code"></block></block>
  <block id="d12ee7875165dfef46eee53bc35da76b" category="list-text">将Prometheus数据库从源管理节点复制到存储节点备份位置节点：<block ref="598c3ef030113ed40ad1803686162013" prefix=" " category="inline-code"></block></block>
  <block id="1ed2f8c537da823e46ad98b460d5d692" category="list-text">在源管理节点上重新启动Prometheus服务<block ref="b48ed4a1625d38512cd50d69778280dd" prefix="." category="inline-code"></block></block>
  <block id="ad9f13c5d36c9f45b4e07d4467312b13" category="section-title">备份历史信息</block>
  <block id="40df7a99a836d18d1b5d034d8fcb27a8" category="paragraph">历史信息存储在mysql数据库中。要转储数据库的副本、您需要NetApp提供的用户和密码。如果网格中有另一个管理节点、则无需执行此步骤、在恢复过程中、可以从其余管理节点克隆数据库。</block>
  <block id="3efbc9cf8ba869958267ac5011fe55e1" category="list-text">停止管理节点上的StorageGRID 服务并启动NTP和mysql</block>
  <block id="71c1a198ee24c736ef0a4a6df4372089" category="list-text">停止所有服务：<block ref="e83661e5ce1c75f30a71cf8416b27985" prefix=" " category="inline-code"></block></block>
  <block id="02330fc2569188fc76ebc99072cff940" category="list-text">重新启动NTP服务：<block ref="4c55c6ee391e66baa62612dc411cec8f" prefix=" " category="inline-code"></block>..restart mysql服务：<block ref="3cc0f2d0774d9775766d87414c4abca7" prefix=" " category="inline-code"></block></block>
  <block id="3a690a8e59bdafa2a85ce89baf8e5d01" category="list-text">将mi数据库转储到/var/local/tmp</block>
  <block id="bde616ae3c777920f0bcc1ed12db00d5" category="list-text">输入以下命令：<block ref="6d6e7f126bda96413a8f3ea19ac835d3" prefix=" " category="inline-code"></block></block>
  <block id="199d0f3fb4293bac252ec8967ddd7d96" category="list-text">将mysql转储文件复制到备用节点、我们将使用_storage_node_01：<block ref="a2fc9066a3870628039495b25ae9a581" prefix=" " category="inline-code"></block></block>
  <block id="771556d7cb27e2cb35e5f32feb21d918" category="list-text">如果不再需要对其他服务器进行无密码访问，请从 SSH 代理中删除私钥。输入 ...<block ref="967573583b668b75c5fc1ee963c90dcf" prefix=" " category="inline-code"></block></block>
  <block id="7d472759bb91ca188e73eca550264098" category="section-title">重建管理节点</block>
  <block id="395778abed17f7247a6f475834cb20b3" category="paragraph">现在、您已获得所有所需数据的备份副本、并将日志记录在网格中的另一个管理节点上或存储在临时位置、现在是时候重置设备了、以便可以配置端口重新映射了。</block>
  <block id="b58725c9e70484536a8104e6968330f9" category="list-text">重置设备会使其恢复到预安装状态、在此状态下、它仅保留主机名、IP和网络配置。所有数据都将丢失、因此我们确保备份任何重要信息。</block>
  <block id="570eece822439c557c87aceefc36c83e" category="list-text">输入以下命令：<block ref="571dba577857f204f77672c0f6ac8adb" prefix=" " category="inline-code"></block></block>
  <block id="994ff1bbb04f124b59b3dd4a433092d0" category="list-text">经过一段时间后、设备将重新启动、您将能够访问节点PGE UI。</block>
  <block id="e0c8d6ece2eaab52ccd3626588818424" category="list-text">浏览到Configure Networking</block>
  <block id="ef4629263d4d3026510ab03b348385aa" category="inline-image-macro">选择重新映射端口</block>
  <block id="1d1860aedee67c6087f6eae17d49c67d" category="list-text">选择所需的网络、协议、方向和端口、然后单击添加规则按钮。</block>
  <block id="914553520d8387b82a2e431e0b5e6fa3" category="admonition">重新映射网格网络上的入站端口443将中断安装和扩展过程。建议不要重新映射网格网络上的端口443。</block>
  <block id="9cf22d7237e8977b5bb6bc54a7354822" category="inline-image-macro">将端口重新映射到网络</block>
  <block id="1b08be650ccd06f880223bd76fffb99f" category="list-text">添加了所需的端口重新映射之一、您可以返回到主页选项卡并单击开始安装按钮。</block>
  <block id="b8891129cb3bcf5e407a67d926f3bd1e" category="inline-link-macro">产品文档</block>
  <block id="15f0a90501b756c24e6d343c84e4078a" category="paragraph">现在、您可以按照中的管理节点恢复过程进行操作 <block ref="c237ceedd52c48d2a2c789bd64cdcbb1" category="inline-link-macro-rx"></block></block>
  <block id="1adf202b129f9e83a673c523cd7da7db" category="section-title">还原数据库和日志</block>
  <block id="2e81f3580bf75e530e45d917ff610977" category="paragraph">现在、管理节点已恢复、您可以还原指标、日志和历史信息。如果网格中还有其他管理节点、请按照执行操作 <block ref="c237ceedd52c48d2a2c789bd64cdcbb1" category="inline-link-macro-rx"></block> 使用_Prometheus-clone-db.sh_和_mi-clone-db.sh_脚本。如果这是您的唯一管理节点、而您选择备份此数据、则可以按照以下步骤还原此信息。</block>
  <block id="2342c57da462f804cdb591ec0ca6ceaa" category="section-title">将审核日志复制回</block>
  <block id="a2a3a502b45fb89ba1d9303936a7e686" category="list-text">将保留的审核日志文件复制到已恢复的管理节点：<block ref="6dcbbb26d45053e5f47d0b73dcecfc94" prefix=" " category="inline-code"></block></block>
  <block id="bb0c9dd565ff22196c9f53b7afafbfe7" category="list-text">为了安全起见，请在验证审核日志是否已成功复制到已恢复的管理节点后，从出现故障的网格节点中删除这些审核日志。</block>
  <block id="189e459b7ed177b1cc4b563548d35288" category="list-text">更新已恢复管理节点上审核日志文件的用户和组设置：<block ref="abee3d65b7b57cee8c94fded57a55207" prefix=" " category="inline-code"></block></block>
  <block id="51e28758f5f753869640ff2adc89a740" category="paragraph">您还必须还原对审核共享的任何已有客户端访问。有关详细信息，请参见有关管理 StorageGRID 的说明。</block>
  <block id="cff2429f8c7d0ffe88a80318e06ad501" category="section-title">还原Prometheus指标</block>
  <block id="eaa4cd36290d05ba867b2ea202a10368" category="list-text">将Prometheus数据库从临时备份位置复制到管理节点：<block ref="718131237ea05acf6992f18ac2f8aedb" prefix=" " category="inline-code"></block></block>
  <block id="35fbd282b6be1c639d18dbbfee5a515a" category="list-text">验证数据是否位于正确路径中且完整<block ref="a6e471816e977d8c8b3ad6e50bb665a7" prefix=" " category="inline-code"></block></block>
  <block id="95851e41012b92671405610713f9be07" category="section-title">还原历史信息</block>
  <block id="2e3176cf0ca0cad27315d04ff4f1f330" category="list-text">从备用节点复制mysql转储文件：<block ref="6fea65c037f881565c5d3978a7621ab1" prefix=" " category="inline-code"></block></block>
  <block id="5d6b7577e78ea8622551d7d8b594739f" category="list-text">丢弃mi数据库并创建新的空数据库：<block ref="3fd0ac1b867547f517ff52c8a34404b7" prefix=" " category="inline-code"></block></block>
  <block id="04f7cb6c96995efd4544d9aea7d367e7" category="list-text">从数据库转储还原mysql数据库：<block ref="f974d0852a2926a4c22e84a291796005" prefix=" " category="inline-code"></block></block>
  <block id="791d173d918d01c3efa10c1659c765b6" category="list-text">重新启动所有其他服务<block ref="a43fd6d3adcec2efeeccefc813e98004" prefix=" " category="inline-code"></block></block>
  <block id="62cd2922fb38a43eb8ae93c468da88ca" category="summary">节点克隆性能和最佳实践。</block>
  <block id="747e53224e14f8ffd8f420441eeacdfb" category="doc">节点克隆</block>
  <block id="39d1cd38bd99e33fd79bc582303ae95b" category="paragraph">节点克隆注意事项和性能。</block>
  <block id="fe01737f428d9c9f4d4b2b11bac8f0ac" category="section-title">节点克隆注意事项</block>
  <block id="fd9609261971e45a6f20f4eef4e556ec" category="paragraph">节点克隆可以更快地替换现有设备节点、以便进行技术更新、增加容量或提高StorageGRID 系统的性能。节点克隆对于使用KMS转换为节点加密或将存储节点从DDP8更改为DDP16也很有用。</block>
  <block id="801e380cd60cbc46ace287ac94d8df7f" category="list-text">源节点的已用容量与完成克隆过程所需的时间无关。节点克隆是节点的完整副本、包括节点中的可用空间。</block>
  <block id="6551b5fd023b8131e66c5c1d8fa14218" category="list-text">源设备和目标设备必须处于同一PGE版本</block>
  <block id="0b3c750dc36564d8a9d0f002d6abbb31" category="list-text">目标节点的容量必须始终大于源节点的容量</block>
  <block id="aac6d98bf2c7ac3800b9172fc2a67404" category="list-text">确保新目标设备的驱动器大小大于源设备</block>
  <block id="eeb6a1581fc15133d1c3602cc34fd461" category="list-text">如果目标设备具有相同大小的驱动器、并且已为DDP8配置驱动器、则可以为DDP16配置目标。如果已为源配置了DDP16、则无法执行节点克隆。</block>
  <block id="639a958d74ef218710689b55aa4ef73e" category="list-text">从SG5660或SG5760设备迁移到SG6060设备时、请注意SG5x60具有60个容量驱动器、而SG6060只有58个容量驱动器。</block>
  <block id="4d1c46cee1bdcec65653b2e2163398e0" category="list-text">节点克隆过程要求源节点在克隆过程中与网格脱机。如果在此期间另一个节点脱机、则客户端服务可能会受到影响。</block>
  <block id="83d1a0f23bb258b2a270a1d6f7ff51d7" category="list-text">存储节点只能脱机15天。如果克隆过程估计接近15天或将超过15天、请使用扩展和停用过程。</block>
  <block id="efde8725bd1e96e2479c137c19099fae" category="list-text">对于带有扩展架的SG6060、您需要将正确磁盘架驱动器大小的时间与基本设备时间相加、以获得完整的克隆持续时间。</block>
  <block id="fec00ca7ab315b679cc642c66a770bd8" category="section-title">估计节点克隆性能</block>
  <block id="517e3359377bb6a7ea9488482299838f" category="paragraph">下表包含节点克隆持续时间的计算估计值。条件会有所不同、因此、如果节点关闭、*粗体*中的条目可能会超过15天的限制。</block>
  <block id="39ab52e8aaafa95380d3f56ccd8095d9" category="section-title">DDP8.</block>
  <block id="bb4e622c7d3edd2670cd4402fda0dfce" category="section-title">SG5612 -&gt;任何</block>
  <block id="a88a341631b814f619579143455d7353" category="cell">网络接口速度</block>
  <block id="690f7bdfae387972bf437193506dbb33" category="cell">4 TB驱动器大小</block>
  <block id="a6994b6b2103b87f98052b644780d5a0" category="cell">8 TB驱动器大小</block>
  <block id="7d409920d4d29e64eca4583c4c9878e4" category="cell">10 TB驱动器大小</block>
  <block id="53a214e589c7b00227e50e2e4652edf7" category="cell">12 TB驱动器大小</block>
  <block id="315ee247762dbc69dfb6d29e7839c677" category="cell">16 TB驱动器大小</block>
  <block id="961dc732adc5c5176ec88ea3d066b357" category="cell">18 TB驱动器大小</block>
  <block id="4ac1352d5b927390a1b2f14dac0647d9" category="paragraph">10 Gb</block>
  <block id="0d730df753ae6a369323fe6dc1641eb2" category="paragraph">1 天</block>
  <block id="2b5c88bc8c875f79745514e9af2f348f" category="paragraph">2天</block>
  <block id="0f9222aa150538e6d20d3870ea6dec57" category="paragraph">2.5天</block>
  <block id="14cad5137a2254d53fde198d52e70109" category="paragraph">3天</block>
  <block id="6c32f983ee38ad5089298aa659cd011c" category="paragraph">4天</block>
  <block id="a5dffc518be58d2936a993ee100d71b6" category="paragraph">4.5天</block>
  <block id="e5d3435cf14793a49310fa8d85bcc4a1" category="paragraph">25 GB</block>
  <block id="885e215d2d15d2ac1b34e5b8d416f86a" category="section-title">SG5712 -&gt;任何</block>
  <block id="97fce1ba98948ee51fbf31978af80696" category="section-title">SG5660 -&gt; SG5760</block>
  <block id="9958432b6417f293cb0d15128b08e42f" category="paragraph">3天</block>
  <block id="366adabd6f1babc8138db3063adaf869" category="paragraph">6天</block>
  <block id="374616a0b786e9bffadc7f28e68d6c59" category="paragraph">7 天</block>
  <block id="51ab732b98b519b5e54ce60864cc8d69" category="paragraph">8.5天</block>
  <block id="b00a84012a03b35beb30466d8baa4a1c" category="paragraph">11.5天</block>
  <block id="194ae66ddb8567ab63da3b82c925fa03" category="paragraph">* 13天*</block>
  <block id="85c75ace300325f8e407a841eb055d37" category="section-title">SG5660 -&gt; SG6060</block>
  <block id="61cab577ce1bed82e1b5d7caacb7456b" category="paragraph">2.5天</block>
  <block id="bf30897fe2ce34b7e9f89291e20d9eae" category="paragraph">5.5天</block>
  <block id="e5fd76b3288061d2c2638ccc41688416" category="paragraph">6.5天</block>
  <block id="281f41b6564c9e63e16d67b1c07a46e5" category="paragraph">9天</block>
  <block id="38efedfd69ad005a6e0b0393682636db" category="paragraph">10天</block>
  <block id="e727fed489e8b7eecf1901196ec3ede9" category="paragraph">2天</block>
  <block id="6383598717ae8ac458dc988dff77c800" category="paragraph">5天</block>
  <block id="79e241fd6b320cbb41d67b028ec6f1c0" category="paragraph">8天</block>
  <block id="c6a6ab48074fa03db6df437c1f27b415" category="section-title">SG5760 -&gt; SG5760</block>
  <block id="4c0768167e7e249808ed4bd4ad28b2ed" category="section-title">SG5760 -&gt; SG6060</block>
  <block id="2a8a1b5738432b51afcd4dcbbbfe1434" category="paragraph">1.5天</block>
  <block id="9e6b8df1cd23e71938af979057e5144a" category="paragraph">3.5天</block>
  <block id="bf0581629b559d1033e12e37f31bb0d7" category="section-title">SG6060 -&gt; SG6060</block>
  <block id="7da42b5478786d91e64cb31ec52e2511" category="paragraph">9.5天</block>
  <block id="d2bfdb3de60e1c2f154e5f9fa5a1dfc1" category="section-title">DDP16</block>
  <block id="00471150fc4d84adcd57392d7a47a3cb" category="paragraph">3.5天</block>
  <block id="85ba217056d3540506dc11016ec224e3" category="paragraph">12：5天</block>
  <block id="69a1b13f0c02f82aace898a3521485c7" category="paragraph">* 14天*</block>
  <block id="383aea8468a529b339b755e27b1d4668" category="paragraph">7.5天</block>
  <block id="9ff416b798a88ec4bfb30f4f045aada5" category="paragraph">11天</block>
  <block id="ed01ec12331788a408398b059da47a39" category="paragraph">10.5天</block>
  <block id="ec3751d915801591991ca3553c2fa5a7" category="section-title">扩展架(在源设备上的每个磁盘架上添加到SG6060以上)</block>
  <block id="fc1e2d26b4330f83ecfffe3439410229" category="summary">以下是存储分段策略和组策略(IAM策略)的示例。</block>
  <block id="3f2327c90ede247dca9387ef500bf746" category="doc">分段和组(IAM)策略示例</block>
  <block id="640ca9533a2fd150e7d3ed390e2aae66" category="section-title">组策略(IAM)</block>
  <block id="06c73db3763c74cabb8ece8e96fe7c5d" category="section-title">主目录模式的存储分段访问</block>
  <block id="8569c05df75ec9b148a67ed5998ad8b0" category="section-title">拒绝创建对象锁定分段</block>
  <block id="01a232853896677ed5b2f61bbd35128f" category="paragraph">此策略不会在StorageGRID UI中强制实施、而是仅通过S3 API强制实施。</block>
  <block id="6d16e4029056ceaf0b44cac8903e3f2e" category="section-title">将存储分段限制为具有只读访问权限的单个用户</block>
  <block id="c49b1c74a2176733b070d19773700eb6" category="paragraph">此策略允许单个用户对某个存储分段拥有只读访问权限、并明确授予所有其他用户的访问权限。将deny语句分组在策略顶部是一种较好的做法、可以加快评估速度。</block>
  <block id="a6bea44dd82287d3b479cc898439fad9" category="sidebar">节点克隆注意事项和性能</block>
  <block id="e5b8a0443d27d612e7426f6f3f8681c2" category="sidebar">配置Datadog以收集StorageGRID SNMP指标和陷阱</block>
  <block id="45c8288f990abd9a185e596536152688" category="sidebar">存储分段和组策略示例</block>
  <block id="38d38399d4a7514463d665125ae50a4a" category="list-text">Rubrik CDM</block>
  <block id="5edf8edbb4c16aa5184e63b04c0b8b6d" category="summary">rclone是一种用于S3操作的免费命令行工具和客户端。您可以使用rclone迁移、复制和删除StorageGRID 上的对象数据。</block>
  <block id="16bf3dc54feeb86e32811292a7567606" category="doc">使用rclone在StorageGRID 上迁移、放置和删除对象</block>
  <block id="8fc8ce37b13be17581bdf9362c7e50b2" category="paragraph">rclone是一种用于S3操作的免费命令行工具和客户端。您可以使用rclone迁移、复制和删除StorageGRID 上的对象数据。rclone可以删除存储分段、即使不是空存储分段也可以使用"清除"功能、如以下示例所示。</block>
  <block id="9f164cf2b6160300227f2205a159f653" category="section-title">安装和配置rclone</block>
  <block id="15b28fa90c8a5a6ac00ece9ba66eeae6" category="inline-link">rclone.org</block>
  <block id="e83083612c8ddf007cb8caa33418827b" category="paragraph">要在工作站或服务器上安装rclone、请从下载它<block ref="f0acc0ee887aaa2a5d3243b99ef89c61" category="inline-link-rx"></block>。</block>
  <block id="56a18c9d4a7f18e1748b0b69c29deb32" category="list-text">通过运行配置脚本或手动创建文件来创建rclone配置文件。</block>
  <block id="f7462963c38129d77cfe3f6482e69de5" category="list-text">在此示例中、我将使用sgdemo作为rclone配置中远程StorageGRID S3端点的名称。</block>
  <block id="eabd5709e5b0a4a9d5b54bf22cc44a50" category="list-text">创建配置文件~/.config/rclone/rclone.conf</block>
  <block id="f9a8162b486acb9702379c8e1fa2a1f1" category="list-text">运行rclone config</block>
  <block id="9eb33c118fbc9b4c4465a458a895e11d" category="paragraph">rclone配置#</block>
  <block id="ed6ca4624754adaba54d04ef934028aa" category="paragraph"><block ref="8849f02c854fae4e8db3cf982392a463" prefix="" category="inline-code"></block></block>
  <block id="3662b82ef530ede2dfc89054b3f90228" category="paragraph"># rclone mkdir sgdemo：test01</block>
  <block id="cc478f70507e2845eea7acda5a1e3d97" category="paragraph"><block ref="7a0a2cc47bc2173797cdca07f7ce7961" prefix="" category="inline-code"></block></block>
  <block id="3a47448ae40f440185114cee74d9ad57" category="paragraph">rclone LSD sgdemo数：</block>
  <block id="a6a1ec9ef284232329c60761299d92b5" category="paragraph"><block ref="1bb219672476df0c884127cb2c99b435" prefix="" category="inline-code"></block></block>
  <block id="f8ff419b27823d5e2f47e43e8458a894" category="paragraph">rclone ls sgdemo：test01</block>
  <block id="44f95cde094c17535e0677a82c170389" category="paragraph"><block ref="6f8e32b86b6495270f34c94d9c40c06d" prefix="" category="inline-code"></block></block>
  <block id="5f8540d79fcfda7fc5196af98412ea5a" category="paragraph"># rclone rmdir sgdemo：test02</block>
  <block id="7bf6bd33aa865e09d1071eac105d8241" category="paragraph"><block ref="9c36dc683788536ec38b4b18c4e890e7" prefix="" category="inline-code"></block></block>
  <block id="61c9919165544448974ab4891cb075a9" category="paragraph">rclone copy ~/test/testfile.txt sgdemo：test01</block>
  <block id="cf36fafa2a4e0a666be5d8360acec986" category="paragraph"><block ref="07bb309a38b585baf017ce2b3d19bc16" prefix="" category="inline-code"></block></block>
  <block id="5cdf35bb0354469c88ad0680d436f795" category="paragraph"># rclone copy sgdemo：test01/testfile.txt ~/test/testfileS3.txt</block>
  <block id="41b29af0a6bf603a1a7df4ea6a955d8e" category="paragraph"><block ref="5229133c5a5c9056642e7d6c5d6826a6" prefix="" category="inline-code"></block></block>
  <block id="5bae69b23fa6eb68365a36ca366ba1aa" category="paragraph">rclone delete sgdemo：test01/testfile.txt</block>
  <block id="309340b8067ede7973b30ece050cea91" category="list-text">*迁移存储分段中的对象*</block>
  <block id="2a35c17ff4e55ac345ceb8bc98b49b1a" category="paragraph"><block ref="1dc031f75fc4e35b4388fe4839ea5101" prefix="" category="inline-code"></block></block>
  <block id="7c0bd198fb63fdb5d33f8d9b496bce9e" category="paragraph"><block ref="9904a5fb593cfab861d8aa8dc92c3e01" prefix="" category="inline-code"></block></block>
  <block id="e75cf8210a46a9e080f01c2646f4cbd1" category="paragraph">rclone sync sgdemo：test01 sgdemo：clone01—-progress</block>
  <block id="b057c2361d5d0aef24339e9af0a0721d" category="admonition">使用-progress或-P显示任务的进度。否则、不会显示任何输出。</block>
  <block id="962d558c72bf1abd2cc8b9e5afeb68a3" category="list-text">*删除分段和所有对象内容*</block>
  <block id="7e5b74d29f73a6689f5cd32f8ae54eb5" category="paragraph"><block ref="f86e9aa25395ad4bf2f0b9bc89f29ea1" prefix="" category="inline-code"></block></block>
  <block id="5773479209c86b5b3661ca194636b3ba" category="paragraph"># rclone purge sgdemo：test01 -progress</block>
  <block id="2cb17b2342827cbd786d4c1f770e1500" category="summary">您可以在此处找到一些NetApp StorageGRID 博客。</block>
  <block id="83ebfab760fb0afe2d53222522d9d7d0" category="doc">NetApp StorageGRID 博客</block>
  <block id="cef804ce13ad4c50f8e67f920713d8e1" category="paragraph">您可以在此处找到一些很棒的NetApp StorageGRID 博客：</block>
  <block id="47616b8bc2ca38cd93158370f35f1fb1" category="inline-link">StorageGRID 和ONTAP S3支持：差异、相似之处和集成</block>
  <block id="4624650819454e10f32e020046bb76ae" category="inline-link">如何在符合3：2：1的架构中使用一个命令备份Epic Systems EHR数据库</block>
  <block id="95a83699f1df2afc6db5cefab9b1faea" category="inline-link">请采用这些指标并绘制图表</block>
  <block id="e53ca4cf41c016e5c7bcc4ddd097afa4" category="inline-link">将StorageGRID 与开源ELK堆栈相集成以增强客户体验</block>
  <block id="4597c6456c903b0438172862b21e44a3" category="inline-link">适用于采用StorageGRID 的Amazon S3 alpha版本的挂载点</block>
  <block id="090d6d22cbcf3abf1c59e0bbfa33247e" category="inline-link">NetApp StorageGRID 获得通用标准安全认证</block>
  <block id="179a10301fc37bd566b117df96c0cf5a" category="inline-link">StorageGRID 获得KPMG合规认证</block>
  <block id="2ed8ae3807508906882c40f16d022099" category="inline-link">StorageGRID 续订了NF203和ISO/IEC 25051合规性认证</block>
  <block id="2ed6d70b5e2da609ab0189205d91bfdf" category="inline-link">适用于服务提供商的NetApp StorageGRID</block>
  <block id="6cbbedbe1a7c21e39c47b4f1a82a163f" category="inline-link">NetApp Cloud Insights 增加了StorageGRID 库信息板</block>
  <block id="19c82d20138dc6c19a1867bb09242586" category="inline-link">借助NetApp和Alluio打造现代化的分析工作负载</block>
  <block id="75b3da38185f43fa45f8c192cf70fee6" category="inline-link">所有操作都从对象锁定…开始 为关键备份应用程序构建S3存储生态系统</block>
  <block id="17691c35f7a924dab178837550e01894" category="inline-link">在StorageGRID 上构建数据湖</block>
  <block id="af9f1a77fa9bd1ac998aca9149105fc2" category="inline-link">适用于StorageGRID 的DataLock和勒索软件保护支持</block>
  <block id="b7eaf149486b5f672a67a1b9225ffdf1" category="inline-link">在StorageGRID for Snowfl您 的数据上除以数据</block>
  <block id="49cef513124e46e406c7202a3021a460" category="inline-link">利用由NetApp和Modzy提供支持的MLOps实现可解释的人工智能</block>
  <block id="d75270f11a8c4b0a352ba60a70b2e51e" category="inline-link">巧克力、滑板、表和大型机有哪些共同之处？</block>
  <block id="bda9db150ef3470445a403dda26b131c" category="admonition">如果需要忽略SSL证书、请使用-no-check-certificate。</block>
  <block id="47edbb9e6d6e6e874eb40c274a0e2e0f" category="sidebar">博客文章</block>
  <block id="3e786c26b331e7dd273f5cb3ee10f59e" category="sidebar">StorageGRID 博客</block>
  <block id="85037d90107af2b45fca2bb43a9f291e" category="summary">第三方解决方案已通过StorageGRID 11.7的验证</block>
  <block id="b46c07776ecb7ae8067bc1552a439f7b" category="doc">StorageGRID 11.7经验证的第三方解决方案</block>
  <block id="9480cbe24fa04a10e30355eb0f12d82c" category="sidebar">StorageGRID 11.7</block>
  <block id="89188812a26ecaeff35e35d0bffb0d62" category="paragraph">以下第三方解决方案已通过验证、可用于StorageGRID 11.7。+如果未列出您要查找的解决方案 、请联系您的NetApp客户代表。</block>
  <block id="08a9313727f7bbd910b58b7b474eefdf" category="list-text">Bridgestor</block>
  <block id="40ae64b68c5b0e0ae599d76815332612" category="section-title">StorageGRID支持的第三方解决方案</block>
  <block id="27ef9f8b4c2764f7579e12a741210f85" category="paragraph">这些解决方案已经过测试。</block>
  <block id="6e9c68d7409676ad81189c7ef5822c3a" category="list-text">存档软件</block>
  <block id="5d1891a5c99631f59c0a8f3b32a1e1cf" category="list-text">轴通讯</block>
  <block id="ef0aa57a38184a5667aa748dc4019df0" category="list-text">Congruity360</block>
  <block id="670d48cd026746c6ce7a8b00a2c83978" category="list-text">数据框架</block>
  <block id="3c5839fdf2b2c6a2442cfa6e74bfe0f2" category="list-text">EcoDigital DIIVA平台</block>
  <block id="6791faed97260b2919c3417535378ee0" category="list-text">Encoding.com</block>
  <block id="675085b268143e0ab20d246ddf943b45" category="list-text">GE Centricity企业档案库</block>
  <block id="83b62dfdb6ca9afb88cf0d9d7c17e925" category="list-text">Hyland Acuo</block>
  <block id="3b4c3720fc990485ac26abd2cc00c4cc" category="list-text">IBM Aspera</block>
  <block id="753b802ea6930a7aa61f75097ba1fec9" category="list-text">里程碑系统</block>
  <block id="e67ef9adcaef7f4d9e4a526b051b579a" category="list-text">OnSSI</block>
  <block id="de41187129b3e57753781b3d1b8b9db0" category="list-text">前移发动机</block>
  <block id="7589966aa63e01bf55855dd27c17dfa1" category="list-text">SilverTrak</block>
  <block id="a711a341b646257e8c46098745540d38" category="list-text">SoftNAS</block>
  <block id="2a5e41515ada8ef1147f2dd259b58947" category="list-text">QStar</block>
  <block id="f1ec21951287a8923728f8f362e49ad5" category="list-text">Velasea</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律声明</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="paragraph">法律声明提供对版权声明、商标、专利等的访问。</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版权</block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商标</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 徽标和 NetApp 商标页面上列出的标记是 NetApp 、 Inc. 的商标。其他公司和产品名称可能是其各自所有者的商标。</block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">专利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">有关 NetApp 拥有的专利的最新列表，请访问：</block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隐私政策</block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">开放源代码</block>
  <block id="9b73989307c1975dfa4d5e1581e4afe8" category="paragraph">通知文件提供有关 NetApp 软件中使用的第三方版权和许可证的信息。</block>
  <block id="21b17c7b7d71861473c6337e153ea6ea" category="paragraph"><block ref="21b17c7b7d71861473c6337e153ea6ea" category="inline-link-rx"></block></block>
  <block id="29007b92e2b6688072358d8f25529d24" category="paragraph"><block ref="29007b92e2b6688072358d8f25529d24" category="inline-link-rx"></block></block>
  <block id="d31ba7e4c6f469a6c88f05aac3e0e91c" category="list-text">Datadobi</block>
  <block id="a88f9b6efeacfebaca582083cb9bd819" category="paragraph">此组策略仅允许用户访问名为Users username的分段中的对象。</block>
  <block id="a16b735f7d349dcc23b45a7a101460f3" category="paragraph">此组策略将限制用户创建在存储分段上启用了对象锁定的存储分段。</block>
  <block id="5ccd1d9b602b536952729ea6084688f1" category="section-title">对象锁定保留限制</block>
  <block id="e2fc2c3ef79779a5164b3961924241c1" category="paragraph">此存储分段策略会将对象锁定保留期限限制为10天或更短</block>
  <block id="578c6a63b7f6efe56f08f3f9c3c5a690" category="section-title">按版本ID限制用户删除对象</block>
  <block id="151d6c6a5174c6a3f739cdb8ec8d1ce5" category="paragraph">此组策略将限制用户按版本ID删除受版本控制的对象</block>
  <block id="d5c59b735ec0b06ade2e2d7c842dfe9e" category="paragraph">此存储分段策略将限制用户(由用户ID "56622399308951294926"标识)按版本ID删除版本控制的对象</block>
  <block id="c5d41f2814e9eff276a87d54a833d212" category="list-text">Veeam 12.</block>
  <block id="e7035bb69535d080bffb0dcca26a6ca2" category="list-text">Alluxio</block>
  <block id="e92e6dc9e5e1916ddf769b8a8faf9090" category="list-text">S3a</block>
  <block id="7db8613f85d10f35785a7af8c5fd29df" category="list-text">Trino</block>
  <block id="52009bb7ee17227f566cd26a02caee56" category="inline-link-macro"><block ref="52009bb7ee17227f566cd26a02caee56" category="inline-link-rx"></block></block>
  <block id="a1a9afcf552a769c282769271829889a" category="paragraph"><block ref="a1a9afcf552a769c282769271829889a" category="inline-link-macro-rx"></block></block>
  <block id="f99aa604031e5049799e73b5c3748a98" category="inline-link-macro"><block ref="f99aa604031e5049799e73b5c3748a98" category="inline-link-rx"></block></block>
  <block id="5d545fe5152641e2ebe654e336e520e5" category="paragraph"><block ref="5d545fe5152641e2ebe654e336e520e5" category="inline-link-macro-rx"></block></block>
  <block id="88e5eabd3917048b6927c42496b98f86" category="inline-link-macro"><block ref="88e5eabd3917048b6927c42496b98f86" category="inline-link-rx"></block></block>
  <block id="dd38f906b37d412de7d1c1dcf4cbf31c" category="paragraph"><block ref="dd38f906b37d412de7d1c1dcf4cbf31c" category="inline-link-macro-rx"></block></block>
  <block id="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-macro"><block ref="8acb58cbd50ef1b468a020ee0bd351d3" category="inline-link-rx"></block></block>
  <block id="2352c4e1f4d0024ade0869e00e6243f4" category="paragraph"><block ref="2352c4e1f4d0024ade0869e00e6243f4" category="inline-link-macro-rx"></block></block>
  <block id="ddd67082e2bd2747d057fda525754079" category="list-text">光谱逻辑在本机Glacier</block>
  <block id="2a1ac5be963ebd10913d2ddf30f62e47" category="inline-link-macro">NetApp StorageGRID 11.7产品文档</block>
  <block id="14d782d4b4bcaf927ddb317c08f8c416" category="list-text"><block ref="14d782d4b4bcaf927ddb317c08f8c416" category="inline-link-macro-rx"></block></block>
  <block id="85517cd70ba2a2e551e4f0c99c6e56d7" category="summary">本指南重点介绍NetApp StorageGRID以及部分Veeam备份和复制的配置。本白皮书面向熟悉Linux系统并负责维护或实施NetApp StorageGRID系统与Veeam备份和复制的存储和网络管理员。</block>
  <block id="5a80f6f017611133cae300eeb1b8838f" category="doc">使用Veeam备份和复制进行部署的StorageGRID最佳实践</block>
  <block id="3e8343417cb49b5fac72e19c07a7e1b7" category="paragraph">存储管理员希望通过满足可用性、快速恢复目标、可扩展以满足其需求以及自动执行长期数据保留策略的解决方案来管理数据增长。这些解决方案还应提供保护、防止丢失或恶意攻击。Veeam和NetApp合作创建了一个将Veeam备份和恢复与NetApp StorageGRID相结合的数据保护解决方案、用于内部对象存储。</block>
  <block id="cb88016fd6a4561b0ba47d4d2349e01a" category="paragraph">Veeam和NetApp StorageGRID提供了一个易于使用的解决方案、可协同工作、帮助满足全球数据快速增长和法规不断增长的需求。基于云的对象存储因其弹性、扩展能力、运营效率和成本效益而闻名、这使其成为备份目标的自然选择。本文档将为Veeam Backup解决方案和StorageGRID系统的配置提供指导和建议。</block>
  <block id="3f2a8b3ac5243a078416a91ba12f5677" category="paragraph">Veeam的对象工作负载会为小型对象创建大量并发放置、删除和列表操作。启用不可迁移性将增加对对象存储的请求数量、以设置保留和列出版本。备份作业的过程包括为每日更改写入对象、新写入完成后、该作业将根据备份的保留策略删除任何对象。备份作业的计划几乎总是重叠的。这种重叠将导致备份窗口的很大一部分在对象存储上包含50/50的放置/删除工作负载。在Veeam中调整任务插槽设置的并发操作数、通过增加备份作业块大小来增加对象大小、减少多对象删除请求中的对象数量、 选择完成作业的最长时间窗口将优化解决方案的性能和成本。</block>
  <block id="65523be105cf410c8f1a0f9075f3e6f7" category="inline-link">Veeam备份和复制</block>
  <block id="392d70ca39f31f10bd637936769788df" category="inline-link">StorageGRID</block>
  <block id="535647a2a89e3e794f5c415b865cb3b2" category="inline-link">Veeam Ready对象、对象不可变性和存储库</block>
  <block id="35fff1030215641180d446636f07b965" category="paragraph">请务必阅读的产品文档<block ref="011dc6ff3c4a6db4449338299b84c9c4" category="inline-link-rx"></block> 和<block ref="f6f71f61964919c3e794acd51103ea76" category="inline-link-rx"></block> 开始之前。Veeam提供了一些计算器、用于了解Veeam基础架构的规模估算以及在调整StorageGRID 解决方案 规模之前应使用的容量要求。请始终访问Veeam Ready计划网站查看经Veeam-NetApp验证的配置<block ref="27e44db2d47a236831b6854277703ed2" category="inline-link-rx"></block>。</block>
  <block id="2cc1f5cc43ba172ac443ca2cbdcce2b4" category="section-title">Veeam配置</block>
  <block id="8d5d0d535411e895f9d96eda059a901d" category="section-title">建议版本</block>
  <block id="e7e23fdc645b150075b11f4c4918739b" category="paragraph">建议始终保持最新、并为Veeam Backup &amp; Replication 12系统应用最新的修补程序。目前、我们建议至少安装Veeam修补程序P20230718。</block>
  <block id="8a30f8c97261f6be55fd4a89233559fc" category="section-title">S3存储库配置</block>
  <block id="6ee286a7db9c406f8c2971e8ec86b74d" category="paragraph">横向扩展备份存储库(SOBR)是S3对象存储的容量层。容量层是主存储库的扩展、可提供更长的数据保留期限和更低的存储解决方案成本。Veeam能够通过S3对象锁定API提供不可变功能。Veeam 12可以在一个横向扩展存储库中使用多个分段。StorageGRID对单个存储分段中的对象数量或容量没有限制。使用多个分段可以提高备份非常大的数据集时的性能、在这些数据集中、对象中的备份数据可能会达到PB级。</block>
  <block id="274d09dbf63a4b2cf6067da7bdccc520" category="section-title">备份作业配置</block>
  <block id="0e71d2971c1d3e37252ab5b94a556ab5" category="paragraph">实施不可配置备份时会使用对象存储上的S3对象锁定。不可更改性选项会生成更多的对象存储请求、以更新对象的列表和保留。</block>
  <block id="f155778379e9bde49e66b15a4cb59aa4" category="cell">设备型号</block>
  <block id="09e895a7d52e3b7e14028a710c859bf4" category="cell">每个节点的S3MultiObjectDeleteLimit</block>
  <block id="d23f070363a51bb19a371740717fb008" category="cell">SG5712</block>
  <block id="e369853df766fa44e1ed0ff613f563bd" category="cell">34.</block>
  <block id="08737855a7278096a93baafac39de5b0" category="cell">SG5760</block>
  <block id="d09bf41544a3365a46c9077ebb5e35c3" category="cell">75</block>
  <block id="c69ff1785c16ab7db216e04b62e5ef4f" category="cell">SG6060</block>
  <block id="3644a684f98ea8fe223c713b77189a77" category="cell">200</block>
  <block id="6c9a4b7548d56934d30ab02a9a13caf2" category="paragraph">请与您的NetApp客户团队合作、根据您的特定需求确定建议的配置。Veeam配置设置建议包括：</block>
  <block id="80fb632117c19ac683023299f721dcad" category="list-text">备份作业块大小= 4 MB</block>
  <block id="5a80842ad876afca2599388c0e374483" category="list-text">SOBR任务插槽限制为2-16</block>
  <block id="4bb90882de8268f14eedce7a49450a9a" category="list-text">多对象删除限制= 34 - 1000</block>
  <block id="a4bd669931c15a4828a4c38a495d7ff3" category="section-title">StorageGRID配置</block>
  <block id="b85a187b18cf0ecaff36c27f7e5e7500" category="paragraph">对于Veeam部署、建议使用带有最新修补程序的NetApp StorageGRID 11.5或11.7版本。StorageGRID 11.6.0.11和11.7.0.4中引入了许多优化功能、这些功能对Veeam工作负载非常有用。建议始终保持最新、并为StorageGRID系统应用最新的修补程序。</block>
  <block id="8215067184a09c074108be8e3fbbe725" category="section-title">负载平衡器和S3端点配置</block>
  <block id="923dc06db89bcd66cca887f28c0733c5" category="paragraph">Veeam仅要求通过HTTPS连接端点。Veeam不支持非加密连接。SSL证书可以是自签名证书、专用可信证书颁发机构或公共可信证书颁发机构。为了确保持续访问S3存储库、建议在HA配置中至少使用两个负载平衡器。负载平衡器可以是位于每个管理节点和网关节点上的StorageGRID提供的集成负载平衡器服务、也可以是位于F5、Kemp、HAProxy、Loadbalanacer.org等第三方解决方案上的集成负载平衡器服务 通过使用StorageGRID负载平衡器、可以设置流量划分器(QoS规则)、以便确定Veeam工作负载的优先级、或者限制Veeam、使其不会影响StorageGRID系统上优先级较高的工作负载。</block>
  <block id="84ace9fb8e132c96d1dfcd31447efedc" category="section-title">S3 存储分段</block>
  <block id="55876228853abf632dec9346a4f372ec" category="inline-link">文档。</block>
  <block id="69e163f50758f77f10618e8e4b89f0cb" category="paragraph">StorageGRID是一种安全多租户存储系统。建议为Veeam工作负载创建一个专用租户。可以选择分配存储配额。作为最佳实践、请启用"使用自己的身份源"。使用适当的密码保护租户root管理用户的安全。Veeam Backup 12要求S3存储分段具有强大的一致性。StorageGRID提供了在存储分段级别配置的多个一致性选项。对于使用Veeam从多个位置访问数据的多站点部署、请选择"strong-globation"。如果Veeam备份和还原仅在单个站点上进行、则一致性级别应设置为"strong-site"。有关存储分段一致性级别的详细信息、请查看<block ref="782397d2a33ccd7da9c1580a84d10f9d" category="inline-link-rx"></block>。要使用StorageGRID进行Veeam不可变备份、必须在创建存储分段期间全局启用S3对象锁定并在存储分段上进行配置。</block>
  <block id="2973716716ecfc8cb158222d309c85ff" category="section-title">生命周期管理</block>
  <block id="1cfb631f44c302a86adda6e45ba24763" category="paragraph">StorageGRID支持在StorageGRID节点和站点之间进行复制和纠删编码、以实现对象级保护。纠删编码至少需要200 KB的对象大小。Veeam的默认块大小为1 MB、所产生的对象大小通常会低于Veeam存储效率后建议的200 KB最小大小。为了提高解决方案的性能、建议不要使用跨越多个站点的纠删编码配置文件、除非这些站点之间的连接足以避免增加延迟或限制StorageGRID系统的带宽。在多站点StorageGRID系统中、可以将ILM规则配置为在每个站点存储一个副本。为了获得最佳持久性、可以配置一条规则、以便在每个站点上存储一个经过删除的编码副本。对于此工作负载、最建议使用Veeam备份服务器本地的两个副本。</block>
  <block id="6a91fddc67312e23440e7297f57a6e75" category="section-title">实施要点</block>
  <block id="0dc64850ea098a695ef04ad4917575f8" category="paragraph">如果需要不可破坏性、请确保在StorageGRID系统上启用对象锁定。在管理UI中的"Configuration/S3 Object Lock"(配置/S3对象锁定)下找到相应选项。</block>
  <block id="21e26b17ef37d6789ef963babce3bcf7" category="inline-image-macro">启用网格范围对象锁定</block>
  <block id="a1d354bcc841b4fd7414aa3b5cc067b9" category="paragraph">创建存储分段时、如果要将此存储分段用于不可移动备份、请选择"Enable S3 Object Lock"(启用S3对象锁定)。这将自动启用存储分段版本控制。保持禁用默认保留、因为Veeam将明确设置对象保留。如果Veeam不创建不可变备份、则不应选择版本控制和S3对象锁定。</block>
  <block id="a01314a14731335aa7b83dabe139b1bc" category="inline-image-macro">在存储分段上启用对象锁定</block>
  <block id="913ca82ae339f347d099d594b95fc5d0" category="paragraph">创建存储分段后、转到所创建存储分段的详细信息页面。选择一致性级别。</block>
  <block id="0bb9673c8d3a007a2aec60e0eb872235" category="inline-image-macro">存储分段选项</block>
  <block id="81f068f3d3e42253d4aad514fd607d9d" category="paragraph">Veeam要求S3存储分段具有强大的一致性。因此、对于Veeam从多个位置访问数据的多站点部署、请选择"strong-globation"。如果Veeam备份和还原仅在单个站点上进行、则一致性级别应设置为"strong-site"。保存更改。</block>
  <block id="b47fa19cf7fc1f946539cdca83a310f6" category="inline-image-macro">存储分段一致性</block>
  <block id="33cb018e166847decbe1831bcbda0dfe" category="paragraph">StorageGRID在每个管理节点和专用网关节点上提供集成负载平衡器服务。使用此负载平衡器的众多优势之一是能够配置流量分类策略(QoS)。虽然这些指标主要用于限制应用程序对其他客户端工作负载的影响或将工作负载划分为优先级、但它们还提供了额外的指标收集功能、以协助监控。</block>
  <block id="be01644f81aa9785fd9a47a133f6b06b" category="paragraph">在配置选项卡中、选择"Traffic Classification"(流量分类)并创建新策略。命名规则并选择存储分段或租户作为类型。输入存储分段或租户的名称。如果需要QoS、请设置限制、但对于大多数实施、我们只希望添加此功能提供的监控优势、因此不要设置限制。</block>
  <block id="ffa056c913f2233a9d6c17d77ec6c2ea" category="inline-image-macro">创建TC策略</block>
  <block id="05241239c2e205951eabc51d0b39de96" category="section-title">Veeam</block>
  <block id="1747f94b0479dd6f64566f9def184149" category="paragraph">根据StorageGRID设备的型号和数量、可能需要选择并配置对存储分段上的并发操作数的限制。</block>
  <block id="e0c5284488d876ff3c0ab4615c30f264" category="inline-image-macro">Veeam并发任务限制</block>
  <block id="583ffa11c93d679d28e4223a3a34e9e4" category="paragraph">按照Veeam控制台中有关备份作业配置的Veeam文档启动向导。添加VM后、选择SOBR存储库。</block>
  <block id="2269301dc6504a2bb4291697a42d6372" category="inline-image-macro">备份作业</block>
  <block id="09b5418e51b83d62c4785d219e745382" category="paragraph">单击高级设置并将存储优化设置更改为4 MB或更大。应启用数据压缩和重复数据删除。根据需要更改子系统设置并配置备份作业计划。</block>
  <block id="680a28709f4f4046002e60fa297d351a" category="section-title">监控StorageGRID</block>
  <block id="3843e063a231c099f5416c34c95f4042" category="paragraph">要全面了解Veeam和StorageGRID的协同运行情况、您需要等待第一个备份的保留时间到期。到目前为止、Veeam工作负载主要由Put操作组成、尚未执行任何删除操作。备份数据过期并进行清理后、您现在可以在对象存储中看到完全一致的使用情况、并根据需要调整Veeam中的设置。</block>
  <block id="b2f0530b7f3eff1d4dbe439b30663ed9" category="paragraph">StorageGRID在"Support"(支持)选项卡"Metrics (指标)"页面中提供了方便的图表来监控系统的运行。要查看的主要信息板是S3概述、ILM和流量分类策略(如果已创建策略)。在"S3概述"信息板中、您可以找到有关S3操作速率、延期和请求响应的信息。</block>
  <block id="1f8f94c350e86ecbf5f8b0933d9dd0b2" category="paragraph">"平均持续时间"图表显示每个节点针对每种请求类型花费的平均时间。这是请求的平均延迟、可能很好地指示可能需要进行额外调整、或者StorageGRID系统有承担更多负载的空间。</block>
  <block id="dfb4d9aca7ff63a8b59297daaa36013e" category="inline-image-macro">S3概述持续时间</block>
  <block id="97e697a60f8fc93ff1b8ab5d2fecf264" category="paragraph">在“已完成请求总数”图表中，您可以按类型和响应代码查看请求。如果您看到的响应不是200 (OK)、则可能表示问题描述(如StorageGRID系统)负载过重、正在发送503 (减慢)响应、可能需要进行一些额外调整、或者现在是扩展系统以应对增加的负载的时候了。</block>
  <block id="b49a867e529855d0406df931c97b5128" category="inline-image-macro">S3概述请求</block>
  <block id="a1350656a4a8103a53007527e1543062" category="paragraph">在ILM信息板中、您可以监控StorageGRID系统的删除性能。StorageGRID会在每个节点上同时执行同步和异步删除、以尝试优化所有请求的整体性能。</block>
  <block id="2bd51718453d33063e1d9ab37fca0aef" category="inline-image-macro">ILM删除</block>
  <block id="b95f246819e27a4486f140cce28a5ca9" category="paragraph">通过流量分类策略、我们可以查看有关负载平衡器请求吞吐量、速率、持续时间以及Veeam正在发送和接收的对象大小的指标。</block>
  <block id="0163b2e276a1d083b8a419a32c771680" category="inline-image-macro">流量分类策略指标</block>
  <block id="41626bdee063e6c3bb48894a7b384438" category="list-text"><block ref="81bbc4df100e2c72e0ac40c7f4e45348" category="inline-link-macro-rx"></block></block>
  <block id="112e3eabbbb552d94c0e006c23999aa3" category="sidebar">将Veeam备份和复制与StorageGRID结合使用</block>
  <block id="2e296ce530e2049ec036a4c14f33b6d8" category="paragraph">可能需要限制并发任务、具体取决于特定解决方案的规模估算和要求。默认设置为每个CPU核心指定一个存储库任务插槽、并发任务插槽限制为64。例如，如果服务器有2个CPU核心，则对象存储总共将使用128个并发线程。这包括Put、GET和批删除。建议先为任务时隙选择一个保守限制、并在Veeam备份达到新备份和即将过期备份数据的稳定状态后调整此值。请与您的NetApp客户团队合作、适当估算StorageGRID系统的规模、以满足所需的时间窗口和性能要求。要提供最佳解决方案、可能需要调整任务插槽数量和每个插槽的任务限制。</block>
  <block id="088329f80e8f7c77482109c96eff3a31" category="paragraph">Veeam备份作业可以使用不同的块大小选项进行配置、应仔细考虑这些选项。默认块大小为1 MB、而Veeam具有数据压缩和重复数据删除功能、可为初始完整备份创建大约500 KB的对象大小、为增量作业创建100-200 KB的对象大小。通过选择更大的备份块大小、我们可以大幅提高性能并降低对象存储的要求。尽管较大的块大小可以显著提高对象存储的性能、但由于存储效率性能降低、可能会增加主存储容量需求。建议为备份作业配置4 MB的块大小、以便为完整备份创建大约2 MB的对象、并为增量备份创建大约700 kB-1 MB的对象大小。客户甚至可以考虑使用8 MB块大小配置备份作业、此功能可在Veeam支持人员的协助下启用。</block>
  <block id="592907ef9f546e11799fa30830cdbbf8" category="paragraph">随着备份保留过期、备份作业将处理对象删除。Veeam以多对象删除请求的形式将删除请求发送到对象存储、每个请求1000个对象。对于小型解决方案、可能需要对此进行调整、以减少每个请求的对象数量。降低此值还可以更均匀地在StorageGRID系统中的节点之间分布删除请求。建议使用下表中的值作为配置多对象删除限制的起点。将表中的值乘以所选设备类型的节点数、即可获得Veeam中设置的值。如果此值等于或大于1000、则无需调整默认值。如果需要调整此值、请与Veeam支持部门合作进行更改。</block>
  <block id="6e288d3dc69075a7b00e3a5eccc75f53" category="summary">使用StorageGRID配置d不良 数据源</block>
  <block id="1d7ab5441faeddab8907d949dffcf445" category="paragraph">多米奥支持多种数据源、包括基于云的或内部对象存储。  您可以将d不良 配置为使用StorageGRID作为对象存储数据源。</block>
  <block id="51854bc16ca42e133bfde4123211eeec" category="section-title">配置d不良 数据源</block>
  <block id="e94a48672671c2f16283c02dcd7e1ed4" category="list-text">StorageGRID S3端点URL、租户S3访问密钥ID和机密访问密钥。</block>
  <block id="cc4a915b35ae50b8e57f0283d6015e40" category="list-text">StorageGRID配置建议：禁用数据压缩(默认情况下处于禁用状态)。  +
DERMIO使用字节范围GET在查询期间同时从同一对象中提取不同的字节范围。  字节范围请求的典型大小为1 MB。经过压缩的对象会降低字节范围GET性能。</block>
  <block id="e331942f70e82f4959f01731cbfb1328" category="section-title">d不良 指南</block>
  <block id="141251846236cc8d2f20c851f61ea3f9" category="inline-link">连接到Amazon S3 -配置S3兼容存储</block>
  <block id="c4db22c6e122c5ccedb3f043979a4a4c" category="paragraph"><block ref="d976dfca18716e67b46df95d5b29f87e" category="inline-link-rx"></block>。</block>
  <block id="39b41a7ee2c69c38d0a4a470a61e4998" category="list-text">在"Desmio数据集"页面上、单击+符号以添加源、然后选择"Amazon S3"。</block>
  <block id="8dff40ea2a76ab9fc22d69c42706243c" category="list-text">输入此新数据源的名称、StorageGRID S3租户访问密钥ID和机密访问密钥。</block>
  <block id="7eacc2961df39c56af10b4230194cc77" category="list-text">如果使用https连接到StorageGRID S3端点、请选中"加密连接"复选框。+
如果对此S3端点使用自签名CA证书、请按照dremio指南说明将此CA证书添加到&lt;JAVA_HOME&gt;服务器的dre/jre/lib/security +中
*屏幕截图示例*</block>
  <block id="41b33d7f98a9cf866375085c504e7a7f" category="image-alt">新源-常规</block>
  <block id="db492536be467309872671bce85cee04" category="list-text">单击"高级选项"、选中"启用兼容模式"</block>
  <block id="c8a971d9405e02862be7569e04d2ede1" category="list-text">在连接属性下、单击+添加属性并添加这些S3A属性。</block>
  <block id="e43ca2d39dd7142ec638ac64443b6f0d" category="list-text">fs.s3a.connection．maximum默认值为100。  如果S3数据集包含具有100个或更多列的大型镶木地板文件、则必须输入一个大于100的值。  有关此设置的信息、请参见《drefio指南》。</block>
  <block id="b326b5062b2f0e69046810717534cb09" category="paragraph">true</block>
  <block id="7493cad84b7f7b5b1c3a6d47a5acc12d" category="paragraph">FS.S3A.CONNECTION。最大值</block>
  <block id="55b13b50c6791d963f403e8ab7a5ec9a" category="paragraph">_&lt;大于100&gt;_的值</block>
  <block id="066fdfceeffa2c65588a0f6b8d7953de" category="image-alt">新源-高级选项</block>
  <block id="79af4add835219b58d07f6d1876a3e3b" category="list-text">根据您的组织或应用程序要求配置其他的多米奥选项。</block>
  <block id="09ac23f768d2697bd567221390fbafe7" category="list-text">单击保存按钮以创建此新数据源。</block>
  <block id="af514c8f85939e6df535289d025e6acd" category="list-text">成功添加StorageGRID数据源后、左侧面板将显示存储分段列表。+
*屏幕截图示例*</block>
  <block id="3b55448bec6300a3af924b399eb26957" category="image-alt">已添加新数据源</block>
  <block id="2804a96d012f15794c6aaa8f11797dfc" category="inline-link">Lab on Demand是StorageGRID的最佳销售工具</block>
  <block id="d2634778cafa4c3045e5e3351c9098fc" category="inline-link">StorageGRID：存储和管理内部备份和复制数据</block>
  <block id="f49b908c8064ba5b4ab223b14e8d376a" category="inline-link">查看不断增长的经验证的StorageGRID合作伙伴解决方案列表</block>
  <block id="47ac119989829cf384ff1ad266df420f" category="inline-link">StorageGRID S3对象锁定已通过Veritas NetBackup的验证</block>
  <block id="0883099d6628246c0f3172404097c1d1" category="inline-link">使用BlueXP通过符合3：2：1的备份策略保护Epic EHR</block>
  <block id="1e81f3787bf865826867c808345c93cf" category="inline-link">StorageGRID对象存储系列中的新增功能</block>
  <block id="f0d2294cd432ef286ea4c0d40d486219" category="inline-link">介绍StorageGRID 11.7和全新全闪存对象存储设备GF6112</block>
  <block id="3cc60dd0d810d80d23db5dfe54b351da" category="inline-link">Amazon S3文件系统的装载点现已正式发布</block>
  <block id="dd6f0ba1a70b208ed9294a411ace7f5b" category="inline-link">利用Cloud Insights使用Fluent Bit监控和收集日志</block>
  <block id="831dc58cce04528855c0f71b7c4c7427" category="inline-link">从Hadoop继续发展：借助德米奥和StorageGRID打造现代化数据分析</block>
  <block id="0de69010a0b885390944d59945579799" category="inline-link">采用StorageGRID的光谱逻辑在本机Glacier</block>
  <block id="d8d45aa5142f174e3e83b7f1de8895a1" category="sidebar">使用StorageGRID配置多米奥</block>
  <block id="9792e23419583666b178605decaec552" category="list-text">Gitlab</block>
  <block id="d2f2caed07026483a659ddedff29363a" category="section-title">将组限制为具有只读访问权限的单个子目录(前缀)</block>
  <block id="12e569a2475c87038546154b45eafa4f" category="paragraph">此策略允许组成员对分段中的子目录(前缀)具有只读访问权限。分段名称为"study"、子目录为"study01"。</block>
  <block id="d40d489ee06ec7f85fb2d17fd332ec2c" category="list-text">AWS装载点</block>
  <block id="dab38c58c86e39075df5ca86464b6e59" category="summary">第三方解决方案已通过StorageGRID 11.8.</block>
  <block id="43c9d447791c3e84501a3b86b522a4c1" category="doc">StorageGRID 11.8经验证的第三方解决方案</block>
  <block id="80880f7955cf3e0bbe904bbb677a357b" category="paragraph">以下第三方解决方案已通过验证、可用于StorageGRID 11.8.+
如果您要查找的解决方案未列出、请联系您的NetApp客户代表。</block>
  <block id="9283e244bcd98f1bdd350c1b4f2da148" category="inline-link">StorageGRID设备</block>
  <block id="eff26b146dbf07b93a3af4954ea77c6d" category="list-text"><block ref="eff26b146dbf07b93a3af4954ea77c6d" category="inline-link-rx"></block></block>
  <block id="0c116dd1f4daf14c460a0c77a9e0e674" category="inline-link">StorageGRID 11.8.</block>
  <block id="6a9dbde708e64ed0ece8a4d0b0dc1d32" category="list-text"><block ref="6a9dbde708e64ed0ece8a4d0b0dc1d32" category="inline-link-rx"></block></block>
  <block id="fca3b43498fce810dfcc0f52e38e42a6" category="list-text"><block ref="fca3b43498fce810dfcc0f52e38e42a6" category="inline-link-rx"></block></block>
  <block id="e9868d7697657696cac82d1e0b5159e2" category="paragraph">_作者：Aron Klein_</block>
  <block id="f1b702f1ec8f237dcd7b5c954b6d27b8" category="paragraph">_作者：郑安杰_</block>
  <block id="3ffee984625220881b57c95936a54d55" category="paragraph">作者：Siegfried Hepp和Aron Klein_</block>
  <block id="de8e421137ae87b94e3b716c2ac38854" category="paragraph">_作者：Oliver Haensel和Aron Klein_</block>
  <block id="9224315283279b10c8f6eac37416df31" category="paragraph">作者：Jonathan Wong</block>
  <block id="66dc7cd0b0a02168bc30f9fcad8cdbb3" category="paragraph">一段时间以来、Hadoop一直是数据科学家的最爱。通过Hadoop、可以使用简单的编程框架在多个计算机集群之间分布式处理大型数据集。Hadoop旨在从单个服务器扩展到数千台计算机、每台计算机都拥有本地计算和存储。</block>
  <block id="afa1796bcfe5f602d94a2ed1d5b82a74" category="paragraph">随着数据量的不断增长、使用自己的计算和存储添加新计算机的方法变得效率低下。线性扩展为高效使用资源和管理基础架构带来了挑战。</block>
  <block id="1ed32842544e52d59a55b4b962d478b4" category="sidebar">NetApp StorageGRID 是一款软件定义的对象存储套件，支持公有 ，私有云和混合多云环境中的各种用例。StorageGRID 为Amazon S3 API提供本机支持、并提供行业领先的创新技术、例如自动化生命周期管理、以便长期经济高效地存储、保护和保留非结构化数据。</block>
  <block id="6f32459fa210e1c46c9f23d60d9cf385" category="paragraph"><block ref="6f32459fa210e1c46c9f23d60d9cf385" category="inline-image-macro-rx" type="image"></block></block>
  <block id="16d7910e33afa606ab4d06325717b842" category="paragraph"><block ref="16d7910e33afa606ab4d06325717b842" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4a35b8f9b1e16b9013c14763f02901f8" category="paragraph"><block ref="4a35b8f9b1e16b9013c14763f02901f8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9eb0c7fe294867f4025650c8c0709e57" category="paragraph"><block ref="9eb0c7fe294867f4025650c8c0709e57" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fe418f43b0dec57499cf347d109f86b1" category="paragraph"><block ref="fe418f43b0dec57499cf347d109f86b1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0bd39904534d738466d23700af014b93" category="paragraph"><block ref="0bd39904534d738466d23700af014b93" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e60d52b4e43de4ee2416f9b9d4c543ae" category="paragraph"><block ref="e60d52b4e43de4ee2416f9b9d4c543ae" category="inline-image-macro-rx" type="image"></block></block>
  <block id="27b29720bc7935776a8007b13c881a1e" category="paragraph"><block ref="27b29720bc7935776a8007b13c881a1e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="feb1270f2d249021c93d4845a9be6d8d" category="paragraph"><block ref="feb1270f2d249021c93d4845a9be6d8d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f80bb521fa0915867adb4ac2385f431a" category="paragraph"><block ref="f80bb521fa0915867adb4ac2385f431a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a267127d1c75146fba631f5be6cc720" category="inline-image-macro">自动生成的计算机问题描述的屏幕截图、其中、wide=320、height=375</block>
  <block id="a6b3c8ce8a0f7b47961a71ca8f691360" category="paragraph"><block ref="a6b3c8ce8a0f7b47961a71ca8f691360" category="inline-image-macro-rx" type="image"></block></block>
  <block id="231b32850a7fef5c4be77eedcd54b7c4" category="inline-image-macro">S3概览速率</block>
  <block id="b5d405519c83b44b871a7fb2a7401500" category="paragraph">通过查看S3速率和活动请求、您可以按类型查看每个节点正在处理的负载以及请求总数。
<block ref="09a4b2cfcdf675e5f1f1ab0e8d545c44" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1be387f78502bd155ac8b9f6243be096" category="paragraph"><block ref="1be387f78502bd155ac8b9f6243be096" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4d53d2d4fecbf45d3f80638358f5d314" category="paragraph"><block ref="4d53d2d4fecbf45d3f80638358f5d314" category="inline-image-macro-rx" type="image"></block></block>
  <block id="49ce7b2f13d2e86a8ac31b5b7c9f0698" category="paragraph"><block ref="49ce7b2f13d2e86a8ac31b5b7c9f0698" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ed456358a6cded4a701707d28ed42b9c" category="paragraph"><block ref="ed456358a6cded4a701707d28ed42b9c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2c03d0abe3f02a4e8010af61356f3a13" category="paragraph"><block ref="2c03d0abe3f02a4e8010af61356f3a13" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7bc2ba01fc83cc05d6016f2b30e7422b" category="paragraph"><block ref="7bc2ba01fc83cc05d6016f2b30e7422b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3c1f331143452f56b7afe62d4a6a06e8" category="paragraph"><block ref="3c1f331143452f56b7afe62d4a6a06e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="68da18e5e85ce9599458e49805a7e5f4" category="paragraph"><block ref="68da18e5e85ce9599458e49805a7e5f4" category="inline-image-macro-rx" type="image"></block></block>
  <block id="93fe9fe3a9cc9115f96e0f6c6a6c6558" category="paragraph"><block ref="93fe9fe3a9cc9115f96e0f6c6a6c6558" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4e6fdbd70a6775f5a3d752d7eeb76a0d" category="paragraph"><block ref="4e6fdbd70a6775f5a3d752d7eeb76a0d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2a9e88f736e7ebfb5a81d4293daec053" category="paragraph"><block ref="2a9e88f736e7ebfb5a81d4293daec053" category="inline-image-macro-rx" type="image"></block></block>
  <block id="4a83aa6c03c160879b2b67fdb04895ba" category="paragraph"><block ref="4a83aa6c03c160879b2b67fdb04895ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7f6c1fcf38d1a6f4098759a767d190ba" category="paragraph"><block ref="7f6c1fcf38d1a6f4098759a767d190ba" category="inline-image-macro-rx" type="image"></block></block>
  <block id="edc01fca3972836934d47ea490eba734" category="paragraph"><block ref="edc01fca3972836934d47ea490eba734" category="inline-image-macro-rx" type="image"></block></block>
  <block id="12540705d8981e3e2f225b1711a20194" category="paragraph"><block ref="12540705d8981e3e2f225b1711a20194" category="inline-image-macro-rx" type="image"></block></block>
  <block id="eba9b7ec6c45efabece4f0dd90bfab8e" category="paragraph"><block ref="eba9b7ec6c45efabece4f0dd90bfab8e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ce3a2ea3fdc88d2240cf067f9e3bb8ce" category="paragraph"><block ref="ce3a2ea3fdc88d2240cf067f9e3bb8ce" category="inline-image-macro-rx" type="image"></block></block>
  <block id="fc45afe309269e516edf859072e835e7" category="paragraph"><block ref="fc45afe309269e516edf859072e835e7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="afb0a2573d140eda1f27e3e0dba64015" category="paragraph"><block ref="afb0a2573d140eda1f27e3e0dba64015" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8c8d70082e6112e0c8bc6a4fa141a8a7" category="paragraph"><block ref="8c8d70082e6112e0c8bc6a4fa141a8a7" category="inline-image-macro-rx" type="image"></block></block>
  <block id="282adcd20fdfe6e2fc0e90884dc772c0" category="paragraph"><block ref="282adcd20fdfe6e2fc0e90884dc772c0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f4efedc19cac689556be823f3de3dcfe" category="paragraph"><block ref="f4efedc19cac689556be823f3de3dcfe" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2dc24c9519cce6d5072090d71e6b4f70" category="paragraph"><block ref="2dc24c9519cce6d5072090d71e6b4f70" category="inline-image-macro-rx" type="image"></block></block>
  <block id="871ce6f483851d98a86cb89bcb6b6b0e" category="paragraph"><block ref="871ce6f483851d98a86cb89bcb6b6b0e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8dce7f133eb89fe3e99fd0999c44bf82" category="paragraph"><block ref="8dce7f133eb89fe3e99fd0999c44bf82" category="inline-image-macro-rx" type="image"></block></block>
  <block id="66476a2b2c744507782e065e99504679" category="paragraph"><block ref="66476a2b2c744507782e065e99504679" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3ebf5702891f15d812d3588ca9ce5b74" category="paragraph"><block ref="3ebf5702891f15d812d3588ca9ce5b74" category="inline-image-macro-rx" type="image"></block></block>
  <block id="998dfb93fc28b1e3cd5c0ff6f80e41f5" category="paragraph"><block ref="998dfb93fc28b1e3cd5c0ff6f80e41f5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="7d357c582321af176fc74f1ddf5aa211" category="paragraph"><block ref="7d357c582321af176fc74f1ddf5aa211" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1b55a28070372e724653dd78fbd8816b" category="paragraph"><block ref="1b55a28070372e724653dd78fbd8816b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a45308928cdb317709d69e1a9d7f54cf" category="inline-link">基于StorageGRID的大数据分析：德罗米奥的性能是Apache Hive的23倍</block>
  <block id="00039cf6e879cf2c96e1147810458aae" category="inline-link">隆重推出StorageGRID + lle可 意FS解决方案简介</block>
  <block id="f88708a62cf65a104ede836164d02fab" category="inline-link">StorageGRID 11.8:增强的安全性、精简性和用户体验</block>
  <block id="7ed997d0afb0f25bef5074cfbae5d820" category="inline-link">隆重推出StorageGRID 11.8.</block>
  <block id="d24354c28f6eda12a84300886d0bae91" category="paragraph"><block ref="d24354c28f6eda12a84300886d0bae91" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b234cd8b9202dfa24815cd14203cde1a" category="paragraph"><block ref="b234cd8b9202dfa24815cd14203cde1a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="dcb0bfe5be50507cbd364a2d0fdfd056" category="paragraph"><block ref="dcb0bfe5be50507cbd364a2d0fdfd056" category="inline-image-macro-rx" type="image"></block></block>
  <block id="9c15e570ff0d3a398f314911048e34f6" category="paragraph"><block ref="9c15e570ff0d3a398f314911048e34f6" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2f4bfe6caa4a2e3bf8657b624787ecf2" category="paragraph"><block ref="2f4bfe6caa4a2e3bf8657b624787ecf2" category="inline-image-macro-rx" type="image"></block></block>
  <block id="03a85f67d3528d13af543e9104884bf5" category="paragraph"><block ref="03a85f67d3528d13af543e9104884bf5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6724e2cab4809a16c4c5d1a71c4efc8a" category="paragraph"><block ref="6724e2cab4809a16c4c5d1a71c4efc8a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="1a47c5b4c56facc13874c121e4100dcc" category="paragraph"><block ref="1a47c5b4c56facc13874c121e4100dcc" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2bc8e44de2063c0bd15ca5716f63f7e0" category="paragraph"><block ref="2bc8e44de2063c0bd15ca5716f63f7e0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a93f7571d3de7b14fc5d89b0ece8d2f0" category="paragraph"><block ref="a93f7571d3de7b14fc5d89b0ece8d2f0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="865bdd362452895283df6a25b595cf8b" category="paragraph"><block ref="865bdd362452895283df6a25b595cf8b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="45f16a43f7407469c60c15677753fe51" category="paragraph"><block ref="45f16a43f7407469c60c15677753fe51" category="inline-image-macro-rx" type="image"></block></block>
  <block id="17e7998b1bde3096b514d12f2f29fcc1" category="paragraph"><block ref="17e7998b1bde3096b514d12f2f29fcc1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="53b215253a449ba905784e0c81219314" category="paragraph"><block ref="53b215253a449ba905784e0c81219314" category="inline-image-macro-rx" type="image"></block></block>
  <block id="02610b96236d289b34aabb73ac622a2c" category="paragraph"><block ref="02610b96236d289b34aabb73ac622a2c" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f9af426d0a67de800f5a8ace6ebbd63f" category="paragraph"><block ref="f9af426d0a67de800f5a8ace6ebbd63f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3cf2063e321c74d35f814530d79c4f29" category="paragraph"><block ref="3cf2063e321c74d35f814530d79c4f29" category="inline-image-macro-rx" type="image"></block></block>
  <block id="257a7963c883b90bd7209787e84a2374" category="paragraph"><block ref="257a7963c883b90bd7209787e84a2374" category="inline-image-macro-rx" type="image"></block></block>
  <block id="df45e8ecb7cc5c7f57ec4d0472d67548" category="paragraph"><block ref="df45e8ecb7cc5c7f57ec4d0472d67548" category="inline-image-macro-rx" type="image"></block></block>
  <block id="bd127a55e93c24713fe9e0920b48b11f" category="paragraph"><block ref="bd127a55e93c24713fe9e0920b48b11f" category="inline-image-macro-rx" type="image"></block></block>
  <block id="3caa9b7b3887ce26e534887c7ebcf666" category="paragraph"><block ref="3caa9b7b3887ce26e534887c7ebcf666" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5d5c45ea2d3e96eed9c3b78a4cd9b507" category="paragraph"><block ref="5d5c45ea2d3e96eed9c3b78a4cd9b507" category="inline-image-macro-rx" type="image"></block></block>
  <block id="822e9391e0b00e652b3d5bfe5d4b103a" category="paragraph"><block ref="822e9391e0b00e652b3d5bfe5d4b103a" category="inline-image-macro-rx" type="image"></block></block>
  <block id="29271d5d57f8d6e8670b7fc88d53d6e8" category="paragraph"><block ref="29271d5d57f8d6e8670b7fc88d53d6e8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="cef940a89117c81a10863795c4ddd30e" category="paragraph"><block ref="cef940a89117c81a10863795c4ddd30e" category="inline-image-macro-rx" type="image"></block></block>
  <block id="db42e15c186d3f7b8ba7a666052fc779" category="paragraph"><block ref="db42e15c186d3f7b8ba7a666052fc779" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a9ad8a7a7798500b5e52f25607ed3485" category="list-text">短对影(最低对影数据质量版本2024.02)</block>
  <block id="f56cff2f7966f4ffe98e416084bb7e95" category="list-text">目标存储设备中的卷数必须大于或等于源节点中的卷数。即使目标设备的容量大于源节点、您也无法将包含16个对象存储卷(rangedb)的源节点克隆到包含12个对象存储卷的目标存储设备。大多数存储设备都有16个对象存储卷、但只有12个对象存储卷的SGF6112存储设备除外。例如、不能将SG5760克隆到SGF6112。</block>
  <block id="301ed7b461a16811c00829d5bd1c6624" category="summary">本指南提供了有关使用GitLab配置StorageGRID的信息。</block>
  <block id="ef012cefa8ad7693b5c808fa1ce94bbd" category="doc">NetApp StorageGRID与GitLab</block>
  <block id="75049db1e349683b35a7dca115f7b290" category="inline-link">GitLab对象存储配置指南</block>
  <block id="830a8857ba237b976f92dcbaa5cdec26" category="paragraph">NetApp已使用GitLab对StorageGRID进行了测试。请参见下面的GitLab配置示例。  请参见<block ref="1fbed9049876aa2874e9bb4887a0f320" category="inline-link-rx"></block> 了解详细信息。</block>
  <block id="dc74db24a8e5e1f23203fff3257066b1" category="section-title">对象存储连接示例</block>
  <block id="4e2805091f9d6d4c2bf36af3331432cc" category="paragraph">对于Linux软件包安装、这是的一个示例<block ref="4717d53ebfdfea8477f780ec66151dcb" prefix=" " category="inline-code"></block> 在合并表单中设置。编辑<block ref="371d9aee577f2cef4df0163cf7dc8a0c" prefix=" " category="inline-code"></block> 并添加以下行、替换所需的值：</block>
  <block id="38ffd8c22488922588812e688de792ac" category="summary">本报告介绍如何针对StorageGRID调整S3A。</block>
  <block id="c422c82e21b1ef6485ec6d88beb6b06c" category="doc">Hadoop S3A调整</block>
  <block id="1b40687ad18cfd6efdf4810ebb337b1a" category="paragraph">Hadoop S3A连接器有助于在基于Hadoop的应用程序和S3对象存储之间实现无缝交互。在使用S3对象存储时、要优化性能、必须调整Hadoop S3A Connector。在深入介绍调整详细信息之前、我们先大致了解一下Hadoop及其组件。</block>
  <block id="e41757b122e008baee063abf23c19c8e" category="section-title">什么是Hadoop？</block>
  <block id="b654c608145226171f0898ccbae5cec7" category="paragraph">*Hadoop* 是一个功能强大的开源框架，专为处理大规模数据处理和存储而设计。它支持跨多个计算机集群进行分布式存储和并行处理。</block>
  <block id="286bb4752ab8cc6c9ab926108e89ff74" category="paragraph">Hadoop的三个核心组件是：</block>
  <block id="b27a1acd006213b6e473f4749269fd71" category="list-text">*Hadoop HDFS (Hadoop分布式文件系统)*：用于处理存储、将数据拆分为块并在节点之间分布。</block>
  <block id="88d3606426a43318176abdbbccebd0bf" category="list-text">*Hadoop MapReredget*：负责将任务划分为较小的区块并并行执行来处理数据。</block>
  <block id="4e3559b639014f651bda365ff91a1be1" category="inline-link">高效管理资源并计划任务</block>
  <block id="27a5b1eb9e47fddd3fa124843d505156" category="list-text">*Hadoop yar (Yet Another Resource Neotiator)：*<block ref="0a2f651ef2ec562f49ee6f3ee518be8b" category="inline-link-rx"></block></block>
  <block id="d00c5d3d4637dd8d67672efd5e9370a7" category="section-title">Hadoop HDFS和S3A连接器</block>
  <block id="a3d3b46a8ca353af62834cbd44407f28" category="paragraph">HDFS是Hadoop生态系统的重要组成部分、在高效处理大数据方面发挥着关键作用。HDFS可实现可靠的存储和管理。它可确保并行处理和优化数据存储、从而加快数据访问和分析速度。</block>
  <block id="7cba2f74e0ab52b47dc032ae00b28539" category="paragraph">在大数据处理方面、HDFS在为大型数据集提供容错存储方面表现出色。它通过数据复制来实现这一点。它可以在数据仓库环境中存储和管理大量结构化和非结构化数据。此外、它还可以与领先的大数据处理框架无缝集成、例如Apache Spark、Hive、Pig和Flink、从而实现可扩展的高效数据处理。它与基于Unix (Linux)的操作系统兼容、因此对于更喜欢使用基于Linux的环境进行大数据处理的组织来说、它是理想的选择。</block>
  <block id="19db330c0bad5316cc12c5dfd0667649" category="paragraph">随着数据量逐渐增长、使用自己的计算和存储向Hadoop集群添加新计算机的方法变得效率低下。线性扩展为高效使用资源和管理基础架构带来了挑战。</block>
  <block id="22e7bb54fa5c10b5b025b5533a88999d" category="paragraph">为了应对这些挑战、Hadoop S3A连接器可针对S3对象存储提供高性能I/O。使用S3A实施Hadoop工作流有助于将对象存储用作数据存储库、并将计算和存储分开、进而使您能够独立扩展计算和存储。分离计算和存储还可以让您将适当数量的资源专用于计算作业、并根据数据集大小提供容量。因此、您可以降低Hadoop工作流的总体TCO。</block>
  <block id="bea7f21895dd503dbb2c3260b3af74b5" category="section-title">Hadoop S3A连接器调整</block>
  <block id="53fa8f489fea78504f2a690e70f6624d" category="paragraph">S3的行为与HDFS不同、某些尝试保留文件系统外观的行为也明显欠佳。要最高效地利用S3资源、必须仔细调整/测试/试验。</block>
  <block id="485a45d91872aeb5af4b8a55fa265c39" category="inline-link">Hadoop 3.3.5 core-site.xml</block>
  <block id="413d791e09959ec487ff70f6a5fa8f5f" category="paragraph">本文档中的Hadoop选项基于Hadoop 3.3.5、请参见<block ref="ff5a0a931f8a3b6af413721cf09c3790" category="inline-link-rx"></block> 所有可用选项。</block>
  <block id="18e3e9625172b950f27bfa276bc9bac2" category="paragraph">注意—某些Hadoop FS.S3a设置的默认值在每个Hadoop版本中都不同。请务必查看特定于当前Hadoop版本的默认值。如果未在Hadoop core-site.xml中指定这些设置、则会使用默认值。您可以使用Spark或Hive配置选项在运行时覆盖此值。</block>
  <block id="85745090e2519b4e232f691071d9b425" category="inline-link">Apache Hadoop页面</block>
  <block id="78c46ef71aa9afef44c6367560cca566" category="paragraph">您必须访问此页面<block ref="abad591e30e327768342ad907b293959" category="inline-link-rx"></block> 了解每个FS.S3A选项。如果可能、请在非生产Hadoop集群中对其进行测试、以查找最佳值。</block>
  <block id="85d6e5d0078a84fc29dd42a208f9629b" category="inline-link">在使用S3A连接器时最大限度地提高性能</block>
  <block id="dcab9d5d9c10d726c90c6c4d3ac65fe0" category="paragraph">您应阅读<block ref="bd3cc6effa7ab467cddf323c1824c302" category="inline-link-rx"></block> 了解其他调整建议。</block>
  <block id="d909d5361378ec585bfd069b0711a66f" category="paragraph">让我们来探讨一些关键注意事项：</block>
  <block id="245a20d95f90b2748cffdfc73cbffb3f" category="paragraph">* 。数据压缩*</block>
  <block id="77223f8255f1260a06b0735cd6f7cfe8" category="paragraph">请勿启用StorageGRID数据压缩。大多数大数据系统都使用字节范围GET、而不是检索整个对象。对压缩对象使用字节范围GET会显著降低GET性能。</block>
  <block id="4dd2bed9c1980f32df795815ba1bc2c9" category="paragraph">* 。S3a提交人*</block>
  <block id="d478615245634189a8210b6069fb0383" category="inline-link">通用S3A提交器选项页面</block>
  <block id="7ac30a4c19c86427129a4848b169de86" category="paragraph">一般情况下、建议使用magic S3A提交器。请参见此部分<block ref="7bd5d7726ff15eb3278019d14d9791ad" category="inline-link-rx"></block> 更好地了解Magic committer及其相关的S3A设置。</block>
  <block id="1c90757eed18fc6bd4eb8aba8421533f" category="paragraph">魔力委员会：</block>
  <block id="5fd47885b78e7fc30d2f24ef46be983b" category="paragraph">Magic Commonter特别依靠S3Guard在S3对象存储上提供一致的目录列表。</block>
  <block id="1299ce4463815e5b17364f972f897e66" category="paragraph">借助一致的S3 (现在是这种情况)、Magic Comm캯 풱 믡 可以安全地与任何S3存储分段配合使用。</block>
  <block id="83f0ca20cfa52e6400b17cab93a1cf17" category="paragraph">选择和实验：</block>
  <block id="fb9962c4a0d3937d268fc2deb23bea85" category="paragraph">根据您的使用情形、您可以在Staging Commenter (依赖于集群HDFS文件系统)和Magic Commenter之间进行选择。</block>
  <block id="bcdd4afe5d0cbdf8cc04de0c92ddc7df" category="paragraph">尝试这两种方法、确定哪种方法最适合您的工作负载和要求。</block>
  <block id="b2272f16c45a7fc4af509338bc22504e" category="paragraph">总之、S3A委员会为应对持续、高性能和可靠的S3输出承诺这一根本性挑战提供了解决方案。其内部设计可确保高效的数据传输、同时保持数据完整性。</block>
  <block id="81501235b286178b5df292f16c6e8b47" category="inline-image-macro">S3A选项表</block>
  <block id="dc1717f3744878e6dbb68b8a22974e06" category="paragraph">*3.线程、连接池大小和块大小*</block>
  <block id="b35c467aea8fb0e4ad9d636d48d0b8db" category="list-text">与单个存储分段交互的每个*S3A*客户端都有自己的专用池，其中包含用于上传和复制操作的开放HTTP 1.1连接和线程。</block>
  <block id="4b7fc1639229d7f089f2e8c85436106e" category="inline-link">您可以调整这些池大小、以便在性能与内存/线程使用量之间取得平衡</block>
  <block id="901a6addd359ee8998a8f1e41f45789f" category="list-text"><block ref="801a4dc74c7b120220c9c416fd446c6b" category="inline-link-rx"></block>。</block>
  <block id="10fbe332f21fbd575e849cde38283e2e" category="list-text">将数据上传到S3时、数据会划分为多个块。默认块大小为32 MB。您可以通过设置FS.S3a.block.size属性来自定义此值。</block>
  <block id="ffa0e6a713cabf752ba8055eaaede5fc" category="list-text">较大的块大小可通过减少上传期间管理多部件的开销来提高大型数据上传的性能。对于大型数据集、建议值为256 MB或以上。</block>
  <block id="f40f5a29dd719649854707ad2ed54faa" category="paragraph">*4.多部分上传*</block>
  <block id="289795451e85a0a16d75e7868c7480d0" category="paragraph">S3A提交者*始终*使用MPU (多部分上传)将数据上传到S3存储分段。这是在以下情况下所必需的：任务失败、任务的推测性执行以及提交前作业中止。以下是与多部件上传相关的一些关键规格：</block>
  <block id="a9da1ffc95aa8035dfd68dae308c2231" category="list-text">最大对象大小：5 TiB (TB)。</block>
  <block id="d0fb74e477b55b97737f386acec3b84e" category="list-text">每次上传的最大部件数：10、000。</block>
  <block id="83b29781f2e067cdc992c431a51a9935" category="list-text">部件号：范围为1到10、000 (含1到10、000)。</block>
  <block id="7345af9128ab03965deea092bbcd2202" category="list-text">部件大小：介于5 MiB和5 GiB之间。值得注意的是、多部分上传的最后一部分没有最小大小限制。</block>
  <block id="f9064148ac19ecdf76f9ddca593dbddb" category="paragraph">对S3多部件上传使用较小的部件大小既有优点也有缺点。</block>
  <block id="1ef80274ba7e199b46d885662e8e2e9f" category="paragraph">*优势*：</block>
  <block id="e4461ace39f3509a41ff3e20c71902cf" category="list-text">从网络问题中快速恢复：当您上传较小的部分时、由于网络错误而重新启动失败的上传所产生的影响将降至最低。如果某个部件出现故障、您只需要重新上传该特定部件、而不是整个对象。</block>
  <block id="df3a8de4dd7f4c840c5cd07e596cb5de" category="list-text">更好的并行处理：利用多线程或并发连接、可以并行上传更多部件。这种并行处理可提高性能、尤其是在处理大型文件时。</block>
  <block id="c44c778d63d4fd51a252f196604c2ec6" category="paragraph">*缺点*：</block>
  <block id="5c62a121681103dd6392f0859e18473a" category="list-text">网络开销：部件较小意味着要上传的部件较多、每个部件都需要自己的HTTP请求。HTTP请求越多、启动和完成单个请求的开销就越大。管理大量小部件可能会影响性能。</block>
  <block id="748b6dc8bff1881d38cec5375d3045a7" category="list-text">复杂性：管理订单、跟踪部件和确保上传成功可能会非常繁琐。如果需要中止上传、则需要跟踪并清除已上传的所有部件。</block>
  <block id="f3983123dcac058e305af36c45c988e8" category="paragraph">对于Hadoop、建议对fs.s3a.multipart.size使用256MB或以上的部件大小。请始终将FS.S3a.mutlpart.threshold"值设置为2 x FS.S3a.multipart.size值。例如、如果fs.s3a.multipart.size = 256M、则fs.s3a.mutlifpart.threshold"应为512M。</block>
  <block id="4251dd2508268d84d780950cfa957f88" category="paragraph">对大型数据集使用较大的零件大小。根据您的特定使用情形和网络条件、选择一个能够平衡这些因素的部件大小非常重要。</block>
  <block id="56d98abf32151f1e7a60c6cdad4b995e" category="inline-link">三步流程</block>
  <block id="40a26596045288b6e31e0524da1e78d4" category="paragraph">多部分上传是<block ref="119a74f2526c1f8ee38f113c37745d3a" category="inline-link-rx"></block>：</block>
  <block id="e77511b5a47e9ce5242b5e2707d34871" category="list-text">上传已启动、StorageGRID将返回一个上传ID.</block>
  <block id="465c4cf2408ae7723d681a9c8607de37" category="list-text">对象部件将使用上载-id进行上载。</block>
  <block id="265f70ced2325f215340985c129b8fff" category="list-text">上传所有对象部件后、发送包含上传id的完整多部分上传请求。StorageGRID根据上传的部分构建对象、客户端可以访问该对象。</block>
  <block id="65638a5ddb2ddbd00963cc5b84f206d1" category="paragraph">如果未成功发送完整的多部件上传请求、则这些部件将保留在StorageGRID中、不会创建任何对象。作业中断、失败或中止时会发生这种情况。这些部件将保留在网格中、直到多部件上传完成或中止、或者如果上传启动后15天、StorageGRID会清除这些部件。如果一个存储分段中有许多(几百到几百万个)正在进行的多部分上传、则当Hadoop发送‘list-multipart-Uploads’(此请求不按上传ID筛选)时、此请求可能需要很长时间才能完成、或者最终超时。您可以考虑使用适当的FS.S3a.mutlpart.purge值将FS.S3a.multipart.purge.age设置为true (例如、5到7天、不要使用默认值86400、即1天)。或者联系NetApp支持部门调查情况。</block>
  <block id="d9703f8bc6fb70abb3d253a5ded96197" category="paragraph">*5.缓冲区写入数据存储在内存中*</block>
  <block id="36a89ed4836d3b5b5f59193e28776e5c" category="paragraph">为了提高性能、您可以在将写入数据上传到S3之前将其缓冲在内存中。这样可以减少小型写入次数并提高效率。</block>
  <block id="63d5657772886960693d8740023cf233" category="paragraph">请记住、S3和HDFS的工作方式各不相同。要最有效地利用S3资源、必须仔细调整/测试/实验。</block>
  <block id="38a5cc39717b20b4cde7ce17adfaf8c7" category="summary">本报告涵盖StorageGRID上的大数据分析。</block>
  <block id="5d272a32f1e2287537ac7e73dbde5d69" category="doc">NetApp StorageGRID和大数据分析</block>
  <block id="f5787e6402b1cee555a3442483bd6327" category="section-title">NetApp StorageGRID用例</block>
  <block id="92f1edc36d1985b5746e924fb88bb19b" category="paragraph">NetApp StorageGRID对象存储解决方案可提供可扩展性、数据可用性、安全性和高性能。各种规模和各行各业的组织都在广泛的使用情形中使用StorageGRID S3。让我们来了解一些典型场景：</block>
  <block id="27f32b3f9512c62dc40543d9cc892611" category="paragraph">*大数据分析：* StorageGRID S3常用作数据湖、企业可在其中存储大量结构化和非结构化数据、以便使用Apache Spark、Splunk Smartstore和DREMIO等工具进行分析。</block>
  <block id="e77b3574759aea5c11a8d04312bc2cbe" category="paragraph">*数据分层：* NetApp客户使用ONTAP的FabricPool功能在高性能本地层之间自动将数据移动到StorageGRID。在将冷数据保留在低成本对象存储上的同时、将昂贵的闪存存储释放出来、以存储热数据。这样可以最大限度地提高性能并节省成本。</block>
  <block id="4dc7ef59b422ad6beec0dcf560a3fdf9" category="paragraph">*数据备份和灾难恢复：*企业可以使用StorageGRID S3作为可靠且经济高效的解决方案来备份关键数据并在发生灾难时进行恢复。</block>
  <block id="b05954e05454ab56e0d356cb4ad49d95" category="paragraph">*应用程序的数据存储：* StorageGRID S3可用作应用程序的存储后端，使开发人员能够轻松地存储和检索文件、图像、视频和其他类型的数据。</block>
  <block id="5623c900b98e0e5e17c60c75ded947b1" category="paragraph">*内容交付：* StorageGRID S3可用于存储静态网站内容、媒体文件和软件下载并提供给全球用户、利用StorageGRID的地区分布和全局命名空间实现快速可靠的内容交付。</block>
  <block id="60b72d1ecbd87ac726a3dbb733456c59" category="paragraph">*数据分层：* NetApp客户使用ONTAP FabricPool功能在高性能本地层之间自动将数据移动到StorageGRID。在将冷数据从低成本对象存储中随时可用的同时、通过层化释放昂贵的闪存存储来存储热数据。这样可以最大限度地提高性能并节省成本。</block>
  <block id="454845c7ca306686c28f96a59487d70c" category="paragraph">*数据归档：* StorageGRID提供不同的存储类型、并支持分层到公共长期低成本存储选项、使其成为出于合规性或历史目的需要保留的数据归档和长期保留的理想解决方案。</block>
  <block id="a324e6c3bb7d6684738c923e7b52ea98" category="paragraph">*对象存储用例*</block>
  <block id="9f79f86c9a539a911125a876ef6a3c2e" category="inline-image-macro">StorageGRID用例图、宽度=396、高度=394</block>
  <block id="c9e24c78b995a9f99006f7b470383259" category="paragraph">在上述情形中、大数据分析是最热门的使用情形之一、其使用量呈上升趋势。</block>
  <block id="d9adadb4a0063dcb9fae0a43c0073259" category="section-title">为什么选择StorageGRID解决数据湖问题？</block>
  <block id="20ee9cfabde8b905c9a64689a84b0921" category="list-text">增强协作—利用行业标准API访问实现大规模共享多站点、多租户</block>
  <block id="884ee76830efc6a2368841cf8e70b390" category="list-text">降低运营成本—通过一个自我修复型自动化横向扩展架构简化运营</block>
  <block id="abdafbcb8273ebb7d3d1776426912eea" category="list-text">可扩展性—与传统的Hadoop和数据仓库解决方案不同、StorageGRID S3对象存储可将存储与计算和数据分离、从而使企业能够随着增长扩展存储需求。</block>
  <block id="94756ff0a241ceb246fb4e92f9e8b5db" category="list-text">耐用性和可靠性—StorageGRID的耐用性高达99.9999999%、这意味着存储的数据能够高度抵御数据丢失。它还提供高可用性、确保数据始终可访问。</block>
  <block id="6d5424acc89d68777ded882e67fba989" category="list-text">安全性—StorageGRID提供各种安全功能、包括加密、访问控制策略、数据生命周期管理、对象锁定和版本控制、以保护S3存储分段中存储的数据</block>
  <block id="9ed95e053e569a8027874c20fc968fa0" category="paragraph">* StorageGRID S3数据湖*</block>
  <block id="16440189dc2ac5b52ea041615f4e3502" category="inline-image-macro">StorageGRID数据报时示例、宽度=不等、高度= 345</block>
  <block id="bcf6df0d4fc301b73dfb0f84c2b25fca" category="section-title">哪种数据仓库或数据湖最适合S3对象存储</block>
  <block id="f5fb5a608581154f9f31a7efeaf26b22" category="inline-link">Apache iceberg：权威指南</block>
  <block id="961898fd5ba4fc2d612d1c831953550a" category="paragraph">NetApp通过三个数据仓库/湖屋生态系统(Hive、Delta湖和德雷米奥)对StorageGRID进行了基准测试。<block ref="ea7970154750f3c7264130a8bd2b3dc5" category="inline-link-rx"></block> 简要介绍了数据仓库和数据湖屋以及这两种架构的利弊。</block>
  <block id="d74100f8d86dca0577d39ba1e04a17a6" category="list-text">基准测试工具- TPC-DS -<block ref="d703b8825e30c09e87a04e77b042a1a8" category="inline-link-rx"></block></block>
  <block id="d30ec88779257c0b31627ba4c551888a" category="list-text">大数据生态系统</block>
  <block id="3d8fdb479ba6a1b9cecf651f9b7eea26" category="list-text">一个由5个VM组成的集群、每个VM具有128 G RAM和24个vCPU、SSD存储用于系统磁盘</block>
  <block id="a7bc6add825dafcb28d8468de2244c0e" category="list-text">采用Hive 3.1.3的Hadoop 3.3.5 (1个名称节点+ 4个数据节点)</block>
  <block id="6b3b732f04270b0bc61c4e04a2f39184" category="list-text">采用Spark 3.2.0 (1个主服务器+ 4个员工)和Hadoop 3.3.5的Delta Lake</block>
  <block id="6b18ec7d77a4e9e064cbf7907da0f995" category="list-text">d不良V23 (1个主服务器+ 4个执行器)</block>
  <block id="670aaecb1a526fbed439dad3ec353a96" category="list-text">对象存储</block>
  <block id="2d9b029355e87294061ae6f1de033209" category="list-text">NetApp^®^ StorageGRID^®^ 11.5，带有3个SG6060 + 1个SG1000负载平衡器</block>
  <block id="3e02059b0b44d7c31aea68d26d910c82" category="list-text">对象保护—2个副本</block>
  <block id="3cf72a217876a6502e40c6bc45a93c60" category="list-text">数据库大小为1000 GB</block>
  <block id="8db25bfcdb041c33cb3750cd355e2821" category="list-text">在所有3个生态系统上禁用缓存、以便在每个查询测试中获得一致的结果。</block>
  <block id="4775694e0c94905d9a80366e4fa7f65a" category="paragraph">TPC-DS附带99个复杂的SQL查询、用于查询基准测试。我们测量了完成所有99个查询所需的总分钟数、并通过细分S3请求的类型和数量来深入分析结果。下面的第一个表显示了所有99个查询的总持续时间、第二个表汇总了每个生态系统发送到StorageGRID的S3请求的数量和类型。</block>
  <block id="6d250f65ee48829b160dce910ccf0190" category="paragraph">*TPC-DS查询结果*</block>
  <block id="47e3170ffb3d6c316975632968933646" category="cell">生态系统</block>
  <block id="c05def664dae0985e5984993db2b69a0" category="cell">配置</block>
  <block id="e51fc2a250a74f84b11010c0f9316c46" category="cell">三角洲湖</block>
  <block id="6f632a1f063dc14df220da8c1d176f38" category="cell">存储层</block>
  <block id="49519cec4f69d00412deaceb05c68eb8" category="cell">NetApp^®^ StorageGRID^®^</block>
  <block id="ce1dc110e77caccbe12e51dce2d1c9b7" category="cell">驱动器类型</block>
  <block id="9c2dc227590d4220750b52b21b0aeb99" category="cell">HDD</block>
  <block id="5128c40e9b4875ff6b6f9b08e8d0a03f" category="cell">表格格式</block>
  <block id="ace780da4816e1e457db8c57d60b5d66" category="cell">镶木地板</block>
  <block id="f49606530a9567c51e160fcce34b8f71" category="cell">镶木地板^1^</block>
  <block id="6267eaec7dcff27c3dc9e28ff41252d0" category="cell">数据库大小</block>
  <block id="a0b2fbadd5b3ebfe64b31483a2ac8886" category="cell">1000 G</block>
  <block id="35b5589d5690d7ef32acf311beb9bbea" category="cell">TPCDS 99查询+
总分钟数</block>
  <block id="d06520689ef9c6002c5ceab8146281f6" category="cell">1084 ^2^</block>
  <block id="b53b3a3d6ab90ce0268229151c9bde11" category="cell">55</block>
  <block id="67c6a1e7ce56d3d6fa748ab6d9af3fd7" category="cell">47.1.</block>
  <block id="fb9fcf59d7e277fffe7705ce2be3777a" category="paragraph">^1^测试了镶木地板和冰山一角表格式，结果相似。</block>
  <block id="673b0197afb5ff5d157542553d103217" category="paragraph">^2^ Hive无法完成查询编号72。</block>
  <block id="95f1998726f8cd4be0aff86865fa8eae" category="paragraph">*TPC-DS查询- S3请求细分*</block>
  <block id="3e197ca7a19378fad3e5581cbd39fb4b" category="cell">S3请求</block>
  <block id="7528035a93ee69cedb1dbddb2f0bfcc8" category="cell">获取</block>
  <block id="8db7bb1512ff25e1db67c5b9a53f897d" category="cell">1、117184</block>
  <block id="2569e54b8230d5c2746fa85c61dcf512" category="cell">2、074、610</block>
  <block id="7cea2b87e7eb0c4d67994a7b9fa4f3d3" category="cell">4、414、227</block>
  <block id="6f53c4f40f0a0d7fefdb89564ac1c713" category="cell">观察：+
所有范围GET</block>
  <block id="a9d41bf59f53e6160f0b13f571ea418a" category="cell">从32 MB对象中获取2 KB到2 MB的80%范围、每秒50到100个请求</block>
  <block id="e0b8bceb4cded5e4c1e2d73d9331f0f7" category="cell">73%的范围从32 MB对象开始低于100 KB、每秒1000到1400个请求</block>
  <block id="bfe0f96dc7eb9140699f8fdd7568c553" category="cell">从256MB对象获取90% 1M字节范围、2000到2300个请求/秒</block>
  <block id="0f220d208874b104e26e73ec94b0e690" category="cell">列出对象</block>
  <block id="bfc2dfc2cb23058c08a7d12b5c3abb19" category="cell">312、053</block>
  <block id="0e706da47bd945de88f06af5c56e1e6a" category="cell">24、158</block>
  <block id="335f5352088d7d9bf74191e006d8e24c" category="cell">240</block>
  <block id="c03e2ac569e5aac15b52493eef30e9e7" category="cell">头部+
(不存在的对象)</block>
  <block id="b920dc6d7f4f2319e93bdcc850be6166" category="cell">156、027</block>
  <block id="8e43c25a28a92db67de364324cbdf9dd" category="cell">12、103</block>
  <block id="58a2fc6ed39fd083f55d4182bf88826d" category="cell">192.</block>
  <block id="d241bb72f8484e8c12847a1c342893cc" category="cell">头部+
(存在的对象)</block>
  <block id="791138a3078a87a630b0ddcc779f5365" category="cell">982、126</block>
  <block id="41157fd52202414d46b193aa0dc0e7ed" category="cell">922732</block>
  <block id="4a12caac680acef61b9d5542d0bdd153" category="cell">1、845</block>
  <block id="645d67b4eb5a0d06bf14fe7a682ced76" category="cell">请求总数</block>
  <block id="a56d0d38d9846ac044442ecabae19902" category="cell">2.</block>
  <block id="6dfffbda5aeba01126df9439ffbc82a3" category="cell">3、033、603</block>
  <block id="b0f186b9ad3639a900dc289160a9505b" category="cell">4、416、504</block>
  <block id="15dc52463e414693d28f722fd4d402db" category="paragraph">从第一张桌子上、我们可以看到Delta Lake和德雷米奥比Hive快得多。从第二个表中、我们注意到Hive发送了大量S3列表对象请求、这在所有对象存储平台中通常都很慢、尤其是在处理包含许多对象的分段时。这会显著增加整体查询持续时间。另一个观察结果是、在Hive中、德尔米奥能够并行发送大量GET请求、每秒2000到2、300个请求、而每秒50到100个请求。Hive和Hadoop S3A模拟标准文件系统会导致S3对象存储运行减速。</block>
  <block id="5fd92565468cb3e9de156c317d9d5f07" category="paragraph">要将Hadoop (无论是在HDFS还是S3对象存储上)与Hive或Spark结合使用、需要具备有关Hadoop和Hive或Spark以及每个服务中的设置如何交互的广泛知识—它们共同具有1000多个设置。这些设置通常是相互关联的、不能单独更改。要找到要使用的设置和值的最佳组合、需要花费大量时间和精力。</block>
  <block id="8a96077dd21be324029bd1c265c53313" category="paragraph">dremio是一种数据湖引擎、它使用端到端Apache Arrow(阿帕奇箭头)来显著提高查询性能。Apache Arrow"提供标准化的列式内存格式、可实现高效的数据共享和快速分析。ARrow采用不受语言限制的方法、旨在消除数据序列化和反序列化的需求、从而提高复杂数据流程和系统之间的性能和互操作性。</block>
  <block id="dec1fbcbe442f11c3d728feb8041cb00" category="paragraph">在很大程度上、Mirio的性能取决于其集群的计算能力。虽然desmio会使用Hadoop的S3A连接器建立S3对象存储连接、但不需要使用Hadoop、并且desmio不会使用Hadoop的大多数FS.S3A设置。这样、无需花费时间学习和测试各种Hadoop S3A设置、即可轻松调整德米奥的性能。</block>
  <block id="71860c77c6745379b0d44304d66b6a13" category="inline-link">页面。</block>
  <block id="5db9c9da095f8d74e0628dbbdfdfb825" category="paragraph">根据此基准测试结果、我们可以得出结论、针对基于S3的工作负载进行优化的大数据分析系统是一个主要性能因素。在使用S3存储时、由于使用的是Hive、因此、使用此解决方案可以优化查询执行、高效利用元数据并提供对S3数据的无缝访问、从而获得比Hive更高的性能。请参见此部分<block ref="e4ec3c3ef03861ef67845dfb086c7b17" category="inline-link-rx"></block> 使用StorageGRID配置d不良S3数据源。</block>
  <block id="c0c37f88f031a9b491d9a8bbea81dda7" category="paragraph">请访问以下链接、详细了解StorageGRID和德莱米奥如何协同工作来提供现代化且高效的数据湖基础架构、以及NetApp如何从Hive + HDFS迁移到德莱米奥+ StorageGRID来显著提高大数据分析效率。</block>
  <block id="79304bd05c48f486a8924e2c45f39311" category="inline-link">借助NetApp StorageGRID提升大数据的性能</block>
  <block id="9f6a1ff945eb33fcb8e19e5c7f4d3562" category="list-text"><block ref="9f6a1ff945eb33fcb8e19e5c7f4d3562" category="inline-link-rx"></block></block>
  <block id="5683e5844e7df088ba30c5038415b393" category="inline-link">借助StorageGRID和d处 米奥打造现代化、功能强大且高效的数据湖基础架构</block>
  <block id="90db912c71e3eeae0631168476c49b1d" category="list-text"><block ref="90db912c71e3eeae0631168476c49b1d" category="inline-link-rx"></block></block>
  <block id="1f3f85a45cc94830ad50d8dcc85d553a" category="inline-link">NetApp如何利用产品分析重新定义客户体验</block>
  <block id="7014c893b79b05f09938975b394e0ca5" category="list-text"><block ref="7014c893b79b05f09938975b394e0ca5" category="inline-link-rx"></block></block>
  <block id="06b48b444551989a8bbf76e3cb86a3d2" category="sidebar">使用StorageGRID配置GitLab</block>
  <block id="00f36bd2b4cd1d9e59ff895b5e131be2" category="sidebar">技术报告</block>
  <block id="0ad1cadfe97c5910e1b3ce75c8b0ff1f" category="sidebar">NetApp StorageGRID和大数据分析</block>
  <block id="6407baffaf35e5f51c2e06e83659fcae" category="sidebar">Hadoop S3A调整最佳实践</block>
  <block id="34d8c979f20e6e946fc25898c9b703b0" category="sidebar">Hadoop S3A调整</block>
  <block id="23e421cbf9f56a23426fd9d29746a636" category="summary">本指南介绍了在多站点网格中进行StorageGRID站点重新定位的准备和操作步骤。</block>
  <block id="8295ab4dfd6c34f8b3da70a8bfaaada3" category="doc">网格站点重新定位和站点范围网络更改操作步骤</block>
  <block id="a7b0b12fd572901946be0ed19cb6a438" category="paragraph">本指南介绍了在多站点网格中进行StorageGRID站点重新定位的准备和操作步骤。您应全面了解此操作步骤、并提前做好规划、以确保流程顺畅、最大限度地减少对客户的中断。</block>
  <block id="731561f650e3a36691bae029b4547c66" category="inline-link-macro">更改网格中所有节点的 IP 地址</block>
  <block id="e16a17e0f04937786448505101cf5703" category="paragraph">如果需要更改整个网格的网格网络、请参见
<block ref="25fe4ea07c9ed2c1ea3e524430970ba9" category="inline-link-macro-rx"></block>。</block>
  <block id="d62541926508b7fc98152bdd26f6b28c" category="section-title">站点重新定位前的注意事项</block>
  <block id="adb2a3f1ce6044cca831a1c3e1fcc38c" category="inline-link-macro">将存储节点恢复到关闭状态超过 15 天</block>
  <block id="79286dd19701572b9607fd1b47f14c5f" category="list-text">应在15天内完成站点移动并使所有节点联机、以避免重建cassandrebuild数据库。
<block ref="fb2aa662be1b0eb04ce42e59fa10d995" category="inline-link-macro-rx"></block></block>
  <block id="d81093eaf5709c0a3ae4db45ea962851" category="list-text">如果活动策略中的任何ILM规则使用严格的写入行为、如果客户希望在站点重新定位期间继续将对象放入网格、请考虑将其更改为平衡或双重提交。</block>
  <block id="5fcd60bee26dbdd38058786d89d30945" category="list-text">对于包含60个或更多驱动器的存储设备、切勿移动安装了磁盘驱动器的磁盘架。  在打包/移动之前、为每个磁盘驱动器贴上标签并将其从存储机箱中取出。</block>
  <block id="3bf27243eed945ae028b0d83a672aafd" category="list-text">更改StorageGRID设备网格网络VLAN可以通过管理网络或客户端网络远程执行。  或者计划在重新定位之前或之后到现场执行更改。</block>
  <block id="fc1ade2120cd035ae884b4c776a06e08" category="list-text">检查客户应用程序是否正在使用HEAD或在放置前获取不存在的对象。如果是、请将存储分段一致性更改为强站点、以避免出现HTTP 500错误。  如果不确定，请查看S3概述Grafana图表*网格管理器&gt;支持&gt;指标*，将鼠标悬停在"已完成请求总数"图表上。  如果404 GET对象或404 HEAD对象的计数非常高、则一个或多个应用程序可能正在使用HEAD或GET不存在对象。计数会累计、将鼠标悬停在不同的时间线上可查看差异。</block>
  <block id="61bce3e94387d562e70e4344c21875a9" category="inline-image-macro">S3概述Grafana图表示例</block>
  <block id="c8d25296b6242f878bcc65b3463a9213" category="paragraph"><block ref="c8d25296b6242f878bcc65b3463a9213" category="inline-image-macro-rx" type="image"></block></block>
  <block id="91ecbe84c3a3b51ceb6c3c1c46fe828e" category="section-title">操作步骤以在站点重新定位之前更改网格IP地址</block>
  <block id="7ce3d8dcf98150ca295b4e8b4a175d28" category="inline-link-macro">将子网添加到网格网络子网列表</block>
  <block id="ef79c64bf374a8f7d8f11ddac8bac6ea" category="list-text">如果新位置要使用新的网格网络子网、
<block ref="a48adf12485e7e1fabf51f229ceb57fd" category="inline-link-macro-rx"></block></block>
  <block id="a27c73113b9f8b1c8936231a5c6b72db" category="list-text">登录到主管理节点、使用change-ip进行网格IP更改、必须*暂存*更改、然后才能关闭节点进行重新定位。</block>
  <block id="e8ebed2710314532bd7421c291775f7a" category="list-text">选择2、然后选择1以更改网格IP</block>
  <block id="f246621acb182eca202eb998d35a0a71" category="paragraph"><block ref="f246621acb182eca202eb998d35a0a71" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0fc35f100f57d71f3d04d75f8e34db7a" category="list-text">选择5以显示更改</block>
  <block id="51db02a440736bec001c7d690821ec49" category="paragraph"><block ref="51db02a440736bec001c7d690821ec49" category="inline-image-macro-rx" type="image"></block></block>
  <block id="0db10ef124f48bf74646e51d511e42e7" category="list-text">选择10以验证并应用更改。</block>
  <block id="ecf8b3b84403afdd8f30ff4ca92df4d0" category="paragraph"><block ref="ecf8b3b84403afdd8f30ff4ca92df4d0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="b535a2204d1cc298ac5c3b36cc8a9249" category="list-text">必须在此步骤中选择*阶段*。</block>
  <block id="a8c78f88b73dcaf8b7082c7d8bab4356" category="paragraph"><block ref="a8c78f88b73dcaf8b7082c7d8bab4356" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23e28a352f23f6051ecbe97b0516b42f" category="list-text">如果上述更改中包括主管理节点，请输入*'A'手动重新启动主管理节点*</block>
  <block id="6cfd9d702fc475a31c16db4299ee31a0" category="paragraph"><block ref="6cfd9d702fc475a31c16db4299ee31a0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="355ec7ab5ee5e52899a8a48528d82b93" category="list-text">按ENTER键返回上一菜单并退出change-ip界面。</block>
  <block id="34efad53185ba8366fcb774fe4502175" category="paragraph"><block ref="34efad53185ba8366fcb774fe4502175" category="inline-image-macro-rx" type="image"></block></block>
  <block id="6a713acf175fd861bbb563ab540a06fe" category="list-text">从Grid Manager中下载新的恢复软件包。*网格管理器*&gt;*维护*&gt;*恢复包*</block>
  <block id="96557217b00ac75f863bec84c65347bf" category="list-text">如果StorageGRID设备需要更改VLAN、请参见一节 <block ref="f1c1d143229526a165bf49ac775d4ecd" category="inline-xref-macro-rx"></block>。</block>
  <block id="26afb12dd81518887c60c85ae47dab08" category="list-text">关闭站点上的所有节点和/或设备、根据需要标记/移除磁盘驱动器、然后卸载、打包和移动。</block>
  <block id="850fa0cd526764089644bd18997fcf0b" category="list-text">如果您计划更改管理网络IP和/或客户端VLAN和IP地址、则可以在重新定位后执行更改。</block>
  <block id="28b10382e67e37853ae45379b731cfaf" category="section-title">设备VLAN更改</block>
  <block id="a65d2c0e652207280c57973442478f26" category="paragraph">以下操作步骤假定您可以远程访问StorageGRID设备的管理或客户端网络以远程执行更改。</block>
  <block id="840a6c754184c6fbce872458dcf35141" category="inline-link-macro">将设备置于维护模式</block>
  <block id="5b8e4de8e50ebe10173b2539d1612010" category="list-text">在关闭设备之前，
<block ref="1d36a7361466de3adde00ce864c41474" category="inline-link-macro-rx"></block>。</block>
  <block id="24377316ae141b63c8170119bbfe4239" category="list-text">使用浏览器访问StorageGRID设备安装程序图形用户界面<block ref="41c0f2506f64eaa17788753cf29de6aa" category="inline-link-rx"></block>。  设备启动至维护模式后、无法使用Grid IP作为新的Grid IP。</block>
  <block id="fe21d31242c56f4eee91182bd1268a5a" category="list-text">更改网格网络的VLAN。  如果您正在通过客户端网络访问设备、则此时无法更改客户端VLAN、可以在移动后进行更改。</block>
  <block id="293c5807e9e9ab4b268fd617e8e5a56d" category="list-text">通过SSH连接到设备并使用"shutdoown -h now "关闭节点</block>
  <block id="1c33a8d84128bb59ae10a50b662e3a98" category="list-text">在新站点上准备好设备后、使用访问StorageGRID设备安装程序图形用户界面<block ref="fba5b5bfbff166288edb187e140418b2" category="inline-link-rx"></block>。  在GUI中使用Ping/nmap工具确认存储处于最佳状态、并确认与其他网格节点的网络连接。</block>
  <block id="786f3a0a71ff6ad9513f86143e55c1ce" category="list-text">如果计划更改客户端网络IP、则可以在此阶段更改客户端VLAN。  在稍后使用change-ip工具更新客户端网络IP之前、客户端网络尚未准备就绪。</block>
  <block id="fff8d22924e491405ba3026b24555fa6" category="list-text">退出维护模式：在 StorageGRID 设备安装程序中，选择 * 高级 * &gt; * 重新启动控制器 * ，然后选择 * 重新启动至 StorageGRID * 。</block>
  <block id="6668d4dfafe68f86bfe1db4386e9ce7b" category="list-text">在所有节点均已启动且网格未显示任何连接问题描述后、根据需要使用change-ip更新设备管理网络和客户端网络。</block>
  <block id="bae75f6502d7126b5a2837bf5628cab3" category="sidebar">如何重新定位站点和更改网络</block>
  <block id="d0cf9344ad2e87b19d7ddab6a3a8a65c" category="list-text">2024年2月16日：<block ref="b378392cb8f9d3c27df36a7aee10e61c" category="inline-link-rx"></block></block>
  <block id="b41a18341b59a0683c39812165cc0c0b" category="list-text">2024年2月16日：<block ref="70310190f4683d95ee6551bded030474" category="inline-link-rx"></block></block>
  <block id="d4594ce3b33a972e211fe9682ce3d309" category="list-text">2024年2月2日： <block ref="00c18eee7b83b56a4fc536edaabb5a21" category="inline-link-rx"></block></block>
  <block id="4a9aae048c463acb4451f4593f34edc7" category="list-text">2023年12月12日：<block ref="56387d425a7d1ca386f6000ce26e6a91" category="inline-link-rx"></block></block>
  <block id="00cf44fc2391bf394fabb4544209c638" category="list-text">2023年11月7日：<block ref="4558e5f7bc147029e407b74c0a6768e6" category="inline-link-rx"></block></block>
  <block id="b6b4eb17c420a5edadebf0afe24e7acb" category="list-text">2023年10月17日：<block ref="64e3b33ccfb012d90bff9bcf09d2035a" category="inline-link-rx"></block></block>
  <block id="88bf16cb98ec793a1004c95baddf055c" category="list-text">2023年9月1日：<block ref="71f54938bd1ce25b1fc86aa20da828f4" category="inline-link-rx"></block></block>
  <block id="5e32b061b51843f44671f026cc19eb5b" category="list-text">2023年8月30日：<block ref="90e42dccda167e27664cb4046795d9d2" category="inline-link-rx"></block></block>
  <block id="514ae57ea8dfeb703037a595cd9ab967" category="list-text">2023年5月16日：<block ref="822011c4a35ab965678b4e99560374f9" category="inline-link-rx"></block></block>
  <block id="4c1bd792b536446999d1ff0b4812b39a" category="list-text">2023年5月16日：<block ref="55400ccf8fd45f41eb658085301654a8" category="inline-link-rx"></block></block>
  <block id="e2aca017abaed5b68760a84be22625d0" category="list-text">2023年3月30日：<block ref="3a37c13e60469949c226e6fe44730d5d" category="inline-link-rx"></block></block>
  <block id="80b92583825de655262f5ec03db36d8d" category="list-text">2023年3月30日：<block ref="b439a8f44229e6c1e7b2461211f6849b" category="inline-link-rx"></block></block>
  <block id="fb9c460add81700ce3ddf20b5b36105d" category="list-text">2023年3月14日：<block ref="3c7ed37db994ec363730d455072b8b2b" category="inline-link-rx"></block></block>
  <block id="e725a1c619e4b377a5580a3fd0e904ee" category="list-text">2023年2月14日：<block ref="276d9658a5f8a049f2dcc595745c0879" category="inline-link-rx"></block></block>
  <block id="cb1e1878ece3c2a899fd7db63967b8a8" category="list-text">2023年1月18日：<block ref="6ea6516d4586962fa5f8e8460c33ccd0" category="inline-link-rx"></block></block>
  <block id="75639a2b61decb387fb6bbec29908248" category="list-text">2023年1月16日：<block ref="68d21b96499b1933cc9fc03f94f1e388" category="inline-link-rx"></block></block>
  <block id="cdea5a154b0b0ab86d0d6304a21bda3f" category="list-text">2022年12月6日：<block ref="e235608a45034e1deea87e6e77daddf3" category="inline-link-rx"></block></block>
  <block id="b033dccd559a42657b2fbb03dd21c349" category="list-text">2022年11月23日：<block ref="67d6d3a21cc9af1520f991806f578b6b" category="inline-link-rx"></block></block>
  <block id="26dadc41f3793afcf27dabfc8af82fec" category="list-text">2022年11月7日：<block ref="c8168f81ebd9cd26583947065ec9bf4e" category="inline-link-rx"></block></block>
  <block id="d4100bee1228b39623a887e024f221dd" category="list-text">2022年10月5日：<block ref="7a820536864c4b8ba1158a633db675d7" category="inline-link-rx"></block></block>
  <block id="b8c60e65b22d62c34b439943fbbdf163" category="list-text">2022年10月5日：<block ref="743b55649bf0de5fef17881c2182c74e" category="inline-link-rx"></block></block>
  <block id="835de7846030219d07c670951e6ffb39" category="list-text">2022年9月26日：<block ref="bac8af8866fb18858bb2bc38accfee93" category="inline-link-rx"></block></block>
  <block id="8ada5e40d5c0fc70316a0e89d441d1a1" category="list-text">2022年9月19日：<block ref="d3b1520ae76b2d8916030b44fa119b18" category="inline-link-rx"></block></block>
  <block id="44e29c80530d3eb777674bc8f9d75680" category="list-text">2022年9月1日：<block ref="6fba2287f3b879f9355d55f6093dd086" category="inline-link-rx"></block></block>
  <block id="09022107d504f4c74cd3455382e4a012" category="list-text">2022年8月23日：<block ref="e69bd0d41d124ab466e32e26b75521a0" category="inline-link-rx"></block></block>
  <block id="09b187fdd11bb217e848dcd14054a8bc" category="list-text">2022年8月17日：<block ref="2cb03523d29d45df344e7e35aeae9b09" category="inline-link-rx"></block></block>
  <block id="e2d625e4a07e6ffa9248d3c69031c018" category="list-text">2022年8月16日：<block ref="b2f8710f8f504eba14016ef400ef8a20" category="inline-link-rx"></block></block>
  <block id="b0ddc685f341b24735e60cd237fed6b6" category="list-text">2022年8月5日：<block ref="262aaa550c02638a3973245ae3d6d03e" category="inline-link-rx"></block></block>
  <block id="a84591557fb46548646e42cb2a3cb6a1" category="list-text">2022年7月26日：<block ref="dcc8150a969e49a02dd3cd5f53c489a0" category="inline-link-rx"></block></block>
  <block id="421ad547c6fb8cdc11d0cc80a8ac2a3e" category="list-text">2022年6月9日：<block ref="bc61cc71bae06945f8e3338c0faa1d28" category="inline-link-rx"></block></block>
  <block id="80482345acd37742916c858b1bac3347" category="list-text">2022年5月26日：<block ref="919c9f44a16e685bcbda321efc4479b1" category="inline-link-rx"></block></block>
  <block id="11bd19e0a7faa7e5cb29e2de6e742e74" category="list-text">2022年5月24日：<block ref="efe27e9a7520722932d06c2a314e517b" category="inline-link-rx"></block></block>
  <block id="d915b8cda332d7bea31598a0cc058498" category="list-text">2022年5月10日：<block ref="debc4c6191d7e706232e96c2789d3930" category="inline-link-rx"></block></block>
  <block id="b595975ee2f837da3fb64fe3e27a04a5" category="paragraph"><block ref="b595975ee2f837da3fb64fe3e27a04a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="620a43fd755527066fd648aba6f7db92" category="paragraph"><block ref="620a43fd755527066fd648aba6f7db92" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ba62ab536da4018921d932eab137754d" category="paragraph"><block ref="ba62ab536da4018921d932eab137754d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="8ba2b9229934ee6fc64c293ea55c00cf" category="paragraph"><block ref="8ba2b9229934ee6fc64c293ea55c00cf" category="inline-image-macro-rx" type="image"></block></block>
  <block id="51416623000162278c6405b1b5cd833d" category="paragraph"><block ref="51416623000162278c6405b1b5cd833d" category="inline-image-macro-rx" type="image"></block></block>
  <block id="2a60f08787dc9ecba98a9ffc064b7ed8" category="paragraph"><block ref="2a60f08787dc9ecba98a9ffc064b7ed8" category="inline-image-macro-rx" type="image"></block></block>
  <block id="5a184c0363bb58450e6d7433581fd471" category="summary">本报告介绍解决方案Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commv NetApp</block>
  <block id="354a23ac01ef93911cb9256f86e06159" category="doc">TR-4871 - Commvault"完整备份和恢复以及NetApp StorageGRID</block>
  <block id="cb2418c01859c7704da751aa5a7d2421" category="section-title">解决方案概述</block>
  <block id="80a3f83141a9faa5b2c7cd8fe9d282e0" category="paragraph">Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Recovery for NetApp软件与NetApp NetApp StorageGRID云存储软件相结合、共同创建了一个联合数据保护解决方案许多企业希望将存储迁移到云、扩展系统并自动执行长期保留数据的策略。Commvault"完整备份和恢复"和NetApp StorageGRID提供独特且易于使用的解决方案、这些解决方案可以协同工作、帮助您满足全球数据快速增长和法规不断增长的需求。基于云的对象存储因其弹性、扩展能力以及运营和成本效益而闻名、这使其成为备份目标的自然选择。Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commvault/Commv NetApp解决方案全球所有类型的客户都采用了Commvault完 整备份和恢复以及StorageGRID组合解决方案。</block>
  <block id="03b34745d3c972ba9412e4898f60977d" category="paragraph">在云存储上实施CommvaultComplete Backup and Recovery软件时、您有两种备份选项：</block>
  <block id="9eb0111fcb9b869313a8890a31fbe9aa" category="list-text">备份到主磁盘目标、同时将辅助副本备份到云存储。</block>
  <block id="f2236ba3bffef9cf2f2a7237c4487c29" category="list-text">将备份到云存储作为主要目标。</block>
  <block id="80457ca0c9c707a381ea0dbbf13a97f8" category="paragraph">过去、人们认为云或对象存储的性能太低、无法用于主备份。使用主磁盘目标可以加快备份和还原过程、并将辅助副本作为冷备份保留在云上。StorageGRID代表下一代对象存储。StorageGRID的高性能、海量吞吐量以及性能和灵活性远超其他对象存储供应商。</block>
  <block id="3764fc2dfa1c37293e979fb84f4d57e2" category="paragraph">表1列出了StorageGRID中每个备份选项的优势。</block>
  <block id="b8487d84bdeead48dbf45470a4e20888" category="section-title">表1)主备份到磁盘加上一个辅助副本、而主备份到StorageGRID。</block>
  <block id="0677b3ba1c3af4912992b290e34bede8" category="cell">主备份到磁盘和辅助副本到StorageGRID</block>
  <block id="f0545f8a5027b3947229082e2363e36e" category="cell">主备份到StorageGRID</block>
  <block id="9446a98ad14416153cc4d45ab8b531bf" category="paragraph">性能</block>
  <block id="bf1e57e2734e41f446afd52e7a01511f" category="paragraph">使用实时挂载或实时恢复时恢复速度最快：最适合第0层/第1层工作负载。</block>
  <block id="fc436ebe83f8a987f689862b5d1e9416" category="paragraph">不能用于实时挂载或实时恢复操作。非常适合流式恢复操作和长期保留。</block>
  <block id="46d93ce059017fe679dc02b4bfab8803" category="paragraph">部署架构</block>
  <block id="3efb73a8f0efa8cd24dac18e9fdcb90d" category="paragraph">使用全闪存或旋转磁盘作为第一个备份登录层。StorageGRID用作二级层。</block>
  <block id="6a8ffa7403e393a890a078b05f73a63b" category="paragraph">使用StorageGRID作为全面的备份目标、简化部署。</block>
  <block id="95493dca7eed37cfb9bfd6cc90ef1959" category="paragraph">高级功能(实时还原)</block>
  <block id="eaa4dc5078017a5c5bebf383ab6f5124" category="paragraph">supported</block>
  <block id="aa7f77e663b832d5b0e544c5511e680c" category="paragraph">不支持</block>
  <block id="bf8dd94f74c5878ba969abeeef0286d1" category="section-title">目标受众</block>
  <block id="749f48d6360a1ae4fb9b6967d682f7ab" category="paragraph">本文档面向使用StorageGRID备份和恢复解决方案的数据管理员和架构师。</block>
  <block id="8f4c7939e8a42e023939df947aba54f6" category="section-title">解决方案技术</block>
  <block id="4e50e1ccf2606dc28761309b196f635e" category="paragraph">经过测试的解决方案将NetApp解决方案相结合、打造出功能强大的联合解决方案。</block>
  <block id="8de8885619770caac462899bd9ad1a3c" category="paragraph">Commvault"完整备份和恢复"软件是一款企业级集成数据和信息管理解决方案、在单一平台上从头构建、并具有统一的代码库。它的所有功能都共享后端技术、从而在保护、管理和访问数据方面提供完全集成的方法所带来的无与伦比的优势和优势。该软件包含用于保护、归档、分析、复制和搜索数据的模块。这些模块共享一组通用的后端服务和高级功能、这些服务和功能可以彼此无缝交互。解决方案可解决企业中数据管理的所有方面、同时提供无限可扩展性以及前所未有的数据和信息控制。</block>
  <block id="d578ff088a7606a2f2f8b20f068b5b62" category="paragraph">CommVault软件平台的主要功能包括：</block>
  <block id="a9f9086df1d2d57873ce7ad72a8f3503" category="list-text">完整的数据保护解决方案、支持虚拟和物理服务器、NAS系统、基于云的基础架构和移动设备上的所有主要操作系统、应用程序和数据库。</block>
  <block id="c5eaed381b053e4b3d85d9ab1fb6fa5b" category="list-text">通过单一控制台简化管理：您可以查看、管理和访问整个企业的所有功能以及所有数据和信息。</block>
  <block id="434ac5052bf47ffbe2a46a08caeefbe0" category="list-text">多种保护方法、包括用于电子发现的数据备份和归档、快照管理、数据复制和内容索引。</block>
  <block id="7317d6c898578da433c127897e9abeac" category="list-text">对磁盘和云存储使用重复数据删除、实现高效存储管理。</block>
  <block id="40b8f42feb3b273a69061871959c334b" category="list-text">与NetApp存储阵列(例如AFF、FAS、NetApp HCI和E系列阵列)以及NetApp SolidFire^®^横向扩展存储系统集成。此外，还可以与NetApp Cloud Volumes ONTAP软件集成，在NetApp存储产品组合中自动创建索引化的应用程序感知型NetApp Snapshot™副本。</block>
  <block id="bac96a2448236465a33577db5bbbfafb" category="list-text">全面的虚拟基础架构管理、可支持领先的内部虚拟虚拟机管理程序和公共云超规模平台。</block>
  <block id="79b01f0de034ee56053c5a83bbbbc371" category="list-text">高级安全功能、可限制对关键数据的访问、提供精细管理功能、并为Active Directory用户提供单点登录访问。</block>
  <block id="7631df1a16e7c86a241133ce56a5626e" category="list-text">基于策略的数据管理、支持您根据业务需求(而不是物理位置)管理数据。</block>
  <block id="dbd89d5407a94aa887d7f9793148af24" category="list-text">提供最先进的最终用户体验、让您的用户能够保护、查找和恢复自己的数据。</block>
  <block id="c71c3c5075c3ae71dfa4cd9ad0c8f690" category="list-text">API驱动的自动化、支持您使用第三方工具(如vReise Automation或Service Now)来管理数据保护和恢复操作。</block>
  <block id="56cc4502e343e76ad448ffe3a05fc18c" category="paragraph">有关支持的工作负载的详细信息、请访问<block ref="6c465f42cde4c9569daed31dc24f517e" category="inline-link-rx"></block>。</block>
  <block id="585473463b3cb51e50ec6023b5b51685" category="paragraph">NetApp StorageGRID作为Commvault云层 是一种企业级混合云对象存储解决方案。您可以将其部署在多个站点上、无论是专用设备还是软件定义的部署。通过StorageGRID、您可以建立数据管理策略、以确定如何存储和保护数据。StorageGRID会收集您制定和实施策略所需的信息。它分析了广泛的特性和需求、包括性能、持久性、可用性、地理位置、 寿命和成本。随着数据在不同位置之间移动以及数据老化、数据将得到全面维护和保护。</block>
  <block id="f99347a4e5e36d0e5ba4bffb0d1598ab" category="paragraph">StorageGRID智能策略引擎可帮助您选择以下选项之一：</block>
  <block id="ed1c9e59475f7c0dfda1df3a7da27812" category="list-text">使用纠删编码跨多个站点备份数据、以提高故障恢复能力。</block>
  <block id="d470af9a0291f968f65b28b830fc86cd" category="list-text">将对象复制到远程站点、以最大程度地降低WAN延迟和成本。</block>
  <block id="7bd9a8aa8ea326b44f2bcde2f3609ff5" category="paragraph">当StorageGRID存储对象时、无论该对象位于何处或存在多少副本、您都可以将其作为一个对象进行访问。这种行为对于灾难恢复至关重要、因为借助这种行为、即使数据的一个备份副本损坏、StorageGRID也能够还原数据。</block>
  <block id="118e6fb1b88f8c0f0cfd7dee3bf51a37" category="paragraph">将备份数据保留在主存储中的成本可能很高。使用NetApp StorageGRID时、您可以通过将非活动备份数据迁移到StorageGRID来释放主存储上的空间、同时还可以从StorageGRID的众多功能中受益。备份数据的价值会随着时间的推移而变化、存储成本也会随之变化。StorageGRID可以最大限度地降低主存储的成本、同时提高数据的持久性。</block>
  <block id="b82ecf69498cda86864f62d82c7ccb6b" category="section-title">解决方案设置</block>
  <block id="a3ad938334ebe31fa6bd5526fdde0c2d" category="paragraph">在实验室设置中、StorageGRID环境包含四个NetApp StorageGRID SG5712设备、一个虚拟主管理节点和一个虚拟网关节点。SG5712设备是入门级选项—一种基线配置。选择NetApp StorageGRID SG5760或SG6060等性能更高的设备选项可以显著提高性能。请咨询NetApp StorageGRID 解决方案 架构师以获得规模估算帮助。</block>
  <block id="2502d49022714233caf9bb360eed1259" category="paragraph">对于其数据保护策略、StorageGRID使用集成生命周期管理(ILM)策略来管理和保护数据。在策略中自上而下评估ILM规则。我们实施了表2中所示的ILM策略。</block>
  <block id="03b71896a803d1674387b9ace5509c97" category="section-title">表2) StorageGRID ILM策略。</block>
  <block id="9bae64ff51701a09557836797ee3739f" category="cell">ILM规则</block>
  <block id="619dd4db8171a8f1bf978f44c9cf10c4" category="cell">限定符</block>
  <block id="80cb0c66c0080d1e4c291f66705ba62d" category="cell">载入行为</block>
  <block id="8143290d673d927f4a362b2726e52d06" category="paragraph">纠删编码2+1</block>
  <block id="61fed6f594f54558c7a9bc0ac4abb7e5" category="paragraph">超过200 KB的对象</block>
  <block id="c6589f5236c0c434d0c63dc5f9a856f2" category="paragraph">平衡</block>
  <block id="a98f005d5c19a50a6134d6a62274c1f8" category="paragraph">2副本</block>
  <block id="3e6defd685231cdd12065add41996c89" category="paragraph">所有对象</block>
  <block id="dcd8a20c909a5d0bbf6f852d688309cb" category="paragraph">双提交</block>
  <block id="f2382f08b2b3ae5b16fd3e6a7f6fe40c" category="paragraph">默认规则为ILM 2复制规则。在此测试中、对任何200 KB或更大的对象应用了纠删编码2+1规则。默认规则应用于小于200 KB的对象。以这种方式应用规则是StorageGRID的最佳实践。</block>
  <block id="9fd2a44a56a109ab7ff40317cdd4cc9b" category="inline-link">借助Commvault,实现NetApp横向扩展数据保护</block>
  <block id="f7d7cdf329bd5cf1893317ad3732d1f7" category="paragraph">有关此测试环境的技术详细信息、请阅读中的解决方案设计和最佳实践一节<block ref="03ce17f8b5e1206a493f3bd56ef5953d" category="inline-link-rx"></block> 技术报告。</block>
  <block id="92672a7a2b909945fbfa9f44f057c7a1" category="section-title">规模估算</block>
  <block id="de6340e74a7b4b37632d447d082a219e" category="paragraph">有关适用于您环境的特定规模估算、请咨询NetApp数据保护专家。NetApp数据保护专家可以使用CommvaultTotal Backup Storage Calculator工具来估计备份基础架构需求。该工具需要CommvaultPartner Portal访问权限。如果需要、请注册访问权限。</block>
  <block id="850723af1b528eaff214961e1477f7f2" category="section-title">CommvaultSizing Inputs.</block>
  <block id="e3b0761b4b3dd1b0a93403608c54ca50" category="paragraph">可以使用以下任务来执行发现以调整数据保护解决方案的大小：</block>
  <block id="3cf303266a00ea5459dd889344aed185" category="list-text">确定需要保护的系统或应用程序/数据库工作负载以及相应的前端容量(以TB为单位)。</block>
  <block id="a6fc6119f758a2807e997797f666329c" category="list-text">确定需要保护的虚拟机/文件工作负载和类似前端容量(TB)。</block>
  <block id="45b2ce852d6ed5f33b77406aac08556c" category="list-text">确定短期和长期保留要求。</block>
  <block id="62f64531410b8711dc0f7e3749b00000" category="list-text">确定已确定的数据集/工作负载的每日变更率百分比。</block>
  <block id="e20a5b161f3a78a8aa8b41995cb1056f" category="list-text">确定未来12、24和36个月的预计数据增长。</block>
  <block id="546f4bb0db4eb4c0474451ef4087425b" category="list-text">根据业务需求定义用于数据保护/恢复的RTO和RPO。</block>
  <block id="b9b087f8be7670b2ba95f7b2ee0e66c0" category="paragraph">获得此信息后、便可完成备份基础架构规模估算、从而细分所需的存储容量。</block>
  <block id="2d782d1c787a750e5ae7cdfbf33e0b65" category="section-title">StorageGRID大小指导</block>
  <block id="293d59d0c1b3635b7390405d92fee965" category="paragraph">在执行NetApp StorageGRID规模估算之前、请考虑工作负载的以下方面：</block>
  <block id="b3e1f4c67ee07a73dcdaff1cf34f2640" category="list-text">可用容量</block>
  <block id="dcd71c3bab40cab965c2424166b5b11d" category="list-text">WORm模式</block>
  <block id="af11a561a773e12e2fa9ba93ce506330" category="list-text">平均对象大小</block>
  <block id="fdfceedcfadaa8fc4e641a9271ff7595" category="list-text">性能要求</block>
  <block id="e1044b693615d4848c50aa5f02be9315" category="list-text">已应用ILM策略</block>
  <block id="c6e6b34f0e5e37e48be00e166f7bd2cb" category="paragraph">可用容量需要满足您已分层到StorageGRID的备份工作负载的大小以及保留计划。</block>
  <block id="3e5b0f346efbe49d36a724d923e318ba" category="paragraph">WORM模式是否启用？在Commvault"中启用WORM后、此操作将在StorageGRID上配置对象锁定。这将增加所需的对象存储容量。所需的容量因保留期限和每次备份的对象更改数而异。</block>
  <block id="74c32df19b25aa02e414011c18db023d" category="paragraph">平均对象大小是一个输入参数、用于帮助估算StorageGRID环境中的性能规模。Commvault"工作负载使用的平均对象大小取决于备份类型。</block>
  <block id="a0e738d4eef6a816ac737bf34e54a942" category="paragraph">表3按备份类型列出了平均对象大小、并介绍了还原过程从对象存储中读取的内容。</block>
  <block id="2333f85cd072d4d90857e142fd494184" category="section-title">表3) Commvault"工作负载对象大小和还原行为"。</block>
  <block id="a09aa546b6aa449c6baf91e8d0ebb636" category="cell">备份类型</block>
  <block id="f95891c0ab9af9cf4d2eb297027c954d" category="cell">平均对象大小</block>
  <block id="6dfea787ea9494eca4a1491e9a9cd7e7" category="cell">还原行为</block>
  <block id="4a5284900affdafea6abfa93ccd8875e" category="paragraph">在StorageGRID中创建辅助副本</block>
  <block id="56aefd6942690fe653a60ce8762c3fae" category="paragraph">32 MB</block>
  <block id="69a2ecbb677a732e4f381bca77d41617" category="paragraph">完全读取32 MB对象</block>
  <block id="754b17607005a22396d824adf9193697" category="paragraph">将备份定向到StorageGRID (已启用重复数据删除)</block>
  <block id="b097e0a29568c51c88fec3b457c732b6" category="paragraph">8MB</block>
  <block id="8ef6bf4afbc7dfa36d2999b2dde70607" category="paragraph">1 MB随机范围读取</block>
  <block id="243bf10c4e6c1609f52782d457f76156" category="paragraph">将备份定向到StorageGRID (已禁用重复数据删除)</block>
  <block id="abfb05e87809fdb217c3f9c8b7970ce2" category="paragraph">此外、了解完整备份和增量备份的性能要求有助于确定StorageGRID存储节点的规模估算。StorageGRID信息生命周期管理(ILM)策略数据保护方法可确定存储Commvaults备份所需的容量、并影响网格的规模估算。</block>
  <block id="464eb8c3015571353037cdb21da0f4d1" category="paragraph">StorageGRID ILM复制是StorageGRID用于存储对象数据的两种机制之一。当StorageGRID将对象分配给复制数据的ILM规则时、系统会为对象的数据创建精确副本、并将这些副本存储在存储节点上。</block>
  <block id="b6a556e693b6d0301d99a27a637d5a0e" category="paragraph">纠删编码是 StorageGRID 存储对象数据的第二种方法。当StorageGRID将对象分配给配置为创建经过删除编码的副本的ILM规则时、它会将对象数据分区为数据片段。然后、它会额外地对奇偶校验片段进行运算、并将每个片段存储在不同的存储节点上。访问某个对象时，系统会使用存储的片段重新组合该对象。如果数据片段或奇偶校验片段损坏或丢失、纠删编码算法可以使用剩余数据和奇偶校验片段的一部分重新创建该片段。</block>
  <block id="2cbd7f18ab3e999a21c4dba60191a95b" category="paragraph">这两种机制需要不同的存储量、如以下示例所示：</block>
  <block id="b162424b4a40f919bc77c8a4ada556a5" category="list-text">如果存储两个复制副本、则存储开销会增加一倍。</block>
  <block id="4dcb2b649002340390e73a82e0f53e74" category="list-text">如果您存储的是2+1经过删除的副本、则存储开销会增加1.5倍。</block>
  <block id="b3ccf50d91fb7c1b2a91a90b2fdcbc11" category="paragraph">对于测试的解决方案、我们使用了单个站点上的入门级StorageGRID部署：</block>
  <block id="edb52e1c5e94ec07b0da6c55e66a6dc5" category="list-text">管理节点：VMware虚拟机(VM)</block>
  <block id="512766f8f9ea73555dd725677342729b" category="list-text">负载平衡器：VMware VM</block>
  <block id="075742127b6818880333cba369626334" category="list-text">存储节点：4个SG5712、带有4 TB驱动器</block>
  <block id="48ce2b888edeb7c90c49b7acb217a0da" category="list-text">主管理节点和网关节点：具有最低生产工作负载要求的VMware VM</block>
  <block id="01b3d30d9a73f3002456c96c117546a7" category="paragraph">StorageGRID还支持第三方负载平衡器。</block>
  <block id="254b8ac10c6e4affc88ed5a3300b91ab" category="paragraph">StorageGRID通常部署在两个或更多站点中、并采用数据保护策略来复制数据、以防止发生节点和站点级故障。通过将数据备份到StorageGRID、您的数据将受到多个副本或通过纠删编码的保护、这些编码可通过一种算法可靠地分隔和重新组合数据。</block>
  <block id="adc69293e8fd256b2609664f1e11cb53" category="inline-link">Fusion</block>
  <block id="f0d97e78bf1c5ff4659d7f868170f3a4" category="paragraph">您可以使用规模估算工具<block ref="8ea841f9b1986a19de18878436c983c7" category="inline-link-rx"></block> 调整网格大小。</block>
  <block id="bc967dc2d57e6eff184a821bf7577a80" category="section-title">扩展</block>
  <block id="900c557ee6849406e1e6f451f65bdde1" category="paragraph">您可以通过向存储节点添加存储、向现有站点添加新网格节点或添加新数据中心站点来扩展NetApp StorageGRID系统。您可以在不中断当前系统运行的情况下执行扩展。
StorageGRID可以通过为存储节点或运行负载平衡器和管理节点的物理设备使用性能更高的节点来扩展性能、也可以通过简单地添加更多节点来扩展性能。</block>
  <block id="87c6a063dd59ec7afe1b7de60674167f" category="inline-link">《StorageGRID 11.8.</block>
  <block id="178a2b6eb168714f3392d86f31b81107" category="paragraph">有关扩展StorageGRID系统的详细信息、请参见<block ref="ad2f8b162bf757bc05f37ca0091f2d6d" category="inline-link-rx"></block>。</block>
  <block id="39e0647405a456dbe0f327581e422077" category="section-title">StorageGRID硬件规格</block>
  <block id="7ac8ba0d8d9d0dbf967afc44eebecee4" category="paragraph">表4介绍了此测试中使用的NetApp StorageGRID硬件。采用10Gbps网络连接的StorageGRID SG5712设备是入门级选项、代表了一种基线配置。也可以为SG5712配置25 Gbps网络连接。</block>
  <block id="380be67f84564c575abe95593c0c96c3" category="paragraph">选择NetApp StorageGRID SG5760、SG6060或全闪存SGF6112设备等性能更高的设备选项可以显著提升性能。请咨询NetApp StorageGRID 解决方案 架构师以获得规模估算帮助。</block>
  <block id="1c0a4a363a35650f52d2788c8c1e3340" category="section-title">表4) SG5712硬件规格。</block>
  <block id="3c02a379965ab0dfcd77b1c484450433" category="cell">硬件</block>
  <block id="694e8d1f2ee056f98ee488bdc4982d73" category="cell">数量</block>
  <block id="380dbc8d9d2c8a17f6ebb0b2c62d3e85" category="cell">Disk</block>
  <block id="1d9a663a8048fa4c70d3b7da3290365f" category="cell">可用容量</block>
  <block id="eec89088ee408b80387155272b113256" category="cell">网络</block>
  <block id="d2d801f305ba0e6fa6a9b891a48ab761" category="paragraph">StorageGRID SG5712设备</block>
  <block id="a87ff679a2f3e71d9181a67b7542122c" category="paragraph">4.</block>
  <block id="a5983f5b9038e27d7801178f702c8ca0" category="paragraph">48个4 TB (近线SAS HDD)</block>
  <block id="7f070e79f8fb5c07df2dcdedad1d7981" category="paragraph">136 TB</block>
  <block id="11e8c7c9ca2479f825be4a5b2207c2e4" category="paragraph">10 Gbps</block>
  <block id="cbf13ee4de3e188484a6f9e54ec774d4" category="section-title">Commvault"和StorageGRID软件要求</block>
  <block id="9f06e1bbda93a5691f767c9a6bd5d5cc" category="paragraph">表5和表6列出了在我们的测试中安装在VMware软件上的Commvaults和NetApp StorageGRID软件的软件要求。安装了四个MediaAgent数据传输管理器和一个CommServe服务器。在测试中、我们为VMware基础架构实施了10 Gbps网络连接。</block>
  <block id="24ab73c686b5112b49ce6f98750612b7" category="section-title">表5) CommVault软件的系统总要求。</block>
  <block id="2cb05e4bb7830be982f0922fed86b4cd" category="cell">组件</block>
  <block id="8a5227cc82d14862956938caffc1acf2" category="cell">数据存储库</block>
  <block id="6f6cb72d544962fa333e2e34ce64f719" category="cell">Size</block>
  <block id="96b0141273eabab320119c467cdcaf17" category="cell">总计</block>
  <block id="c7f6eda2b5882630770159be5e3c5a0d" category="cell">所需的总IOPS</block>
  <block id="63a1a7c310d221d52fa70fd4b2069f4f" category="paragraph">CommServe服务器</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="paragraph">1.</block>
  <block id="17bc10091293fdc562a6db69940ee924" category="paragraph">os</block>
  <block id="e38c9d3443457efbb3f9e8d08a8b5c5b" category="paragraph">500 GB</block>
  <block id="274b68192b056e268f128ff63bfcd4a4" category="paragraph">不适用</block>
  <block id="9778840a0100cb30c982876741b0b5a2" category="paragraph">SQL/</block>
  <block id="c5ae3175ae0f68be6c3428dbe833be99" category="paragraph">MediaAgent</block>
  <block id="c56996cb460ab9ee13fbfb489522cad5" category="paragraph">虚拟CPU (vCPU)</block>
  <block id="c74d97b01eae257e44aa9d5bade97baf" category="paragraph">16.</block>
  <block id="ea5d2f1c4608232e07d3aa3d998e5135" category="paragraph">64</block>
  <block id="e53619c1fe611a51eeeb8d148ba6e532" category="paragraph">RAM</block>
  <block id="902b52e9ee55baad95374c0815e0d188" category="paragraph">128 GB</block>
  <block id="10a7cdd970fe135cf4f7bb55c0e3b59f" category="paragraph">512</block>
  <block id="2dc6494faaf47acd40a479d5e8f22eeb" category="paragraph">2 TB</block>
  <block id="84e2027c504e2b4b983e4b5734ad7d5c" category="paragraph">索引缓存</block>
  <block id="42cc03da5dd9834d6beb08900e77d96e" category="paragraph">8 TB</block>
  <block id="4c5da6b5ca9d093be38b4da1035de5ca" category="paragraph">200多个</block>
  <block id="d02340dc3ba5e6755a60283779457ac6" category="paragraph">DDB</block>
  <block id="4b68c01a22855e38e3082b749de02ba5" category="paragraph">200-80000 K</block>
  <block id="fd5ab623109855762f689a3b63d50d9d" category="paragraph">在测试环境中、VMware上的NetApp E系列E2812存储阵列上部署了一个虚拟主管理节点和一个虚拟网关节点。每个节点都位于一台单独的服务器上、具有表6中所述的最低生产环境要求：</block>
  <block id="edfcb8c8756d94a5053287cc7c5bb985" category="section-title">表6) StorageGRID虚拟管理节点和网关节点的要求。</block>
  <block id="95363aa90e372ebfaf3970380516572f" category="cell">节点类型</block>
  <block id="5d56dbd20d9ee1ab8a722ff12e331953" category="cell">vCPU</block>
  <block id="8c4aa541ee911e8d80451ef8cc304806" category="cell">存储</block>
  <block id="f7aa6dfb52b6b0d539a8be4872a287f8" category="paragraph">网关节点</block>
  <block id="c9f0f895fb98ab9159f51fd0297e236d" category="paragraph">8.</block>
  <block id="bc7bf06ca2631ef1531ed5dc65a24f74" category="paragraph">24 GB</block>
  <block id="2be1f61edb7b7e4217e348e8d68c3bdb" category="paragraph">100 GB LUN、用于操作系统</block>
  <block id="4c80ce09ddde27d3fd5c0bb436bc85b9" category="paragraph">管理节点</block>
  <block id="c6ab7905f828c85832f97995c1de53c9" category="paragraph">200 GB LUN、用于管理节点表</block>
  <block id="69108e14aa48ab2bba84a59654aed432" category="paragraph">200 GB LUN、用于管理节点审核日志</block>
  <block id="55d6f03ef9d28326ab829ca5d2678109" category="section-title">使用Commvault完 整备份和恢复以及NetApp StorageGRID运行数据保护作业</block>
  <block id="624726d5ed2d940147c46600099b1b20" category="paragraph">要为NetApp StorageGRID配置适用于NetApp的Commvault完 整备份和恢复、请执行以下步骤、以便在Commvault软件 中将StorageGRID添加为云库。</block>
  <block id="98e8e1a08dff2be7e31ea4273d1252cf" category="section-title">使用NetApp StorageGRID配置Commvault</block>
  <block id="3f139c400a23226143fbb4c472b54b04" category="list-text">登录到CommvaultCommand Center。在左侧面板上、单击"存储"&gt;"云"&gt;"添加"以查看并响应"添加云"对话框：</block>
  <block id="b9693cedb91ba2290fa1e958a43307a7" category="inline-image-macro">添加云</block>
  <block id="d7b2bbcbec44a75a29e4d684f80fbed1" category="paragraph"><block ref="d7b2bbcbec44a75a29e4d684f80fbed1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="e7716d81d180918f49287e4cffec864b" category="list-text">对于类型、选择NetApp StorageGRID。</block>
  <block id="f2328e03c7cb647329406eeecccf4cee" category="list-text">对于MediaAgent、选择与云库关联的所有。</block>
  <block id="8880a4bf1f03731649f1c0440d513f95" category="list-text">对于服务器主机、输入StorageGRID端点的IP地址或主机名以及端口号。</block>
  <block id="6a0eaeb7d5862ce617029226cd1ddb73" category="inline-link">如何配置负载平衡器端点(端口)</block>
  <block id="a3636f86ff974c19fd6fff205c8e5614" category="paragraph">按照上的StorageGRID文档中的步骤进行操作<block ref="1100cc5690fec9e9d1b69376de24b8a1" category="inline-link-rx"></block>。确保您有一个HTTPS端口、其中包含自签名证书以及StorageGRID端点的IP地址或域名。</block>
  <block id="03797fee0986db2f87c5cac8fcdb1dde" category="list-text">如果要使用重复数据删除、请启用此选项并提供指向重复数据删除数据库位置的路径。</block>
  <block id="7557bd62e953fb4d48f07977151ea94f" category="list-text">单击保存。</block>
  <block id="43f16fcba150904a7bc15439308479cb" category="section-title">创建以NetApp StorageGRID为主要目标的备份计划</block>
  <block id="ce43cd7410027d345f9c6f5c79d39d2d" category="list-text">在左侧面板上、选择Manage &gt; Plans以查看并响应Create Server Backup Plan对话框。</block>
  <block id="8280fcbd09b67e4a2a2180030f18ee89" category="inline-image-macro">创建服务器备份计划</block>
  <block id="e6e155a2825afd1e66e915eba6056af0" category="paragraph"><block ref="e6e155a2825afd1e66e915eba6056af0" category="inline-image-macro-rx" type="image"></block></block>
  <block id="35cef3079f40303a520fe4fb98509a28" category="list-text">输入计划名称。</block>
  <block id="ed9638b797083e4574c1bda37d24d0fc" category="list-text">选择先前创建的StorageGRID简单存储服务(S3)存储备份目标。</block>
  <block id="cc10fccab84b1a6fe5a3b014f2ac16fe" category="list-text">输入所需的备份保留期限和恢复点目标(RPO)。</block>
  <block id="317c3634f6ad30cd0bc9e98a4725d400" category="section-title">启动备份作业以使用CommvaultSoftware和StorageGRID保护工作负载</block>
  <block id="ba57deab107afb6c3808fe3a667bb7b5" category="paragraph">要启动从CommvaultComplete Backup and Recovery到StorageGRID的备份作业、请执行以下步骤：</block>
  <block id="1e6c34e7c31e91ec0533fdb6b4825478" category="list-text">在CommVault Command Center上、导航到"Protect"&gt;"Virtualization (保护&gt;虚拟化)"。</block>
  <block id="33a281881beebd42edbba1170de6ebdb" category="list-text">添加VMware vCenter Server虚拟机管理程序。</block>
  <block id="0582da82b14c1d127296cc0e0c1e593f" category="list-text">单击刚刚添加的虚拟机管理程序。</block>
  <block id="12d1eaf919942bd27fafed65a4eaa44b" category="list-text">单击添加VM组以响应添加VM组对话框、以便您可以查看计划保护的vCenter环境。</block>
  <block id="4316988282aed94dacaa8b4b66bec00b" category="inline-image-macro">添加VM组</block>
  <block id="5db14a33d51cc3d07064c129a11e4dfb" category="paragraph"><block ref="5db14a33d51cc3d07064c129a11e4dfb" category="inline-image-macro-rx" type="image"></block></block>
  <block id="61febfa4c91db0399b8837e0c209881e" category="list-text">选择一个数据存储库、一个VM或一组VM、然后为其输入一个名称。</block>
  <block id="b55f90f1dad898510ca7b78db85ef1b4" category="list-text">选择您在上一任务中创建的备份计划。</block>
  <block id="58785b3df6de95af5db042098848d79c" category="list-text">单击保存以查看您创建的VM组。</block>
  <block id="2ea49c4e99265736f831cc64151e93cb" category="list-text">在虚拟机组窗口的右上角、选择备份：</block>
  <block id="1c964f034a0012b392a4cf6b87ac0fba" category="inline-image-macro">VM组</block>
  <block id="b8409b035475aa7ff8ff45771ca8c6f1" category="paragraph"><block ref="b8409b035475aa7ff8ff45771ca8c6f1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f5e3c2bce0112505e3bfead83355284d" category="list-text">选择完整作为备份级别、(可选)备份完成后请求电子邮件、然后单击确定启动备份作业：</block>
  <block id="eee4c34c5b08e040c0e736a8e298f721" category="inline-image-macro">备份级别</block>
  <block id="6cc8cde2c84a6c1a21e31318d689c48b" category="paragraph"><block ref="6cc8cde2c84a6c1a21e31318d689c48b" category="inline-image-macro-rx" type="image"></block></block>
  <block id="f180b371d83592db209e4e7f07bd7f96" category="list-text">导航到作业摘要页面以查看作业指标：</block>
  <block id="bc2966582cc91a73dfce86d847e8e569" category="inline-image-macro">作业摘要</block>
  <block id="ce8f9b25ff69c679a10481c883fed679" category="paragraph"><block ref="ce8f9b25ff69c679a10481c883fed679" category="inline-image-macro-rx" type="image"></block></block>
  <block id="23571a6157715a68dbc83017094ddb4f" category="section-title">基线性能测试</block>
  <block id="6e861ca3d49a3946d380c959a4a035f6" category="paragraph">表7显示了基线性能测试的结果。在辅助副本操作中、四个CommvaultMediaAgent将数据备份到NetApp AFF A300系统、并在NetApp StorageGRID上创建了一个辅助副本。有关测试设置环境的详细信息、请阅读中的解决方案设计和最佳实践一节<block ref="03ce17f8b5e1206a493f3bd56ef5953d" category="inline-link-rx"></block> 技术报告。</block>
  <block id="225de55f95e8814ef869602a34589cd7" category="paragraph">测试涉及100个VM和1000个VM、这两个测试都包含50/50的Windows和CentOS VM。</block>
  <block id="229f4b7ae2ae04662d95b14f93a7ebe0" category="section-title">表7)基线性能测试。</block>
  <block id="2a78ed76450c3cb42320882b3e055b31" category="cell">操作</block>
  <block id="7e1474aa3c4832c1061cf4839e5d5d40" category="cell">备份速度</block>
  <block id="d9cb8f643ee1e5634cee0a2f4dc3dcde" category="cell">恢复速度</block>
  <block id="770d588cad23e4bf00734e4271f614fd" category="paragraph">辅助复印</block>
  <block id="1bd5cb95562494b849b4e43073e86dd0" category="paragraph">2 TB/小时</block>
  <block id="6e18c63ab6e3f65e0cacdc25607a044b" category="paragraph">1.27 TB/小时</block>
  <block id="cd8362e2e8655ccb1cee59cfbe698457" category="paragraph">直接与对象连接和从对象连接(启用重复数据删除)</block>
  <block id="e8d76835d2ff06b926aad0a1a3abc063" category="paragraph">2.2 TB/小时</block>
  <block id="4cd450a475fe3ee9b59eb120652eeaa9" category="paragraph">1.22 TB/小时</block>
  <block id="6c24655e80561dbbf463d7c411594029" category="paragraph">为了测试过期性能、删除了250万个对象。如图2和图3所示、删除操作在3小时内完成、并释放了80 TB以上的空间。删除运行于上午10：30开始。</block>
  <block id="4c1a9a798859a7662d448a099c8f19c2" category="section-title">图1)在3小时内删除250万(80 TB)个对象。</block>
  <block id="05e3d90010c26e3ef8176b0d49eabdb3" category="inline-image-macro">对象</block>
  <block id="c09d8cd9b39a4736f34838dd7cf3f7a5" category="paragraph"><block ref="c09d8cd9b39a4736f34838dd7cf3f7a5" category="inline-image-macro-rx" type="image"></block></block>
  <block id="18967e6af4f60b163c3348f6c5e180f0" category="section-title">图2)在3小时内释放80 TB的存储。</block>
  <block id="6d2b9f3277e042907d537d8a6101be35" category="inline-image-macro">存储随时间变化</block>
  <block id="4fc5dae0e8a159f3d86289050bbd7311" category="paragraph"><block ref="4fc5dae0e8a159f3d86289050bbd7311" category="inline-image-macro-rx" type="image"></block></block>
  <block id="a0b40e1fd7ca1cc5d222d54ea1d246cc" category="section-title">存储分段一致性级别建议</block>
  <block id="8230e2a5dfbb7d3dc9d7837f464a94f4" category="paragraph">通过NetApp StorageGRID、最终用户可以为对简单存储服务(S3)分段中的对象执行的操作选择一致性级别。</block>
  <block id="eb668bdb2b4d4ac34c6ad7523c133230" category="paragraph">CommVault MediaAgent是CommVault环境中的数据迁移程序。大多数情况下，MediaAgent配置为在本地写入主StorageGRID站点。因此、建议在本地主站点中使用高一致性级别。在StorageGRID中创建的Commvault"分段上设置一致性级别时、请遵循以下准则。</block>
  <block id="3ceaa99fe3628c0d4ddb470789b9212d" category="list-text">Commvault11.0.0之前的版本- Service Pack 16.*在11.0.0之前的版本- Service Pack 16中，Commvault"会在还原和删减过程中对不存在的对象执行S3 head和GET操作。将存储分段一致性级别设置为强站点、以便为Commvaultvault"备份到StorageGRID实现最佳一致性级别。</block>
  <block id="9a76294cf4d43d5686590bb6c98a280b" category="list-text">Commvault11.0.0版- Service Pack 16及更高版本。*在11.0.0版- Service Pack 16及更高版本中、对不存在的对象执行S3机头和GET操作的数量将降至最低。将默认分段一致性级别设置为read-after-new-write、以确保StorageGRID环境中的高一致性级别。</block>
  <block id="3887d417240a72ab69f6d0301efd3b2b" category="section-title">从何处查找追加信息</block>
  <block id="b69ce771bb450c54c2a29e08595a1621" category="list-text">StorageGRID 1.18文档中心+
<block ref="47ea1c2d0f136bec8b3e66c2121bf70f" category="inline-link-rx"></block></block>
  <block id="a1b241b7e61d12e641e864fa7e3c7a8e" category="list-text">NetApp产品文档+
<block ref="fa4af55c3fdbce23e96d2cf73261fa5b" category="inline-link-rx"></block></block>
  <block id="748e9574a05efa0e0738de58c2ff670b" category="list-text">CommVault文档+
<block ref="27eb3a3d6ca60f8dbf05e2df1f7e4644" category="inline-link-rx"></block></block>
</blocks>